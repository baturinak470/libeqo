!function(){function a(){function a(a,b,c){function d(a){void 0!==c&&c(a)}function e(){void 0!==c&&c(null)}function f(){void 0!==c&&c(null)}var g=new XMLHttpRequest;g.open("GET",a),g.timeout=1e4,g.onload=d,g.onerror=e,g.ontimeout=f,g.setRequestHeader("Content-Type","application/json"),g.withCredentials=!1,g.send(b)}function b(){!0!==e&&(g=!0,k("","_s33 bfs_file_not_avl"),o("_s90 ERRORS/_s10 bfs_to",window.location.host),p())}var c,d=null,e=!1,g=!1;void 0!==A.env&&"dev"===A.env?"undefined"!=typeof _debugExtPlacement&&""!==_debugExtPlacement?(c=K+"mkt.forebase.ch/tagx/data/placements/bfs/"+_debugExtPlacement+".json",c+="?cb="+Math.round(999999*Math.random())):c=K+"localhost:3001/data/placements/settings/bfs/"+A.placementId+".json":c=K+"mkt.forebase.ch/tagx/data/placements/bfs/"+A.placementId+".json",window.setTimeout(b,12e3),d=+new Date,a(c,"",function(a){try{k("","_s32 bfs_file_avl");var b=JSON.parse(a.currentTarget.response)}catch(a){return k("","_s34 bfs_file_parse_err"),void o("_s90 ERRORS/_s11 bfs_parse",window.location.host)}e=!0,o("_s60 times/_s01 boot_file",n(+new Date-d)),!0===f(b,!0)?k("","_s36 bfs_file_data_ok"):k("","_s38 bfs_file_data_not_ok")})}function b(a){var b={ts:+new Date,text:a};G.push(b)}function c(a){function b(a){var b=1e6;if(a<1)return!0;var c=Math.round(Math.random()*b),d=Math.round(b/a),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return f>=e||f<c}var c={gen:{reduc:u,skip:null},err:{reduc:v,skip:null},ldrOpDomain:"0"};return"unspecified"!==a.spred&&(c.gen.reduc=parseInt(a.spred)),"unspecified"!==a.opdomId&&(c.ldrOpDomain=a.opdomId),void 0!==a.env&&"dev"===a.env&&(c.gen.reduc=1,c.err.reduc=1,c.ldrOpDomain="0"),c.gen.skip=b(c.gen.reduc),c.err.skip=b(c.err.reduc),!0===a.firstTag?(z._anVar_skipGen=c.gen.skip,z._anVar_skipErr=c.err.skip):(c.gen.skip=z._anVar_skipGen,c.err.skip=z._anVar_skipErr),c}function d(){var a,b,c="_forebase_data_";return void 0===document[c]?(document[c]={},document[c].partitions=[],a=!0,b=0):(a=!1,b=document[c].partitions.length),{firstTag:a,tagIdx:b,fb_data_obj:document[c]}}function e(a,b){function c(a){function b(){for(var a=document.getElementsByClassName("_forebase_multitag"),b=0;b<a.length;b++){var c=a[b];if("fbmt_idle"===c.getAttribute("id"))return c}return null}function c(a,b,c){if(!0!==a.hasAttribute(b))return c;var d=a.getAttribute(b);return""===d?c:null===d?c:"undefined"===d?c:d}function d(a){function b(a){if(a.indexOf("${ringIdx}")<0)return null;for(var b=a.replace("${ringIdx}",""),d=document.getElementsByClassName("_forebase_multitag"),e=[],f=0;f<d.length;f++){var g=d[f],h=c(g,"data-partID","NA");"NA"!==h&&(h.indexOf(b)<0||e.push(g))}for(var i=0,f=0;f<e.length;f++){var g=e[f];"fbmt_idle"!==g.getAttribute("id")&&i++}return{ringIdx:i,prefix:b}}var d=b(a);return null===d?a:""+d.prefix+d.ringIdx}var e={status:"---",msg:"",loadUrl:"NA",ldrTagElm:null,placementId:"NA",partId:"NA",exdata:"NA",opdomId:"NA",fbTagId:"NA"};if(tagElm=b(),null===tagElm)return e.status="error",e.msg="no_idle_tag_found",e;e.ldrTagElm=tagElm,e.ldrTagID="fbmt_active_"+a;var f=c(tagElm,"data-flemID","NA");return"NA"!==f?(e.trgElmId=f,e.trgElmType="ifrm",e.cntElmId=c(tagElm,"data-pflemID","NA")):(e.trgElmId=e.ldrTagID,e.trgElmType="scrp"),e.multiTag=!0,e.placementId=tagElm.getAttribute("data-plcmID"),e.env=tagElm.getAttribute("data-env"),e.partId=c(tagElm,"data-partID","intrinsic"),e.partId=d(e.partId),e.exdata=c(tagElm,"data-exdata","NA"),e.opdomId=c(tagElm,"data-opdomID","unspecified"),e.fbTagId=c(tagElm,"data-tagID","NA"),e.spred=c(tagElm,"data-spred","unspecified"),e.loadUrl=tagElm.src,e.status="ok",e}function d(a){if(void 0===z)return null;if(void 0===z.partitions)return null;for(var b=z.partitions,c=0;c<b.length;c++){var d=b[c];if(d.partId===a)return d}return null}var e=c(b);if(e.firstTag=a,e.tagIdx=b,"ok"!==e.status)return e;if(!0===a)z._plcmID0=e.placementId;else if(e.placementId!==z._plcmID0)return e.status="error",e.msg="inconsistent_plcmID - orig_tag:"+z._plcmID0+", new_tag: "+e.placementId,e;if(e.baseUrl="mkt.forebase.ch/plugin","dev"===e.env&&(e.baseUrl="localhost:3001"),null!==d(e.partId))return e.status="error",e.msg="duplicate_partition: "+e.partId,e;void 0===z&&(z={}),void 0===z.partitions&&(z.partitions=[]);var f={partId:e.partId,cntElmID:e.cntElmId,trgElmID:e.trgElmId,trgElmType:e.trgElmType,idx:b,exdata:decodeURIComponent(e.exdata),ts:+new Date};return z.partitions.push(f),null!==e.ldrTagID&&e.ldrTagElm.setAttribute("id",e.ldrTagID),e}function f(a,c){function d(a){var b,c,d;if(void 0!==a.status&&"ok"!==a.status)return o("_s90 ERRORS/_s20 bfs_stat",window.location.host),null;try{b=e(a.placement)}catch(a){return o("_s90 ERRORS/_s20 bfs_data",window.location.host+" | msg: "+a.msg),null}if(void 0!==a.broadcasts)try{c=JSON.parse(JSON.stringify(a.broadcasts))}catch(a){return o("_s90 ERRORS/_s30 parsing_broadcasts",window.location.host),null}if(void 0!==a.filedata)try{d=JSON.parse(JSON.stringify(a.filedata))}catch(a){return o("_s90 ERRORS/_s31 parsing_filedata",window.location.host),null}return{plcInfo:b,broadcasts:c,filedata:d}}function e(a){function b(a){return void 0===a.bstfct?100:parseInt(a.bstfct)}function c(a){var b=50;switch(a){case"unspecified":break;case"A:00_B:100":b=0;break;case"A:01_B:99":b=1;break;case"A:10_B:90":b=10;break;case"A:30_B:70":b=30;break;case"A:50_B:50":b=50;break;case"A:70_B:30":b=70;break;case"A:90_B:10":b=90;break;case"A:99_B:01":b=99;break;case"A:100_B:00":case"A":b=100;break;case"B":b=0;break;case"random":b=50}return r(b)}function d(a,b){return"210"!==a.Version&&210!==a.Version?a.versionFolder:"B"===b&&a.versionFolderB.length>0?a.versionFolderB:a.versionFolderA}function e(){try{var a={testCase:""},b=window.localStorage.getItem("_fb_forced_vars"),c=JSON.parse(b);if(null!==c)for(var d in c)void 0!==a[d]&&(a[d]=c[d]);return a}catch(a){return null}}function f(a){function b(a){window.localStorage.setItem(W,JSON.stringify({version:a}))}var c=window.localStorage.getItem(W);if(null===c)return b(a),"zero";try{return JSON.parse(c).version===a?"crsn":(b(a),"xver")}catch(a){}return b(a),"ntus"}var g={};g.baseUrl=A.baseUrl,g.placementId=A.placementId,g.partId=A.partId,g.exdata=A.exdata,g.opdomId=A.opdomId,g.fbTagId=A.fbTagId,g.env=A.env,g.spred=A.spred,g.bstfct=b(a),g.testCase=c(a.testCase),g.versionFolder=d(a,g.testCase),g.ldmd=f(g.versionFolder),g.publisher=a.publisher,g.versionBDM=a.versionBDM,g.versionVPM=a.versionVPM,g.stage=a.stage,g.localCache=a.localCache,!1===isNaN(parseInt(a.opdomain))&&(g.opdomId=a.opdomain),!0===isNaN(parseInt(g.opdomId))&&(g.opdomId="0"),g.startTime=x,g.loaderTag=t,g.secProt=J,g.cmp=parseInt(a.cmp);var h=e();return null!==h&&("A"!==h.testCase&&"B"!==h.testCase||(g.testCase=h.testCase)),g}function f(a){function b(a,b){var c=document.createElement("script");c.id=a,c.src=b,document.head.appendChild(c)}var c={baseUrl:A.baseUrl,versionfolder:a},d=K+"${baseUrl}/versions/${versionfolder}/agent";"dev"===A.env?d+="/agent_boot.js":d+="/fbagent.js";var e=m(d,c);window.setTimeout(i,1e4),z.genCbk=j,D=+new Date,b("_fb_agtldr",e)}var h=!1,l=d(a);return null===l?h:(h=!0,!0===c&&g(a),!1!==C?h:(C=!0,b("boot ok"),k("","_s40 boot_ok"),!0===c?(b("bfs_data_from_file"),o("_s70 bfs_src","_s10 from file")):(b("bfs_data_from_mem"),o("_s70 bfs_src","_s20 from mem")),l.plcInfo.ldrLog=G,z.basic_settings=l.plcInfo,z.broadcasts={},void 0!==l.broadcasts&&(z.broadcasts=JSON.parse(JSON.stringify(l.broadcasts))),z.filedata={},void 0!==l.filedata&&(z.filedata=JSON.parse(JSON.stringify(l.filedata))),B=l.plcInfo.ldmd,b("launching agent..."),k("","_s50 agent_reqd"),o("_s42 loader_ver",t),o("_s45 agent_ver",l.plcInfo.versionFolder),o("_s48 load_mode",l.plcInfo.ldmd),f(l.plcInfo.versionFolder),s("agln"),p(),h))}function g(a){try{var b={ver:w,ts:(new Date).getTime(),data:a};window.localStorage.setItem(V,JSON.stringify(b))}catch(a){}}function h(){try{var a=window.localStorage.getItem(V);if(null===a)throw"no_prev_data";var b=JSON.parse(a);if(void 0!==b.ver&&b.ver!==w)throw"wrong_version";if((new Date).getTime()-b.ts>2592e5)throw"data_is_too_old";if(void 0===b.data)throw"data_not_found";return b.data}catch(a){return null}}function i(){!0!==E&&(F=!0,o("_s90 ERRORS/_s40 agent_to",window.location.host),k("","_s54 agent_to"))}function j(a,b){if(!0!==E){E=!0;o("_s60 times/_s02 agent",n(+new Date-D))}"dock_s"===a?(k("","_s52 agent_docked"),s("agdk")):l(""+a,""+b),p()}function k(a,b){l("/_s10 loader"+a,b)}function l(a,b){var c=""+a;c.length>0&&0!==c.indexOf("/")&&(c="/"+c),o("_s00 markers/"+A.placementId+c,b)}function m(a,b){var c,d=a;for(c in b)if(void 0!==b[c]){var e=new RegExp("\\${"+c+"}","g");d=d.replace(e,b[c])}return d=d.replace(/[\${]+[\w]+[}]/g,"")}function n(a){function b(a){var b=Math.round(a);return 0===b?"00":b<10?"0"+b:b}for(var c=[50,70,100,200,300,500,700,1e3,2e3,3e3,5e3,7e3,1e4,2e4],d="[",e=!1,f=-1,g=0;g<c.length;g++)if(a<c[g]){d+=0===g?"0-":c[g-1]+"-",d+=c[g],e=!0,f=g;break}!1===e&&(d+=c[c.length-1]+"plus"),d+="]";var h="_i";return(h+=-1===f?c.length:b(f))+" "+d}function o(a,b){function c(a,b){function c(a,b){function c(a){var b={changed:!1,pathStr:a.pathStr,dataStr:a.dataStr};if("/"!==b.dataStr.charAt(0))return b;var c=""+a.pathStr,d=""+a.dataStr;d=d.substring(1);var e=d.indexOf("/");return e<0?(b.changed=!1,b.pathStr=c,b.dataStr=d,b):(c+="/"+d.substring(0,e),d=d.substring(e),b.changed=!0,b.pathStr=c,b.dataStr=d,b)}for(var d={changed:!1,pathStr:a,dataStr:b},e=!1,f=50;f>0&&(f--,d=c(d),!0===d.changed);)e=!0;return{changed:e,newFldStr:d.pathStr,newDataStr:d.dataStr}}var d={},e=a,f=""+b;if(void 0!==b){var g=c(e,f);!0===g.changed&&(e=g.newFldStr,f=g.newDataStr)}var h=L.gen.reduc,i=L.gen.skip;return a.indexOf("ERROR")>=0&&(h=L.err.reduc,i=L.err.skip),"/"!==e.charAt(0)&&(e="/"+e),d.path=e,d.caption=f,d.cnt=h,d.effSkip=i,d}var d=c(a,b);if(!0!==d.effSkip){var e={group:"ev_cnt",event:"loader",ver:100,reduc:1,pidx:I,ts:(new Date).getTime()-x+I,data:{pat:"/_s10 sys"+d.path,cap:d.caption,cnt:d.cnt}};H.push(JSON.parse(JSON.stringify(e))),I++,p()}}function p(){var a=!1;if(R>Q&&(a=!0),H.length>=P?a=!0:Date.now()-M>O&&(a=!0),!0!==a)return setTimeout(q,N),void R++;q()}function q(){function a(a,b){function c(a){}function d(){}function e(){}var f=null;window.XMLHttpRequest?f=new XMLHttpRequest:window.ActiveXObject&&(f=new ActiveXObject("Microsoft.XMLHTTP")),null!==f&&(f.open("POST",a),f.timeout=1e4,f.onload=c,f.onerror=d,f.ontimeout=e,f.send(b))}if(0!==H.length){var b={ver:t,ldmd:B,fltr:"NA",tcase:y,plcmID:A.placementId,locus:A.placementId+"_[sys]",clntID:"NA",pageID:"NA",burst:H},c=encodeURIComponent(JSON.stringify(b)),d="http://";!0===J&&(d="https://");a(d+"accsrv.${number}.aws.forebase.com".replace("${number}",L.ldrOpDomain)+"/receiver/postreportstr",c),H=[],R=0,M=Date.now()}}function r(a){var b=1e6;if(a<1)return"B";var c=Math.floor(Math.random()*b),d=Math.floor(b*a/100),e=c+d;e>b&&(e=c,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.floor((1-Math.random())*b);return f>=e?"B":f<c?"B":"A"}function s(a){var b=document;try{var b=top.document}catch(a){}try{b._fb_debg_f(a)}catch(a){}}var t="_x5",u=200,v=10,w=130,x=+new Date,y=(Math.round(999999*Math.random()),r(50)),z=null,A=null,B="",C=!1,D=null,E=!1,F=!1,G=[],H=[],I=0,J=!1,K="http://",L={},M=0,N=3e3,O=2e3,P=10,Q=10,R=0;s("ldin");try{var S=d();z=S.fb_data_obj,A=e(S.firstTag,S.tagIdx),L=c(A),window.location.protocol.indexOf("https")>=0&&(J=!0,K="https://"),"ok"===A.status&&A.loadUrl.toLowerCase().indexOf("https")>=0&&(J=!0,K="https://")}catch(a){return void s("excp")}if(b("loader booting... ldrTg:"+t),b("new instance - plcm:"+A.placementId+", part:"+A.partId),b("_secProt:"+J),k("","_s00 inst"),o("_s75 spec_red",A.spred),p(),"ok"!==A.status)return o("_s90 ERRORS/_s00 load_tag_error",A.msg),o("_s90 ERRORS/_s00 load_tag_error","/"+window.location.host+"/"+A.placementId+"/"+A.msg),null!==A.ldrTagID&&null!==A.ldrTagElm&&A.ldrTagElm.setAttribute("id","fbmt_error"),void p();o("_s10 load_by_host-plcm","/"+window.location.host+"/"+A.placementId),o("_s20 load_by_plcmt-part","/"+A.placementId+"/"+A.partId),o("_s31 load_by_tagidx","/"+window.location.host+"/"+A.tagIdx),o("_s33 load_by_spred","/"+A.placementId+"/"+A.spred);var T=A.loadUrl.replace(/\//g,"|");o("_s40 load_by_src/"+window.location.host+"/"+A.placementId+"/"+A.partId,"src: "+T);var U=!1;try{window.top===window.self&&(U=!0)}catch(a){}if(b("_topdoc:"+U),!0!==U&&o("_s80 WARNINGS/_s00 load_framed","/"+A.placementId+"/"+A.partId),p(),!0===A.firstTag){k("","_s10 loading"),s("rung");var V="_fb_bfs_"+A.placementId,W="_fb_ldm_"+A.placementId;k("","_s20 bfs_mem_rqd");var X=h();null!==X?(k("","_s22 bfs_mem_avl"),!0===f(X,!1)?k("","_s26 bfs_mem_data_ok"):k("","_s28 bfs_mem_data_not_ok")):k("","_s24 bfs_mem_not_avl"),a(),b("boot file rqd"),k("","_s30 bfs_file_rqd"),p()}}();