!function(){function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _typeof2(a){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var config,pcm_client,clntfile,basebrdg,memhub,parcels,prvstg,ajaxcall,textools,antools,heart,domtool,deltalog,bootlog,lscleanup,an_buffer,an_perfchck,an_beamcannon,an_eventconf,an_trackhub,an_accbeam,an_mailmstr,bd_pb_srvcall,bd_pb_jsonc,bd_pb_env,bd_pb_refr,bd_pb_int,bd_bdlst,bd_admin,bd_truck,bd_channel,bd_cnxhub,fb_videop_caller,fb_videop_parse,fb_videop_proc,fb_videop_tracker,fb_videop_html,fb_videop_vpaid,fb_videop_exec,fb_videop_root,fmp_lwebad,fmp_dirad,fmp_mediadrv_vast,fmp_mediadrv_custom,fmp_mediadrv_dispadx,fmp_textstorage,fmp_container_pop,fmp_driverinterf,fmp__sourcectrl_wf,fmp__plyctrl_bd,fmp__sourcectrl_bd,fmp__segmctrl_wf,fmp__segmctrl_bd,fmp__root,barlogix,overlaywnd,dombox,adpost,unit_flow,unit_actv,unit_exec,section_exec,stage_exec,stm_cachedfile,stm_blockdet,stm_srcsrvr,stm_expreg,stm_dtomgr,stm_stgproc,stm_stgmgr,valuemstr,xfrmint,ajx_caller,ajx_hub,lw_artmgr,lw_root,ldbo_driver,ldbo_root,lacc_driver,lacc_root,ildtransp,inlinedata,clntdata,mad,tracker,msghub,nodemgr,curmgr,execontrol,macroproc,sourceadm,activitydet,snippetmgr,quickvars,shims,ag_root,ag_lnch;config=function(){return{resourceLocations:{codeurl:"mkt.forebase.ch/plugin",dataurl:"mkt.forebase.ch/tagx/data",bdmurl:"mkt.forebase.ch/bdm",adServeUrl:"mkt.forebase.ch/tagx/adserve",fbDirectImgPath:"mkt.forebase.ch/tagx/_resources/fbdirect/img",proxets:"proxets",debugEmailAccount:"debug+production",debugEmailServer:"debmail.aws.forebase.com/api/mail",anSystemURL_dev:"piwik.plg.dev.reload.net",dtoServerBase:"dto.${number}.aws.forebase.com",pwServerBase:"pwport.${number}.aws.forebase.com",accServerBase:"accsrv.${number}.aws.forebase.com",lwServerBase:"lwsrv.${number}.aws.forebase.com",apiBaseUrl:"webapi.aws.forebase.com",audienceSystemURL:"audienceserver.aws.forebase.com",articlesdetectorUrl:"artdetect.aws.forebase.com:8090",zz_dummy:0},tagserver:{minCount:10,curbTable_Hr:[{value:350,curb:0},{value:400,curb:35},{value:450,curb:70},{value:500,curb:95},{value:550,curb:97},{value:600,curb:99}],curbTable_Er:[{value:200,curb:0},{value:250,curb:15},{value:300,curb:35},{value:350,curb:55},{value:400,curb:85},{value:500,curb:90},{value:600,curb:95},{value:700,curb:97},{value:800,curb:99}],curbTable_Dl:[{value:1700,curb:0},{value:1900,curb:20},{value:2100,curb:40},{value:2200,curb:60},{value:2500,curb:80},{value:2700,curb:97}]},proxy:{rootFilePrefix:"prx_root_",partNewsFilePrefix:"prx_pnws_"},mad:{locBanThrs:0,locBanPeriod:18,banPeriod:60,banThresh:8,banMinLoad:4,drvPingPeriod:30,drvPingLength:3e3,basTestSetTime:999999,basSuspTBRTh:6e3,hintValRange:10,wfHintCalcMinTm:100,wfHintCalcHalfTm:2e3,bdHintCalcMinTm:100,bdHintCalcHalfTm:2e3},bidding:{bdModTo:1e4,truckWait:150,genBReqTO:5e3,segDueTime:7e3,segMaxBurst:5,minActiveBids:1,bidHoldOff:500,bidTimeOut:2e3,burstPeriod:1500,maxCallBandwidth:20,toAjxCall:6e3},gdpr:{cmpLocateRetries:20,cmpPingTO:500,cmpPingRetries:5,cmpRespTO:5e3,cmpDataRetries:5,hostCmpPingTO:3e3,useStorage:!0},smartunits:{upperThrshPrc:35,defSeekTime:15,minSeekTime:0,maxSeekTime:30,defPlayTime:25,minPlayTime:20,maxPlayTime:60,prmSearchHoldOff:5,prmShowHoldOff:5,pullOutTime:5,lastFailHoldOff:5,maxFailCnt:3,maxAdPostCount:30},sourceadm:{srcSetReadyTime:1e4,allBusyTO:5e3},accbeam:{valTickCountDisp:2,valTickCountVast:2,valTickCountOther:2,tickCountDisp:3,tickCountVast:3,tickCountOther:3,tickPerDisp:3e3,tickPerDispBD:500,tickPerVast:2e3,tickPerPasv:100,tickPerOther:5e3,initDel:8e3,burstPer:3e3,maxTransfStringLen:3e4,channels:{stage:{red:20},unit:{red:30},segm:{red:40},tagwf:{red:50},tagbd:{red:50},dto_prf_wf:{red:50},dto_prf_bd:{red:50},dto_mad_wf:{red:10},dto_mad_bd:{red:1},dto_mad_ban:{red:10},zd:{}}},agent:{anSiteID_main:27,anSiteID_vast:28,genReducer:1e3,logDeferred:!1},content:{chnTimeout:2e4},iFrameCommsVersion:300,language:"it",analytics:{sessionMax:50,noReductions:!1,visitThresh:18e5,initHoldOff:8e3,pingHoldOff:50,sortBeforeTX:!0,deferred:!0,heartRepTime:8e3,emailDefRed:1e4,emailHoldOff:1e3,emailTextMax:12e4,emailTextCheckMax:2e3},stage:{adBlockTO:1e4,unitCorrTol:30,orderTimeout:2e4,maxRenderCount:100,contTimeout:2e4,reportTime:4,fileTimeout:2e4,sdsTimeout:5e3,winUpdatePeriod:1e3,snipTimeout:3e3,roomTimeout:15e3,envTimeout:3e4,condCheckPeriod:500,domboxTimeout:8e3,paramTimeout:2e4,boostMaxTime:60,expMaxStorage:200,secMaxFactor:30,maxLoad:4,actUnitPer:2e3,goodValue:50,pbCtrlPeriod:10,usePriority:!0},datamanager:{instInfoTimeout:2e4,effChannelTimeout:2e4,fbxContentTimeout:2e4,fbxContentDelay:1e3,backupDataValidity:24},displayManager:{autoSlidePeriod:7e3},media:{audioSpeedUp:8,audioSpeedDown:12,audioMaxVol:100,drvTimeout:2e4,adReadyMaxTime:2e4,vastFileTimeout:8e3,maxRedirect:6,impressionTO:1e4,pbc:"8UeGhj8wLQ2B",usepbc:!0,useFlashCaller:!1,hostcall:!1,usecredentials:!1,allowScriptAccess:!0,allowVastSoftErrors:!1,loadHoldOff:20,defMaxSeekTime:30,adFoundRepMinTime:3e3,adVastRepMinTime:5e3,adWFRepMinTime:5e3,adBDRepMinTime:5e3,adPassRepMinTime:0,actSensCheckPer:1e3,actSensCheckPerBD:300,actSensContTh:5,actSensContThBD:1,actSensWatchTh:5,actSensSignTh:3,clickTrackHoldoff:3e3,segTimeOut:12e3,ssSmpSzMin:12,ssSmpSzMax:30,zz_dummy:0},log:{logToConsole:!1},header:{marginTop:0,target:"#header",showMinVote:2},voter:{target:"#voter",justVotedPersistence:600,votingPersistence:240,feedbackPersistence:435,feedbackFadeoutPersistence:500,showResultsAfterVotingPersistence:2e3,timeBeforeTapMessage:15e3,touchVotingTimeout:5e3,promptBlink:!0},article:{target:"#article",renderingTime:400,anRepPeriod:1e3,attnHoldOff:2e3,mouseHoldOff:4e3,touchHoldOff:4e3},articleManager:{target:"#articleManager",timeBetweenActivations:300,maxPromptPerc:50,minPromptInterval:1,connHoldOff:1e3,showWidget:{voteRecentlyWindow:2592e5,creationWindow:864e5}},UIM:{timeResolution:2e3,voteServiceTimeout:5e3,maxVotesStorage:30,maxExposureStorage:30,maxUserValueEntries:30,userValue:{sleepWeight:0,displayWeight:80,activationWeight:800,adHoverWeight:1200,adClickWeight:3e3,voteWeight:200,halfLife:1,multiplier:5,offset:0,dynamicUpdate:!0}},mouseProcessor:{idleTimeLimit:1e4,advertPersistance:200,outsidePersistance:200,advertOutPersistence:200,advertWatchdog:1e4,debounceDelay:300,unseenPersistence:3e5},touch:{recentlyWindow:100,timeout:3e3,holdoffTime:3e3,mouseCountThreshold:20},activityManager:{activePersistenceTime:1e3,ralentFactor:5},localcache:{disable:!1},audienceHub:{ampl:300,reducer:2,itemLife:1e4,rInterval:4e3,qInterval:5e3}}}(),pcm_client=function(){return function(a){function b(a,b){return null===t?b:void 0===t?b:!0!==t.go?b:void 0===t[a]?b:t[a]}function c(){return{prxVer:a.prxVer,prxType:a.prxType,plcmID:a.plcmID,partID:a.partID,opdomID:a.opdomID,bsrvID:a.bsrvID,dmod:a.dmod,lmod:a.lmod,lplcmID:a.lplcmID}}function d(a,b){function c(a){return{phs:{w:a.screen.width,h:a.screen.height},avl:{w:a.screen.availWidth,h:a.screen.availHeight},inr:{w:a.innerWidth,h:a.innerHeight},bdy:{w:a.document.body.clientWidth,h:a.document.body.clientHeight}}}function d(){return{userAgent:navigator.userAgent,appName:navigator.appName,appVersion:navigator.appVersion}}return{version:200,locTime:Date.now(),winInfo:c(a),envInfo:d(),topw:!0===b,prot:a.document.location.protocol,host:a.document.location.host,title:a.document.title}}function e(){try{var a=n(g());if(null===a)throw{s:"init"};if("string"!=typeof a.statStr)throw{s:"error"};if("string"!=typeof a.srvUrl)throw{s:"error"};return a.status="ok",a}catch(a){var b={statStr:null,srvUrl:null};return b.status=a.s,b}}function f(a,b){try{var c={statStr:a,srvUrl:b};return m(g(),c),!0}catch(a){return!1}}function g(){return r+a.plcmID+"_"+a.partID}function h(){try{return n(l())}catch(a){return null}}function i(a){try{return m(l(),a),!0}catch(a){return!1}}function j(){return a.gdprObj}function k(){return a.mediaObj}function l(){return!0===a.lmod?s+a.lplcmID+"_"+a.partID:s+a.plcmID+"_"+a.partID}function m(a,b){var c={ver:q,ts:Date.now()};"string"==typeof b?(c.objtype=!1,c.memdata=b):(c.objtype=!0,c.memdata=JSON.stringify(b));var d=JSON.stringify(c);return localStorage.setItem(a,d),!0}function n(a){try{var b=localStorage.getItem(a);if(null===b)return null;var c=JSON.parse(b);if(c.ver!==q)throw{message:"version_error"};return!0===c.objtype?JSON.parse(c.memdata):""+c.memdata}catch(a){return null}}function o(){try{var a=top}catch(b){var a=window}return a.location.protocol.toLowerCase().indexOf("http:")>=0?"http://":"https://"}var p=this,q="120",r="prx_root_",s="prx_pnws_",t=null,u="NA",v="",w="",x=e();"ok"!==x.status&&(w+="WARNING: clnt-int mem file initialized\n"),p.getPCMObj=function(){return{thisVer:"120",statStr:x.statStr,plcmData:c(),clntData:d(a.wnd,a.rtop),resultData:h(),gdprObj:j(),mediaObj:k(),proxetString:null,dboData:null,plcmSett:null}},p.setPCMObj=function(a){if("100"!==a.thisVer)return u="error",v="incomp_output_obj_version",void(w+=" ERROR incomp_output_obj_version");u=a.status,v=a.message,w+=" "+a.log,"ok"===a.status&&(f(a.statStr,a.srvUrl),t=a.instr)},p.getSrvUrl=function(){function b(a){function b(a){return a>=10?""+a:"0"+a}return"bidsrv"+b(a)+".reload.net"}var c=b(0);return!0!==isNaN(parseInt(a.bsrvID))&&(c=b(parseInt(a.bsrvID))),"string"==typeof x.srvUrl&&""!==x.srvUrl&&(c=x.srvUrl),o()+c+"/bid"},p.getMT=function(){return b("mtype","dsp")},p.getW=function(){return b("width",0)},p.getH=function(){return b("height",0)},p.getBP=function(){return b("prc",0)},p.getBC=function(){return b("cur","USD")},p.getAM=function(){return b("am",null)},p.getPingUrl=function(a){var c=b("pingdata",{});return"undefined"!==c[a]?c[a]:""},p.setRD=function(a){return i(a)},p.getStat=function(){return u},p.getMsg=function(){return v},p.getLog=function(){return w},p.getPM=function(){var a="...";return null===t?a:void 0===t?a:void 0===t.pbm?a:t.pbm}}}(),clntfile=function(a){var b=this,c=a.comps,d=100;b.read=function(a){try{var b=c.memhub.getItem(a);if(null===b)throw{};if(parseInt(b.ver)!==d)throw{};if(void 0===b.tm)throw{};if(b.tm<15475104e5)throw{};return b.data}catch(a){}return null},b.write=function(a,b){var e={ver:d,tm:Date.now(),data:b};return c.memhub.setItem(a,e,{folder:"usr",maxage:0}),e}},basebrdg=function(a){function b(a){m.logger.writex({msg:a,prefix:"basebrdg",inst:s})}function c(a,b){!1===t&&(t=!0,m.logger.debugAlert(a,b))}function d(a){void 0!==m.memhub&&m.memhub.setItem(a.lsKey,a.lsData,a.opts)}function e(a){if(void 0!==m.memhub){var b=m.memhub.getItem(a.lsKey);null!==b&&f(q,{lsKey:a.lsKey,lsData:b,opts:{}})}}function f(a,b){var c={type:"basebrdg",from:u,msgid:Math.round(99999999*Math.random()),otm:Date.now(),rti:0,pyld:{msgKey:a,msgData:b}};A.push(c)}function g(a){switch(w){case"INIT":B=null,w="RDY";break;case"RDY":if(null===B){if(0===A.length)break;B=A.shift()}h(B),x=a,w="WFA";break;case"WFA":if(null===B){w="RDY";break}if(a-x<p)break;b(),B.rti++,w="RDY"}}function h(a){v.postMessage(JSON.stringify(a),"*")}function i(a){function c(a,b){var c={type:"basebrdg_ack",msgid:b};a.postMessage(JSON.stringify(c),"*")}try{var d=JSON.parse(a.data);if(!0===o&&Math.random()<.3)return;if("basebrdg"===d.type){if(c(a.source,d.msgid),null!==C&&d.msgid===C.msgid)return;C=d,y++;var e=d.pyld.msgKey,f=d.pyld.msgData;void 0!==D[e]&&D[e](f),b()}else if("basebrdg_ack"===d.type){if(null===B)return;if(B.msgid!==d.msgid)return;B=null}}catch(a){}}function j(){window.removeEventListener("message",i),window.removeEventListener("unload",j)}function k(a){function d(a,b,c,d){var e="**errors**/excps/msgs",f=n.envInfo.browserName+"/"+n.envInfo.majorVersion;m.tracker.fireEvent(e+"/"+f+"/"+a,"("+b+")  "+c,{att:d}),m.tracker.fireEvent(e+"/*AllBrowsers*/"+a,"("+b+") "+c,{att:d})}var e=a.errmsg;JSON.stringify(e);b();var f="Sub:  "+a.module+"\n\n";f+="Message--\x3e  "+JSON.stringify(e).substring(0,64)+"\n\n",void 0!==e.stack&&(f+="Stack:\n",f+=e.stack.toString()+"\n\n");var g={origin:a.origin,debugStrings:null,from:"BSBRDG_EXCPTN",subject:a.module,text:f};m.mailmaster&&m.mailmaster.sendObj(g),m.tracker&&d(a.module,a.origin,""+e,f),c("Agent 'excepHandler'",g)}var l=this,m=a.comps,n=a.bootParams,o=!1,p=300,q="set_qWeEw84n3m",r="copy_wp73k2Un18",s=Math.round(999*Math.random());b();var t=!1,u=null,v=null,w="INIT",x=0,y=0,z=0,A=[],B=null,C=null,D={};window.addEventListener("message",i),window.addEventListener("unload",j),l.setLocalName=function(a){u=a},l.setPierWnd=function(a){v=a},l.subscribe=function(a,b){D[a]=b},l.sendMsg=function(a,b){f(a,b)},l.setItem=function(a,b,c){f(q,{lsKey:a,lsData:b,opts:c})},l.copyItem=function(a){f(r,{lsKey:a})},l.tick=function(a){try{g(a)}catch(a){var b={};b.errmsg=a,b.module="basebrdg",b.origin=u,k(b)}if(!0===o){if(a-z<1e3)return;z=a,l.sendMsg("ping","Hi There!")}},l.subscribe(q,d),l.subscribe(r,e),m.heart.subscribe(l,100,"basebrdg",!0),l.tick(Date.now())},memhub=function(){return function(a){function b(a,b,c){if(void 0!==s.trackhub){var d="/memhub/"+t.placementId+a;s.trackhub.sendEvent("perf_low",d,b,c)}}function c(a,b,c){function d(a){var b={folder:"root",inclear:!1,maxage:x};return void 0!==a&&(void 0!==a.folder&&(b.folder=a.folder),void 0!==a.inclear&&(b.inclear=a.inclear),void 0!==a.maxage&&(b.maxage=a.maxage)),b}if(!0!==A)return!1;var e=d(c),f={vrs:u,wtm:Math.round(Date.now()/1e3),fld:e.folder,mxg:e.maxage};"string"==typeof b?(f.obj=!1,f.mdt=b):(f.obj=!0,f.mdt=JSON.stringify(b));var g=JSON.stringify(f),h=!0===w||e.inclear;if(!0===h)var i=g;else var i=l(g);var k=j(a,h);return localStorage.setItem(k,i),!0}function d(a){if(!0!==A)return null;var b=i(a,!1);return null===b?null:b.data}function e(a){if(!0!==A)return!1;var b=i(a,!1);return null===b?null:(localStorage.removeItem(b.key),!0)}function f(a,b){function c(c){if("*"===a||c.folder===a){var d=j[c.folder];void 0===d&&(d=[],j[c.folder]=d),"*"!==b&&c.name.indexOf(b)<0||d.push(c)}}function d(a){f+=e(h)+")\t"+a.folder+"  \t\t"+e(a.size)+" Kb   \t\t"+a.name+"\n",h++,i+=a.size}function e(a){return a>=100?""+a:a>=10?"0"+a:"00"+a}var f="",h=0,i=0,j={};g(c);var k=[];for(var l in j){var m=j[l];k.push({name:l,fileArray:m})}return k.sort(function(a,b){return a.name.localeCompare(b.name)}),k.forEach(function(a){a.fileArray.sort(function(a,b){return a.name.localeCompare(b.name)}),a.fileArray.forEach(d)}),f+="\nTotal Size: "+i+" Kb\n\n"}function g(a){if(!0===A&&"function"==typeof a)for(var b=0;b<localStorage.length;b++){var c=localStorage.key(b),d=i(c,!0);if(null!==d){var e=h(c);a({key:c,name:e,size:d.size,data:d.data,wrTm:d.wtm,maxage:d.mxg,folder:d.fld})}}}function h(a){var b=m(a);return null!==b?b.replace(v,""):a.replace(v,"")}function i(a,b){function c(a,b){var c={stgStr:null,stgKey:null};if(!0===b){var d=localStorage.getItem(a),e=m(d);return null!==e?(c.stgKey=a,c.stgStr=e,c):(c.stgKey=a,c.stgStr=d,c)}var f=j(a,!1);if(null!==f){var g=localStorage.getItem(f);if(null!==g)return c.stgKey=f,c.stgStr=m(g),c}var f=j(a,!0),d=localStorage.getItem(f);return null!==d?(c.stgKey=f,c.stgStr=d,c):null}try{var d=c(a,b);if(null===d)return null;var e=JSON.parse(d.stgStr);if(e.vrs!==u)throw{message:"version_error"};delete e.vrs;try{e.size=Math.round(e.mdt.length/1e3),!0===e.obj?e.data=JSON.parse(e.mdt):e.data=""+e.mdt}catch(a){return null}return delete e.obj,delete e.mdt,e.key=d.stgKey,e}catch(a){}return null}function j(a,b){return!0===b?v+a:l(v+a)}function k(){var a="_fb_test_prvstg",b="_test_content_prvstg_"+Math.random().toString(16).substr(2);try{localStorage.setItem(a,b);var c=localStorage.getItem(a);if(localStorage.removeItem(a),c===b)return!0}catch(a){}return!1}function l(a){for(var b=[],c=0;c<a.length;c++){var d=c%z,e=a.charCodeAt(c)+d;b[c]=String.fromCharCode(e)}var f=b.join("");return window.btoa(f)}function m(a){try{for(var b=window.atob(a),c="",d=0;d<b.length;d++){var e=d%z,f=b.charCodeAt(d)-e;c+=String.fromCharCode(f)}return c}catch(a){}return null}function n(a){switch(B){case"INIT":C=a,B="WCT";case"WCT":if(a-C<y)break;p("*"),"dev"!==t.env&&q(),o(),B="PARK";break;case"PARK":s.heart.unsubscribe(r)}}function o(){function a(a){c(a.folder,a.name,a.size,{scl:"mediumtimes"}),d+=a.size}function c(a,c,d,e){b("/_s10 sizeK/_s10 by_file/"+a+"/"+c,d,e)}if(!0!==A)return 0;var d=(Math.round(Date.now()/1e3),0);g(a),b("/_s10 sizeK/_s00 total",d,{scl:"mediumtimes"})}function p(a){function b(b){"*"!==a&&b.folder!==a||0!==b.maxage&&(c-b.wrTm<b.maxage||d.push(b.key))}if(!0!==A)return 0;var c=Math.round(Date.now()/1e3),d=[];g(b);var e=0;return d.forEach(function(a){localStorage.removeItem(a),e++}),e}function q(){var a=["_fb_prvstg","X2dkYnR3fH","_fbsf_ss","_fbsf_dd","_fbsf_stg","_fb_cmpd","_fb_mem_","X2dkYnFqc"];if(!0===A&&!(Date.now()-1565634782e3>864e6)){for(var c=[],d=!1,e=0;e<localStorage.length;e++){var f=localStorage.key(e);d=!1;for(var g=0;g<localStorage.length;g++){var h=a[g];f.indexOf(h)>=0&&(d=!0)}!0===d&&c.push(f)}var i=0;return c.forEach(function(a){localStorage.removeItem(a),i++}),i>0&&b("/_s99 cleanup/_s00 deleted",i,{scl:"mediumtimes"}),i}}var r=this,s=a.comps,t=a.bootParams,u=100,v="_fb_mmh_",w=!1,x=2592e3,y=1e4,z=19,A=k(),B="INIT",C=0;"dev"===t.env&&(y=2e3,w=!0),r.setItem=function(a,b,d){return c(a,b,d)},r.getItem=function(a){return d(a)},r.removeItem=function(a){return e(a)},r.getDir=function(a,b){return f(a,b)},r.tick=function(a){n(a)},s.heart.subscribe(r,300,"memhub",9,9),r.tick(Date.now())}}(),parcels=function(a){return function(a){function b(a){g.logger.writex({msg:a,prefix:"parcels",inst:h})}function c(a){function b(a){l.push(a),l.length<j||(d(Date.now()),e(Date.now()))}if(0!==k.length){var c={};for(c.packIdx=p,c.txtm=a,c.msgArray=[];k.length>0;){var f=k.shift();c.msgArray.push(f)}b(c),p++,q++}}function d(a){function b(a){function b(a){var b=a.parcelID;void 0===n[b]&&(n[b]=[]),n[b].push(a)}for(;a.msgArray.length>0;){b(a.msgArray.shift().msg)}}for(;l.length>0;){var c=l.shift();c.packIdx-o>1?(r++,o=c.packIdx):o++,s+=a-c.txtm,b(c)}}function e(a){function c(a,b,c){function d(a,b,c){c.forEach(function(c){if(!0===c.enabled)try{c.callback(a.data,a.parcelID)}catch(a){if(c.enabled=!1,t++,void 0===i)return;var d={};d.errmsg=a,d.module=b,d.origin="parcels",i(d)}})}for(var e=j;a.length>0&&e>0;){d(a.shift(),b,c),e--}}for(var d in n){var e=m[d];if(void 0!==e){var f=n[d];0!==f.length&&(c(f,d,e),b())}}}var f=this,g=a.comps,h=(a.cllBks,a.bootParams,Math.round(999*Math.random()));b();var i=a.excepHandler,j=10,k=[],l=[],m={},n={},o=0,p=0,q=0,r=0,s=0,t=0,u=Date.now();f.subscribe=function(a,b){void 0===m[a]&&(m[a]=[]),m[a].push({callback:b,enabled:!0})},f.tick=function(a){d(a),c(a),e(a)},f.sendp=function(a,b){var d={};d.msg={},d.msg.parcelID=a,d.msg.data=b,k.push(d),k.length>j&&c(Date.now())},f.getp=function(a){if(void 0===n[a])return null;var b=n[a];return 0===b.length?null:b.shift().data},f.getPerfData=function(){var a=Date.now()-u,b=0;null!==u&&a>0&&(b=Math.round(q/(a/1e3)));var c=0;q>0&&(c=Math.round(100*r/q));var d=0;return q>0&&(d=Math.round(s/q)),{totalPacks:q,packRate:b,totalExcps:t,failRate:c,avgTransTime:d}},g.heart.subscribe(f,100,"parcels",0,0),f.tick(Date.now())}}(),prvstg=function(){return function(a){function b(a,b){if(!0!==q)return!1;var c=g(a),d={ver:m,ts:Date.now()};"string"==typeof b?(d.objtype=!1,d.memdata=b):(d.objtype=!0,d.memdata=JSON.stringify(b));var e=JSON.stringify(d),f=j(e);return!0===p&&(f=e),localStorage.setItem(c,f),!0}function c(a){if(!0!==q)return null;var b=g(a);try{var c=localStorage.getItem(b);if(null===c)return null;if(!0===p)var d=c;else var d=k(c);var e=JSON.parse(d);if(e.ver!==m)throw{message:"version_error"};return!0===e.objtype?JSON.parse(e.memdata):""+e.memdata}catch(a){return null}}function d(a){if(!0!==q)return!1;var b=g(a);return localStorage.removeItem(b),!0}function e(a,b){if(!0!==q)return 0;for(var c=[],e=0;e<localStorage.length;e++){var g=localStorage.key(e),i=h(g);"*"!==a&&i.indexOf(a)<0||!0===f(i,b)&&c.push(i)}var j=0;return c.forEach(function(a){d(a),j++}),j}function f(a,b){var c=Date.now(),d=g(a);try{var e=localStorage.getItem(d);if(null===e)return null;if(!0===p)var f=e;else var f=k(e);return!(c-JSON.parse(f).ts<b)}catch(a){return!0}return!1}function g(a){return!0===p?n+a:j(n+a)}function h(a){var b="";try{return b=k(a),b.replace(n,"")}catch(b){return a.replace(n,"")}}function i(){var a="_fb_test_prvstg",b="_test_content_prvstg_"+Math.random().toString(16).substr(2);try{localStorage.setItem(a,b);var c=localStorage.getItem(a);if(localStorage.removeItem(a),c===b)return!0}catch(a){}return _sendEvent("/_s90 errors","no_local_storage"),!1}function j(a){for(var b=[],c=0;c<a.length;c++){var d=c%o,e=a.charCodeAt(c)+d;b[c]=String.fromCharCode(e)}var f=b.join("");return window.btoa(f)}function k(a){for(var b=window.atob(a),c="",d=0;d<b.length;d++){var e=d%o,f=b.charCodeAt(d)-e;c+=String.fromCharCode(f)}return c}var l=this,m=100,n="_fb_prvstg_",o=21,p=!1;void 0!==a.inclear&&!0===a.inclear&&(p=!0);var q=i();l.setItem=function(a,c){return b(a,c)},l.getItem=function(a){return c(a)},l.removeItem=function(a){return d(a)},l.removeManyItems=function(a,b){return e(a,b)},l.isTooOld=function(a,b){return f(a,b)}}}(),ajaxcall=function(){return function(a){function b(){if(!window.XMLHttpRequest)return null;var a=new window.XMLHttpRequest;return void 0===a.responseType?null:(a.onreadystatechange=function(){a.readyState===a.UNSENT||a.readyState===a.READYSTATE_UNINITIALIZED?j.initStatus=a.status:a.readyState===a.OPENED||a.readyState===a.READYSTATE_LOADING?j.openStatus=a.status:a.readyState===a.HEADERS_RECEIVED||a.readyState===a.READYSTATE_LOADED?(j.hdrRcvdStatus=a.status,void 0!==a.getAllResponseHeaders&&(j.respHdrs=a.getAllResponseHeaders()),j.respHdrs=j.respHdrs.replace(/\r\n/g," | ")):a.readyState!==a.DONE&&a.readyState!==a.READYSTATE_COMPLETE||(j.doneStatus=a.status,a.status>=200&&a.status<300||304===a.status?e(""):f("from_readyState: "+a.status))},a)}function c(){if(!window.XDomainRequest)return null;var a=new window.XDomainRequest;return a.onload=e,a.onerror=f,a.ontimeout=g,a.onprogress=h,a}function d(){if(!window.ActiveXObject)return null;var a=new ActiveXObject("Microsoft.XMLHTTP");return a.onload=e,a.onerror=f,a.ontimeout=g,a.onprogress=h,a}function e(b){void 0!==a.onSucc&&a.onSucc(l,b,j)}function f(b){void 0!==a.onFail&&a.onFail(l,b,j)}function g(b){void 0!==a.onFail&&a.onFail(l,b,j)}function h(b){void 0!==a.onProgress&&a.onProgress(l,b,j)}function i(a,b){return"string"==typeof b&&b.length>=0?a+"?"+b:a}var j={initStatus:"---",openStatus:"---",hdrRcvdStatus:"---",doneStatus:"---",respHdrs:"---"},k="XHR",l=b();if(null===l&&(k="XDR",l=c()),null===l&&(k="AXO",l=d()),null===l)throw k="NA","cannot_create_xhr_obj";this.getAjxObjType=function(){return k};var m={};void 0!==a.options&&(m=a.options);var n=a.url;if("GET"===a.method&&void 0!==a.data&&(n=i(a.url,a.data)),l.open(a.method,n),l.timeout=1e4,"number"==typeof m.timeout&&(l.timeout=m.timeout),"AXO"!==k){var o=!0;void 0!==m.withCredentials&&!0!==m.withCredentials&&(o=!1),l.withCredentials=o,void 0!==m.customHeaders&&m.customHeaders.forEach(function(a,b){l.setRequestHeader(b,a)}),void 0!==m.preflight&&!0===m.preflight&&l.setRequestHeader("X-Requested-With","XMLHttpRequest");var p="text/plain";void 0!==m.contentType&&(p=m.contentType),l.setRequestHeader("Content-Type",p)}"POST"===a.method&&void 0!==a.data?l.send(a.data):l.send()}}(),textools=function(){return function(a){var b=this,c=[],d=Date.now();b.getValueSlot=function(a,c,d){try{if(c>a[a.length-1])return"["+b.formInt(a[a.length-1],d)+"++]";if(c<a[0])return"["+b.formInt(a[0],d)+"--]";for(var e=a.length-2;e>=0&&!(c>=a[e]);)e-=1;if(e<0)throw{};return"["+b.formInt(a[e],d)+"-"+b.formInt(a[e+1],d)+"]"}catch(a){}return"ERR"},b.formInt=function(a,b){var c=2;void 0!==b&&(c=b);for(var d=1,e=10,f="",g=100;g>0;)if(g--,a<e&&(f+="0"),d++,e*=10,d>=c){f+=a;break}return f},b.locateInPage=function(a,b,c){if("string"==typeof c&&"NA"!==c&&""!==c){var d=a.document.getElementById(c);if(null===d)return null;if("iframe"!==d.tagName.toLowerCase())return null;return d.contentWindow.document.getElementById(b)}return a.document.getElementById(b)},b.getFxDecStr=function(a){if("number"!=typeof a)return a;var b=Math.round(a);return 0===b?"000":b<10?"00"+b:b<100?"0"+b:""+b},b.objxt=function(a,b){function c(a,b){function f(a){return Array.isArray(a)}function g(a){return!0!==f(a)&&(null!==a&&"object"===_typeof2(a))}if(d>e)return">>> recursion_error <<<";if(!0===f(b)){for(var h=[],i=0;i<b.length;i++){var j=b[i],k={};d++,k=c(k,j),d--,h.push(k)}return h}if(!0===g(b)){var l={};for(var m in a)!0===a.hasOwnProperty(m)&&(d++,l[m]=c({},a[m]),d--);for(var m in b)if(!0===b.hasOwnProperty(m)){d++;var n={};void 0!==a[m]&&(n=a[m]),l[m]=c(n,b[m]),d--}return l}return b}var d=0,e=20;return c(a,b)},b.findInObj=function(a,b){function c(a,b){function f(a){return Array.isArray(a)}function g(a){return!0!==f(a)&&(null!==a&&("function"==typeof a||"object"===_typeof2(a)))}if(d>e)throw{msg:">>> recursion_error <<<"};if(!0===f(b)){for(var h=0;h<b.length;h++){if(d++,!0===c(a,b[h]))return!0;d--}return!1}if(!0===g(b)){for(var i in b)if(!0===b.hasOwnProperty(i)){if(d++,!0===c(a,b[i]))return!0;d--}return!1}return a===b}var d=0,e=20;return c(a,b)},b.deepAccess=function(a,b){function c(a){return!0!==d(a)&&(null!==a&&("function"==typeof a||"object"===_typeof2(a)))}function d(a){return Array.isArray(a)}function e(a){return"string"==typeof a}if(!0===c(b)&&!0===e(a)){for(var f=a.split("."),g=b,h=0;h<f.length;h++){var g=g[f[h]];if(void 0===g)return}return g}},b.objxt_pl=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.whirliGig=function(a){var b=1e7;if(a>=100)return!0;if(a<=0)return!1;var c=Math.round(Math.random()*b),d=Math.round(b*a/100),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return!(f>=e)&&!(f<c)},b.parseBool=function(a){return _typeof2(a)==_typeof2(!0)?a:"true"===a||"false"!==a&&void 0},b.chunkShuffle=function(a,c){for(var d,e=[],f=100;f>0&&(f--,d=a.slice(e.length,e.length+c),0!==d.length);)d=b.shuffle(d),e=e.concat(d);return e},b.shuffle=function(a){function b(a){if(0===a.length)return{item:null,array:a};for(var b=[],c=null,d=Math.floor(Math.random()*a.length),e=0;e<a.length;e++)e!==d?b.push(a[e]):c=a[d];return{item:c,array:b}}for(var c=[].concat(a),d=[],e=300;e>0;){e--;var f=b(c);if(null===f.item)break;d.push(f.item),c=f.array}return d},b.getDateString=function(a){function b(a){return a<10?"0"+a:a}var c=Date.now();void 0!==a&&null!==a&&(c=a);var d=new Date(c),e="";return e+=""+d.getFullYear(),e+="-"+b(d.getMonth()+1),e+="-"+b(d.getDate()),e+=" "+b(d.getHours()),e+=":"+b(d.getMinutes()),e+=":"+b(d.getSeconds())},b.formatString=function(a,b){var c,d=a;for(c in b)if(void 0!==b[c]){var e=new RegExp("\\${"+c+"}","g");d=d.replace(e,b[c])}return d=d.replace(/[\${]+[\w]+[}]/g,"")},b.parse=function(a,b){function c(a,b,c){function d(a,b){function c(a,b){var c=","+b+":",d=a.indexOf(c);return d>=0?d+1:(c=b+":",d=a.indexOf(c),0===d?0:-1)}function d(a){var b=""+a;b=b.replace("(?![a-zA-Z0-9_.-])",",");var c=b.indexOf(",");return c>=0&&(b=b.substring(0,c)),b}var e=a.replace(/\s+/g,""),f=e.toLowerCase(),g=b.toLowerCase(),h=c(f,g);if(h<0)return null;var i=h+g.length+1;return f=f.substring(i),f=d(f),e.substring(i,i+f.length)}var e={status:"undef",code:"",msg:"",data:null},f=d(a,b);if(null===f)return e.status="not_found",e;if("keyword"===c[b].type)return f=f.toLowerCase(),c[b].series.indexOf(f)>=0?(e.status="ok",e.data=f,e):(e.status="error",e.msg="unknown value:'"+f+"'",e.data=f,e);if("string"===c[b].type)return e.status="ok",e.data=f,e;if("boolean"===c[b].type)return"true"!==(f=f.toLowerCase())&&"false"!==f?(e.status="error",e.msg="invalid value for '"+b+"': '"+f+"'",e.data=f,e):(e.status="ok",e.data="true"===f||"false"!==f&&null,e);if("number"===c[b].type){e.percent=!1;var g=parseFloat(f),h=c[b].min,i=c[b].max;return e.status="ok",(void 0!==h&&g<h||void 0!==i&&g>i)&&(e.msg="out-of-range value for '"+b+"': "+f,e.status="error"),e.data=g,e}return e.status="error",e.msg="programming error: key:'"+b+"', type:'"+c[b].type+"'",e.data=f,e}var d={stat:"ok",msg:null},e={};for(var f in b){var g=c(a,f,b);if("ok"!==g.status){if("not_found"===g.status){if(void 0!==b[f].req&&!0===b[f].req){d.stat="error",d.msg="missing key:"+f+", msg: "+g.msg;break}if(void 0!==b[f].defvalue){e[f]=b[f].defvalue;continue}e[f]="unspecified"}}else e[f]=g.data}return d.parsedObj=e,d},b.genUUID=function(){function a(b){return b?(b^16*Math.random()>>b/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a)}return a()},b.convHTMLEnts=function(a){var b=""+a;return b=b.replace(/&amp;/g,"&"),b=b.replace(/&quot;/g,'"'),b=b.replace(/&apos;/g,"'"),b=b.replace(/&nbsp;/g," ")},b.checkStrCond=function(a,b){if(void 0===b)return!0;var c=b.replace(/\s+/g,"");if("*"===c)return!0;if(""===c)return!0;var d=c.toLowerCase().split("&"),e=a.toLowerCase().replace(/\s/g,""),f=!0;return d.forEach(function(a){!0===f&&e.indexOf(a)<0&&(f=!1)}),f},b.paob=function(a){function b(a){var b=[],c=null,d=0;for(var e in a)d++,null!==c?b.push(e):c=e;return{elmCount:d,keyMap:b,entryKey:c}}function c(a){var b=0;for(var c in a)b++;return b}function d(a,b){for(var c=[],d=0;d<b.length;d++)c.push(a[b[d]]);return c}var e={keyMap:[],entryKey:null,valVectors:{}};if(void 0===a)return null;var f=a[0];if(void 0===f)return null;if(c(f)<1)return null;var g=b(f);if(0===e.elmCount)return null;e.entryKey=g.entryKey,e.keyMap=g.keyMap;for(var h=0;h<a.length;h++){var i=a[h],j=i[e.entryKey],k=d(i,e.keyMap);e.valVectors[j]=k}return e},b.upaob=function(a){var b=a.keyMap,c=a.entryKey,d=a.valVectors,e=[];for(var f in d){var g=d[f],h={};h[c]=f;for(var i=0;i<b.length;i++){h[b[i]]=g[i]}e.push(h)}return e},b.printObj=function(a,b,c){function d(a,b){function c(a){for(var b="",c=0;c<a;c++)b+="    ";return b}function g(a){return Array.isArray(a)}function h(a){return null!==a&&("function"==typeof a||"object"===_typeof2(a))}function i(a){return"string"==typeof a}function j(a){for(var b in a)return!1;return!0}if(a>e)return">>> recursion_error <<<";var k="";if(!0===g(b))if(0===b.length)k="[]";else{a++;for(var l=0;l<b.length;l++){var m=b[l];k+="\n",k+=c(a)+"["+l+"] = ",k+=d(a,m)}a--}else if(!0===h(b))if(!0===j(b))k="{}";else{a++;for(var n in b)k+="\n",k+=c(a)+"["+n+"] = ",!0!==b.hasOwnProperty(n)?k+="Object":k+=d(a,b[n]);a--}else if(!0===i(b)){var o=""+b;o.length>f&&(o=o.substring(0,f)+" ... (truncated)"),k='"'+o+'"'}else k=""+b;return k}var e=20,f=99999;return void 0!==c&&(f=c),d(a,b)},b.addStashObject=function(a,b){c.push({ts:Date.now()-d,name:a,data:b})},b.printStashBuffer=function(){function a(a){var b=Math.floor(a/1e3),c=a-1e3*b;return b=b<10?" "+b:""+b,c=0===c?"000":c<10?"00"+c:c<100?"0"+c:""+c,b+"."+c}var d=0,e="";return c.forEach(function(c){d=0,e+=a(c.ts)+' : "'+c.name+'" : \n',e+=b.printObj(d,c.data)+"\n\n\n"}),e},b.o=function(a){for(var b=[],c=0;c<a.length;c++){var d=c%16,e=a.charCodeAt(c)+d;b[c]=String.fromCharCode(e)}var f=b.join("");return window.btoa(f)},b.d=function(a){for(var b=window.atob(a),c="",d=0;d<b.length;d++){var e=d%16,f=b.charCodeAt(d)-e;c+=String.fromCharCode(f)}return c}}}(),antools=function(){function a(a){function b(a){for(var b=[],c=a.length-1;c>=0;c--)b.push(-a[c]);return 0===b[b.length-1]&&b.pop(),b.concat(a)}function c(a,b,c,d){var f,g=[],h=0,i=a,j=null;for(0===i&&(g.push(i),h++,i=1,g.push(i),h++);;){if((i*=b)>c)break;if(f=e(i),(null===j||f!==j)&&(g.push(f),j=f,++h>=d))break}return g}function d(a,b,c){for(var d=[],f=0,g=a;g<=c&&(d.push(g),!(++f>=h));)g=e(g+b);return d}function e(a){for(var b=Math.round(a),c=""+b,d="",e=0;e<c.length;e++)d+=e<2?c.charAt(e):"0";return parseInt(d)}var f,g=1e3;void 0!==a.maxval&&(g=a.maxval);var h=1e3;if(void 0!==a.maxcount&&(h=a.maxval),!0===a.exp){var i=(100+a.inc)/100;f=c(a.start,i,g,h)}else f=d(a.start,a.inc,g,h);return!0===a.mirror?b(f):f}return{
ranges:{shorttimes:[0,10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,1e3,1200,1400,1700,2e3,2200,2400,2700,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,9e3,1e4,12e3,14e3,16e3,18e3,2e4],shorttimesLR:[0,100,200,300,400,500,600,700,800,900,1e3,1200,1400,1600,1800,2e3,2400,2700,3e3,4e3,5e3,6e3,7e3,8e3,1e4,12e3,14e3,16e3,18e3,2e4],mediumtimes:[0,1,2,3,4,5,6,7,8,9,10,12,14,16,18,20,22,24,26,28,30,33,36,40,43,46,50,53,56,60,63,66,70,75,80,85,90,100,110,120,130,140,150,160,170,180,200,230,270,300,350,400,450,500],tbrtimes:[0,1,2,3,4,5,6,7,8,9,10,12,14,16,18,20],plusNegCnt:[-100,-90,-80,-70,-60,-50,-40,-35,-30,-25,-22,-20,-18,-16,-14,-12,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,12,14,16,18,20,22,25,30,35,40,50,60,70,80,100],longtimes:[0,1,3,5,7,10,15,20,25,30,35,40,45,50,60,70,80,90,100,120,140,160,180,200,250,300,350,400,450,500,600,700,800],lineartimes:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180],screenDims:[0,200,300,400,500,600,700,800,900,1e3,1100,1200,1220,1240,1260,1280,1300,1320,1340,1360,1380,1400,1420,1440,1460,1480,1500,1600,1700,1800,1900],cycleCount:[0,1,2,3,4,5,6,7,8,9,10,12,15,20,25,30,35,40,45,50,60,70,80,90,100,120,140,160,180,200,220,240,260,280,300,330,360,400,430,460,500,550,600,650,700,750,800,850,900,950,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,6e3,7e3,8e3,9e3,1e4,12e3,15e3,2e4],boxWidth:[0,200,260,280,300,310,320,330,340,350,360,370,380,390,400,420,450,470,500,530,570,600,700,800,900,1e3],percRange:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],highPercRange:[0,10,20,30,40,50,55,60,65,70,75,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],dtoRange:[0,1,2,3,4,5,6,8,10,12,14,17,20,23,26,30,35,40,45,50,60,70,80,90,100],takerates:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.2,1.4,1.7,2,2.5,3,3.5,4,4.5,5,6,8,10,12,14,17,20,23,26,30,35,40,45,50,60,70,80,90,100],relmarg:[-20,-15,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,15,20],hours:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],relmarg_F:[-987,-610,-377,-233,-144,-89,-55,-34,-21,-13,-8,-5,-3,-2,-1,0,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987],relmarg_H:[-10,-9,-8,-7,-6,-5,-4.5,-4,-3.5,-3,-2.5,-2,-1.7,-1.4,-1.2,-1,-.9,-.8,-.7,-.6,-.5,-.4,-.3,-.2,-.1,0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.2,1.4,1.6,1.8,2,2.3,2.7,3,3.5,4,4.5,5,6,7,8,9,10],unity:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],tmop:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,215,220,225,230,235,240,245,250,255,260,265,270,275,280,285,290,295,300]},addSeries:function(b,c){if(void 0===this.ranges[b]){var d=a(c);this.ranges[b]=d}},isSeries:function(a){return void 0!==this.ranges[a]},getRangeStr:function(a,b){function c(a){if("number"!=typeof a)return a;var b=Math.round(a);return 0===b?"000":b<10?"00"+b:b<100?"0"+b:""+b}var d=this.getRangeData(a,b);return"_"+c(d.index)+"_["+d.rangeL+", "+d.rangeH+"]"},getRangeData:function(a,b){function c(a){var b=Math.round(a);return 0===b?"000":b<10?"00"+b:b<100?"0"+b:""+b}var d=Math.round(parseFloat(a));if(!0===isNaN(d))return"NaN";if(b in this.ranges==!1)return"noValidRange";var e=this.ranges[b],f={index:-1,rangeL:null,rangeH:null};if(e.length<2)return f;if(d<e[0])return f.index="^^^",f.rangeL="0",f.rangeH=e[0],f;if(d>=e[e.length-1])return f.index="vvv",f.rangeL=e[e.length-1],f.rangeH="plus",f;for(var g=0;g<e.length-1;g++)if(d>=e[g]&&d<e[g+1])return f.index=c(g),f.rangeL=e[g],f.rangeH=e[g+1],f;return f.index="err!",f},getTimeStr:function(a,b){var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d="",e=new Date;return e.setTime(a),void 0!==b&&!0===b?(d=e.getFullYear()+"-",d+=c[e.getMonth()]+"-",d+=e.getDate()+" ",d+=e.getHours()+":",d+=e.getMinutes()+":",d+=e.getSeconds()):(d=e.getUTCFullYear()+"-",d+=c[e.getUTCMonth()]+"-",d+=e.getUTCDate()+" ",d+=e.getUTCHours()+":",d+=e.getUTCMinutes()+":",d+=e.getUTCSeconds()),d},getTimeSlotTen:function(){function a(a){return a<10?"0"+a:""+a}function b(a){return 10*Math.floor(a/10)}var c=new Date;return a(c.getUTCHours())+":"+a(b(c.getUTCMinutes()))}}}(),heart=function(){return function(a){function b(a){function b(){var a=Date.now()-i,b=Math.floor(a/1e3),c=a-1e3*b;return b=b<10?" "+b:""+b,c=0===c?"000":c<10?"00"+c:c<100?"0"+c:""+c,b+"."+c}if(!0===j&&!0===t){var c=b()+" _hrt ("+x+") "+a;console.log(c)}}function c(a,b,c,d,e){var f=this;f.module=a,f.periodL=b,f.caption=c,f.lastrun=0,f.priority=!0===d?7:!1===d?9:d,f.priorityB=void 0===e?9:e,f.fault=!1,f.stop=!1,f.loopCall=function(a){if(!0!==f.stop&&!0!==f.fault&&!(!0!==R&&a-f.lastrun<f.periodL)){f.lastrun=a;try{return void f.module.tick(a,R)}catch(a){if(f.fault=!0,null!==F){var b={};b.errmsg=a,b.module=f.caption,b.origin="loop",F(b,G)}return a}}}}function d(a,b,c){null!==E&&E.sendEvent("performance","heart/"+x+"/"+a,b,c)}function e(a,b,c){!1===s&&null!==E&&E.sendEvent("perf_low","heart/"+x+"/"+a,b,c)}function f(){if(!0===w)return void ia.sort(function(a,b){return a.priorityB!==b.priorityB?a.priorityB-b.priorityB:a.caption<b.caption?-1:a.caption>b.caption?1:0});ia.sort(function(a,b){return a.priority!==b.priority?a.priority-b.priority:a.caption<b.caption?-1:a.caption>b.caption?1:0})}function g(a){function c(a,c){function f(a,c){var f=!1,g=Date.now();return ia.forEach(function(i,j){if(!1===f){var k=h.getRelTime(),l=i.loopCall(g),m=h.getRelTime()-k;if(void 0!==l&&(b("excp --\x3e module: "+i.caption+" - msg: "+l),d("excps/modules",i.caption)),m>r){var n={when:g,who:i.caption,what:m};ha.push(n),b("viol --\x3e module: "+i.caption+" - by: "+m+" ms"),e("viols/modules",i.caption)}var o=k-a;return o>c?(f=!0,void b("brk brst (mod lp) --\x3e tm: "+o+" ms - mod idx: "+j)):void 0}}),f}var g=!1;ca++;var i=h.getRelTime();if(!0===f(i,a)&&(g=!0),!0!==g&&!0===c){var j=h.getRelTime();0!==P&&(Q+=j-P),P=j;for(var k=0;k<p&&(!0===f(i,a)&&(g=!0),h.getRelTime()-i>a&&(g=!0),!0!==g);)k++,M++;var l=h.getRelTime();if(O+=l-j,L++,!0===g){N++;var m=h.getRelTime()-i;b("brk brst (cyc lp) --\x3e time: "+m+" ms"),e("brst/_s32 brkn/tim",m,{scl:"mediumtimes"}),e("brst/_s32 brkn/len",k,{scl:"mediumtimes"})}}}function f(a){if(null===fa&&(fa=a),!(a-fa>6e4||(null===ga&&(ga=a),a-ga<800))){var b=a-ga;0===b&&(b=1),ga=a;var c=$-X;X=$;var d=Math.round(1e3*c/b),e=_-Y;Y=_;var f=Math.round(1e3*e/b),h=aa-Z;Z=aa;var i=Math.round(1e3*h/b),j=ca-W;W=ca;var k=Math.round(1e3*j/b),l=ia.length,m={time:a-I,status:g(),boostFlag:R,curAdLevel:K,totModules:l,effFreq:k,baseFreq:d,rafFreq:f,workFreq:i};ea.unshift(m)}}function g(){return!0===R?"***":" "}var i=Date.now();i-ka<n||(ka=i,!0!==ja&&(ja=!0,c(o,R),ja=!1,void 0===da[a]?da[a]=1:da[a]++,f(i),0!==U&&i-U>q&&h.boostOff()))}var h=this,i=Date.now(),j=!1,k=40,l=40,m=160,n=40,o=10,p=10,q=1e3,r=10,s=!0;Math.random()<.01&&(s=!1);var t=!1;location.host.indexOf("3001")>=0&&(t=!0);var u=!1;h.getRelTime=function(){return Date.now()};try{performance.now();u=!0,h.getRelTime=function(){return Math.round(performance.now())}}catch(a){}h.setAltPrms=function(a){var b="undefined";_typeof2(a.period_B)!==b&&(k=a.period_B),_typeof2(a.period_G)!==b&&(m=a.period_G),_typeof2(a.period_EFF)!==b&&(n=a.period_EFF),_typeof2(a.maxBrstTime)!==b&&(o=a.maxBrstTime),_typeof2(a.maxBrstCycles)!==b&&(p=a.maxBrstCycles),_typeof2(a.boostTimeSpan)!==b&&(q=a.boostTimeSpan)};var v=a.addLogLine,w=!0,x=a.envcode,y=a.raf,z=a.wrkr,A=Math.round(999*Math.random()),B=""+A,C=null,D=!0,E=null,F=null,G=null,H=!1,I=null,J=null,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=!1,S=null,T=!0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,_=0,aa=0,ba=0,ca=0,da={},ea=[],fa=null,ga=null,ha=[],ia=[],ja=!1,ka=0;h.setExcepCallback=function(a,b){F=a,G=b},h.setTracker=function(a){E=a,!0===u?d("hires","YES"):d("hires","NO")},h.getInstStatus=function(){return 0===ea.length?null:ea[0]},h.bootOff=function(){if(!1!==w){w=!1,f(),b("boot OFF"),v("boot OFF");d("boost/_s40 fullspd_off",Date.now()-i,{scl:"shorttimes"})}},h.boostOn=function(){!1===w&&(R=!0,U=Date.now(),S!==R&&(S=R,b("boost ON"),v("boost ON")))},h.boostOff=function(){if(R=!1,V+=Date.now()-U,U=0,S!==R&&(S=R,b("boost OFF"),v("boost OFF"),!0===T)){T=!1;d("boost/_s41 boost_off",Math.round((Date.now()-i)/1e3),{scl:"mediumtimes"})}},h.setAdLevel=function(a){K=a},h.start=function(a){function b(){try{window.hts=window.hts||{},window.hts[B]=function(a,b,c,d,e){return $=b,_=c,aa=d,ba=e,g(a),!1===D?null:(D=!1,{ec:x,dv:t,rn:H,bf:R,pB:k,pW:l,pG:m})};var a=document.createElement("iframe");!0===j&&!0===t&&(a.id="_fbhrt_"+A),a.setAttribute("scrolling","no"),a.setAttribute("frameborder","0"),a.setAttribute("width","0"),a.setAttribute("height","0"),a.src="javascript:void(0)",a.style.position="absolute",a.style.left="0",a.style.top="0",document.body.appendChild(a);var b="<ht";return b+="ml>",b+="<bo",b+="dy style='background:transparent; margin:0; '>",b+="<scr",b+="ipt type='text/javascript'>",b+="var _dv = false;",b+="var _ec = 'NA';",b+="var _rn = false;",b+="var _bf = false;",b+="var _pB = 50;",b+="var _pW = 80;",b+="var _pG = 160;",b+="var _tbl = 0;",b+="var _trl = 0;",b+="var _twl = 0;",b+="var _tgl = 0;",b+="var _rA = 0;",b+="var _w = null;",b+="blp();",b+="wcl();",!0===y&&(b+="if(typeof requestAnimationFrame !== 'undefined') window.requestAnimationFrame(rC);"),b+="function cD (from) {",b+="var d = window.parent.hts['"+B+"'](from, _tbl, _trl, _twl, _tgl);",b+="if(d === null) return;",b+="_ec = d.ec;",b+="_dv = d.dv;",b+="_rn = d.rn;",b+="_bf = d.bf;",b+="_pB = d.pB;",b+="_pW = d.pW;",b+="_pG = d.pG;",b+="}",b+="function blp () {",b+="\tcD('bas');",b+="\t_tbl++;",!0===j&&!0===t&&(b+="if(_tbl %10 === 0) console.log('tbl: ' + _tbl + ', frm: ' + _ec);"),b+="\tif(_rn !== true) return;",b+="\twindow.setTimeout(blp, _pB);",b+="}",!0===y&&(b+="function rC (hr) {",b+="\tif(_rA !== hr) {",b+="\t\t_rA = hr;",b+="\t\tcD('raf');",b+="\t\t_trl++;",!0===j&&!0===t&&(b+="if(_trl %10 === 0) console.log('trl: ' + _trl + ', frm: ' + _ec);"),b+="\t}",b+="\tif(_rn === true) window.requestAnimationFrame(rC);",b+="}"),b+="function wcl () {",!0===z&&(b+="\ttry {",b+="\t\tvar ct = 'var a=0; var p=20; function t(){postMessage(a++);setTimeout(t,p);}t();onmessage=function(o){try{w=JSON.parse(o.data);p=w.p;}catch(e){}}';",b+="\t\tvar wb = new Blob([ct], { type: 'text/javascript' });",b+="\t\tvar wu = window.URL.createObjectURL(wb);",b+="\t\t_w = new Worker(wu);",b+="\t\t_w.onmessage = function(a) {",b+="\t\t\tif(_rn !== true) return;",b+="\t\t\tcD('wrk');",b+="\t\t\t_twl++;",!0===j&&!0===t&&(b+="if(_twl %10 === 0) console.log('twl: ' + _twl + ', frm: ' + _ec);"),b+="\t\t};",b+="\t\t_w.postMessage(JSON.stringify({ p : _pW }));",b+="\t\treturn true;",b+="\t}",b+="\tcatch (err) {}"),b+="\twindow.gs = [];",b+="\tfor(var i = 0 ; i < 4 ; i++) window.gs.push(new lp());",b+="\treturn false;",b+="\tfunction lp () {",b+="\t\tif(_bf === true) {",b+="\t\t\tcD('gng');",b+="\t\t\t_tgl++;",!0===j&&!0===t&&(b+="if(_tgl %10 === 0) console.log('tgl: ' + _tgl + ', frm: ' + _ec);"),b+="\t\t}",b+="\t\tif(_rn !== true) return;",b+="\t\twindow.setTimeout(lp, _pG);",b+="\t}",b+="}",b+="</scr",b+="ipt>",b+="</bo",b+="dy>",b+="</ht",b+="ml>",a.contentWindow._fbh_cnt=b,a.src="javascript:window._fbh_cnt",a}catch(a){}return null}var c={status:"error",mode:"---"};return J=Date.now(),I=J,void 0!==a&&(I=a),H=!0,null===(C=b())?(c.status="error",c.mode="heart_failed",c):(c.status="ok",c.mode="clk_frm",c)},h.subscribe=function(a,b,d,e,g){var i=new c(a,b,d,e,g);ia.push(i),f(),h.lastrun=0},h.unsubscribe=function(a){for(var b=[],c=0;c<ia.length;c++){var d=ia[c];d.module!==a&&b.push(d)}ia=b},h.getPerfReport=function(){function a(){var a=0,b={};for(var c in da)a+=da[c];for(var c in da)b[c]=a>0?Math.round(100*da[c]/a):0,d("mode_shares/"+c,b[c],{scl:"percRange"});return b}function b(a){return 0===a?"00":a<10?"0"+a:""+a}function c(a){var b=a,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?"0"+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}function e(){var a=Date.now()-J;return{avgEffFrequency:Math.round(1e3*ca/a),avgRefFrequency:Math.round(1e3*$/a),avgRAFFrequency:Math.round(1e3*_/a),avgWorkFrequency:Math.round(1e3*aa/a),perfSeries:ea}}function f(){for(var a="",b=0;b<ia.length;b++){var c=ia[b],d="";b<100&&(d+="0"),b<10&&(d+="0"),d+=b+") ",a+=d+"   ["+c.priority+" / "+c.priorityB+"]    ",a+=c.caption+"  -  ",a+="prd: "+c.periodL+"  ",!0===c.stop&&(a+="(stopped) "),!0===c.fault&&(a+="(fault) "),a+="\n"}return a}var g=Date.now()-i,h=Math.round(g/100)/10,j=Math.round(1e3/k),s=Math.round(1e3/l),t=Math.round(1e3/n),u=e(),v="Snapshot at: "+h+" sec\n\n";v+="Dyn Params:\n",v+="period_B: "+k+"\n",v+="period_W: "+l+"\n",v+="period_G: "+m+"\n",v+="period_EFF: "+n+"\n",v+="maxBrstTime: "+o+"\n",v+="maxBrstCycles: "+p+"\n",v+="boostTimeSpan: "+q+"\n",v+="moduleLoopTimeTh: "+r+"\n\n",v+="Average BASE frequency: "+u.avgRefFrequency+"  ("+j+")\n",v+="Average RAF frequency: "+u.avgRAFFrequency+"  (60)\n",v+="Average WORK frequency: "+u.avgWorkFrequency+"  ("+s+")\n",v+="Average EFF frequency: "+u.avgEffFrequency+"  ("+t+")\n\n",d("avgfrq/bs",u.avgRefFrequency,{scl:"mediumtimes"}),d("avgfrq/rf",u.avgRAFFrequency,{scl:"mediumtimes"}),d("avgfrq/wk",u.avgWorkFrequency,{scl:"mediumtimes"}),d("avgfrq/eff",u.avgEffFrequency,{scl:"mediumtimes"}),v+="Boost Series:\n\n";for(var w=u.perfSeries.length,x=0;x<w;x++){var y=u.perfSeries[w-x-1],z=Math.floor(y.time/1e3),A=y.time-1e3*z;z=z<10?" "+z:""+z,A=0===A?"000":A<10?"00"+A:A<100?"0"+A:""+A;var B=z+"."+A,C=y.totModules,D=""+y.curAdLevel;y.curAdLevel<10&&(D="0"+D);var E=""+y.baseFreq;y.baseFreq<10&&(E="0"+y.baseFreq);var F=""+y.rafFreq;y.rafFreq<10&&(F="0"+y.rafFreq);var G=""+y.workFreq;y.workFreq<10&&(G="0"+y.workFreq);var H=""+y.effFreq;y.effFreq<10&&(H="0"+y.effFreq),v+="Time: "+B+"  |  Modules: "+C+"  |  AdLevel: "+D+"  |  Base Freq: "+E+"  |  RAF Freq: "+F+"  |  Work Freq: "+G+"  |  Eff Freq: "+H+"  |  Boost: "+y.status+"\n"}var K=f();v+="\nSnapshot of Module List:\n\n",v+=K+"\n",v+="\nViolations:\n\n";var P=0,R=0;ha.forEach(function(a,d){v+="  "+b(d)+")  "+c(a.when-I)+" - "+a.who+" - "+a.what+" ms\n",P++,R+=a.what}),P>0&&(R=Math.round(100*R/P)/100),d("viols/counts",P,{scl:"mediumtimes"}),d("viols/times",R,{scl:"mediumtimes"}),v+="\n\nBurst Stats:\n\n";var S=Math.round(1e3*V/g)/10,T=0;L>0&&(T=Math.round(Q/L));var U=0;L>0&&(U=Math.round(1e3*N/L)/10);var W=0;L>0&&(W=Math.round(10*O/L)/10);var X=0;T>0&&(X=Math.round(1e3*W/T)/10);var Y=0;return L>0&&(Y=Math.round(10*M/L)/10),v+="Total Boost Time: "+Math.round(V/1e3)+" sec (perc: "+S+"%)\n",v+="Eff Avg Burst period: "+T+" ms (spec: "+n+" ms)\n",v+="Avg Burst Time: "+W+" ms (load: "+X+"%) (limit: "+o+" ms)\n",v+="Avg Burst Length: "+Y+" cls (spec: "+p+" cls)\n",v+="Broken Bursts: "+U+"%  ("+N+" / "+L+")\n",d("brst/_s10 avg_per",T,{scl:"mediumtimes"}),d("brst/_s12 avg_tm",W,{scl:"mediumtimes"}),d("brst/_s14 avg_len",Y,{scl:"mediumtimes"}),d("brst/_s20 load_prc",parseInt(X),{scl:"mediumtimes"}),d("brst/_s30 total",L,{scl:"shorttimes"}),d("brst/_s32 brkn/share",U,{scl:"mediumtimes"}),a(),v},h.stop=function(){H=!1}}}(),domtool=function(){return function(a){function b(a){if(g=null,""!==a)try{return g=j.document.querySelector("#"+a)}catch(a){return null}}function c(a){var b,c;return"string"!=typeof a?a:""===a?g:null!==g&&(b=g.getElementsByClassName(a),b.length>0)?b[0]:null!==(c=j.document.getElementById(a))?c:(b=j.document.getElementsByClassName(a),b.length>0?b[0]:null)}function d(a,b){var c,d=a;for(c in b)if(void 0!==b[c]){var e=new RegExp("\\${"+c+"}","g");d=d.replace(e,b[c])}return d=d.replace(/[\${]+[\w]+[}]/g,"")}function e(a){for(var b=(a.childNodes,0);b<a.childNodes.length;b++){var c=a.childNodes[b];if(null!==c.firstChild&&e(c),null!==c.nodeName&&"SCRIPT"===c.nodeName.toUpperCase()&&(!c.type||"text/javascript"===c.type))if(c.src){var d=j.document.createElement("script");d.setAttribute("type","text/javascript"),d.src=c.src,j.document.head.appendChild(d)}else window.eval.call(window,c.innerHTML)}}var f=this,g=null,h=null,i="---",j=window;void 0!==a&&(void 0!==a.hostWnd&&(j=a.hostWnd),void 0!==a.wrapper_element_id&&b(a.wrapper_element_id)),f.setWrapperElement=function(a){return b(a)},f.getElmHandle=function(a){return c(a)},f.addClass=function(a,b){var d=c(a);if(null===d){target_element_in_addClass}var e=""+d.className;e.indexOf(b)>=0||(e+=" "+b,e=e.replace(/\s{2}/gm," "),d.className=e)},f.removeClass=function(a,b){var d=c(a);if(null===d){target_element_in_removeClass}var e=""+d.className;e.indexOf(b)<0||(e=e.replace(b,""),e=e.replace(/\s{2}/gm," "),e.length>0&&" "==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),d.className=""+e)},f.left=function(a,b){var d=c(a);if(null===d){target_element_in_left}if(void 0===b)return parseInt(d.offsetLeft);d.style.left=b+"px"},f.top=function(a,b){var d=c(a);if(null===d){target_element_in_top}if(void 0===b)return parseInt(d.offsetTop);d.style.top=b+"px"},f.width=function(a,b){var d=c(a);if(null===d){target_element_in_width}if(void 0===b){var e=d.getBoundingClientRect();return Math.round(e.width)}d.style.width=b+"px"},f.height=function(a,b){var d=c(a);if(null===d){target_element_in_height}if(void 0===b){var e=d.getBoundingClientRect();return Math.round(e.height)}d.style.height=b+"px"},f.zindex=function(a,b){var d=c(a);if(null===d){target_element_in_zindex}if(void 0===b)return parseInt(d.zIndex);d.style.zIndex=""+b},f.background=function(a,b){var d=c(a);if(null===d){target_element_in_background}if(void 0===b)return d.style.background;d.style.background=""+b},f.text=function(a,b){var d=c(a);if(null===d){target_element_in_text}if(void 0===b)return void 0!==d.innerText?d.innerText:void 0!==d.innerContent?d.innerContent:void 0!==d.innerHTML?d.innerHTML:"";void 0!==d.innerText?d.innerText=b:void 0!==d.innerContent?d.innerContent=b:void 0!==d.innerHTML&&(d.innerHTML=b)},f.empty=function(a){var b=c(a);if(null===b){target_element_in_empty}for(var d=0;b.firstChild&&d<1e4;)d++,b.removeChild(b.firstChild)},f.remove=function(a){var b=c(a);if(null===b){target_element_in_remove}f.empty(a),b.parentNode&&b.parentNode.removeChild(b)},f.cursor=function(a,b){var d=c(a);if(null===d){target_element_in_cursor}if(void 0===b)return d.style.cursor;d.style.cursor=""+b},f.bind=function(a,b,d){var e=c(a);if(null===e){target_element_in_bind}void 0!==d&&null!==d&&e.addEventListener(b,d)},f.findText=function(a,b){var d=c(a);if(null===d){target_element_in_findText}return(""+d.innerHTML).indexOf(b)>=0},f.html=function(a,b){var d=c(a);if(null===d){target_element_in_html}if(void 0===b)return d.innerHTML;d.innerHTML=""+b,e(d)},f.appendhtml=function(a,b){var d=c(a);if(null===d){target_element_in_appendhtml}if(void 0===b)throw"";var f=j.document.createElement("div");f.innerHTML=""+b;for(var g=0;g<100;){g++;var h=f.firstChild;if(e(d.appendChild(h)),f.children.length<=0)break}},f.getrect=function(a,b){var d=c(a);if(null===d){target_element_in_getrect}var e=d.getBoundingClientRect();e.left,b.scrollX,e.top,b.scrollX,e.width,e.height;return e},f.insertWrapperDiv=function(a,b,d,e,f,g){var h=c(a);if(null===h){target_element_in_insertWrapperDiv}var i=j.document.createElement("div");i.setAttribute("class",b),i.setAttribute("id",e),i.setAttribute("data-segnam",d),i.setAttribute("data-tag",g),i.setAttribute("data-segid",f);var k=null;return void 0!==h.childNodes[0]&&(k=h.childNodes[0]),h.insertBefore(i,k)},f.insertFIF=function(a){var b=c(a.target_element);if(null===b){target_element_in_insertFIF}var d=j.document.createElement("iframe");d.id=a.divID,d.setAttribute("id",a.divID),d.setAttribute("scrolling","no"),d.setAttribute("frameborder","0"),d.setAttribute("width",a.width),d.setAttribute("height",a.height),d.setAttribute("class",a.divClass),d.setAttribute("sandbox","allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-popups"),d.setAttribute("data-segnam",a.segmName),d.setAttribute("data-tag",a.tagname),d.setAttribute("data-segid",a.segmentID),d.src="javascript:void(0)",d.style.position="absolute",d.style.left="0",d.style.top="0",b.appendChild(d);var e="<html>";return e+="<body style='background:transparent; margin:0; '>",e+=a.preScript,e+=a.snippet,e+="</body>",e+="</html>",e+="",d.contentWindow._fb_frm_cont=e,d.src='javascript:window["_fb_frm_cont"]',d},f.insertSBF=function(a){var b=c(a.target_element);if(null===b){target_element_in_insertSBF}var d=j.document.createElement("iframe");return d.id=a.divID,d.setAttribute("scrolling","no"),d.setAttribute("frameborder","0"),d.setAttribute("width",a.width),d.setAttribute("height",a.height),d.setAttribute("class",a.divClass),d.setAttribute("sandbox","allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-popups"),d.setAttribute("data-segnam",a.segmName),d.setAttribute("data-tag",a.tagname),d.setAttribute("data-segid",a.segmentID),d.style.position="absolute",d.style.left="0",d.style.top="0",d.src=a.sbxUrl,b.appendChild(d),d},f.insertIDScript=function(a,b,d){var e=c(a);if(null===e){target_element_in_insertIDScript}var f=j.document.createElement("script");f.setAttribute("type","text/javascript"),f.setAttribute("id",b),f.text=d;var g=null;return void 0!==e.childNodes[0]&&(g=e.childNodes[0]),e.insertBefore(f,g)},f.getAllTemplates=function(a,b){function c(a){var b="forebase_template(",c=")",d="{{{",e="}}}",f=""+a,g="",h=f.indexOf(b);if(h<0)return null;g=f.substring(0,h);var i=h+b.length;f=f.substring(i);var j=f.indexOf(c);if(j<0)return null;var k=f.substring(0,j);f=f.substring(j+c.length);var l=f.indexOf(d);if(l<0)return null;f=f.substring(l+d.length);var m=f.indexOf(e);if(m<0)return null;var n=f.substring(0,m);return f=f.substring(m+e.length),g+=f,{name:k.replace(/\s+/g,""),content:n,remainder:g}}var d=""+a;d=d.replace(/(\r\n|\n|\r)/gm," "),d=d.replace(/\s+/g," ");for(var e=""+d,f=0;f<100;){f++;var g=c(e);if(null===g)break;b[g.name]=g.content,e=g.remainder}},f.bringTextFile=function(a){function b(a){var b=a.target;200===b.status&&(h=b.responseText,i="ok")}function c(){i="error"}h=null,i="...";var d=null;if(window.XMLHttpRequest?d=new XMLHttpRequest:window.ActiveXObject&&(d=new ActiveXObject("Microsoft.XMLHTTP")),null===d)throw"could not open XMLHttpRequest obj";d.open("GET",a,!0),d.timeout=3e3,d.onload=b,d.onerror=c,d.ontimeout=c,i="...",d.send()},f.getStatus=function(){return i},f.getFile=function(){return h},f.insertTemplate=function(a,b,e){var f={status:"...",msg:"",err:null};try{var g=d(a,b),h=c(e);if(null===h){target_element_in_insertTemplate}var i=j.document.createElement("div");i.innerHTML=g;var k=null;return void 0!==h.childNodes[0]&&(k=h.childNodes[0]),h.insertBefore(i,k),f.status="ok",f}catch(a){return f.actualString=g,f.contElem=h,f.newElm=i,f.childNodeBefore=k,f.msg=""+a,f.err=a,f.status="error",f}},f.deployTemplate=function(a,b,e){var f=d(a,b),g=c(e);if(null===g){target_element_in_deployTemplate}g.innerHTML=f},f.deployStyle=function(a,b,c){if(null===j.document.head.querySelector("#"+a)){var d=j.document.createElement("style");d.type="text/css",d.id=a,d.innerHTML=b,c?j.document.head.insertBefore(d,j.document.head.childNodes[0]):j.document.head.appendChild(d)}},f.createDynamicSheet=function(a,b){if(null===j.document.head.querySelector("#"+a)){var c=j.document.createElement("style");c.type="text/css",c.id=a,c.innerHTML="."+a+" {"+b+"}",j.document.head.appendChild(c)}},f.deployJSlib=function(a,b){if(null===j.document.head.querySelector("#"+a)){var c=j.document.createElement("script");c.type="text/javascript",c.setAttribute("language","Javascript"),c.id=a,c.src=b,j.document.head.appendChild(c)}}}}(),deltalog=function(){return function(a){function b(){return"undefined"!=typeof console&&void 0!==console.log}function c(a){function b(a){function b(a){a.length<1||d.push(a)}for(var c,d=[],e=a,f=0,g=null;f<20;){if(f++,(g=e.indexOf("|"))<0){b(e);break}c=e.substring(0,g),b(c),g++,e=e.substring(g)}return d}g=b(a)}var d=this,e=a.startTime,f="";void 0!==a.env&&(f=a.env);var g=[],h=!1;c("");var i=b();d.setStartTime=function(a){e=a},d.setEnv=function(a){f=a},d.setDebugVars=function(a){void 0!==a.logFilter&&c(a.logFilter),void 0!==a.showTags&&!0===a.showTags&&(h=!0)},d.writex=function(a){function b(a){return""!==a.msg&&(void 0!==a.msg&&(null!==a.msg&&!0===i))}function c(a,b){function c(a,b){if(""===b)return!1;if("*"===b)return!0;var c=a.toLowerCase(),d=b.toLowerCase();return c.indexOf(d)>=0}for(var d=0;d<b.length;d++){if(!0===c(a,b[d]))return!0}return!1}if(""!==a.msg){if(void 0!==a.tgl&&!0===h)var d="  [tgl: "+a.prefix+"]  "+a.msg;else{if(!0!==b(a))return;var f;f=a.inst<10?"00"+a.inst:a.inst<100?"0"+a.inst:""+a.inst;var d="  ["+a.prefix+":"+f+"]  "+a.msg;if(!0!==c(d,g))return}var j=Date.now()-e,k=Math.floor(j/1e3),l=j-1e3*k;k=k<10?" "+k:""+k,l=0===l?"000":l<10?"00"+l:l<100?"0"+l:""+l;var m=k+"."+l;m+=""+d,console.log(m)}},d.debugAlert=function(a,b){if("dev"===f){var c="DEBUG ALERT !!!";if(void 0!==a&&(c+="\n\nCAPTION: "+a),"string"==typeof b.message)c+="\n\nMESSAGE:\n\n"+b.message,void 0!==b.stack&&(c+="\n\nSTACK:\n\n"+b.stack);else if("string"==typeof b)c+="\n\nMESSAGE:\n\n",c+=b;else try{var d=JSON.stringify(b);c+="\n\nDATA:\n\n",c+=d}catch(a){c+="(data not available)"}window.alert(c)}}}}(),bootlog=function(){function a(a,b){return{ts:a,text:b}}return function(b,c){var d=this;this.origTime=0+b,this.lastTime=b,this.gapTime=null,void 0!==c&&(this.gapTime=c),this.logBuffer=[],this.addLogLine=function(b,c){if(void 0!==c)var e=c;else var e=Date.now();var f=new a(e,b);d.logBuffer.push(f)},this.setOrigTm=function(a){d.origTime=a},this.getLogPrint=function(){function b(a){var b=a-d.origTime,c=Math.floor(b/1e3),e=b-1e3*c;return c=c<10?" "+c:""+c,e=0===e?"000":e<10?"00"+e:e<100?"0"+e:""+e,c+"."+e}function c(){if(!(d.logBuffer.length<2)&&null!==d.gapTime){var b=[],c=d.logBuffer[0],e=c.ts;b.push(c);for(var f=1;f<d.logBuffer.length;f++){var g=d.logBuffer[f],h=g.ts-e;e=g.ts,h>d.gapTime&&b.push(new a(g.ts,"<<<<< gap "+h+" ms <<<<<")),b.push(g)}return b}}for(var e=c(),f="",g=0;g<e.length;g++){var h=e[g];f+=b(h.ts)+"  |  "+h.text+"\n"}return f+"\n\n"}}}(),lscleanup=function(){var a=function(){if(this.flagKeyName="fb_cleanup_00",this.startTime=1462451028e3,this.windowLength=30,!0!==this.testLocalStorage())return void(this.status="ls_not_available");this.status="no_need";var a=Date.now(),b=this.startTime,c=b+864e5*this.windowLength;if(!(a<b||a>c)){if(null===this.readItem(this.flagKeyName)){this.status="...",this.lsDir=[];for(var d=0,e=localStorage.length;d<e;++d){var f={};f.key=this.getKeyByIdx(d),f.value=this.readItem(f.key),f.flag=!1,this.lsDir.push(f)}this.process(this);var g={time:Date.now()};this.writeItem(this.flagKeyName,JSON.stringify(g)),this.status="ok"}}};return a.prototype.getStatus=function(){return this.status},a.prototype.process=function(a){this.selectItems("fb_client"),this.selectItems("fb_cache_"),this.selectItems("plcmSynchro"),this.selectItems("fb_expreg"),this.selectItems("fb_visitdata"),this.selectItems("fb_dtoinfo"),this.selectItems("fb_debug_vars"),this.invertSelection(),this.removeSelected()},a.prototype.testLocalStorage=function(){try{window.localStorage.setItem("testLS_Key","testLS_Value");if("testLS_Value"!==window.localStorage.getItem("testLS_Key"))throw"LS_test_failed";return window.localStorage.removeItem("testLS_Key"),!0}catch(a){this.status="error"}return!1},a.prototype.selectItems=function(a){for(var b=[],c=0;c<this.lsDir.length;c++){var d=this.lsDir[c];d.key.indexOf(a)<0||(d.flag=!0,b.push(d))}return b},a.prototype.invertSelection=function(){for(var a=0;a<this.lsDir.length;a++){var b=this.lsDir[a];!0===b.flag?b.flag=!1:b.flag=!0}},a.prototype.getSelected=function(){for(var a=[],b=0;b<this.lsDir.length;b++){var c=this.lsDir[b];!0===c.flag&&a.push(c)}return a},a.prototype.removeSelected=function(){for(var a=0;a<this.lsDir.length;a++){var b=this.lsDir[a];!0===b.flag&&this.removeItem(b.key)}},a.prototype.getKeyByIdx=function(a){try{return window.localStorage.key(a)}catch(a){this.status="error"}return null},a.prototype.readItem=function(a){try{return window.localStorage.getItem(a)}catch(a){this.status="error"}return null},a.prototype.writeItem=function(a,b){try{window.localStorage.setItem(a,b)}catch(a){this.status="error"}},a.prototype.removeItem=function(a){try{window.localStorage.removeItem(a)}catch(a){this.status="error"}},a.prototype.clearAll=function(){try{window.localStorage.clear()}catch(a){this.status="error"}},a}(),an_buffer=function(){return function(a){function b(a,b,c){var d=i(a,b,c);if(null!==d&&k.push(d),void 0!==j){var e=j(a,b,c);null!==e&&k.push(e)}}function c(a,b,c){var d=i(a,b,c);if(null!==d&&h.trackhub.sendEvent(d.domain,d.event,d.data,d.evOpts),void 0!==j){var e=j(a,b,c);null!==e&&h.trackhub.sendEvent(e.domain,e.event,e.data,e.evOpts)}}function d(){0!==k.length&&(h.trackhub.sendEventList(k),k=[])}function e(a,b){l.push({chn:a,obj:b})}function f(){0!==l.length&&(h.accbeam.fireList(l),l=[])}var g=this,h=a.comps,i=a.assembleFunct,j=a.assembleFunctX,k=[],l=[],m=!1;g.seb=function(a,c,d){return b(a,c,d)},g.sed=function(a,b,d){return c(a,b,d)},g.sap=function(a,b){return e(a,b)},g.rap=function(){d(),f(),m=!0},g.wes=function(){return m}}}(),an_perfchck=function(a,b,c){return function(b){function d(a){k.logger.writex({msg:a,prefix:"an_perfchck",inst:x})}function e(){function a(a,b){var c="";c+="Performance Report for: "+m.placementId+" (base)\n\n",c+="parcels - total packs: "+b.totalPacks+"\n",c+="parcels - pack rate: "+b.packRate+"\n",c+="parcels - fail rate: "+b.failRate+"\n",c+="parcels - avg transit time: "+b.avgTransTime+"\n\n",c+=a,k.mailmaster.send("PERF_REPORT_SHORT","performance",c,i.debugStrings)}var b="",c=k.parcels.getPerfData();b+="\n\n------------------ Heart Report ------------------\n\n",b+=k.heart.getPerfReport(),a(b,c),k.trackhub.sendEvent("performance","/parcels/packrate",c.packRate,{scl:"mediumtimes"}),k.trackhub.sendEvent("performance","/parcels/failrate",c.failRate,{scl:"cycleCount"}),k.trackhub.sendEvent("performance","/parcels/transtime",c.avgTransTime,{scl:"shorttimes"})}function f(a){var b=new c,d=0,e=b.printObj(d,a.qvParams),d=0,f=b.printObj(d,a.qvPassBy),j="";l.addLogLine("sending perf report #"+a.reportIdx),!0===u&&(j+="\n\n ------ Parcels Perf: ------ \n\n",j+=a.parcelsRep),!0===q&&(j+="\n\n ------ Placed Media: ------ \n\n",j+=a.pmRep),!0===t&&(j+="\n\n ------ Node Cnx Log Report: ------ \n\n",j+=a.ncnxRep),!0===o&&(j+="\n ------ Bd Driver Report: ------ \n\n",j+=a.bdDrvsRep),!0===r&&(j+="\n\n ------ Unit Log Report: ------ \n\n",j+=a.ulRep),!0===s&&(j+="\n\n ------ Scan Report: ------ \n\n",j+=a.sourceRep),j+="\n\n ------ QV Params: ------ \n",j+=e+"\n",j+="\n\n ------ QV PassBy: ------ \n",j+=f+"\n\n",j+="\n ------ Memory Report: ------ \n\n",j+=a.filesysRep,!0===n&&(j+="\n ------ Loader/Agent Boot Report  ------ \n\n",j+=l.bootLogger.getLogPrint()),!0===p&&(j+="\n ------ Heart Report: ------ \n\n",j+=a.heartRep),!0===v&&(j+="\n\n ------ Local Ban Report: ------ \n\n",j+=g()),!0===w&&(j+="\n\n ------ SrcSrv Report: ------ \n\n",j+=h());var m="PERF_REPORT_AGENT_"+a.reportIdx;k.mailmaster.send(m,"performance",j,i.debugStrings)}function g(){var a=k.mad_bs.getLBRep();return 0===a.length&&(a="No banned tags found\n\n"),a}function h(){return k.stageManager.getSrcSrvReport()}var i=this,j=Date.now(),k=b.comps,l=b.cllBks,m=b.bootParams,n=!0,o=!0,p=!0,q=!0,r=!1,s=!1,t=!0,u=!0,v=!1,w=!1;!0===a.dev&&(n=!0,o=!0,p=!0,!0,q=!0,r=!0,s=!0,t=!0,u=!0,v=!0,w=!0);var x=Math.round(999*Math.random());d();var y=10;!0===a.dev&&(y=5);i.execCmd=function(a){f(a)},i.tick=function(a){null!==j&&a-j>1e3*y&&(j=null,e())},k.heart.subscribe(i,100,"perfcheck",7,7)}}(config,0,textools),an_beamcannon=function(){return function(a){function b(a){if("string"==typeof a)return void f.unshift(a);if("object"!==_typeof2(a));else for(var b in a){var c=a[parseInt(b)];0!==c.length&&f.unshift(c)}}var c=this,d=a.comps,e=(a.cllBks,a.bootParams,200);void 0!==a&&"period"in a&&(e=a.period);var f=[];d.parcels.subscribe("beamCannon",function(a){var c=a.args;switch(a.cmd){case"fire":b(c.data)}}),c.tick=function(a){function b(a){var b=a;b.indexOf("?")<0?b+="?":b+="&",
b+="fbrndvar_"+Math.round(1e6*Math.random()),b+="="+Math.round(1e6*Math.random()),(new Image).src=b}0!==f.length&&b(f.pop())},d.heart.subscribe(this,e,"beamcannon",!1)}}(),an_eventconf={domains:{stage:{enabled:!0,siteID:"stage",reduc:1e3},stgexec:{enabled:!0,siteID:"stgexec",reduc:1e3},stgexec_l:{enabled:!0,siteID:"stgexec",reduc:2e3},stgexec_ll:{enabled:!0,siteID:"stgexec",reduc:5e3},units:{enabled:!0,siteID:"units",reduc:500},adposts:{enabled:!0,siteID:"adpost",reduc:1e3},segments:{enabled:!0,siteID:"segments",reduc:2e3},tags:{enabled:!0,siteID:"tags",reduc:1e3},srcadmin:{enabled:!0,siteID:"tags",reduc:8e3},performance:{enabled:!0,siteID:"performance",reduc:1e3},perf_low:{enabled:!0,siteID:"performance",reduc:8e3},alerts:{enabled:!0,siteID:"alerts",reduc:10},madevt_h:{enabled:!0,siteID:"madevt",reduc:1e3},madevt_m:{enabled:!0,siteID:"madevt",reduc:4e3},madevt_l:{enabled:!0,siteID:"madevt",reduc:8e3},lweb_low:{enabled:!0,siteID:"lweb",reduc:100},lweb_med:{enabled:!0,siteID:"lweb",reduc:10},lweb_hi:{enabled:!0,siteID:"lweb",reduc:5},fbdir_view:{enabled:!0,siteID:"fbdir",reduc:5e3},fbdir_click:{enabled:!0,siteID:"fbdir",reduc:1},fbdir_error:{enabled:!0,siteID:"fbdir",reduc:10},vast_x:{enabled:!0,siteID:"vast",reduc:1},vast_h:{enabled:!0,siteID:"vast",reduc:1e3},vast_l:{enabled:!0,siteID:"vast",reduc:5e3},quickv_h:{enabled:!0,siteID:"quickv",reduc:1e3},quickv_l:{enabled:!0,siteID:"quickv",reduc:3e3},gdpr_h:{enabled:!0,siteID:"gdpr",reduc:1e3},gdpr_l:{enabled:!0,siteID:"gdpr",reduc:4e3},bdchn_x:{enabled:!0,siteID:"bdchn",reduc:1},bdchn_h:{enabled:!0,siteID:"bdchn",reduc:1e3},bdchn_l:{enabled:!0,siteID:"bdchn",reduc:4e3}}},an_trackhub=function(a,b,c,d){return function(a){function e(a){k.logger.writex({msg:a,prefix:"an_trackhub",inst:o})}function f(a,b,c){q[a]=new i({enabled:!0,siteID:b,reduc:c})}function g(a,b,c,d){function f(a,b){if("dev"!==l.env)return!0;if("string"!=typeof j)return!0;if(""===j)return!0;var c=j.toLowerCase().split("|"),d=!1;return c.forEach(function(c){!0!==d&&(a.indexOf(c)>=0&&(d=!0),b.indexOf(c)>=0&&(d=!0))}),d}if(!0===f(a,b)){var g=q[a];if(void 0===g)return void e();!0===g.enabled&&g.fireEvent(b,c,d)}}function h(a){a.forEach(function(a){g(a.domain,a.event,a.data,a.evOpts)})}function i(a){function d(a){function b(a,b){var c=100*a/n;return c=Math.round(c*b),c<1&&(c=1),c>1e5&&(c=1e5),c}function c(a){var b=Math.round(a);if(b<=1)return!1;var c=1e6,d=Math.round(Math.random()*c),e=Math.round(c/b),f=d+e;f>c&&(f=c,d=f-e);Math.random();Math.random(),Math.random(),Math.random();var g=Math.round((1-Math.random())*c);return g>=f||g<d}var d=b(a,1),e=b(a,30),f=b(a,1/30),g=b(a,1/300),h=1;return void 0!==l.env&&"dev"===l.env&&(d=1,e=1,f=1,g=1,h=1),{defReduc:d,defSkip:c(d),lowResReduc:e,lowResSkip:c(e),medResReduc:f,medResSkip:c(f),hiResReduc:g,hiResSkip:c(g),maxResReduc:h,maxResSkip:c(h)}}function e(b,c,d){function e(a){var b={totalizer:!1,specCaseStr:a,totalCaseStr:""},c=a.indexOf("${"),d=a.indexOf("}$");if(c<0)return b;if(d<0)return b;var e=a.substring(c,d+2),f=e.indexOf("|");if(f<0)return b;var g=e.substring(2,f),h=e.substring(f+1,e.length-2);return b.totalizer=!0,b.specCaseStr=a.replace(e,g),b.totalCaseStr=a.replace(e,h),b}function g(b,c,d){var e=f(b,c,d);if(!0!==e.effSkip){var g={group:"ev_cnt",event:a.siteID,ver:100,data:{pat:e.path,cap:e.caption,cnt:e.cnt,attch:e.attch}};k.accbeam.fire(p,g)}}var h=e(b);!0===h.totalizer&&g(h.totalCaseStr,c,d),g(h.specCaseStr,c,d)}function f(a,d,e){function f(a){function b(a){try{var b=100/parseInt(a);if("number"!=typeof b)throw 1;return b<1&&(b=1),b>100&&(b=100),b}catch(a){}return 1}return(new c).whirliGig(b(a))}function g(a){return null!==a&&"object"===_typeof2(a)}function i(a){return(new c).printObj(0,a)}function j(a,b){function c(a){var b={changed:!1,pathStr:a.pathStr,dataStr:a.dataStr};if("/"!==b.dataStr.charAt(0))return b;var c=""+a.pathStr,d=""+a.dataStr;d=d.substring(1);var e=d.indexOf("/");return e<0?(b.changed=!1,b.pathStr=c,b.dataStr=d,b):(c+="/"+d.substring(0,e),d=d.substring(e),b.changed=!0,b.pathStr=c,b.dataStr=d,b)}for(var d={changed:!1,pathStr:a,dataStr:b},e=!1,f=50;f>0&&(f--,d=c(d),!0===d.changed);)e=!0;return{changed:e,newFldStr:d.pathStr,newDataStr:d.dataStr}}var k={},l=a,m=""+d;if(void 0!==d){var n=j(l,m);!0===n.changed&&(l=n.newFldStr,m=n.newDataStr)}var o="def",p="",q=0,r=!0,s=1,t="",u="";if(void 0!==e&&(void 0!==e.scl&&(p=e.scl),void 0!==e.res&&("lo"===e.res?o="lores":"med"===e.res?o="medres":"hi"===e.res?o="hires":"max"===e.res&&(o="maxres")),void 0!==e.exp&&(s=e.exp),void 0!==e.txt&&(t=e.txt),void 0!==e.att)){var v=!0;void 0!==e.ard&&(v=f(e.ard)),!0===v&&(u=!0===g(e.att)?i(e.att):e.att)}switch(o){case"def":q=h.defReduc,r=h.defSkip;break;case"lores":q=h.lowResReduc,r=h.lowResSkip;break;case"medres":q=h.medResReduc,r=h.medResSkip;break;case"hires":q=h.hiResReduc,r=h.hiResSkip;break;case"maxres":q=h.maxResReduc,r=h.maxResSkip}var w;if(""!==p){var x=b.getRangeData(m,p);w="_i"+x.index+" ["+x.rangeL+" , "+x.rangeH+"]",1!==s&&(w+=" _x["+s+"]"),t.length>0&&(w+=" "+t)}else w=m;return"/"!==l.charAt(0)&&(l="/"+l),k.path=l,k.caption=w,k.cnt=q,k.attch=u,k.effSkip=r,k}var g=this;g.enabled=a.enabled;var h=d(a.reduc);g.fireEvent=function(a,b,c){e(a,b,c)}}var j="perf|tags",k=a.comps,l=(a.cllBks,a.bootParams),m=d,n=l.bstfct,o=Math.round(999*Math.random());e();var p="trackhub";k.accbeam.register(p,1),k.parcels.subscribe("trackhub",function(a){var b=a.args;switch(a.cmd){case"addDomain":f(b.domainID,b.siteID,b.reduc);break;case"sendEvent":g(b.domain,b.event,b.data,b.evOpts);break;case"sendEventList":h(b.eventList)}});var q={};for(var r in m.domains){var s=m.domains[r];!0===s.enabled&&f(r,s.siteID,s.reduc)}}}(0,antools,textools,an_eventconf),an_accbeam=function(a){return function(b){function c(a){k.logger.writex({msg:a,prefix:"accbeam",inst:r})}function d(){i(Date.now(),!0),window.removeEventListener("unload",d)}function e(a,b){function d(a){var b=1e7;if(a<1)return!0;var c=Math.round(Math.random()*b),d=Math.round(b/a),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return!(f>=e)&&!(f<c)}var e=Math.round(100*b/m);e<1&&(e=1);var f={chanID:a,reduc:e,flag:!1};f.flag=d(f.reduc),G.push(f),c()}function f(a){a.forEach(function(a){g(a.chn,a.obj)})}function g(a,b){function d(a){var b=a.chnObj,d=JSON.parse(JSON.stringify(a.dataObj));d.reduc=b.reduc,d.pidx=a.pingIdx,d.ts=a.ts+a.pingIdx,c(),B.push(d);var e=JSON.stringify(d);C+=e.length+4}if(void 0===a)throw"acc_channel_not_spec";var e=h(a);if(null===e)throw"unknown_acc_channel";if(!0===e.flag){d({ts:Math.floor(Date.now()-p),pingIdx:F,dataObj:b,chnObj:e}),F++}}function h(a){for(var b=0;b<G.length;b++){var c=G[b];if(c.chanID===a)return c}return null}function i(b,c){function d(a){var b={ver:s,ldmd:t,fltr:u,tcase:n,tgrp:o,plcmID:v,locus:w,clntID:"",pageID:"",burst:a},c=JSON.stringify(b);return encodeURIComponent(c)}function e(b,c){function d(a){}function e(){}function f(){}if(!0!==a.dev||!0===l.debugVars.enDevACC){var g=null;window.XMLHttpRequest?g=new XMLHttpRequest:window.ActiveXObject&&(g=new ActiveXObject("Microsoft.XMLHTTP")),null!==g&&(g.open("POST",b),g.timeout=6e3,g.onload=d,g.onerror=e,g.ontimeout=f,g.send(c))}}if(0!==B.length){var f=!1;if(C>=a.accbeam.maxTransfStringLen&&(f=!0),!0===c&&(f=!0),!(!0!==f&&b-D<a.accbeam.initDel)&&(b-E>=a.accbeam.burstPer&&(f=!0),!0===f)){var g=d(B);e(A,g),E=b,B=[],C=0}}}var j=this,k=b.comps,l=(b.cllBks,b.bootParams),m=l.bstfct,n=l.testCase,o=l.testGroup,p=l.startTime,q=l.secProt,r=Math.round(999*Math.random());c();var s=l.versionTag,t=l.ldmd,u=l.filterTag,v=l.placementId,w=l.locus,x="http://";!0===q&&(x="https://");var y="0";void 0!==l.opdomId&&(y=l.opdomId);var z=a.resourceLocations.accServerBase,A=x+z.replace("${number}",y)+"/receiver/postreportstr",B=[],C=0,D=Date.now(),E=0,F=0,G=[];window.addEventListener("unload",d),k.parcels.subscribe("accbeam",function(a){var b=a.args;switch(a.cmd){case"register":e(b.chanID,b.reduc);break;case"fireList":f(b.pingList);break;case"fire":g(b.chanID,b.dataObj)}}),j.tick=function(a){i(a,!1)},k.heart.subscribe(j,100,"accbeam",9,9)}}(config),an_mailmstr=function(a,b,c){return function(d){function e(a){y.logger.writex({msg:a,prefix:"mailmaster",inst:B})}function f(a){U=a,V=!0}function g(){if(null===U)return"NA";for(var a="",b=0;b<U.length;b++){a+="[ "+U[b].partId+" ]  "}return a}function h(a){for(var b=0;b<a.length;b++){var c=JSON.parse(JSON.stringify(a[b]));c.sendThisOne=!1;var d=parseInt(c.reduc);if(!0!==isNaN(d)&&d>=1){var e=1e4;Math.floor(Math.random()*e)<e/d&&(c.sendThisOne=!0)}c.useCount=0,c.sentLast=!1,S.push(c)}}function i(a){function b(a,b,c){try{var d=a.message;void 0!==d&&(d="NA");var f="******** Exception during debmail assembly ******** \n\n";f+="Message--\x3e  "+d+"\n\n",void 0!==a.stack&&(f+="Stack:\n",f+=a.stack.toString()+"\n\n");var g={};g.from=b,g.event=c,g.debugStrings=null,g.textElements=q(b,c,f),L.push(g),e()}catch(a){void 0!==C&&C.sendEvent("alerts","mailmaster","can't assemble error mail (_send)")}}var c=a.from,d=a.subject,f=a.text,g=a.debugStrings,h=a.sreduc;if(e(),0!==S.length){!0===J&&(J=!1,j("grlInfo",u()),j("envInfo",v()));try{var i=f;f.length>K&&(i=f.substring(0,K)+" ... \n\n ***** truncated text, original length: "+f.length+" *****");var k={};k.from=c,k.event=d,k.debugStrings=g,k.sreduc=h,k.textElements=q(c,d,i),L.push(k)}catch(a){b(a,c,d)}}}function j(a,b){var c={name:""+a,text:""+b};I.push(c)}function k(a){for(var b="",c=0;c<I.length;c++){var d=I[c];"*"!==a&&d.name!==a||(b+=d.text)}return b}function l(a){j(a.name,a.text),R=!0}function m(a){switch(M){case"INIT":if(0===S.length)break;M="READY";break;case"READY":if(0===L.length)break;r(L.shift())}}function n(a){switch(O){case"INIT":O="READY";break;case"READY":if(0===N.length)break;w(N.shift()),P=a,O="HOLDOFF";break;case"HOLDOFF":if(a-P<b.analytics.emailHoldOff)break;O="READY"}}function o(a){switch(Q){case"INIT":Q="READY";break;case"READY":if(!0===R){R=!1,Q="SEND_MON";break}break;case"SEND_MON":i({from:"MAIL_MASTER",subject:"monitor",text:"This email is sent once per session when all common params have been received",debugStrings:null}),Q="READY"}}function p(a){if(null===F&&void 0!==y.nodemanager){var b=y.nodemanager.getCMPData();if(null===b)return;F=b}if(null===E&&void 0!==y.blockdet){var c=y.blockdet.getStatus();if(null===c)return;E=c}}function q(a,b,d){var e=(new c,Date.now()-D),f=Math.round(e/1e3)+"."+e%1e3,h=(new Date).toUTCString(),i="\n============= DEBUG REPORT =============\n\n\n";i+="From--\x3e  "+a+"\n",i+="Event--\x3e  "+b+"\n\n",i+="Locus:  "+A.locus+"\n\n",i+="Utc Time:  "+h+"\n",i+="Rel Time:  "+f+"\n\n",i+="ClientID:  "+A.clientID+"\n",i+="ImpID:  "+A.imprID+"\n",i+="Test Case:  "+A.testCase+"\n",i+="Test Group:  "+A.testGroup+"\n",i+="Active Partitions:  "+g()+"\n",i+="CtxId:  "+A.ctxId+"\n",i+="Confined:  "+(A.confined?"YES":"NO")+"\n\n";var j="---";return!0===E?j="YES":!1===E&&(j="NO"),i+="Ad Blocker: "+j+"\n\n",i+="CMP: ",null===F?i+="Not Avail.\n\n":"ok"!==F.status?i+="Failed\n\n":(i+="OK\n",i+="  Appl: "+(!0===F.gdprApplies?"YES":"NO")+"\n",i+="  Str: "+F.consentString+"\n\n"),i+=k("envInfo")+"\n",i+=k("grlInfo")+"\n\n",bodyText="\n\n\n",bodyText+=d,bodyText+="\n\n\n\n",{headerText:i,bodyText:bodyText}}function r(a){for(var b=0;b<S.length;b++)try{var c=S[b],d=!1,f="error";if(!0!==c.enabled)continue;if(void 0===a.sreduc&&!0!==c.sendThisOne)continue;if("*"===c.filter)f="*";else{if(c.useCount>=c.multiple){if(!0===c.sentLast)continue;d=!0,c.sentLast=!0}var g=a.textElements.headerText,h=a.textElements.bodyText,i=s(g,h,c.filter);if("send"!==i.status)continue;f=i.matchCond}T+=1,e();var j=c.reduc;void 0!==a.sreduc&&(j=a.sreduc),t(a,c.account,f,j,d,T),c.useCount+=1}catch(a){void 0!==C&&C.sendEvent("alerts","mailmaster","can't assemble emails (_tryAllDebMailChs)")}}function s(a,c,d){function e(a,c,d){var e={status:"all_matched",matchedTerms:""};if(void 0===d)return e;if("*"===(d=d.replace(/\s+/g,"")))return e;if(""===d)return e;var f=a+c;f=f.substring(0,b.analytics.emailTextCheckMax),f=f.toLowerCase().replace(/\s/g,"");for(var g=d.toLowerCase().split("&"),h=0;h<g.length;h++){var i=g[h];if(f.indexOf(i)<0)return e.status="failed",e}return e.matchedTerms=g.join(" & "),e}var f={status:"do_not_send",matchCond:""};if("undefined"===d)return f;if(""===d)return f;var g=e(a,c,d);return"all_matched"!==g.status?f:(f.status="send",f.matchCond=g.matchedTerms,f)}function t(a,b,c,d,f,g){var h="i: "+A.imprID.substring(4,7)+" "+g;h+="-"+A.testCase+"-"+(E?"Y":"N")+"  -    c: "+A.clientID.substring(27,30),h+="    -     [ "+A.locus+" ]     -      "+a.from+"   -    "+a.event,h+="    -   mtag: "+W+"    -   r: "+d,!0===f&&(h+="  (more...)");var i=a.textElements.headerText;i+='Filter String:  "'+c+'"\n',i+="Reduction:  "+d+"\n",void 0!==a.debugStrings&&null!==a.debugStrings&&(i+="\n\n\n---- Debug Log: ----\n\n"+a.debugStrings.join("\n")+"\n\n"),i+=a.textElements.bodyText;var j={from:a.from,to:b,subject:h,text:i};N.push(j),e()}function u(){var a=A.visitData,b=A.isNewUser,c=(new Date,""),c="This Version Tag: "+a.ltstVerTag+", Previous Version Tag: "+a.preVerTag+", Version Folder: "+A.versionFolder+"\n\n";return c+="New User: "+(b?"YES":"NO")+"\n",c+="New Visit: "+(a.newVisit?"YES":"NO")+"\n\n",c+="Visit Nbr: "+a.totalVisits+"\n",c+="Total Clicks: "+a.totalClicks+"\n\n",c+="This Visit Tm: "+new Date+"\n",c+="Last Visit Tm: "+new Date(a.lastVisitTime)+"\n\n",c+="Visits Last 5 Min: "+a.sessCount5Min+"\n",c+="Visits Last Hour: "+a.sessCountHour+"\n",c+="Visits Last 24 hrs: "+a.sessCountDay+"\n",c+="Visits Last Month: "+a.sessCountMonth+"\n\n",c+="Host Page URL: "+A.hostPageUrl+"\n",c+="Host Page Title: "+A.hostPageTitle+"\n\n",c+="Screen Width: "+z.genWinInfo().screenWidth+"\n",c+="Screen Height: "+z.genWinInfo().screenHeight+"\n"}function v(){var a=A.envInfo;return"Browser name: "+a.browserName+"\nFull version: "+a.fullVersion+"\nMajor version: "+a.majorVersion+"\nOSName: "+a.OSName+"\n\nUserAgent: "+a.userAgent+"\n"}function w(b){var c="";c+="Id="+encodeURIComponent(b.to)+"&",c+="subject="+encodeURIComponent(b.subject)+"&",c+="value="+encodeURIComponent(b.text);var d={method:"POST",url:H,data:c,onSucc:function(a){},onFail:function(){},options:{withCredentials:!1,contentType:"application/x-www-form-urlencoded"}};new a(d);e(),void 0!==C&&C.sendEvent("alerts","mailmaster","/mails sent/"+A.locus+"/"+b.from)}var x=this,y=d.comps,z=d.cllBks,A=d.bootParams,B=Math.round(999*Math.random());e();var C=y.trackhub,D=A.startTime,E=null,F=null,G="http://";!0===A.secProt&&(G="https://");var H=G+b.resourceLocations.debugEmailServer,I=[],J=!0,K=b.analytics.emailTextMax,L=[],M="INIT",N=[],O="INIT",P=0,Q="INIT",R=!1,S=[],T=0,U=null,V=!1;y.parcels.subscribe("sendmail",function(a){i(a)});var W="XX";y.parcels.subscribe("qvdata",function(a){h(a.debmail),W=y.quickVars.getParam("mailTag","NA")}),y.parcels.subscribe("partdata",function(a){f(a)}),y.parcels.subscribe("commontxt",function(a){l(a)}),x.tick=function(a){m(a),n(a),o(a),p(a)},y.heart.subscribe(x,200,"mailmaster",!1)}}(ajaxcall,config,textools),bd_pb_srvcall=function(a){return function(a,b,c){function d(){if(!window.XMLHttpRequest)return null;var a=new window.XMLHttpRequest;return void 0===a.responseType?null:(a.onreadystatechange=function(){a.readyState===a.UNSENT||a.readyState===a.READYSTATE_UNINITIALIZED?n.initStatus=a.status:a.readyState===a.OPENED||a.readyState===a.READYSTATE_LOADING?n.openStatus=a.status:a.readyState===a.HEADERS_RECEIVED||a.readyState===a.READYSTATE_LOADED?(n.hdrRcvdStatus=a.status,void 0!==a.getAllResponseHeaders&&(n.respHdrs=a.getAllResponseHeaders()),n.respHdrs=n.respHdrs.replace(/\r\n/g," | ")):a.readyState!==a.DONE&&a.readyState!==a.READYSTATE_COMPLETE||(n.doneStatus=a.status,a.status>=200&&a.status<300||304===a.status?g(""):h("from_readyState: "+a.status))},a)}function e(){if(!window.XDomainRequest)return null;var a=new window.XDomainRequest;return a.onload=g,a.onerror=h,a.ontimeout=i,a.onprogress=j,a}function f(){if(!window.ActiveXObject)return null;var a=new ActiveXObject("Microsoft.XMLHTTP");return a.onload=g,a.onerror=h,a.ontimeout=i,a.onprogress=j,a}function g(b){void 0!==a.onSucc&&a.onSucc(p,b,n)}function h(b){void 0!==a.onFail&&a.onFail(p,b,n)}function i(b){void 0!==a.onFail&&a.onFail(p,b,n)}function j(b){void 0!==a.onProgress&&a.onProgress(p,b,n)}function k(a,b){return"string"==typeof b&&b.length>=0?a+"?"+b:a}var l=b,m=c,n={initStatus:"---",openStatus:"---",hdrRcvdStatus:"---",doneStatus:"---",respHdrs:"---"},o="XHR",p=d();if(null===p&&(o="XDR",p=e()),null===p&&(o="AXO",p=f()),null===p)throw o="NA","cannot_create_xhr_obj";this.getAjxObjType=function(){return o};var q={};void 0!==a.options&&(q=a.options);var r=a.url;if("GET"===a.method&&void 0!==a.data&&(r=k(a.url,a.data)),p.open(a.method,r),p.timeout=3e3,"AXO"!==o){var s=!0;void 0!==q.withCredentials&&!0!==q.withCredentials&&(s=!1),p.withCredentials=s,void 0!==q.customHeaders&&q.customHeaders.forEach(function(a,b){p.setRequestHeader(b,a)}),void 0!==q.preflight&&!0===q.preflight&&p.setRequestHeader("X-Requested-With","XMLHttpRequest");var t="text/plain";void 0!==q.contentType&&(t=q.contentType),p.setRequestHeader("Content-Type",t)}"POST"===a.method&&void 0!==a.data?p.send(a.data):p.send();var u={method:a.method,effUrl:r,data:a.data,options:q,effContentType:t};l("srvCall_Actual",u),m("srvCall_Actual: "+JSON.stringify(u))}}(),bd_pb_jsonc=function(a){return function(b){function c(a){if(void 0!==p&&null!==p){try{p(a,k)}catch(d){n(f,"/_s90 call_error","driver_exec - code:ko4Ygg&n msg: "+d.message);var b="Message:  ";b+=d+"\n\n",void 0!==d.stack&&(b+="\nStack:\n",b+=d.stack.toString()+"\n\n");var c={server_response:a,errString:b};o("bdrv_err_resp",c,"Specific Info")}var d=document.getElementById(e.scriptID);null!==d&&h.removeChild(d)}}function d(d,e){function g(a){var b=a.target;if(200===b.status){try{if(""===b.responseText)throw"empty_server_response";var d,e=o(b.responseText,q);d=!0===i?JSON.parse(e):e}catch(a){n(f,"/_s90 call_error","driver_resp - code:o34HenK23 - msg:"+a.message)}c(d)}}function h(){n(f,"/_s90 call_error","xhr_resp - code:894GhewT5s")}function k(){n(f,"/_s90 call_error","xhr_timeout - code:5Ji9wEjd7G")}function o(a,b){if(void 0===b)return a;if(null===b)return a;if(a.indexOf(b)<0)return a;var c=a.replace(b,""),d=c.indexOf("("),e=c.lastIndexOf(")");return c.substring(d+1,e)}var p=null;if(window.XMLHttpRequest?p=new XMLHttpRequest:window.ActiveXObject&&(p=new ActiveXObject("Microsoft.XMLHTTP")),null===p)throw"could not open XMLHttpRequest obj";if(void 0!==e?p.open("POST",d):p.open("GET",d),p.timeout=a.bidding.toAjxCall,p.onload=g,p.onerror=h,p.ontimeout=k,!0===b.wcrd&&(p.withCredentials=!0),null!==l)for(var r in l)p.setRequestHeader(r,l[r]);!0===j&&p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.setRequestHeader("Content-Type",m),void 0!==e?p.send(e):p.send()}var e=this,f=b.bdChnID,g=b.secProt,h=b.bid_reqs_div_elm,i=!0,j=!1,k=null,l=null,m="text/plain";void 0!==b.settings&&null!==b.settings&&(void 0!==b.settings.unparsed&&!0===b.settings.unparsed&&(i=!1),void 0!==b.settings.preflight&&(j=b.settings.preflight),void 0!==b.settings.attachment&&(k=b.settings.attachment),void 0!==b.settings.customheaders&&(l=b.settings.customheaders),void 0!==b.settings.contenttype&&(m=b.settings.contenttype));var n=b.firePing,o=b.sendDbgMail,p=null,q=null;e.setCallback=function(a,b,d){if(void 0!==b){if(void 0===window[b]&&(window[b]={}),void 0===d)throw"inconsistent_callback_args";return window[b][d]=c,p=a,void(q=b+"."+d)}p=a;var e="_fbBdChnCbkDir";void 0===window[e]&&(window[e]={});var f=Math.round(999999999999*Math.random()),g="jc"+f;window[e][g]=c,q="window."+e+"."+g},e.getCallbackName=function(){return q},e.sendReq=function(a,b,c){function f(b,c){function d(b){var c=""+a;if(0===c.indexOf("http://"))return c.replace("http://","");if(0===c.indexOf("HTTP://"))return c.replace("HTTP://","");if(0===c.indexOf("https://"))return c.replace("https://","");if(0===c.indexOf("HTTPS://"))return c.replace("HTTPS://","");if(0===c.indexOf("//"))return c.replace("//","");throw{msg:"unknown uri structure",code:"WqH398Va"}}var e=!1;!0===c&&(e=!0),0===b.indexOf("https:")&&(e=!0),0===b.indexOf("HTTPS:")&&(e=!0);var d=d(b);return!0===e?"https://"+d:"http://"+d}void 0!==b&&e.setCallback(b),d(f(a,g),c)}}}(config),bd_pb_env=function(a){return function(b){function c(a){b.logger.writex({msg:a,prefix:"bd_pb_env",inst:f})}function d(a){var b=this,c=a.url,d=a.config,f=a.id,g=a.callback,h=a.loaded;a.adUnitCode;this.url=c,this.config=d,this.handlers={},this.id=f,this.loaded=h,this.cmd=[],this.push=function(a){if("function"!=typeof a)return void e.logError("Commands given to Renderer.push must be wrapped in a function");b.loaded?a.call():b.cmd.push(a)},this.callback=g||function(){b.loaded=!0,b.process()},this.getConfig=function(){return b.config},this.setRender=function(a){b.render=a},this.setEventHandlers=function(a){b.handlers=a},this.handleVideoEvent=function(a){var c=a.id,d=a.eventName;"function"==typeof b.handlers[d]&&b.handlers[d](),e.logMessage("Prebid Renderer event for id ".concat(c," type ").concat(d))},this.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(a){e.logError("Error processing Renderer command: ",a)}}}var e=this,f=Math.round(1e3*Math.random());c(),e.fireEvent=function(a,b){g.fireEvent(a,b)};var g=(b.truckID,b.master),h=b.bootParams,i=(b.pbEmVer,b.bdChnID),j=b.firePing,k=b.sendDebugMail,l={},m=["criteo"],n={consentManagement:{cmpApi:"iab"},debug:!1,cookieSyncDelay:100,customPriceBucket:{},mediaTypePriceGranularity:{},priceGranularity:"medium",timeoutBuffer:200,enableSendAllBids:!0,bidderSequence:"random",bidderTimeout:3e3,pageUrl:h.hostPageUrl,publisherDomain:h.hostDomain,userSync:{pixelEnabled:!0,syncDelay:3e3,syncEnabled:!0,syncsPerBidder:5}},o={BANNER:"banner",VIDEO:"video",NATIVE:"native"},p=b.imports,q=(b.impBuffer,b.bidsRequested),r=b.drvOpts,s=b.drvOpts.pbbc,t={objectType_object:"object",objectType_string:"string",objectType_number:"number",t_Arr:"Array",t_Str:"String",t_Fn:"Function",t_Numb:"Number",toString:Object.prototype.toString},u=0,v={},w="_fb_bdscr",x=document.getElementById(w);if(null===x){var y=document.createElement("div");y.id=w,document.body.appendChild(y),x=document.getElementById(w)}var z={info:[],msgs:[],warnings:[],errors:[]};e.getDriverLogs=function(){return z};var A=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getPbEmulVers=function(){return"_fbpb_"+h.versionFolder},this.createNewAdapter=function(a){function b(a){function b(a){e=a}function c(){return e}function d(){}var e=a;return{callBids:d,setBidderCode:b,getBidderCode:c}}return new b(a)},this.createBid=function(a,b){return{bidderCode:s,ad:"\x3c!-- ad markup should go here --\x3e",cpm:0,currencyCode:r.currCode,statusCode:a}},this.addBidResponse=function(a,b){p.addOneBid(a,b)},this.getBidRequest=function(a){var b=null;return q.forEach(function(c){null===b&&c.bidId===a&&(b=c)}),b},this.getAllBidsRequested=function(){return q},this.getBidderRequestAllAdUnits=function(a){var b={};return b.bids=[],q.forEach(function(a){var c={};c.bidId=a.bidId,c.bidder=a.bidder,c.placementCode=a.placementCode,c.bidderRequestId=a.bidderRequestId,c.params=a.params,c.requestId=a.requestId,c.sizes=a.sizes,c.unitFbxID=a.unitFbxID,c.unitName=a.unitName,b.bids.push(c)}),b},this.getBidIdParameter=function(a,b){return b&&b[a]?b[a]:""},this.logInfo=function(a){c(),z.info.push(a),j(i,"/_s45 drv_log/_s10 info",a)},this.logMessage=function(a){c(),z.msgs.push(a),j(i,"/_s45 drv_log/_s20 messages",a)},this.logWarn=function(a){c(),z.warnings.push(a),j(i,"/_s45 drv_log/_s30 warnings",a)},this.logError=function(a,b){c(),z.errors.push(a+" - code: "+b),j(i,"/_s45 drv_log/_s40 errors",a)},this.sndMsgEvt=function(a,b,d){c()},this.addStashObject=function(a,b){return p.addStashObject(a,b)},this.sendDbgMail=function(a,b,c){k(a,b,c)},this.trackCall=function(a){p.trackCall(a)},this.jsonCaller=function(b,c){var d={bdChnID:i,secProt:h.secProt,bid_reqs_div_elm:x,settings:b,firePing:j,sendDbgMail:e.sendDbgMail};return new a(d)},this.loadScript=function(a,b,c){function d(a,b){var c=document.createElement("script");c.type="text/javascript",c.async=!0,b&&"function"==typeof b&&(c.readyState?c.onreadystatechange=function(){"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onreadystatechange=null,b())}:c.onload=function(){b()}),c.src=a;var d=document.getElementsByTagName("head");d=d.length?d:document.getElementsByTagName("body"),d.length&&(d=d[0],d.insertBefore(c,d.firstChild))}if(!c)return void d(a,b);v[a]?b&&"function"==typeof b&&(v[a].loaded?b():v[a].callbacks.push(b)):(v[a]={loaded:!1,callbacks:[]},b&&"function"==typeof b&&v[a].callbacks.push(b),d(a,function(){v[a].loaded=!0;try{for(var b=0;b<v[a].callbacks.length;b++)v[a].callbacks[b]()}catch(a){e.logError("Error executing callback","adloader.js:loadScript",a)}}))},this.loadExternalScript=function(a,b){function c(a){var b=document.head,c=null;return void 0!==b.childNodes[0]&&(c=b.childNodes[0]),b.insertBefore(a,c)}if(!b||!a)return!1;if(m.indexOf(b)<0)return!1;if(void 0!==l[a])return!1;var d=document.createElement("script");return d.type="text/javascript",d.async=!0,d.src=a,c(d),l[a]=!0,!0},this.getDNT=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},this.getOrigin=function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},this.replaceTokenInString=function(a,b,c){return e._each(b,function(b,d){b=void 0===b?"":b;var e=c+d.toUpperCase()+c,f=new RegExp(e,"g");a=a.replace(f,b)}),a},this.getUniqueIdentifierStr=function(){return""+ ++u+Math.random().toString(16).substr(2)},this.generateUUID=function(a){function b(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)}return b()},this.getBidIdParamater=function(a,b){return b&&b[a]?b[a]:""},this.tryAppendQueryString=function(a,b,c){return c?a+=b+"="+encodeURIComponent(c)+"&":a},this.parseQueryStringParameters=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+"="+encodeURIComponent(a[c])+"&");return b},this.formatString=function(a,b){var c,d=a;for(c in b)if(void 0!==b[c]){var e=new RegExp("\\${"+c+"}","g");d=d.replace(e,b[c])}return d=d.replace(/[\${]+[\w]+[}]/g,"")},this.extend=function(a,b){return a=a||{},e._each(b,function(c,d){_typeof2(b[d])===t.objectType_object?a[d]=e.extend(a[d],b[d]):a[d]=b[d]}),a},this.parseSizesInput=function(a){var b=[];if(_typeof2(a)===t.objectType_string){var c=a.split(","),d=/^(\d)+x(\d)+$/i;if(c)for(var f in c)hasOwn(c,f)&&c[f].match(d)&&b.push(c[f])}else if(_typeof2(a)===t.objectType_object){var g=a.length;if(g>0)if(2===g&&_typeof2(a[0])===t.objectType_number&&_typeof2(a[1])===t.objectType_number)b.push(e.parseGPTSingleSizeArray(a));else for(var h=0;h<g;h++)b.push(e.parseGPTSingleSizeArray(a[h]))}return b},this.parseGPTSingleSizeArray=function(a){if(e.isArray(a)&&2===a.length&&!isNaN(a[0])&&!isNaN(a[1]))return a[0]+"x"+a[1]},this.getTopWindowLocation=function(){var a=window;try{a=window.top}catch(a){}return a.location},this.getTopWindowUrl=function(){var a="";try{a=e.getTopWindowLocation().href}catch(a){}if(""!==a)return a;try{a=document.referrer}catch(a){}return a},this.getTopWindowReferrer=function(){var a="";try{a=e.getTopWindowLocation().referrer}catch(a){}if(""!==a)return a;try{a=document.referrer}catch(a){}return a},this.inIframe=function(){try{return window.self!==window.top}catch(a){return!0}},this.createInvisibleIframe=function(){var a=document.createElement("iframe");return a.id=e.getUniqueIdentifierStr(),a.height=0,a.width=0,a.border="0px",a.hspace="0",a.vspace="0",a.marginWidth="0",a.marginHeight="0",a.style.border="0",a.scrolling="no",a.frameBorder="0",a.src="javascript:void(0)",a.style.display="none",a},this.wrapInFrame=function(a,b,c){var d="";return d+='<IFRAME SRC="',d+=a,d+='" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="',d+=b,d+='" HEIGHT="',d+=c,d+='"></IFRAME>'},this.getAdUnitSizes=function(a){if(a){var b=[];if(a.mediaTypes&&a.mediaTypes.banner&&Array.isArray(a.mediaTypes.banner.sizes)){var c=a.mediaTypes.banner.sizes;Array.isArray(c[0])?b=c:b.push(c)}else Array.isArray(a.sizes)&&(Array.isArray(a.sizes[0])?b=a.sizes:b.push(a.sizes));return b}},this.hasValidBidRequest=function(a,b,c){function d(a,c){c===b[g]&&(f=!0)}for(var f=!1,g=0;g<b.length;g++)if(f=!1,e._each(a,d),!f)return e.logError("Params are missing for bid request. One of these required paramaters are missing: "+b+", adaptr:"+c),!1;return!0},this.isA=function(a,b){return t.toString.call(a)==="[object "+b+"]"},this.isFn=function(a){return e.isA(a,t.t_Fn)},this.isStr=function(a){return e.isA(a,t.t_Str)},this.isArray=function(a){return e.isA(a,t.t_Arr)},this.isNumber=function(a){return e.isA(a,t.t_Numb)},this.isInteger=function(a){return Number.isInteger?Number.isInteger(a):"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},e._typeof=function(a){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?_typeof2(a):a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)},this.isEmpty=function(a){if(!a)return!0;if(e.isArray(a)||e.isStr(a))return!(a.length>0);for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},this.isEmptyStr=function(a){return e.isStr(a)&&(!a||0===a.length)},this.isArrayOfNums=function(a,b){return e.isArray(a)&&(!b||a.length===b)&&a.every(function(a){return e.isInteger(a)})},this.isObject=function(a){return null!==a&&"object"===_typeof2(a)},this._map=function(a,b){if(e.isEmpty(a))return[];if(e.isFn(a.map))return a.map(b);var c=[];return e._each(a,function(d,e){c.push(b(d,e,a))}),c},this._each=function(a,b){if(!e.isEmpty(a)){if(e.isFn(a.forEach))return a.forEach(b,this);var c=0,d=a.length;if(d>0)for(;c<d;c++)b(a[c],c,a);else for(c in a)hasOwnProperty.call(a,c)&&b.call(this,a[c],c)}},this._find=function(a,b){if(!0===e.isArray(a)&&!0===e.isFn(b)){if(e.isFn(a.find))return a.find(b,e);var c=void 0;return a.forEach(function(a){void 0===c&&!0===b(a)&&(c=a)}),c}},this._extends=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},this.contains=function(a,b){if(e.isEmpty(a))return!1;if(e.isFn(a.indexOf))return-1!==a.indexOf(b);for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},this.includes=function(a,b){return!0===e.isArray(a)?a.includes?a.includes(b):a.indexOf(b)>=0:!0===e.isObject(a)&&a.hasOwnProperty(b)},this.uniques=function(a,b,c){return c.indexOf(a)===b},this.flatten=function(a,b){return a.concat(b)},this._toConsumableArray=function(a){function b(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function c(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}return b(a)||c(a)||d()},this.createTrackPixelHtml=function(a){if(!a)return"";var b=encodeURI(a),c='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return c+='<img src="'+b+'"></div>'},this.getIframeDocument=function(a){if(a){var b;try{b=a.contentWindow?a.contentWindow.document:a.contentDocument.document?a.contentDocument.document:a.contentDocument}catch(a){e.logError("Cannot get iframe document",a)}return b}},this.getValueString=function(a,b,c){
return void 0===b||null===b?c:e.isStr(b)?b:e.isNumber(b)?b.toString():void e.logWarn("Unsuported type for param: "+a+" required type: String")},this.parse=function(a){function b(a){return a?a.replace(/^\?/,"").split("&").reduce(function(a,b){var c=b.split("="),d=A(c,2),e=d[0],f=d[1];return/\[\]$/.test(e)?(e=e.replace("[]",""),a[e]=a[e]||[],a[e].push(f)):a[e]=f||"",a},{}):{}}var c=document.createElement("a");return c.href=decodeURIComponent(a),{protocol:(c.protocol||"").replace(/:$/,""),hostname:c.hostname,port:+c.port,pathname:c.pathname,search:b(c.search||""),hash:(c.hash||"").replace(/^#/,""),host:c.host}},this.format=function(a){function b(a){return Object.keys(a).map(function(b){return Array.isArray(a[b])?a[b].map(function(a){return b+"[]="+a}).join("&"):b+"="+a[b]}).join("&")}return(a.protocol||"http")+"://"+(a.host||a.hostname+(a.port?":"+a.port:""))+(a.pathname||"")+(a.search?"?"+b(a.search||""):"")+(a.hash?"#"+a.hash:"")},this.deepAccess=function(a,b){if(!0===this.isObject(a)&&!0===this.isStr(b)){for(var c=b.split("."),d=a,e=0;e<c.length;e++){var d=d[c[e]];if(void 0===d)return}return d}},this.deepSetValue=function(a,b,c){for(var d,e=b.split("."),f=0,g=e.length,h=a;f<g;++f)d=h[e[f]],h=h[e[f]]=f===g-1?c:null!=d?d:!~e[f+1].indexOf(".")&&+e[f+1]>-1?[]:{}},this.deepClone=function(a){function b(a){var c=Array.isArray(a)?[]:{};for(var d in a){var e=a[d];e&&"object"==_typeof2(e)?c[d]=b(e):c[d]=e}return c}var c=Array.isArray(a)?[]:{};for(var d in a){var e=a[d];e&&"object"==_typeof2(e)?c[d]=b(e):c[d]=e}return c},this.getConfig=function(a){return this.deepAccess(n,a)},this.getMediaTypes=function(a){return o},this.getWinInfo=function(){return h.winInfo},this.addBeacon=function(a,b){return p.addOneBeacon(a,b)},this.registerSync=function(a,b,c){return p.addOneBeacon(a,c)},this.convertTypes=function(a,b){function c(a,b){return"string"===a?b&&b.toString():"number"===a?Number(b):b}return Object.keys(a).forEach(function(d){b[d]&&(e.isFn(a[d])?b[d]=a[d](b[d]):b[d]=c(a[d],b[d]),isNaN(b[d])&&delete b.key)}),b},e.convertCamelToUnderscore=function(a){return a.replace(/(?:^|\.?)([A-Z])/g,function(a,b){return"_"+b.toLowerCase()}).replace(/^_/,"")},e.cleanObj=function(a){return Object.keys(a).reduce(function(b,c){return void 0!==a[c]&&(b[c]=a[c]),b},{})},this.setDataInLocalStorage=function(a,b){localStorage.setItem(a,b,{folder:"prebid"})},this.getDataFromLocalStorage=function(a){return localStorage.getItem(a)},this.removeDataFromLocalStorage=function(a){localStorage.removeItem(a)},this.hasLocalStorage=function(){return!0},this.setCookie=function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+1e3*c*60),window.document.cookie=a+"="+encodeURIComponent(b)+";path=/;expires="+e.toGMTString()+(d?";SameSite="+d:"")},this.getCookie=function(a){if(a&&window.document.cookie){var b=window.document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]*)\\s*(;|$)");return b?decodeURIComponent(b[2]):null}return null},this.timestamp=function(){return Date.now()},this.groupBy=function(a,b){return a.reduce(function(a,c){return(a[c[b]]=a[c[b]]||[]).push(c),a},{})},this.transformBidderParamKeywords=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",c=[];return e._each(a,function(a,d){if(e.isArray(a)){var f=[];e._each(a,function(a){((a=e.getValueString(b+"."+d,a))||""===a)&&f.push(a)}),a=f}else{if(a=e.getValueString(b+"."+d,a),!isStr(a))return;a=[a]}c.push({key:d,value:a})}),c},this.install=function(a){return new d({url:a.url,config:a.config,id:a.id,callback:a.callback,loaded:a.loaded,adUnitCode:a.adUnitCode})}}}(bd_pb_jsonc),bd_pb_refr=function(){return function(a){function b(a){function b(){var a=g(),b=d();if(b)for(var c=0,e=b.length;c<e;c++)a[c].ancestor=b[c];return a}function d(){try{if(!a.location.ancestorOrigins)return;return a.location.ancestorOrigins}catch(a){}}function e(a){var b,c=[],d=null,e=null,f=null,g=null,h=null,i=null;for(b=a.length-1;b>=0;b--){try{e=a[b].location}catch(a){}if(e)c.push(e),i||(i=e);else if(0!==b){f=a[b-1];try{g=f.referrer,h=f.ancestor}catch(a){}g?(c.push(g),i||(i=g)):h?(c.push(h),i||(i=h)):c.push(d)}else c.push(d)}return{stack:c,detectedRefererUrl:i}}function f(a){try{var b=a.querySelector("link[rel='canonical']");if(null!==b)return b.href}catch(a){}return null}function g(){var b,d=[];do{try{b=b?b.parent:a;try{var e=b==a.top,g={referrer:b.document.referrer||null,location:b.location.href||null,isTop:e};e&&(g=c(g,{canonicalUrl:f(b.document)})),d.push(g)}catch(c){d.push({referrer:null,location:null,isTop:b==a.top})}}catch(a){return d.push({referrer:null,location:null,isTop:!1}),d}}while(b!=a.top);return d}function h(){try{var a,c=b(),d=c.length-1,f=null!==c[d].location||d>0&&null!==c[d-1].referrer,g=e(c);return c[c.length-1].canonicalUrl&&(a=c[c.length-1].canonicalUrl),{referer:g.detectedRefererUrl,reachedTop:f,numIframes:d,stack:g.stack,canonicalUrl:a}}catch(a){}}return h()}function c(){return c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},c.apply(this,arguments)}this.gri=function(){return b(window)}}}(),bd_pb_int=function(a,b,c,d){return function(a){function e(a){F.writex({msg:a,prefix:"bd_pb_int",inst:I})}function f(a,b){F.debugAlert(a,b)}function g(a){U.push({ts:Date.now()-H,msg:a})}function h(a,b){V.push({ts:Date.now()-H,name:a,data:b})}function i(a){function b(a){return!!ja.isBidRequestValid(a)}var c=[],d=[];return a.forEach(function(a){!0===b(a)?c.push(a):(d.push(a),g("impression not validated - code:dMs67W3N"),D(R,"/_s42 inv_imps","code:dMs67W3N"))}),d.length>0&&h("invalid impressions found",d),c}function j(a,b){function d(a){function b(a){var b=a.method;return void 0===b&&void 0!==a.type&&(b=a.type),b}function c(a){function b(a){if(void 0!==a.endpoint)return a.endpoint;if(void 0!==a.url)return a.url;throw"call_url_undef"}function c(a){return a.indexOf("//")<0?"//"+e:a}function d(a,b){function c(a){return 0===a.indexOf("https:")?a.replace("https:",""):0===a.indexOf("HTTPS:")?a.replace("HTTPS:",""):0===a.indexOf("http:")?a.replace("http:",""):0===a.indexOf("HTTP:")?a.replace("HTTP:",""):0===e.indexOf("//")?""+a:"//"+a}return 0===a.indexOf("https:")||0===a.indexOf("HTTPS:")?a:!0===b?"https:"+c(a):"http:"+c(a)}var e=b(a);return e=c(e),e=d(e,K)}function d(a){function b(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+"="+encodeURIComponent(a[c])+"&");return b}var c=a.data,d="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(a){return _typeof2(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)};return void 0===c?"":"object"===d(c)?b(c):c}function e(a){return"string"==typeof a.data?a.data:JSON.stringify(a.data)}var f={method:b(a),url:c(a),options:{}};switch(f.method){case"GET":f.data=d(a),f.options.withCredentials=!0;break;case"POST":f.data=e(a),f.options.contentType="text/plain",f.options.withCredentials=!0;break;default:throw{fbmsg:"invalid method - code: WPy1yx"}}return f}function e(b,c,d){function e(a){function b(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}function c(){g("srv_resp_full"),D(R,"/_s03 call_perf","_s22 srv_resp_full")}function d(){g("srv_resp_empty"),D(R,"/_s03 call_perf","_s24 srv_resp_empty")}function e(a){return{get:a.getResponseHeader.bind(a)}}var f=a.responseText;h("srvResponse",f);var i=void 0;try{i=JSON.parse(f),!0===b(i)?c():d()}catch(a){i=""+f,i.length>0?c():d()}return{body:i,headers:e(a)}}function f(a){if(void 0===a)return[];if(null===a)throw{fbmsg:"drv_rsp_is_null - code: sN275Sj"};if(!0===ga.isArray(a))return a;if(!0!==ga.isObject(a))throw{fbmsg:"drv_rsp_is_not_an_obj - code: sMw7U3pS"};return[a]}g("srv_call_ok"),D(R,"/_s03 call_perf","_s20 srv_call_ok"),u("bdrv_srvresp",{respText:b.responseText},"Server Response"),w("bdrv_srvresp",{respText:b.responseText});var j=[],l=e(b);qa.push(l),pa++;try{j=f(ja.interpretResponse(l,a))}catch(a){return ca=!0,da="3kRe9N2Wl",void t({err:a,bdChnID:R,errorCode:da,where:"interpretResponse",evtCtrCaption:"drv_intrsp",mailCaption:"bdrv_err_intrsp",mailObj:{ajxDebugObj:d,s1:ra,xhrObj:b,s2:ra,clbkArgs:c}})}if(h("bidsReceived",j),j.forEach(function(b){m(b.requestId,b),u("bdrv_bid",{ajxDebugObj:d,s2:ra,srvRespObj:l,s3:ra,srvReqData:a,s4:ra,bidPassed:b},"Specific Info"),w("bdrv_yesbid",{rcvdBid:b,srvRspObj:l})}),i(aa,j),!(j.length>0)){u("bdrv_nobid",{ajxObjType:k,s1:ra,ajxDebugObj:d,s2:ra,srvRespObj:l,s3:ra,srvReqData:a},"Specific Info"),w("bdrv_nobid",{srvRspObj:l})}}function f(b,c,d){g("srv_call_failed"),D(R,"/_s03 call_perf","_s30 srv_call_failed"),pa++,u("bdrv_err_srvcall",{ajxObjType:k,s1:ra,ajxDebugObj:d,s2:ra,srvReq:a,s3:ra,xhrObj:b,s4:ra,clbkArgs:c,s5:ra,srvCallOpts:l},"Specific Info"),w("bdrv_err_call",{srvReq:a,debugObj:d})}function i(a,b){function c(b){var c=null;return a.forEach(function(a){a.adunitCode===b.adunitCode&&(c=a)}),c}g("closeUnBidImps"),b.forEach(function(a){c(a).bidRcvd=!0}),a.forEach(function(a){!0!==a.bidRcvd&&m(a.requestId,null)})}g("new srv call # "+oa),D(R,"/_s03 call_perf","_s10 srv_call");var j=null,k="NA";try{var l=d(a);l.onSucc=e,l.onFail=f,h("srvCallOpts",l),j=new c(l,h,g),k=j.getAjxObjType()}catch(b){ca=!0,da="wj82Kld9Neg",t({err:b,bdChnID:R,errorCode:da,where:"intAjaxRequest",evtCtrCaption:"drv_ajxreq",mailCaption:"bdrv_err_ajxreq",mailObj:{ajxObjType:k,s1:ra,srvReq:a}})}}function k(){if(g("_acquireUserSyncs"),void 0!==ja.getUserSyncs){try{var a=A.nodemanager.getGdprData(),b={iframeEnabled:!0,pixelEnabled:!0},c=ja.getUserSyncs(b,qa,a);if(h("userSyncs",c),void 0===c)return}catch(a){return ca=!0,da="8RlK266b6",void t({err:a,bdChnID:R,errorCode:da,where:"getUserSyncs",evtCtrCaption:"drv_usersync",mailCaption:"bdrv_err_usrsync",mailObj:{requestsRcvdArray:qa}})}Array.isArray(c)||(c=[c]),c.forEach(function(a){p(a.type,a.url)})}}function l(a,b){n(a,b,0)}function m(a,b){n(a,b,1)}function n(a,b,c){function d(a,b,c){var d=null;return b.forEach(function(b){null===d&&(1===c?b.impID===a&&(d=b):b.adUnitCode===a&&(d=b))}),d}function f(a){function b(a,b,c){switch(c){case"currencyCode":a.cur=b[c];break;case"statusCode":1===parseInt(b.statusCode)?a.bidAvail=!0:a.bidAvail=!1;break;case"ad":a.adm=b[c];break;case"cpm":a.nomPrc=b[c];break;case"creativeId":case"pubapiId":case"bidderCode":a[c]=b[c]}}var c={adm:"",nomPrc:0,cur:"CHF",bidAvail:!1,mtype:"dsp",xml:!1};for(var d in a)b(c,a,d);return c}function i(a,b){var c={mtype:b.mtype,adm:"",nomPrc:0,cur:"CHF",bidAvail:!1,xml:!1};if(null===a)return c;for(var d in a)switch(d){case"requestId":case"width":case"height":case"dealId":case"bidderCode":case"netRevenue":case"ttl":case"referrer":c[d]=a[d]}if("video"===a.mediaType){if("vid"!==b.mtype)throw{msg:"mtype_mismatch_vid"};c.mtype=b.mtype,void 0!==a.vastXml?(c.adm=a.vastXml,c.xml=!0):void 0!==a.vastUrl&&(c.adm=a.vastUrl,c.xml=!1)}else{if("dsp"!==b.mtype)throw{msg:"mtype_mismatch_dsp"};if(c.mtype=b.mtype,void 0===a.ad)throw{msg:"undf_ad_markup"};c.adm=a.ad}return c.nomPrc=a.cpm,c.cur=a.currency,void 0!==a.creativeId?c.creativeId=a.creativeId:c.creativeId=a.creative_id,c.bidAvail=!0,c}var j=0;null!==b&&(j=Math.round(100*b.cpm)/100),g("_addOneBidInt ("+j+")"),h("new bid frm drv with unit code: "+a,b);var k=d(a,O,c);if(null===k)return e(),g("original fb impression not found - code:knSb34V"),void D(R,"/_s40 drvint_error","orig_bid_not_found - code:knSb34V");try{if(1===c)var l=i(b,k);else var l=f(b)}catch(a){return e(),g("error converting imp data - code:8dn3Hw9"),void D(R,"/_s40 drvint_error","cannot_convert_imp_data - code:8dn3Hw9 - msg:"+a.msg)}if(!0===l.bidAvail&&l.mtype!==k.mtype)return e(),g("error media type conflict - code:smq93jP4H"),void D(R,"/_s40 drvint_error","media_type_conflict - code:smq93jP4H");l.impID=k.impID,C.addOneBid(l,k,z,b),h("new bid cnvtd for: "+k.adUnitCode,l)}function o(){function a(a){function e(a){function e(a){var b=T[a];if(void 0!==b)return b;var c=G.genUUID();return T[a]=c,c}function f(b){if(void 0!==P.schain){var c=P.schain.sid;if("unspecified"!==a.tagParams_gen.spc_sid&&(c=a.tagParams_gen.spc_sid),void 0!==c&&""!==c){var d="";"unspecified"!==a.tagParams_gen.spc_asi&&(d=a.tagParams_gen.spc_asi),""===d&&(d="forebase.com"),b.schain={ver:"1.0",complete:1,nodes:[{asi:d,sid:c,hp:1}]}}}}var g={},h=a.tagParams_spc;for(var i in h)"unspecified"!==h[i]&&(g[i]=h[i]);var j=[];if(j.push(a.width),j.push(a.height),"vid"===a.mtype)var k="video",l=[j],m={video:{playerSize:j,playerSizes:[j],context:"outstream",mimes:["video/mp4","video/ogg","video/ogv","video/webm","video/x-ms-wmv"],protocols:[2,3,5,6],maxduration:30,api:[1,2]}};else{if("dsp"!==a.mtype)throw"unsupported_media";var k="banner",l=[j],m={banner:{sizes:[j]}}}var n={unitName:a.unitName,unitFbxID:a.unitFbxID,adUnitCode:a.adUnitCode,placementCode:a.adUnitCode,mediaType:k,sizes:l,mediaTypes:m,bidId:a.impID,bidderRequestId:c,requestId:a.impID,auctionId:b,bidder:d,params:g,transactionId:e(a.adUnitCode)};return f(n),n}var f=[],g={},h={},i=0;a.forEach(function(a){var b=a.adUnitCode;if(void 0!==g[b])return g[b]++,h[b]=!0,void i++;g[b]=1;var c=e(a);f.push(c)});var j=[];for(var k in h)j.push(k);return{pbImps:f,dups:i,dupUnits:j}}g("_genPBBidderReq");var b=G.genUUID(),c=Math.random().toString(16).substr(2),d=S,e=a(O),f=e.pbImps;e.dups>0&&(g("duplicate imps: "+e.dupUnits.join()),D(R,"/_s41 dupl_units","code:9sK2lW7"));var h=Date.now(),i=A.nodemanager.getGdprData();return"ok"===i.status?D(R,"/_s02 cons_data","_s10 avail"):D(R,"/_s02 cons_data","_s20 not_avail"),{bidderRequest:{gdprConsent:i,refererInfo:L,auctionId:b,bidderRequestId:c,bidderCode:d,bids:f,start:h,auctionStart:h,timeout:3e3}}}function p(a,b){if(!(la.length>=ma)){var c={type:a,url:b};la.push(c)}}function q(a){function b(a){(new Image).src=a}function c(a){var b=document.createElement("iframe");b.id=Math.round(999999*Math.random()),b.setAttribute("scrolling","no"),b.setAttribute("frameborder","0"),b.setAttribute("width",0),b.setAttribute("height",0),b.style.position="absolute",b.style.left="0",b.style.top="0",b.src=a,document.getElementsByTagName("head")[0].appendChild(b)}if(!(a-na<100)&&(na=a,0!==la.length)){var d=la.pop();"image"===d.type?b(d.url):"iframe"===d.type&&c(d.url)}}function r(b){switch(Y){case"INIT":if(null===(Z=a.getDebugModeVars()))break;Y="MLP";case"MLP":W.length>0&&v(W.shift()),X.length>0&&x(X.shift())}}function s(a){O.forEach(function(b){var c="msg: "+a.msg+"  |  code: "+a.code;b.drvErrClbk(c)})}function t(a){g("_proCatch");var b="Message:  ";void 0!==a.err.fbmsg?b+=a.err.fbmsg+"\n\n":(b+=a.err+"\n\n",void 0!==a.err.stack&&(b+="\nStack:\n",b+=a.err.stack.toString()+"\n\n")),a.mailObj.errString=b,u(a.mailCaption,a,"Specific Error Info"),w("drv_excptn",{errString:b}),s({msg:""+a.err,code:a.errorCode}),f("BD Drv Intf: "+a.bdChnID+"\n\nException during '"+a.where+"'",a.err)}function u(a,b,c){W.push({event:a,dataObj:b,dataObjTitle:c})}function v(a){function b(){var a="";return U.forEach(function(b){a+=d(b.ts)+" : "+b.msg+"\n"}),a}function c(){var a=0,b="";return V.forEach(function(c){a=0,b+=d(c.ts)+' : "'+c.name+'" : \n',b+=G.printObj(a,c.data)+"\n\n\n"}),b}function d(a){var b=Math.floor(a/1e3),c=a-1e3*b;return b=b<10?" "+b:""+b,c=0===c?"000":c<10?"00"+c:c<100?"0"+c:""+c,b+"."+c}if(!0===Z.mail.send){var f;e(),g("_sendDebugMail");var h="V0";void 0!==P.pbver&&(h="V1");var i="BIDDING DRIVER REPORT - [event: "+a.event;i+=" - filter: "+Z.mail.filter,i+=" - valve_rd: "+Z.mail.reduc+"]\n\n",i+="bidderCode: "+S+" ("+h+")\n\n",i+="Interface Log:\n\n"+b()+"\n\n";var j=ga.getDriverLogs();if(f=0,i+="Driver Log:\n",i+=G.printObj(f,j)+"\n\n\n",i+="Stash Buffer:\n\n"+c()+"\n\n",void 0!==a.dataObj){var k="dataObj";void 0!==a.dataObjTitle&&(k=a.dataObjTitle),f=0,i+=k+":\n",i+=G.printObj(f,a.dataObj)+"\n\n\n"}var l=a.event.replace(/\s+/g,"_"),m=R+"  ("+l+")",n={debugStrings:null,from:"BID_DRV",subject:m,text:i,sreduc:Z.mail.reduc};z.fireEvent("sendDebMail",n)}}function w(a,b){X.push({event:a,dataObj:b})}function x(a){if(!0===Z.event.send){e();var b={drvLogs:ga.getDriverLogs(),dataObj:a.dataObj},c="/_s30 by_channel/"+R+"/***debug***/_s20 events";A.trackhub.sendEvent("bdchn_x",c,a.event,{att:b})}}function y(a){var b=["#"];void 0!==a&&(b=a);var c={truckID:N,bdChnID:R,unitList:b};z.fireEvent("bd_new_node_call",c)}var z=this,A=a.comps,B=a.master,C=a.exports,D=a.firePing,E=a.bootParams,F=a.logger,G=new b,H=Date.now(),I=Math.round(999*Math.random());e();var J=a.env,K=a.secProt,L=a.refererInfo,M=a.truckIdx,N=a.truckID,O=a.impBuffer,P=a.drvOpts,Q=a.drvOpts.adpObj,R=a.drvOpts.bdChnID,S=a.drvOpts.pbbc,T=[],U=[];g("inst");var V=[];h("inst",{_truckIdx:M,_secProt:K,_drvOpts:P,_impBuffer:O});var W=[],X=[],Y="INIT",Z=null,$="_fb_"+E.versionTag.substring(0,4);z.fireEvent=function(a,b){B.fireEvent(a,b)};var _=[],aa=[],ba=[],ca=!1,da="",ea=!1,fa={master:z,firePing:D,bootParams:E,pbEmVer:$,env:J,secProt:K,drvOpts:P,bdChnID:R,truckID:N,logger:F,sendDebugMail:u,impBuffer:O,bidsRequested:_,imports:{addOneBid:l,addOneBeacon:p,trackCall:y,addStashObject:h}},ga=new d(fa),ha={master:z,firePing:D,bootParams:E,pbEmVer:$,env:J,secProt:K,bdChnID:R,pbem_env:ga,drvOpts:P,pbbc:P.pbbc},ia=new Q(ha),ja=ia.pbDrvObj(),ka={},la=[],ma=5,na=0,oa=0,pa=0,qa=[],ra="-----------------------------";z.init=function(){g("init");var a=o();if(ka=a.bidderRequest,h("_bidderRequest",ka),w("bdrv_init",{_bidderRequest:ka}),void 0===ia.init)return null;try{return ia.init(ka)}catch(a){return ca=!0,da="wdKTdTHc",t({err:a,bdChnID:R,errorCode:da,where:"init",evtCtrCaption:"drv_init",mailCaption:"bdrv_err_init",mailObj:{}}),null}},z.tick=function(a){if(!1===ca&&!0!==ea&&(q(a),r(a),void 0!==ia.tick))try{ia.tick(a)}catch(a){ca=!0,da="3yZ0A0On",t({err:a,bdChnID:R,errorCode:da,where:"tick",evtCtrCaption:"drv_tick",mailCaption:"bdrv_err_tick",mailObj:{}})}},z.getStatus=function(){if(!1!==ca)return{status:"error",msg:""};if(void 0===ia.getStatus)return{status:"ok",msg:null};try{return ia.getStatus()}catch(a){return ca=!0,da="ec5dZ32I",t({err:a,bdChnID:R,errorCode:da,where:"getStatus",evtCtrCaption:"drv_stat",mailCaption:"bdrv_err_stat",mailObj:{}}),{status:"error",msg:a}}},z.sendReq=function(){function a(a){if(void 0===a)return[];if(null===a)throw{fbmsg:"srv_req_is_null - code: D2mG4d"};if(!0===ga.isArray(a))return a;if(!0!==ga.isObject(a))throw{fbmsg:"srv_req_is_not_an_obj - code: grDcnV"};return[a]}function b(a,b){if(D(R,"/_s05 calls_x_truck",b.length,{scl:"mediumtimes"}),D(R,"/_s08 imps_x_call",a.length,{scl:"mediumtimes"}),0!==b.length)if(1===b.length){var c=[];a.forEach(function(a){c.push(a.unitFbxID)}),y(c)}else a.forEach(function(a){y([a.unitFbxID])})}g("sendReq");try{for(var c=0;c<ka.bids.length;c++)_.push(ka.bids[c]);if(void 0===P.pbver)return void ja.callBids(ka);void 0!==ja.fbInit&&ja.fbInit(ka),aa=i(ka.bids),h("impsValidatedByDriver",aa),w("bdrv_buildreqs",{_imps:ka.bids});var d=ja.buildRequests(aa,ka);w("bdrv_reqsblt",{srvReqs:d});var e=a(d);b(aa,e),h("srvRequests",e),e.forEach(function(a){var b=new j(a,ka);ba.push(b),oa++})}catch(a){ca=!0,da="yu2Jks8Nb",t({err:a,bdChnID:R,errorCode:da,where:"sendReq",evtCtrCaption:"drv_sndrq",mailCaption:"bdrv_err_sndrq",mailObj:{}})}},z.close=function(){g("close"),k(),u("bdrv_close",{_bidsRequested:_,s1:ra,_impsSentToDriver:aa,s2:ra,_ajxReqsBuffer:ba},"Specific Info"),_=null,aa=null,ba=null,ea=!0},z.onBidWon=function(a){if(w("bdrv_onbidwon",{pbBidData:a}),"function"==typeof ja.onBidWon)try{ja.onBidWon(a)}catch(b){ca=!0,da="2ls944yhf",t({err:b,bdChnID:R,errorCode:da,where:"onBidWon",evtCtrCaption:"drv_onbidwon",mailCaption:"bdrv_err_onbdw",mailObj:{pbBidData:a}})}}}}(0,textools,bd_pb_srvcall,bd_pb_env),bd_bdlst=function(a,b){return function(c){function d(a){s.logger.writex({msg:a,prefix:"bd_bdlst",inst:t})}function e(a){var b=this;b.ssName=a.ssName,b.segID=a.segID,b.unFbxName=a.unFbxName,b.sgmCtrl=a.sgmCtrl,b.floor=a.floor,b.ts=Date.now(),b.dueTime=u,b.due=!1,b.done=!1,b.burstIdx=0,b.maxBurst=v,b.tick=function(a){!0!==b.due&&a-b.ts>b.dueTime&&(b.due=!0)},b.burstNow=function(a){b.burstIdx>=b.maxBurst||(b.sgmCtrl.burst(a),b.burstIdx++)},b.setDue=function(){b.due=!0}}function f(a){E.forEach(function(b){b.tick(a)})}function g(a){switch(!0===L&&a-M>A&&(j(),L=!1),H){case"INIT":H="LISTEN";case"LISTEN":if(E.length<1)break;I=a,J=0,H="BURSTING";case"BURSTING":if(!0===K){K=!1,I=a,H="HOLDOFF";break}if(h(w),E.length<1){H="LISTEN";break}if(a-J>=x){J=a;i(Math.round(y/r.rtsc()))}break;case"HOLDOFF":if(!0===K){K=!1,I=a;break}if(a-I<z)break;H="BURSTING"}}function h(a){function b(a){var b=n(a);null!==b&&(o(b),0===E.length&&p(),q.fireEvent("segstatus"))}function c(){var a=0;return E.forEach(function(b){!0!==b.done&&!0===b.due&&a++}),a}D.length>=a?b(!1):c()>0&&b(!0)}function i(a){E.forEach(function(b){b.burstNow(a)})}function j(){E.forEach(function(a){a.setDue()})}function k(a,b){var c=null;if(E.forEach(function(b){null===c&&b.segID===a.segID&&(c=b)}),null!==c)return c;if(!0!==b)return null;var d={ssName:a.ssName,segID:a.segID,unFbxName:a.unFbxName,sgmCtrl:a.sgmCtrl,floor:a.floor};return c=new e(d),E.push(c),E.sort(function(a,b){return a.unFbxName-b.unFbxName}),q.fireEvent("segstatus"),c}function l(a){var b=[];E.forEach(function(c){c!==a&&b.push(c)}),E=b}function m(a){var b=[];D.forEach(function(c){c.srcData.srcID!==a&&b.push(c)}),D=b}function n(a){var b=null;return E.sort(function(a,b){return a.unFbxName-b.unFbxName}),E.forEach(function(c){null===b&&!0!==c.done&&(!0===a&&!0!==c.due||(c.done=!0,b=c))}),b}function o(a){function b(a){function b(a){var b=[];return D.forEach(function(c){c.bidData.effPrc<a||b.push(c)}),b}function c(a,b){return b.bidData.effPrc-a.bidData.effPrc}var d={status:"---",msg:"",winBid:null,clPrc:0,fstPrc:"NA",sndPrc:"NA",trdPrc:"NA"},e=b(a);if(0===e.length)return d.status="empty",d.msg="no_eligible_bids",d;e.sort(c),e.length>0&&(d.fstPrc=Math.round(100*e[0].bidData.effPrc)/100),e.length>1&&(d.sndPrc=Math.round(100*e[1].bidData.effPrc)/100),e.length>2&&(d.trdPrc=Math.round(100*e[2].bidData.effPrc)/100);var f=e[0],g=f.bidData.effPrc;return d.status="ok",d.winBid=f,d.clPrc=Math.round(100*g)/100,d}var c=(D.length,b(a.floor));if("ok"!==c.status)return a.sgmCtrl.bdClbck(null),void l(a);var d=!1;c.winBid.segID!==a.segID&&(d=!0);var e={clPrc:c.clPrc,fstPrc:c.fstPrc,sndPrc:c.sndPrc,trdPrc:c.trdPrc,impData:c.winBid.bidData,srcData:c.winBid.srcData,xSeg:d};a.sgmCtrl.bdClbck(e),G.push(c.winBid.srcData.srcID),m(c.winBid.srcData.srcID),l(a)}function p(){function a(a){var b=!1;return G.forEach(function(c){c===a.srcID&&(b=!0)}),b}F.forEach(function(b){!0!==a(b)&&b.srcCtrl.youLost()})}var q=this,r=c.master,s=c.comps,t=Math.round(999*Math.random());d(),q.fireEvent=function(a,b){r.fireEvent(a,b)};var u=a.bidding.segDueTime,v=a.bidding.segMaxBurst,w=a.bidding.minActiveBids,x=a.bidding.burstPeriod,y=a.bidding.maxCallBandwidth,z=a.bidding.bidHoldOff,A=a.bidding.bidTimeOut,B=new b,C=B.genUUID(),D=[],E=[],F=[],G=[],H="INIT",I=0,J=0,K=!1,L=!1,M=null,N=0;q.getSrcSetNam=function(){return c.ssName},q.getSegmCount=function(){return E.length},q.rsg=function(a){var b=k(a,!0);N=b.floor},q.nsrctr=function(a){return F.push(a),M=Date.now(),L=!0,C},q.nbd=function(a){a.bidData.effPrc<N||(D.push(a),K=!0)},q.tick=function(a){g(a),f(a)},s.heart.subscribe(this,30,"bd_bdlst",1),q.tick(Date.now())}}(config,textools),bd_admin=function(a,b){return function(a){function c(a){g.logger.writex({msg:a,prefix:"bd_admin",inst:h})}function d(a,c){var d=null;return i.forEach(function(b){null===d&&b.getSrcSetNam()===a&&(d=b)}),null!==d?d:!0!==c?null:(d=new b({master:f,comps:g,ssName:a}),i.push(d),e(),d)}function e(){var a=0;i.forEach(function(b){a+=b.getSegmCount()}),j=a}var f=this,g=a.comps,h=(a.cllBks,a.bootParams,Math.round(999*Math.random()));c(),f.fireEvent=function(a,b){switch(a){case"segstatus":e()}},f.hcComm=function(a){a.event};var i=(Date.now(),[]),j=0;f.rsg=function(a){d(a.ssName,!0).rsg(a)},f.nsrctr=function(a){return d(a.ssName,!1).nsrctr(a)},f.nbd=function(a){var b=d(a.ssName,!1);if(null===b)throw"inconsistent_flow - code: CQDf5Ks6";b.nbd({unFbxName:a.unFbxName,segID:a.segID,bidData:a.bidData,srcData:a.srcData})},f.rtsc=function(){return j}}}(0,bd_bdlst),bd_truck=function(a,b){return function(c){function d(a){u.writex({msg:a,prefix:"bd_truck",inst:v})}function e(a,b,c,e){function f(a,b,c,d){if(a.cur in b!=!0)return null;var e=b[a.cur],f=a.nomPrc*(100+c)/100,f=f*(100+d)/100,g=JSON.parse(JSON.stringify(a));return g.effPrc=Math.round(f*e*100)/100,g.nomPrc=Math.round(a.nomPrc*e*100)/100,g}function g(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.impID===b)return d}return null}if(void 0===b)var b=g(x,a.impID);if(b.tm_resp=Date.now(),A=!0,!0===a.bidAvail){var h=f(a,s,q,r);if(null===h)return d(),void j(p,"/_s30 truck_error","currency - code:sKwo467Hn");h.drvInt=c,h.pbBidData=e,b.bids.push(h),y++,d()}}function f(b){var c=!0;if(null!==D&&!0!==z&&!(b-C<100)){if(C=b,!0!==A)return void(b-D>a.bidding.genBReqTO+500&&(z=!0));for(var e=0;e<x.length;e++){var f=x[e];if(!0!==f.done){if(c=!1,null===f.tm_resp){if(b-D<a.bidding.genBReqTO-500)continue}else if(b-f.tm_resp<100)continue;f.bids.length,d(),f.done=!0,f.looptime=b-D,g.fireEvent("truckReturn",f)}}return c}}var g=this,h=c.master,i=c.comps,j=c.firePing,k=c.bootParams,l=c.env,m=c.secProt,n=c.truckIdx,o=c.drvOpts,p=c.drvOpts.bdChnID,q=c.drvOpts.fbk,r=c.drvOpts.trm,s=c.ccyRates,t=c.refererInfo,u=c.logger,v=Math.round(999*Math.random());d(),this.fireEvent=function(a,b){h.fireEvent(a,b)};var w=Math.round(999999999*Math.random()),x=[],y=0,z=!1,A=!1,B=Date.now(),C=0,D=null,E=0,F={master:this,comps:i,firePing:j,bootParams:k,env:l,secProt:m,refererInfo:t,impBuffer:x,truckIdx:n,truckID:w,drvOpts:o,logger:u,getDebugModeVars:c.getDebugModeVars,exports:{addOneBid:e}},G=new b(F);this.tick=function(a){if(!0!==b){G.tick(a);var b=f(a);!0===b&&(i.heart.unsubscribe(g),G.close(),G=null)}},this.addImp=function(a){function b(){if(0===x.length)return 0;var a=0;return x.forEach(function(b){a+=b.dtovalue}),Math.round(a/x.length)}x.push(a),B=Date.now(),E=b()},this.init=function(){G.init(),d()},this.getStatus=function(){return G.getStatus()},this.send=function(){x.forEach(function(a){a.reqNtfClbk()});var a={truckID:w,bdChnID:p,truckIdx:n,bidReqs:x.length};g.fireEvent("bd_new_truck_sent",a),G.sendReq(),D=Date.now(),d(),j(p,"","_s30 truck_sent")},this.getValue=function(){return E},i.heart.subscribe(g,30,"bdtrk_"+p,0,0),g.tick(Date.now())}}(config,bd_pb_int),bd_channel=function(a,b,c){return function(d){function e(a){x.writex({msg:a,prefix:"bd_channel",inst:y})}function f(a,b){x.debugAlert(a,b)}function g(){return z}function h(a){if(!0!==H){(0,a.sourceClbk)({status:"ok",fromcache:!1,looptime:a.looptime,bids:a.bids,tagParams_gen:a.tagParams_gen}),p(u,"/_s04 loop_times",a.looptime,{scl:"shorttimesLR"})}}function i(a){switch(E){case"IDLE":if(!1===G)break;E="ACTIVE";case"ACTIVE":if(a-F<B)break;e();var b=C[0];b.init(),E="WAIT_TRUCK_READY";case"WAIT_TRUCK_READY":var b=C[0],c=b.getStatus();if("error"===c.status){e(),p(u,"/_s20 channel_error","truck status - code:wjPsj86"),E="PARK";break}if("abort"===c.status){e(),p(u,"/_s20 channel_error","truck_abort - code:eh&uW3H"),E="PARK";break}if("ok"!==c.status)break;b.send(),e(),G=!1,E=!0===A?"PARK":"IDLE"}}function j(){""!==document.referrer&&document.referrer;var a={master:m,comps:o,firePing:p,bootParams:q,env:r,secProt:s,truckIdx:C.length,drvOpts:t,ccyRates:v,refererInfo:w,logger:x,getDebugModeVars:g},c=new b(a);C.unshift(c),e(),p(u,"","_s20 new_truck")}function k(a){function b(a,b){switch(b.mtype){case"vid":a.width=b.segmWidth,a.height=b.segmHeight,a.width<300&&(a.width=300),a.height<250&&(a.height=250);break;case"nat":a.width=b.segmWidth,a.height=b.segmHeight;break;default:a.width=b.sourceWidth,a.height=b.sourceHeight}}if(0===C.length)return e(),void p(u,"/_s20 channel_error","flow - code:8UijKyE");var c={unitName:a.unitName,unitFbxID:a.unitFbxID,sourceID:a.sourceID,impID:Math.random().toString(16).substr(2),adUnitCode:a.adUnitCode,tm_creat:Date.now(),snippet:a.snippet,dtovalue:a.dtovalue,tagParams_gen:a.tagParams_gen,tagParams_spc:a.tagParams_spc,mtype:a.mtype,sourceClbk:a.sourceClbk,reqNtfClbk:a.reqNtfClbk,drvErrClbk:a.drvErrClbk,bids:[],tm_resp:null,done:!1};b(c,a),C[0].addImp(c),e()}function l(a){function b(a){function b(a){function b(a,b){if(""===b)return!1;if("*"===b)return!0;var c=!1,d=a.toLowerCase();return b.toLowerCase().split("|").forEach(function(a){!0!==c&&d.indexOf(a)>=0&&(c=!0)}),c}function d(a,b,c){if(null===a)return c;var d=a[b];return void 0!==d&&"unspecified"!==d?d:c}if(null===a)return{mail:{filter:"NA",reduc:1,send:!1},event:{filter:"NA",reduc:1,send:!1}};var e=new c,f=parseInt(d(a,"bidMailReduc",0)),g=d(a,"bidMailFiltr","unspecified"),h=!1,i=!1;!0===isNaN(f)&&(f=0),"dev"===q.env&&(f=1),f>=1&&!0===e.whirliGig(100/f)&&(h=!0),!0===h&&(i=b(u,g));var j=h&&i,k=parseInt(d(a,"bidEvntReduc",0)),l=d(a,"bidEvntFiltr","unspecified"),m=!1,n=!1;return!0===isNaN(k)&&(k=0),"dev"===q.env&&(k=1),k>=1&&!0===e.whirliGig(100/k)&&(m=!0),!0===m&&(n=b(u,l)),{mail:{filter:g,reduc:f,send:j},event:{filter:l,reduc:k,send:m&&n}}}function d(a,b,c){o.trackhub.sendEvent("bdchn_l","/_s25 debug_prm"+a,b,c)}var e=b(a);return d("/_s10 mail/_s10 filtr",""+e.mail.filter),d("/_s10 mail/_s20 reduc","r="+e.mail.reduc),d("/_s10 mail/_s30 send",""+e.mail.send),d("/_s20 evnt/_s10 filtr",e.event.filter),d("/_s20 evnt/_s20 reduc","r="+e.event.reduc),d("/_s20 evnt/_s30 send",""+e.event.send),e}null===z&&!0===o.quickVars.isReady()&&(z=b(o.quickVars.getAllParams()))}var m=this,n=d.master,o=d.comps,p=d.firePing,q=d.bootParams,r=d.env,s=d.secProt,t=(d.testCase,d.drvOpts),u=d.drvOpts.bdChnID,v=d.ccyRates,w=d.refererInfo,x=d.logger,y=Math.round(999*Math.random());e();var z=null;m.fireEvent=function(a,b){switch(a){case"truckReturn":h(b)}n.fireEvent(a,b)};var A=d.drvOpts.sngtrk,B=a.bidding.truckWait,C=[],D=0,E="IDLE",F=0,G=!1,H=!1;m.getMTypes=function(){return t.mtypes},m.addReq=function(a){if(!0!==H)try{e(),!1===G&&(j(),G=!0),k(a),F=Date.now()}catch(a){H=!0;var b="Message:  ";void 0!==a.fbmsg?b+=a.fbmsg+"\n\n":(b+=a+"\n\n",void 0!==a.stack&&(b+="\nStack:\n",b+=a.stack.toString()+"\n\n")),e(),p(u,"/_s20 channel_error","gen_truck_error - code:kL294Ft",{att:b}),f("BD Channel: Exception during 'addReq' - CHANNEL DISABLED",b)}},m.tick=function(a){!0!==H&&(a-D<30||(D=a,i(a),l(a)))},o.heart.subscribe(m,30,"bdchn_"+u,1,1),m.tick(Date.now())}}(config,bd_truck,textools),bd_cnxhub=function(TexTools,Config,BdChannel,PbEmu_Refr){var BdCnxHub=function BdCnxHub(args){function _deltalog(a){_comps.logger.writex({msg:a,prefix:"bdcnxhub",inst:_instnum})}function _fireErrorPing(a,b,c){_comps.trackhub.sendEvent("bdchn_h","/_s00 errors"+a,b,c)}function _fireModulePing(a,b,c,d){var e="bdchn_l";"hi"===a&&(e="bdchn_h"),_comps.trackhub.sendEvent(e,"/_s10 drv_mod"+b,c,d)}function _fireSummaryPing(a,b){_comps.trackhub.sendEvent("bdchn_l","/_s20 summary"+a,""+b)}function _firePingChannel(a,b,c,d){_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/*AllChannels*/_s05 gen"+b,c,d),_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/"+a+"/_s05 gen"+b,c,d)}function _firePingChannelByMediaType(a,b,c,d,e){function f(a){switch(a){case"dsp":return"/_s20 dsp";case"vid":return"/_s30 vid";case"nat":return"/_s40 nat";case"cst":return"/_s50 cst";default:return"/_s50 xxx"}}_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/*AllChannels*/_s10 total"+c,d,e),_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/"+a+"/_s10 total"+c,d,e),_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/*AllChannels*"+f(b)+c,d,e),_comps.trackhub.sendEvent("bdchn_l","/_s30 by_channel/"+a+f(b)+c,d,e)}function _getDrvFilters(a){try{return a.varSetData.drvFilter.split("+")}catch(a){return[]}}function _mainProc(a){function b(){var a={status:"error",modver:"NA",intver:"NA"};return void 0!==_glbFBVariable.bdm.getModVer&&(a.modver=_glbFBVariable.bdm.getModVer()),void 0!==_glbFBVariable.bdm.getIntVer&&(a.intver=parseInt(_glbFBVariable.bdm.getIntVer())),!0===isNaN(a.intver)?a:a.intver!==_bdmExpectedInterfaceVersion?a:(a.status="ok",a)}switch(_mainProcState){case"INIT":
_loadBdmScript(args.bdmVer),_anchorTime=a,_mainProcState="WFBDM";break;case"WFBDM":if(a-_anchorTime>Config.bidding.bdModTo){_deltalog(),_fireModulePing("hi","/_s20 errors","_s10 bdm_timeout"),_status="error",_mainProcState="PARK";break}if(void 0===_glbFBVariable.bdm)break;var c=b();if("ok"!==c.status){_deltalog(),_fireModulePing("lo","/_s20 errors","_s20 bdm_icmp_int_vers: "+c.intver),_status="error",_mainProcState="PARK";break}if("ok"!==_glbFBVariable.bdm.getStatus()){_deltalog(),_fireModulePing("lo","/_s20 errors","_s30 bdm_fatal_error: "+_glbFBVariable.bdm.getErrText()),_status="error",_mainProcState="PARK";break}var d=_glbFBVariable.bdm.getErrText();""!==d&&(_deltalog(),_fireModulePing("lo","/_s20 errors/_s10 bdm_errors",d)),_addAllChns(_glbFBVariable.bdm.getChnLst()),_deltalog(),_fireModulePing("lo","/_s10 versions/_s10 module",c.modver),_deltalog(),_fireModulePing("lo","/_s10 versions/_s20 interf",c.intver),_status="ok",_mainProcState="PARK";break;case"PARK":_comps.heart.unsubscribe(that)}}function _loadBdmScript(a){function b(a){return!0===a?"https://":"http://"}if("dev"===_bootParams.env)var c=b(_bootParams.secProt)+"localhost:3001/versions/versionfolder/bdm/bdm_boot.js";else var c=b(_bootParams.secProt)+Config.resourceLocations.bdmurl+"/versions/"+a+"/fbbdm.js";var d=document.createElement("script");d.id="fbbdm",d.src=c,document.head.appendChild(d)}function _getChannel(a){function b(a,b){var c=null;return b.forEach(function(b){null===c&&b.drvID===a&&(c=b)}),c}if(void 0!==_channelCache[a]&&null!==_channelCache[a])return _channelCache[a];var c={};return c.channelObj=null,c.channelObj=b(a,_schnChannels),null===c.channelObj&&(c.channelObj=b(a,_v1Channels)),null!==c.channelObj&&(_channelCache[a]=c),c}function _addAllChns(a){function b(a){function b(a){!0===a.schn?(a.idx=_schnChannels.length,_schnChannels.push(a)):(a.idx=_v1Channels.length,_v1Channels.push(a))}function c(a){function b(a){return a>=100||!(a<1)&&Math.floor(100*Math.random())<a}function c(a){if(0===_drvFilters.length)return!1;var b=!1,c=a.toLowerCase();return _drvFilters.forEach(function(a){var d=a.toLowerCase();c.indexOf(d)>=0&&(b=!0,_deltalog())}),b}return!0===a.enabled&&(!0===c(a.bdChnID)||(!0===_simulateProdMode||("dev"===_bootParams.env||(!0===a.inProd||(!0===b(a.testProb)||(_deltalog(),!1))))))}if(a.testProb=parseInt(_comps.quickVars.getParam("testProb_"+a.bdChnID,a.testProb)),!0===c(a)){var d={master:that,comps:_comps,firePing:_firePingChannel,bootParams:_bootParams,env:_bootParams.env,secProt:_bootParams.secProt,testCase:_bootParams.testCase,ccyRates:_comps.curMgr.getCurRates(),refererInfo:_refererInfo,drvOpts:a,logger:_comps.logger},e=new BdChannel(d),f={};f.root=e,f.drvID=a.drvID,f.bdChnID=a.bdChnID,f.inProd=a.inProd,f.testProb=a.testProb,f.schn=a.schn,f.paramDefs=a.paramDefs,f.paramKeys=a.paramKeys,f.reqs=0,f.bids=0,f.wins=0,b(f)}}function c(a,b){return!0===b.inProd&&!0!==a.inProd?-1:!0===a.inProd&&!0!==b.inProd?1:b.testProb<a.testProb?-1:b.testProb>a.testProb?1:a.idx-b.idx}try{for(var d=0;d<a.length;d++)b(a[d])}catch(a){_deltalog()}_schnChannels.sort(c),_v1Channels.sort(c)}function _genBdDrvReport(){function a(a,b){function c(a){return a>=100?""+a:a>=10?"0"+a:"00"+a}var d="";return b.forEach(function(a,b){d+=c(b)+")  ",d+=!0===a.inProd?"p":"t",d+="  ",d+="r:"+c(a.reqs)+" - ",d+="b:"+c(a.bids)+" - ",d+="w:"+c(a.wins)+"   ",d+=a.bdChnID+"\n"}),d}var b="";return b+=a("----- schn chns -----",_schnChannels)+"\n",b+=a("----- non-schn chns -----",_v1Channels)+"\n"}var that=this,_bdmExpectedInterfaceVersion=110,_simulateProdMode=!1,_comps=args.comps,_cllBks=args.cllBks,_bootParams=args.bootParams,_glbFBVariable=args.glbVar,_instnum=Math.round(999*Math.random());_deltalog();var _cmpCode=_bootParams.cmpcode,_refererInfo=(new PbEmu_Refr).gri();that.fireEvent=function(a,b){switch(a){case"sendDebMail":return void _comps.mailmaster.sendObj(b)}_comps.exeControl.hcComm({event:a,data:b})};var _drvFilters=_getDrvFilters(_bootParams.debugVars);_drvFilters.length>0&&_deltalog();var _mainProcState="INIT",_anchorTime=0,_status="...",_schnChannels=[],_v1Channels=[],_channelCache={},_cmpStatus=null;that.gms=function(){return _status},that.tick=function(a){_mainProc(a)},that.addReq=function(data){function getBidParams(a,b){var c=new TexTools,d=c.parse(a,b);return"ok"===d.stat?d.parsedObj:null}function convertSpecParams(a){function b(a){function b(a){function b(a){var b="$array{",c=a.indexOf(b);if(!(c<0)){var d=a.substring(c+b.length),e=d.indexOf("}");if(!(e<0))return d=d.substring(0,e),"["+(d=d.replace(/\|/g,","))+"]"}}var c=b(a);if(void 0!==c)try{return JSON.parse(c)}catch(a){}}function c(a){function b(a){var b="$number{",c=a.indexOf(b);if(!(c<0)){var d=a.substring(c+b.length),e=d.indexOf("}");if(!(e<0))return d.substring(0,e)}}function c(a){var b=parseFloat(a);if(!0!==isNaN(b))return Math.round(b)-b!=0?b:void 0}function d(a){var b=parseInt(a);if(!0!==isNaN(b))return b}var f=b(a);if(void 0!==f)return void 0!==(e=c(f))?e:(e=d(f),void 0!==e?e:void 0)}function d(a){return _typeof2(a)==_typeof2(!0)?a:"true"===a||"false"!==a&&void 0}var e=b(a);if(void 0!==e)return e;var e=c(a);if(void 0!==e)return e;var e=d(a);return void 0!==e?e:""+a}var c={};for(var d in a)c[d]=b(a[d]);return c}function successReturn(a,b,c){return c.reqs++,_deltalog(),_firePingChannelByMediaType(c.bdChnID,a.mtype,"","_s10 imp"),_firePingChannelByMediaType(c.bdChnID,a.mtype,"/_s36 src_tags",a.tagname),_fireSummaryPing("/_s10 reqs",c.bdChnID),c.root.addReq(a),b.fromcache=!1,b.bdChnID=c.bdChnID,b.status="ok",b}var retObj={status:"...",msg:null,drvID:null,debMail:!1,fromcache:!1},_unspecified="unspecified",general_keywords={drvid:_unspecified,spc_asi:_unspecified,spc_sid:_unspecified,comment:_unspecified};try{var paramsObj;if(eval("paramsObj = "+data.snippet),void 0===paramsObj.drvid)throw{msg:"unspec_driver"};var retVal=_getChannel(paramsObj.drvid);if(null===retVal.channelObj)throw{msg:"driver_not_found"};var channelObj=retVal.channelObj,textools=new TexTools,genParams=textools.objxt(general_keywords,paramsObj);data.tagParams_gen=genParams,data.drvID=genParams.drvid,retObj.drvID=genParams.drvid;var defParams={};void 0!==channelObj.paramDefs&&(defParams=channelObj.paramDefs);var specParams=textools.objxt(defParams,paramsObj);data.tagParams_spc=specParams;var channelTypes=channelObj.root.getMTypes();if(channelTypes.indexOf(data.mtype)<0){var msg="unsupported media: '"+data.drvID+"' - tag: "+data.tagname;throw{msg:"unsup_media"}}return _firePingChannel(channelObj.bdChnID,"/_s10 tag_params","JS"),successReturn(data,retObj,channelObj)}catch(a){_deltalog()}var general_keywords={drvID:{type:"string",req:!0},spc_asi:{type:"string"},spc_sid:{type:"string"},comment:{type:"string"}};try{var genParams=getBidParams(data.snippet,general_keywords);if(null===genParams)throw{msg:"parse_gen_params"};data.tagParams_gen=genParams,data.drvID=genParams.drvID,retObj.drvID=data.drvID;var retVal=_getChannel(data.drvID),channelObj=retVal.channelObj;if(null===channelObj)throw{msg:"unknown_driver"};if(void 0===channelObj.paramKeys)throw{msg:"no_parse_template"};var specParams=getBidParams(data.snippet,channelObj.paramKeys);if(null===specParams)throw{msg:"parse_spec_params"};if(specParams=convertSpecParams(specParams),void 0!==channelObj.paramDefs){var textools=new TexTools;specParams=textools.objxt(channelObj.paramDefs,specParams)}data.tagParams_spc=specParams;var channelTypes=channelObj.root.getMTypes();if(channelTypes.indexOf(data.mtype)<0)throw{msg:"unsup_media"};return _firePingChannel(channelObj.bdChnID,"/_s10 tag_params","custom"),successReturn(data,retObj,channelObj)}catch(a){return _deltalog(),_fireErrorPing("/_s62 parse_error_cstm - "+a.msg,data.tagname),retObj.status="ERROR",retObj.msg="parsing bid tag on source: "+data.tagname,retObj}},that.srcNotf=function(a,b){function c(a){function b(a,b){var c=null;return b.forEach(function(b){null===c&&b.bdChnID===a&&(c=b)}),c}var c=null;return c=b(a,_schnChannels),null!==c?c:b(a,_v1Channels)}switch(a){case"bidrcvd":var d=c(b.bdChnID);d.bids++,_firePingChannelByMediaType(b.bdChnID,b.mtype,"","_s40 bid_recvd",{res:"med"}),_firePingChannelByMediaType(b.bdChnID,b.mtype,"/_s33 bid_prices",100*b.bidPrc,{scl:"mediumtimes",res:"med",exp:-5}),_fireSummaryPing("/_s20 bids",b.bdChnID);break;case"bidwon":var d=c(b.bdChnID);d.wins++,_firePingChannelByMediaType(b.bdChnID,b.mtype,"","_s50 bid_won",{res:"hi"}),_firePingChannelByMediaType(b.bdChnID,b.mtype,"/_s34 win_prices",100*b.clPrc,{scl:"mediumtimes",res:"hi",exp:-5}),_fireSummaryPing("/_s30 wins",b.bdChnID);break;case"bidlost":_firePingChannelByMediaType(b.bdChnID,b.mtype,"/_s35 lost_prices",100*b.bidPrc,{scl:"mediumtimes",res:"med",exp:-5})}},that.getDrvPrint=function(){return _genBdDrvReport()},_comps.heart.subscribe(that,100,"bdcnxhub",2,2),that.tick(Date.now())};return BdCnxHub}(textools,config,bd_channel,bd_pb_refr),fb_videop_caller=function(a,b){return function(a){function c(b){a.logger.writex({msg:b,prefix:"fb_videop_caller",inst:o})}function d(a,b,c){l.trackhub.sendEvent("vast_l","/_s80 caller_evts"+a,b,c)}function e(b,c,e){d(b,c,e),d("/zz_by_tag/"+a.tagName+b,c,e)}function f(a,b){function c(){if(!window.XMLHttpRequest)return null;var a=new window.XMLHttpRequest;return void 0===a.responseType?null:(a.onreadystatechange=function(){a.readyState===a.UNSENT||a.readyState===a.READYSTATE_UNINITIALIZED?o.initStatus=a.status:a.readyState===a.OPENED||a.readyState===a.READYSTATE_LOADING?o.openStatus=a.status:a.readyState===a.HEADERS_RECEIVED||a.readyState===a.READYSTATE_LOADED?(o.hdrRcvdStatus=a.status,void 0!==a.getAllResponseHeaders&&(o.respHdrs=a.getAllResponseHeaders()),o.respHdrs=o.respHdrs.replace(/\r\n/g," | ")):a.readyState!==a.DONE&&a.readyState!==a.READYSTATE_COMPLETE||(o.doneStatus=a.status,a.status>=200&&a.status<300||304===a.status?f():g("from_readyState: "+a.status))},a)}function d(){if(!window.XDomainRequest)return null;var a=new window.XDomainRequest;return a.onload=f,a.onerror=g,a.ontimeout=j,a}function e(){if(!window.ActiveXObject)return null;var a=new ActiveXObject("Microsoft.XMLHTTP");return a.onload=f,a.onerror=g,a.ontimeout=j,a}function f(){h(q,o)}function g(){i("er",q,o),Date.now()-l<n&&(u=!0)}function j(){i("to",q,o)}var k=!0;!0===b&&(k=!1);var l=Date.now(),o={isRetry:b,crd:k,initStatus:"---",openStatus:"---",hdrRcvdStatus:"---",doneStatus:"---",respHdrs:"---"},p="XHR",q=c();if(null===q&&(p="XDR",q=d()),null===q&&(p="AXO",q=e()),null===q)throw p="NA","cannot_create_xhr_obj";this.getAjxObjType=function(){return p},q.withCredentials=k,q.open(a.method,a.url),q.timeout=m,"POST"===a.method?q.send(a.data):q.send()}function g(){x=p.shift(),c(),x.status="inprogress";var a=Date.now();return x.reqdelay=a-x.reqtime,x.calltime=a,x.url}function h(a,b){x.response=""+a.responseText,x.calldelay=Date.now()-x.calltime,x.status="done",x.debugObj=b,y.push(JSON.parse(JSON.stringify(x))),t=!1,s=!1}function i(a,b,c){x.response="",x.calldelay=Date.now()-x.calltime,x.status="error"+("to"===a?" - (timeout)":""),x.debugObj=c,y.push(JSON.parse(JSON.stringify(x))),t=!0,s=!1}function j(a){function c(a){var b=Math.floor(a/1e3),c=a-1e3*b;return b=b<10?" "+b:""+b,c=0===c?"000":c<10?"00"+c:c<100?"0"+c:""+c,b+"."+c}var d=Date.now(),e=new b,f="";return y.forEach(function(a,b){if(f+="--------------------------------------------------------------\n",f+="Call Idx: "+b+"\n",f+="--------------------------------------------------------------\n\n",null===a)return void(f+="Variable 'callObj' is 'null'\n\n");var g=c(d-a.reqtime);f+="Request Internal Time:  "+g+"\n\n",f+="Tag Name:  "+a.tagName+"\n",f+="Requested URL:  "+a.url+"\n",f+="Pass:  "+a.pass+"\n",f+="Status:  "+a.status+"\n",f+="Request delay:  "+a.reqdelay+"\n",f+="Response delay:  "+a.calldelay+"\n\n",f+="Status Series:",f+=e.printObj(0,a.debugObj)+"\n\n",f+="Server response:\n\n"+a.response+"\n\n\n\n"}),f}var k=this,l=(a.master,a.comps),m=3e3,n=1e3,o=Math.round(999*Math.random());c();var p=[],q=null,r="INIT",s=!1,t=!1,u=!1,v=!1,w="",x=null,y=[];k.vastReq=function(a){var b={url:a.uri,onSuccess:a.onSuccess,onError:a.onError,tagName:a.tagName,timeout:a.timeout,pass:a.pass,status:"new",reqtime:Date.now(),reqdelay:null,calltime:null,calldelay:null,response:null};p.push(b),e("","_s00 requests")},k.vastReqAbort=function(a){},k.getDebugReport=function(a){return j(a)},this.tick=function(a){switch(r){case"INIT":r="IDLE";case"IDLE":if(0===p.length)break;w=g(),t=!1,u=!1,v=!1,s=!0;var b={method:"GET",url:w,data:null};q=new f(b,!1),r="WTRY1";break;case"WTRY1":if(!0===s)break;if(!0!==t){r="OK";break}if(!0!==u){r="ERR";break}t=!1,u=!1,v=!0,s=!0;var b={method:"GET",url:w,data:null};q=new f(b,!0),r="WTRY2";break;case"WTRY2":if(!0===s)break;if(!0===t){r="ERR";break}r="OK";case"OK":if(!0!==v?e("","_s10 reply ok"):e("","_s11 reply ok (2nd try)"),e("/reply_delay",x.calldelay,{scl:"shorttimes"}),void 0!==x.onSuccess&&null!==x.onSuccess){x.response;c();var d={text:x.response,pass:x.pass,tagName:x.tagName,calldelay:x.calldelay};x.onSuccess(d)}r="IDLE";break;case"ERR":if(e("","_s12 reply NOT ok"),void 0!==x.onError&&null!==x.onError){var d=(x.response,{text:x.response,pass:x.pass,tagName:x.tagName,calldelay:x.calldelay});x.onError(d)}r="IDLE"}}}}(0,textools),fb_videop_parse=function(a){return function(b){function c(a){b.logger.writex({msg:a,prefix:"fb_videop_parse",inst:k})}function d(a,c){b.logger.debugAlert(a,c)}function e(a,b){function e(a){var b=""+a;return b=b.replace(/\s+/g," "),b=b.replace(/\s\/>/g,"/>")}function j(a,b){for(var c,d,e,f=1e3,g=a,h=0;f>0&&(f--,!((c=g.indexOf("<![CDATA["))<0));){if((d=g.indexOf("]]>"))<0)throw{code:500,msg:"CDATA error",data:"CDATA"};d+=3;var i={};i.content=g.substring(c,d),i.id=h,e="STRIP<<("+h+")>>",g=g.replace(i.content,e),i.content=i.content.replace("<![CDATA[",""),i.content=i.content.replace("]]>",""),b.push(i),h++}return g}function k(a,b,c){var d,e;if(d=a,e=i(d,"VAST",c),"ok"!==e.status)throw{code:100,msg:"no valid VAST tag",data:d};if(!0===e.empty)return"noads";if(b.version=parseInt(g(e.tagStr,"version")),b.version<2)throw{code:110,msg:"unsupported VAST version",data:e.tagStr};if(d=e.tagContent,e=h(d,"Ad",c),d=e.rem,b.Ads=[],e.tags.length>0){for(var f=0;f<e.tags.length;f++){var j=e.tags[f];if(!0!==j.empty){var k={};l(j.tagStr,j.tagContent,k,c),b.Ads.push(k)}}return"ok"}return e=i(d,"Error",c),e.status,"noads"}function l(a,b,d,e){var f,h;if(c(),d.id=g(a,"id"),f=b,h=i(f,"InLine",e),"ok"===h.status)return d.InLine={},void m(h.tagStr,h.tagContent,d.InLine,e);if(h=i(f,"Wrapper",e),"ok"===h.status)return d.Wrapper={},void n(h.tagStr,h.tagContent,d.Wrapper,e);throw{code:130,msg:"no valid InLine or Wrapper tag",data:f}}function m(a,b,c,d){var e,j;if(e=b,c.Error={id:"NA",URI:""},j=i(e,"Error",d),"ok"===j.status&&(c.Error={},c.Error.id=g(j.tagStr,"id"),c.Error.URI=f(j.tagContent)),c.AdSystem={version:"NA",caption:"NA"},j=i(e,"AdSystem",d),"not_found"===j.status)throw{code:140,msg:"no valid AdSystem tag",data:e};if(c.AdSystem.version=g(j.tagStr,"version"),c.AdSystem.caption=j.tagContent,e=j.rem,c.AdTitle="NA",j=i(e,"AdTitle",d),"not_found"===j.status)throw{code:150,msg:"no valid AdTitle tag",data:e};if(c.AdTitle=j.tagContent,e=j.rem,c.Description="NA",j=i(e,"Description",d),"ok"===j.status&&(c.Description=j.tagContent),e=j.rem,c.Advertiser="NA",j=i(e,"Advertiser",d),"ok"===j.status&&(c.Advertiser=j.tagContent),e=j.rem,c.Impressions=[],j=h(e,"Impression",d),e=j.rem,"ok"===j.status)for(var k=0;k<j.tags.length;k++){var l=j.tags[k];if(!0!==l.empty){var m={};m.id=g(l.tagStr,"id"),m.URI=f(l.tagContent),c.Impressions.push(m)}}if(c.Creatives=[],j=i(e,"Creatives",d),"ok"!==j.status)throw{code:170,msg:"no valid Creatives tag",data:e};if(e=j.tagContent,j=h(e,"Creative",d),e=j.rem,0===j.tags.length)throw{code:172,msg:"no valid Creative tags found",data:e};for(var k=0;k<j.tags.length;k++){var l=j.tags[k];if(!0!==l.empty){var n={};!0===o(l.tagStr,l.tagContent,n,!0,d)&&c.Creatives.push(n)}}}function n(a,b,c,d){var e,j;if(e=b,c.Error={id:"NA",URI:""},j=i(e,"Error",d),"ok"===j.status&&!0!==j.empty&&(c.Error.id=g(j.tagStr,"id"),c.Error.URI=f(j.tagContent)),e=j.rem,j=i(e,"VASTAdTagURI",d),"ok"===j.status&&!0!==j.empty)c.VASTAdTagURI=f(j.tagContent),e=j.rem;else{if(j=i(e,"Error",d),"ok"!==j.status||!0===j.empty)throw{code:180,msg:"no valid VASTAdTagURI tag",data:e};c.ErrorURI=f(j.tagContent),e=j.rem}if(c.AdSystem={version:"NA",caption:"NA"},j=i(e,"AdSystem",d),"not_found"===j.status)throw{code:190,msg:"no valid AdSystem tag",data:e};if(c.AdSystem.version=g(j.tagStr,"version"),c.AdSystem.caption=j.tagContent,e=j.rem,c.Impressions=[],j=h(e,"Impression",d),e=j.rem,"ok"===j.status)for(var k=0;k<j.tags.length;k++){var l=j.tags[k];if(!0!==l.empty){var m={};m.id=g(l.tagStr,"id"),m.URI=f(l.tagContent),c.Impressions.push(m)}}if(c.Creatives=[],j=i(e,"Creatives",d),e=j.rem,"ok"===j.status){e=j.tagContent,j=h(e,"Creative",d),e=j.rem;for(var k=0;k<j.tags.length;k++){var l=j.tags[k];if(!0!==l.empty){var n={};!0===o(l.tagStr,l.tagContent,n,!1,d)&&c.Creatives.push(n)}}}}function o(a,b,d,e,f){var h,j;if(h=b,d.id=g(a,"id"),d.sequence=g(a,"sequence"),d.Linear={},j=i(h,"Linear",f),"ok"===j.status&&!0!==j.empty)return p(j.tagStr,j.tagContent,d.Linear,e,f),!0;if(j=i(h,"CompanionAds",f),"ok"===j.status)return c(),!1;if(j=i(h,"NonLinearAds",f),"ok"===j.status)return c(),!1;throw{code:200,msg:"parse_error while processing creative format",data:h}}function p(a,b,c,d,e){var j,k;if(j=b,!0===d){if(c.AdParameters="",k=i(j,"AdParameters",e),"ok"===k.status&&!0!==k.empty&&(c.AdParameters=k.tagContent),c.Duration="00:00:00",k=i(j,"Duration",e),j=k.rem,"not_found"===k.status||!0===k.empty)throw{code:210,msg:"no valid Duration tag",data:j};if(c.Duration=k.tagContent,c.MediaFiles=[],k=i(j,"MediaFiles",e),j=k.rem,"ok"!==k.status||!0===k.empty)throw{code:212,msg:"no valid MediaFiles tag",data:j};j=k.tagContent,k=h(j,"MediaFile",e),j=k.rem;for(var l=0;l<k.tags.length;l++){var m=k.tags[l];if(!0!==m.empty){var n={};q(m.tagStr,m.tagContent,n,e),c.MediaFiles.push(n)}}}if(j=b,c.TrackingEvents=[],k=i(j,"TrackingEvents",e),j=k.rem,"ok"===k.status&&!0!==k.empty){j=k.tagContent,k=h(j,"Tracking",e),j=k.rem;for(var l=0;l<k.tags.length;l++){var m=k.tags[l];if(!0!==m.empty){var n={};r(m.tagStr,m.tagContent,n,e),c.TrackingEvents.push(n)}}}j=b,c.VideoClicks={},k=i(j,"VideoClicks",e),j=k.rem,"ok"===k.status&&!0!==k.empty&&(j=k.tagContent,k=i(j,"ClickThrough",e),j=k.rem,"ok"===k.status&&!0!==k.empty&&(c.VideoClicks.ClickThrough={},c.VideoClicks.ClickThrough.id=g(k.tagStr,"id"),c.VideoClicks.ClickThrough.URI=f(k.tagContent)),k=i(j,"ClickTracking",e),j=k.rem,"ok"===k.status&&!0!==k.empty&&(c.VideoClicks.ClickTracking={},c.VideoClicks.ClickTracking.id=g(k.tagStr,"id"),c.VideoClicks.ClickTracking.URI=f(k.tagContent)),k=i(j,"CustomClick",e),j=k.rem,"ok"===k.status&&!0!==k.empty&&(c.VideoClicks.CustomClick={},c.VideoClicks.CustomClick.id=g(k.tagStr,"id"),c.VideoClicks.CustomClick.URI=f(k.tagContent)))}function q(a,b,c,d){c.id=g(a,"id"),c.delivery=g(a,"delivery"),c.type=g(a,"type"),c.bitrate=g(a,"bitrate"),c.minBitrate=g(a,"minBitrate"),c.maxBitrate=g(a,"maxBitrate"),c.width=g(a,"width"),c.height=g(a,"height"),c.scalable=g(a,"scalable"),c.maintainAspectRatio=g(a,"maintainAspectRatio"),c.codec=g(a,"codec"),c.apiFramework=g(a,"apiFramework"),c.URI=f(b),c.vpaid=!1,c.apiFramework&&"vpaid"===c.apiFramework.toLowerCase()&&(c.vpaid=!0)}function r(a,b,c,d){c.eventName=g(a,"event"),c.eventId=null,c.eventUri=f(b),c.eventParam=g(a,"offset")}var s={status:"ok",code:"",msg:""},t=[];try{if("noads"==k(j(e(a),t),b,t))return s.status="noads",s.code=0,s.msg="no ads available in VAST response",s}catch(a){s.status="error",s.code=a.code,s.msg=a.msg,d("VAST Player Exception: PARSE",a)}return s}function f(a){return l.convHTMLEnts(a)}function g(a,b){var c=""+a,d=c.indexOf(b);if(d<0)return null;if(d+=b.length,"="!==c.charAt(d))return null;d++;var e=c.charAt(d);d++,c=c.substring(d);var f=c.indexOf(e);return f<0?null:c=c.substring(0,f)}function h(a,b,c){for(var d={tags:[],rem:a,status:"ok"},e=""+a,f=null,g=100,h=0,j=0;;){if(++h>=g){d.status="error";break}if(f=i(e,b,c),e=f.rem,"ok"!==f.status){if("not_found"===f.status)break;d.status="error";break}d.tags.push(f),j++}return 0===j&&(d.status="not_found"),d.rem=e,d}function i(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.id===a)return d.content}throw{code:580,msg:"STRIP error",data:"unknown_strip_idx"}}var e,f,g,h,i,j,k,l,m={tagStr:"",tagContent:"",rem:"",status:"---",empty:!1},n=""+a,o="<"+b,p="</"+b+">",q="/>";if(m.rem=a,n.indexOf(o+q)>=0)return m.rem=a.replace(o+q,""),m.tagContent="",m.status="ok",m.empty=!0,m;if((j=n.indexOf(o))<0)return m.status="not_found",m;n=n.substring(j);var r=!1;if(">"===n.charAt(o.length)&&(r=!0)," "===n.charAt(o.length)&&(r=!0),!0!==r)return m.status="not_found",m;if((k=n.indexOf(p))<0)throw{code:520,msg:"no closure tag found",data:b};if(k+=p.length,e=n.substring(0,k),m.rem=a.replace(e,""),f=""+e,(j=n.indexOf(o))<0)throw{code:540,msg:"head error",data:b};l=f.indexOf(">"),l+=1,f=f.substring(j,l),g=e.replace(f,""),k=g.indexOf(p),g=g.substring(k),i=e.replace(f,""),i=i.replace(g,""),m.tagContent=i,h=""+f,j=h.indexOf(o),j+=o.length,h=h.substring(j),l=h.indexOf(">"),h=h.substring(0,l),m.tagStr=h,i=i.replace(/(\r\n|\n|\r)/gm,""),i=i.replace(/\s+/g,"");var s=i.indexOf("STRIP<<(");if(0===s){var t=i.indexOf(")>>");if(t<0)throw{code:560,msg:"STRIP error",data:"STRIP"};t+=3;var u=i.substring(s,t);t-=3,s+=8;var v=parseInt(i.substring(s,t)),w=d(v,c);w=w.replace(/\\\//g,"/"),m.tagContent=i.replace(u,w)}return m.status="ok",m}var j=this,k=(b.master,b.comps,Math.round(999*Math.random()));c();var l=new a;j.procData=function(a,b){return e(a,b)}}}(textools),fb_videop_proc=function(a,b){return function(c){function d(a){c.logger.writex({msg:a,prefix:"fb_videop_proc",inst:B})}function e(a,b){c.logger.debugAlert(a,b)}function f(a,b,c){A.trackhub.sendEvent("vast_l","/_s30 proc_evts"+a,b,c)}function g(a,b,d){f(a,b,d),f("/zz_by_tag/"+c.tagName+a,b,d)}function h(a,b){var c="";void 0!==b&&(c=b);var d={fileURL:a,fileData:c,vastCard:{}};N.unshift(d),S=a,T=a.substring(0,200)+"..."}function i(a){function e(a){function e(a){g("/_s10 offered_media","*inst*");for(var b in a){a[b];g("/_s10 offered_media",b)}}function f(a){var b="",c=!0;for(var d in a)!0===c?c=!1:b+=" | ",b+=d;return b}var i;switch(K){case"INIT":if(!0===y(G)){h("XML input file",G),K="VRDY";break}var j={playerWidth:c.playerWidth,playerHeight:c.playerHeight};h(c.macroproc.expand(G,j)),d(),g("","_s00 *inst*"),v("proc_started",{tagUri:T}),R={status:"undef",code:"",msg:""},K="GET_FILE";case"GET_FILE":J="...",s(M,S,H),d(),L=a,K="WAITING_FOR_FILE";break;case"WAITING_FOR_FILE":if(a-L>E.media.vastFileTimeout){d();E.media.vastFileTimeout;g("","_s30 proc_error"),g("/_s30 proc_errors","timeout"),g("/_s40 timeout_errors",H),v("server_timeout"),t("server_timeout"),R.msg="file_retrieval_timeout",R.status="error",R.code=1,K="VAST_NOT_OK";break}if("error"===J){d(),g("","_s30 proc_error"),g("/_s30 proc_errors","file_retrv"),v("error_file_retrv"),t("error_file_retrv"),R.msg="file_retrieval_error",R.status="error",R.code=2,K="VAST_NOT_OK";break}if("ok"!==J)break;d(),v("vast_data_arrived",{tagUri:T}),K="VRDY";case"VRDY":if(i=new b({master:z,comps:A,logger:c.logger}).procData(N[0].fileData,N[0].vastCard),"error"===i.status){var k="parse_error - "+i.msg;d(),g("","_s30 proc_error"),g("/_s30 proc_errors","parse"),g("/_s60 parse_errors",i.msg),v("error_parsing_response"),R.msg=k,R.status="error",R.code="parse_"+i.code,K="VAST_NOT_OK";break}U=N[0].fileData,V=N[0].vastCard;var r=l(V,P);Y+=r;var u=m(V);Z=Z.concat(Z,u);var w=n(V);if(null!==w){if($.push(w),null===W&&(W=w.Wrapper.AdSystem.caption),++M<=E.media.maxRedirect){d(),g("/_s80 redir_levels",M),v("wrapper_redir",{data:w.Wrapper.VASTAdTagURI}),h(w.Wrapper.VASTAdTagURI),K="GET_FILE";break}d(),g("","_s30 proc_error"),g("/_s30 proc_errors","max_redir"),R.msg="too_many_redirects",R.status="error",R.code=3,K="VAST_NOT_OK";break}if(0===Y){d(),g("","_s11 no_ads"),R.msg="",R.status="no_ads",R.code=4,I=!1,K="PARK";break}if(g("","_s10 yes_ads"),e(P),0===Z.length){d(),g("/_s20 non_usable_media",f(P)),g("","_s21 no_usable_ads"),R.msg="",R.status="no_usable_ads",R.code=5,K="VAST_NOT_OK";break}Q=o(Z,C,D),p($),q(Q),v("usable_ads",{bestAdAvailable:Q}),d(),g("","_s20 usable_ads"),R.msg="",R.status="usable_ads",R.code=6,I=!1,K="PARK";break;case"VAST_NOT_OK":d(),I=!1,K="PARK"}}try{e(a)}catch(a){var f=a.message;g("/_s30 proc_errors","tick"),u("mainproc",a),R.msg="process error:"+f,R.status="error",R.code=7,I=!1}}function j(a){var b=null;return X.forEach(function(c){!0===c.supp&&null===b&&-1!==c.mimetype.indexOf(a)&&(b=c)}),null===b?null:b.vastdrv}function k(){var a=document.createElement("video");X.forEach(function(b){if("html5"===b.vastdrv){0===a.canPlayType(b.mimetype).length&&(b.supp=!1)}})}function l(a,b){function c(a,b){void 0===b[a]&&(b[a]={count:0}),b[a].count++}var d=0;return a.Ads.forEach(function(a){if(void 0!==a.InLine){d++;a.InLine.Creatives.forEach(function(a){a.Linear.MediaFiles.forEach(function(a){c(a.type,b)})})}}),d}function m(a){function b(a){if(void 0===a.Linear)return!1;var b=JSON.parse(JSON.stringify(a));b.Linear.MediaFiles=[];var c=b.Linear.MediaFiles;return a.Linear.MediaFiles.forEach(function(a){null!==j(a.type)&&c.push(a)}),c.length<1?null:b}var c=[];a.Ads.forEach(function(a){void 0!==a.InLine&&c.push(a)});var d=[];return c.forEach(function(a){var c=JSON.parse(JSON.stringify(a));c.InLine.Creatives=[];var e=c.InLine.Creatives;a.InLine.Creatives.forEach(function(a){var c=b(a);null!==c&&e.push(c)}),e.length<1||d.push(c)}),d}function n(a){var b=[];if(a.Ads.forEach(function(a){void 0!==a.Wrapper&&b.push(a)}),0===b.length)return null;var c=b[0],d=JSON.parse(JSON.stringify(c));d.Wrapper.Creatives=[];var e=d.Wrapper.Creatives;return c.Wrapper.Creatives.forEach(function(a){void 0!==a.Linear&&e.push(a)}),d}function o(a,b,c){function d(a){var b=[],c=[];return a.forEach(function(a){if(a.mediacase=j(a.type),"vpaid"===a.mediacase)b.push(a);else{if("html5"!==a.mediacase)throw{msg:"unkown media case"};c.push(a)}}),c.length>=b.length?{mediacase:"html5",mediaFiles:c}:{mediacase:"vpaid",mediaFiles:[b[0]]}}function e(a,b,c){function d(a,b){var c=null;if(a.forEach(function(a){null===c&&a.width===b.width&&a.height===b.height&&(c=a)}),null!==c)return void c.mediaFiles.push(b);var d={width:b.width,height:b.height,mediaFiles:[b]};a.push(d)}function e(a,b,c){var d=parseInt(a.width)*parseInt(a.height),e=parseInt(b)*parseInt(c);return Math.abs(Math.log(d/e))}var f=[];a.forEach(function(a){d(f,a)}),f.forEach(function(a){a.score=e(a,b,c)}),f.sort(function(a,b){return a.score-b.score});var g=f[0];return{width:parseInt(g.width),height:parseInt(g.height),mediaFiles:g.mediaFiles}}function f(a){function b(a){var b=10;return void 0!==a.bitrate&&null!==a.bitrate&&(b=Math.exp(parseInt(a.bitrate)/1024)),b}if(a.length<1)return 0;var c=0;return a.forEach(function(a){a.score=b(a),c+=a.score}),c/a.length}return a.forEach(function(a){var g=a.InLine.Creatives;g.forEach(function(a){var g=d(a.Linear.MediaFiles);a.mediacase=g.mediacase,a.Linear.MediaFiles=g.mediaFiles;var g=e(a.Linear.MediaFiles,b,c);a.sizecase={width:g.width,height:g.height},a.Linear.MediaFiles=g.mediaFiles,a.score=f(a.Linear.MediaFiles,b,c)}),g.sort(function(a,b){return a.score-b.score});var h=g[0];a.InLine.Creatives=[],a.InLine.Creatives.push(h)}),a.sort(function(a,b){return a.InLine.Creatives[0].score-b.InLine.Creatives[0].score}),a[0]}function p(a){a.forEach(function(a){var b=a.Wrapper;"Error"in b&&r("Error",b.Error.id,b.Error.URI),"Impressions"in b&&b.Impressions.forEach(function(a){r("Impression",a.id,a.URI)}),"Creatives"in b&&b.Creatives.forEach(function(a){if("Linear"in a){var b=a.Linear;if("TrackingEvents"in b&&b.TrackingEvents.forEach(function(a){r(a.eventName,a.eventId,a.eventUri,a.eventParam)}),"VideoClicks"in b){var c=b.VideoClicks;"ClickTracking"in c&&r("ClickTracking",c.ClickTracking.id,c.ClickTracking.URI),"CustomClick"in c&&r("CustomClick",c.CustomClick.id,c.CustomClick.URI)}}})})}function q(a){var b=a.InLine;"Error"in b&&r("Error",b.Error.id,b.Error.URI),"Impressions"in b&&b.Impressions.forEach(function(a){r("Impression",a.id,a.URI)});var c=b.Creatives[0].Linear;if("TrackingEvents"in c&&c.TrackingEvents.forEach(function(a){r(a.eventName,a.eventId,a.eventUri,a.eventParam)}),"VideoClicks"in c){var d=c.VideoClicks;"ClickTracking"in d&&r("ClickTracking",d.ClickTracking.id,d.ClickTracking.URI),"CustomClick"in d&&r("CustomClick",d.CustomClick.id,d.CustomClick.URI)}}function r(a,b,c,e){d();var f={eventName:a,eventId:b,eventUri:c,eventParam:e};O.push(f)}function s(a,b,c){function d(a){N[0].fileData=a.text,N[0].callDelay=a.callDelay,J="ok"}function e(a){N[0].fileData=a.text,N[0].callDelay=a.callDelay,J="error"}var f=Math.floor(.9*E.media.vastFileTimeout),g={pass:a,uri:b,timeout:f,tagName:c,onSuccess:d,onError:e};F.vastReq(g)}function t(a){F.vastReqAbort(a)}function u(a,b){var c={who:"proc",event:"exception",data:{where:a,errObj:b,otherData:{_curState:K}}};z.fireEvent("snapshot",c),e("VAST Player Exception: "+a,b)}function v(a,b){var c={who:"proc",event:a,data:b};z.fireEvent("snapshot",c)}function w(b){function c(a){var b="",c=0;return N.forEach(function(e,f){b+="-------------- PASS % "+f+"--------------\n",b+="fileURL: "+e.fileURL+"\n\n\n\n",b+="fileData: "+e.fileData+"\n\n\n\n",c=0,b+="vastCard:\n",b+=d.printObj(c,e.vastCard,a)+"\n\n\n"}),b}var d=new a,e="";return e+="================ PASS LIST ================\n\n",e+=c(b)}function x(b){var c=new a,d=0,e="",f={_inProgress:I,_fileStatus:J,_curState:K,_anchorTime:L,_passIdx:M,_retObj:R};return d=0,e+="specObject:\n",e+=c.printObj(d,f,b)+"\n\n\n",d=0,e+="_chosenInLineAdData:\n",e+=c.printObj(d,Q,b)+"\n\n\n",d=0,e+="_trackList:\n",e+=c.printObj(d,O,b)+"\n\n\n"}function y(a){function b(a){var b=""+a.toLowerCase();return b=b.replace(/\s+/g," "),b=b.replace(/\s\/>/g,"/>")}var c,d,e,f,g,h=b(a),i="<vast",j="</vast>",k="/>";if(h.indexOf(i+k)>=0)return!0;if((e=h.indexOf(i))<0)return!1;h=h.substring(e);var l=!1;return">"===h.charAt(i.length)&&(l=!0)," "===h.charAt(i.length)&&(l=!0),!0===l&&(!((f=h.indexOf(j))<0)&&(f+=j.length,c=h.substring(0,f),d=""+c,!((e=h.indexOf(i))<0)&&(g=d.indexOf(">"),g+=1,d=d.substring(e,g),!0)))}var z=this,A=(c.master,c.comps),B=Math.round(999*Math.random());d(),z.fireEvent=function(a,b){c.master.fireEvent(a,b)};var C=c.playerWidth,D=c.playerHeight,E=c.opConfig,F=c.vastCaller,G=c.tagSnippet,H=c.tagName,I=!0,J=null,K="INIT",L=null,M=0,N=[],O=[],P={},Q=null,R={},S=null,T=null,U="",V={},W=null,X=[{supp:!0,vastdrv:"html5",mimetype:"video/mp4",ext:"mp4"},{supp:!0,vastdrv:"html5",mimetype:"video/ogg",ext:"ogg"},{supp:!0,vastdrv:"html5",mimetype:"video/ogv",ext:"ogv"},{supp:!0,vastdrv:"html5",mimetype:"video/webm",ext:"webm"},{supp:!0,vastdrv:"html5",mimetype:"video/x-ms-wmv",ext:"wmv"},{supp:!0,vastdrv:"vpaid",mimetype:"application/javascript",ext:"js"}];k();var Y=0,Z=[],$=[];z.isReady=function(){return!0!==I},z.getDebugReportA=function(a){return w(a)},z.getDebugReportB=function(a){return x(a)},z.getResult=function(){var a={retObj:R,passIdx:M,vastXMLuri:S,passXMLData:U,passVastCard:V,adId:"NA",adWrapper:"NA",adSystem:"NA",adSystemVer:"NA",adTitle:"NA",adDesc:"NA",adMediaCase:"NA",adDuration:"00:00:00",adParameters:"",adSizeWidth:"NA",adSizeHeight:"NA",adFileList:[],adTrackList:[],adClickUrl:""};if(null!==Q){var b=Q.InLine,c=b.Creatives[0];a.adId=Q.id,a.adWrapper=W,a.adSystem=b.AdSystem.caption,a.adSystemVer=b.AdSystem.version,a.adTitle=b.AdTitle,a.adDesc=b.Description,a.adMediaCase=c.mediacase,a.adApiFramework=c.apiFramework,a.adDuration=c.Linear.Duration,a.adParameters=c.Linear.AdParameters,a.adSizeWidth=c.sizecase.width,a.adSizeHeight=c.sizecase.height,a.adFileList=c.Linear.MediaFiles,a.adTrackList=O,void 0!==c.Linear.VideoClicks&&void 0!==c.Linear.VideoClicks.ClickThrough&&(a.adClickUrl=c.Linear.VideoClicks.ClickThrough.URI)}return a},z.tick=function(a){i(a),null!==F&&F.tick(a)}}}(textools,fb_videop_parse),
fb_videop_tracker=function(){return function(a){function b(b){a.logger.writex({msg:b,prefix:"fb_videop_tracker",inst:e})}function c(a){function c(a){(new Image).src=a.eventUri,b()}function d(a){for(var b=0;b<j.length;b++){if(j[b]===a)return!0}return!1}if(b(),!0===d(a))return void b();j.push(a);for(var e=0,f=0;f<h.length;f++){var g=h[f];g.eventName===a&&(c(g),e++)}0===e&&b()}var d=this,e=(a.master,a.comps,Math.round(999*Math.random()));b();var f=!1,g=!1,h=null,i=[],j=[];d.addCustomTrack=function(a,c,d,e){b();var f={eventName:a,eventId:c,eventUri:d,eventParam:e};b(),h.push(f)},d.registerEvent=function(a,c,d){b();var e={perc:a,trackEvent:c,fbEvent:"",fired:!1};d&&(e.fbEvent=d),i.push(e)},d.setup=function(a){function b(a){return-1!==a.indexOf("%")?(a.replace("%",""),parseInt(a)):null}h=a,i=[];for(var c=0;c<h.length;c++){var e=h[c];if("progress"===e.eventName)var f=b(e.eventParam);null!==f&&void 0!==f&&d.registerEvent(f,e.eventName)}},d.start=function(){f=!0},d.pause=function(a){c(a?"pause":"resume")},this.rewind=function(){g=!0},d.mute=function(a){c(a?"mute":"unmute")},d.close=function(){c("close")},d.skip=function(){c("skip")},d.expand=function(){c("expand")},d.collapse=function(){c("collapse")},d.click=function(){c("ClickTracking"),c("CustomClick")},d.error=function(){c("Error")},d.sendVASTEvent=function(a,d){b(),c(a)},d.sendVASTClickEvent=function(){b(),d.click()},d.tickPlay=function(a,b){function d(a){for(var b=0;b<i.length;b++){var c=i[b];if(!(c.perc<0)&&(!0!==c.fired&&!(c.perc>a)))return c.fired=!0,c}return null}if(!0===f&&!0!==isNaN(a)&&!0!==isNaN(b)){if(!0===g)return g=!1,void c("rewind");var e=Math.floor(100*a/b),h=d(e);null!==h&&c(h.trackEvent)}}}}(),fb_videop_html=function(){return function(a){function b(b){a.logger.writex({msg:b,prefix:"fb_videop_html",inst:o})}function c(b,c){a.logger.debugAlert(b,c)}function d(a,b,c){m.trackhub.sendEvent("vast_h","/_s50 html_evts"+a,b,c)}function e(b,c,e){d(b,c,e),d("/zz_by_tag/"+a.tagName+b,c,e)}function f(a,c,d){function f(){C=!0}function g(){e("","_s11 <-- metadata_loaded")}function j(){B=!0,h("AdLoaded"),e("","_s13 <-- can_play"),e("","_s14 <-- ad_loaded"),e("/times/ad_loaded",Date.now()-q,{scl:"shorttimes"})}function k(){}function m(){e("","_s12 <-- media_loaded")}function o(){b(),h("AdSizeChange"),e("","_s17 <-- ad_resized")}function u(){if(h("AdPlaying"),e("","_s23 <-- ad_playing"),!0!==D){D=!0,h("AdStarted"),e("","_s21 <-- ad_started");e("/times/ad_start",Date.now()-r,{scl:"shorttimes"}),h("AdImpression"),e("","_s25 <-- ad_impression (accounting event)")}}function z(){E=!0,!0!==F&&(h("AdPaused"),e("","_s24 <-- ad_paused"))}function A(){v=!0,h("AdError"),e("","_s50 <-- ad_error");var a=L.error,c="NA",d="NA";null!==a?(void 0!==a.code&&(c=a.code),void 0!==a.message&&(d=a.message)):(c="null",d="null"),e("/errors","code: "+c+" - msg: "+d),b(),i("plyr_html","video_error_html",a)}function H(){G=!0,h("AdVolumeChange"),e("","_s60 <-- vol_change")}function I(){F=!0,b(),w=!0,e("","_s27 <-- ad_ended")}function J(){b(),l.AdClickThru(0,!0),e("","_s75 <-- ad_clicked")}var K="";K+=' <video id="'+t+'" ',K+=' width="'+x+'" ',K+=' height="'+y+'" ',K+=' x-webkit-airplay="allow" webkit-playsinline="true" playsinline="" ',K+=" >",a.forEach(function(a,b){K+=' <source src="'+a.uri+'" type="'+a.type+'">'}),K+=" </video>",p.html(s,K),p.bind(s,"click",function(){b(),J()}),p.bind(s,"touchend",function(){b(),J()});var L=n.document.getElementById(t);return L.onloadstart=f,L.onloadedmetadata=g,L.oncanplay=j,L.oncanplaythrough=k,L.onloadeddata=m,L.onresize=o,L.onplaying=u,L.onpause=z,L.onerror=A,L.onended=I,L.volume=0,L.onvolumechange=H,L.style.objectFit="cover",b(),L}function g(){p.empty(s),b(),h("AdStopped"),e("","_s90 --\x3e remove")}function h(a,b){l.VPAID_notifyEvent(a,b)}function i(a,b,c){var d={who:a,event:b,data:{errorObj:c,videoOuterHTML:_videoSlot.outerHTML,videoInnerHTML:_videoSlot.innerHTML}};l.fireEvent("snapshot",d)}function j(a,b){function d(a,b){var c="Msg:"+b+" - ";void 0!==b.stack&&(c+="Stack:",c+=b.stack.toString()),e("/exceptions",c.substring(0,256))}v=!0,d(a,b);var f={_player_mediaend:w,_cmdWidth:x,_cmdHeight:y,_adUnitUri:z,_videoObjReady:B,_videoObjLoadStarted:C,_videoObjPlaying:D,_videoObjPaused:E,_videoObjStopping:F,_videoObjVolume:G},g={who:"plyr_html",event:"exception",data:{where:a,errObj:b,otherData:{_playEventsList:J,_debugStrings:u,contextData:f}}};l.fireEvent("snapshot",g),c("VAST Player Exception: HTML5: "+a,b)}var k=this,l=a.master,m=a.comps,n=a.hostWnd,o=Math.round(999*Math.random());b();var p=a.domtool,q=0,r=0,s=(a.main_wrapper_id,a.containerID),t="fbvp_3ujkf8Sbn",u=[],v=!1,w=!1,x=0,y=0,z=null,A=null,B=!1,C=!1,D=!1,E=!1,F=!1,G=!1,H="INIT",I=0,J=[{evName:"AdVideoStart",thresh:1,sent:!1},{evName:"AdVideoFirstQuartile",thresh:25,sent:!1},{evName:"AdVideoMidpoint",thresh:50,sent:!1},{evName:"AdVideoThirdQuartile",thresh:75,sent:!1},{evName:"AdVideoComplete",thresh:99,sent:!1},{evName:"dummyItem",thresh:200,sent:!1}];k.tick=function(){function a(a){for(var b=0;b<J.length;b++)auxEvent=J[b],!0!==auxEvent.sent&&(a<auxEvent.thresh||(h(auxEvent.evName),auxEvent.sent=!0,a>80&&(F=!0)))}switch(H){case"INIT":H="READY";break;case"READY":if(!0!==D)break;if(0===A.duration)break;a(Math.floor(100*A.currentTime/A.duration)),H="READY"}},k.isPlayerError=function(){return v},k.isMediaEnd=function(){return w},k.setupEnvironment=function(a){try{z=a.adUnitUri,x=a.width,y=a.height,h("EnvReady"),e("","_s00 --\x3e setup_env"),e("","_s01 <-- env_ready")}catch(a){j("setupEnv",a)}},k.initAd=function(a,b,c,d,g,h){try{I=g.duration,A=f(g.fileList,a,b),e("","_s10 --\x3e init_ad"),q=Date.now()}catch(a){j("initAd",a)}},k.resizeAd=function(a,b,c){try{p.width(t,a),p.height(t,b),e("","_s16 --\x3e resize_ad")}catch(a){j("initAd",a)}},k.startAd=function(){try{A.play(),e("","_s20 --\x3e start_ad"),r=Date.now()}catch(a){j("startAd",a)}},k.pauseAd=function(){try{A.pause(),e("","_s22 --\x3e pause_ad")}catch(a){j("pauseAd",a)}},k.resumeAd=function(){try{A.play(),e("","_s28 --\x3e resume_ad")}catch(a){j("resumeAd",a)}},k.stopAd=function(){try{F=!0,g(),e("","_s29 --\x3e stop_ad")}catch(a){j("stopAd",a)}},k.skipAd=function(){try{h("AdSkipped"),k.stopAd(),e("","_s70 --\x3e skip_ad")}catch(a){j("skipAd",a)}},k.expandAd=function(){e("","_s72 --\x3e expand_ad")},k.collapseAd=function(){e("","_s74 --\x3e collapse_ad")},k.get_adLinear=function(){return!0},k.get_adExpanded=function(){return!0},k.get_adDuration=function(){try{return A.duration}catch(a){return j("get_adDuration",a),0}},k.get_adRemainingTime=function(){try{return A.duration-A.currentTime}catch(a){return j("get_adRemainingTime",a),0}},k.get_adVolume=function(){try{return A.volume}catch(a){return j("get_adVolume",a),0}},k.get_adUnitVersion=function(){return 1},k.set_adVolume=function(a){try{A.volume=a,b()}catch(a){j("set_adVolume",a)}},k.set_Position=function(a){try{A.currentTime=a}catch(a){j("set_Position",a)}}}}(),fb_videop_vpaid=function(a){return function(a){function b(b){a.logger.writex({msg:b,prefix:"fb_videop_vpaid",inst:z})}function c(b,c){a.logger.debugAlert(b,c)}function d(a,b,c){y.trackhub.sendEvent("vast_h","/_s60 vpaid_evts"+a,b,c)}function e(b,c,e){d(b,c,e),d("/zz_by_tag/"+a.tagName+b,c,e)}function f(a,b){x.VPAID_notifyEvent(a,b)}function g(a){b()}function h(a){switch(X){case"NOT_INIT":if(!0!==Y)break;b(),V=n(),X="WFER";case"WFER":if(!0===da){X="ERROR";break}var c=o();if(null===c)break;T=c.videoAdLayerElm,U=c.videoAdSlotElm,U.addEventListener("playing",k("playing")),U.addEventListener("loadstart",k("loadstart")),U.addEventListener("progress",k("progress")),U.addEventListener("loadedmetadata",k("loadedmetadata")),U.addEventListener("canplay",k("canplay")),U.addEventListener("canplaythrough",k("canplaythrough")),U.addEventListener("loadeddata",k("loadeddata")),U.addEventListener("durationchange",k("durationchange")),U.addEventListener("error",j(U));var d=p();if(null===d)break;if(W=d,!0!==q()){da=!0,X="ERROR";break}var g=W.handshakeVersion("2.0");A=parseFloat(g);b(),r(),$=!0,f("EnvReady"),e("","_s11 <-- env ready"),e("/times/env_setup_delay",a-Z,{scl:"shorttimes"}),X="WFL";case"WFL":if(!0===da){X="ERROR";break}if(!0!==_)break;W.setAdVolume(ga),X="WFS";break;case"WFS":if(!0===da){X="ERROR";break}if(!0!==ba)break;e("/times/video_start_delay",a-ka,{scl:"shorttimes"}),X="RNG";case"RNG":if(s(a),!0===da){X="ERROR";break}if(!0!==fa)break;b(),t(),f("AdStopped"),X="PARK";break;case"ERROR":f("AdError"),X="PARK"}}function i(a){function c(a){var b=null;return ua.forEach(function(c){!0!==c.sent&&(c.time>a||(b=c,c.sent=!0))}),b}var d=c(a);null!==d&&(e("/surveillance/trsp_evts",d.time,{scl:"tbrtimes"}),b())}function j(a){var c=a.error;if(null!==c){var d="NA",f="NA";void 0!==c.code&&(d=c.code),void 0!==c.message&&(f=c.message),e("/surveillance/errors","code: "+d+" - msg: "+f),b(),u("plyr_vpaid","surv_vpaid_error",c)}}function k(a){return e("/surveillance/events",a),function(){l(a)}}function l(a){b(),!0===la&&!0!==da&&!0!==ma&&(ma=!0,b(),e("","_s21 <-- actv sensed"),e("/times/act_sens",Date.now()-ka,{scl:"shorttimes"}),la=!1)}function m(a){!0===la&&!0!==ma&&(a-ka<na||!0!==da&&(da=!0,b(),e("","_s22 <-- snapped out"),e("/times/act_sens","_zzz snapped out"),la=!1))}function n(){function a(a){var b="";b+="<html>",b+="<head>",b+="<style>",b+=" .fbVideoWrp { width:100%; height:100%; position:absolute; top:0; left:0; bottom:0; right:0; } ",b+="</style>",b+="<scr",b+="ipt>",b+="window.adJSLoaded = false;",b+="window.ldClbk = function () {",b+="window.adJSLoaded = true;",b+="};",b+="window.getElms = function () {",b+="return { ",b+="adJSLoaded : window.adJSLoaded, ",b+='videoAdLayerElm : document.getElementById("fbVideoAdWrapper"), ',b+='videoAdSlotElm : document.getElementById("fbVideoAdSlot") ',b+="};",b+="};",b+="</scr",b+="ipt>",b+="</head>",b+="<body onload=\"var scpt=document.createElement('scr",b+="ipt');",b+="scpt.src='"+a+"';",b+="scpt.addEventListener('load', function() { window.ldClbk(); });",b+='document.body.appendChild(scpt);" style="margin:0">',b+='<video id="fbVideoAdSlot" ',b+='x-webkit-airplay="allow" webkit-playsinline="true" playsinline="" preload="metadata" ',b+='style="width:100%; height:100%; object-fit:cover;" ',b+="></video>",b+='<div id="fbVideoAdWrapper" class="fbVideoWrp"></div>',b+="</body>",b+="</html>";var c={target_element:M,divClass:O,segmName:K,divID:N,segmentID:J,tagname:R,preScript:"",snippet:b,width:ha,height:ia};return I.insertFIF(c)}return a(ja)}function o(){if(null===V)return null;if(null===V.contentWindow)return null;if(void 0===V.contentWindow)return null;if(void 0===V.contentWindow.getElms)return null;var a=V.contentWindow.getElms();return!0!==a.adJSLoaded?null:{videoAdLayerElm:a.videoAdLayerElm,videoAdSlotElm:a.videoAdSlotElm}}function p(){if(null===V)return null;var a=V.contentWindow.getVPAIDAd;return"function"!=typeof a?null:a()}function q(){function a(a){"function"!=typeof W[a]&&(b=!1)}var b=!0;return a("handshakeVersion"),a("initAd"),a("startAd"),a("stopAd"),a("skipAd"),a("resizeAd"),a("pauseAd"),a("resumeAd"),a("expandAd"),a("collapseAd"),a("subscribe"),a("unsubscribe"),b}function r(){function a(a){return function(d){if(null===c[a])return void b();c[a](a,d)}}var c={AdLoaded:function(a,c){_=!0,f(a,c);var d=Date.now()-ka;!0===la?(la=!1,e("","_s23 <-- ad loaded (before actv sensed)"),e("/times/ad_loaded_bfr_actv",d,{scl:"shorttimes"}),b()):(e("","_s24 <-- ad loaded (after actv sensed)"),e("/times/ad_loaded_aft_actv",d,{scl:"shorttimes"}),b())},AdStarted:function(a,b){if(f(a,b),e("","_s31 <-- ad started"),0!==oa){e("/times/ad_start",Date.now()-oa,{scl:"shorttimes"})}else e("/times/ad_start","*sent_before_ad_start*")},AdImpression:function(a,c){e("","_s32 <-- ad impression (accounting event)"),b(),f(a,c)},AdVideoStart:function(a,c){ba=!0,e("","_s33 <-- video started"),b(),f(a,c)},AdPaused:function(a,c){b(),f(a,c)},AdPlaying:function(a,c){e("","_s34 <-- ad playing"),b(),f(a,c)},AdStopped:function(a,c){!0!==fa&&(fa=!0,e("","_s40 <-- ad stopped"),b(),f("AdStopped"))},AdError:function(a,c){da=!0,f(a,c);var d=Date.now()-ka;!0===la?(la=!1,e("","_s25 <-- ad error (before actv sensed)"),e("/times/ad_error_bfr_actv",d,{scl:"shorttimes"}),b()):(e("","_s26 <-- ad error (after actv sensed)"),e("/times/ad_error_aft_actv",d,{scl:"shorttimes"}),b()),!0!==aa?(e("","_s28 <-- ad error (before start)"),e("/times/ad_error_bfr_strt",d,{scl:"shorttimes"}),b()):(e("","_s38 <-- ad error (after start)"),e("/times/ad_error_aft_strt",d,{scl:"shorttimes"}),b()),u("plyr_vpaid","ad_error_vpaid",c),e("/ad_error_data/obj",""+c),e("/ad_error_data/outerHTML",U.outerHTML)},AdLog:function(a,c){e("","_s80 <-- ad log"),e("/ad_logs",""+c),b(),f(a,c)},AdClickThru:function(a,c){ca=!0,b(),f(a,c),b(),x.AdClickThru(0,!1),e("","_s75 <-- ad_clicked")},AdVideoFirstQuartile:function(a,c){e("","_s35 <-- q1"),b(),f(a,c)},AdVideoMidpoint:function(a,c){e("","_s35 <-- q2"),f(a,c),b()},AdVideoThirdQuartile:function(a,c){e("","_s35 <-- q3"),f(a,c),b()},AdVideoComplete:function(a,c){e("","_s35 <-- q4"),f(a,c),b()},AdDurationChange:function(a,c){A>=2&&(H=W.getAdDuration()),b()},AdUserClose:null,AdSizeChange:null,AdVolumeChange:null,AdRemainingTimeChange:null,AdInteraction:null,AdSkipped:null,AdLinearChange:null,AdExpandedChange:null,AdSkippableStateChange:null,AdUserAcceptInvitation:null,AdUserMinimize:null};try{for(var d in c)W.subscribe(a(d),d)}catch(a){v("regEventClbks",a,!1)}}function s(a){!0!==sa&&!0===ba&&(a-qa<1e3||(qa=a,0===pa?pa=U.currentTime:U.currentTime!==pa?(pa=U.currentTime,i(U.currentTime)):++ra>ta&&(sa=!0,da=!0,b(),e("","_s39 <-- transp error"),e("/times/transp_error",a-pa,{scl:"shorttimes"}))))}function t(){null!==I.getElmHandle(M)&&I.empty(M),b(),e("","_s60 <-- plyr rmvd")}function u(a,c,d){var e={who:a,event:c,data:{errorObj:d,videoOuterHTML:U.outerHTML,videoInnerHTML:U.innerHTML}};x.fireEvent("snapshot",e),b()}function v(a,b,d){function f(a,b){var c="Msg:"+b+" - ";void 0!==b.stack&&(c+="Stack:",c+=b.stack.toString()),e("/exceptions",c.substring(0,256))}!0===d&&(da=!0),f(a,b);var g={_segmentID:J,_segmName:K,_main_wrapper_id:L,_containerID:M,_wrapperDivID:N,_wrapperClass:O,_unitfbxID:P,_opConfig:Q,_currentState:X,_start_setup:Y,_player_ready:$,_player_error:da,_passbackDetected:ea,_player_mediaend:fa,_playerVolume:ga,_cmdWidth:ha,_cmdHeight:ia,_adUnitUri:ja},h={who:"plyr_vpaid",event:"exception",data:{where:a,errObj:b,otherData:{contextData:g,_adUnitUri:ja,_fileDataStr:S}}};x.fireEvent("snapshot",h),c("VAST Player Exception: VPAID: "+a,b)}var w=this,x=a.master,y=a.comps,z=Math.round(999*Math.random());b();var A,B,C,D,E,F,G,H,I=a.domtool,J=a.segmentID,K=a.segmName,L=a.main_wrapper_id,M=a.containerID,N=a.uniqueID,O="fb_tag_wrapper",P=a.unitfbxID,Q=a.opConfig,R=a.tagName,S=(a.nodeID,a.fileDataStr),T=null,U=null,V=null,W=void 0,X="NOT_INIT",Y=!1,Z=0,$=!1,_=!1,aa=!1,ba=!1,ca=!1,da=!1,ea=!1,fa=!1,ga=0,ha=0,ia=0,ja=null,ka=0,la=!1,ma=!1,na=6e3,oa=0,pa=0,qa=0,ra=0,sa=!1,ta=10,ua=[{time:0,sent:!1},{time:3,sent:!1},{time:6,sent:!1},{time:9,sent:!1},{time:12,sent:!1},{time:15,sent:!1},{time:18,sent:!1},{time:21,sent:!1},{time:24,sent:!1}];e("","_s00 inst"),w.isPlayerError=function(){return da},w.isMediaEnd=function(){return fa},w.setupEnvironment=function(a){try{ja=a.adUnitUri,ha=a.width,ia=a.height,b(),Y=!0,Z=Date.now(),e("","_s10 --\x3e setup env")}catch(a){v("setupEnv",a,!0)}},w.initAd=function(a,b,c,d,f){try{var h={slot:T,videoSlot:U};W.initAd(a,b,c,d,f,h),e("","_s20 --\x3e init ad"),ka=Date.now(),la=!0,ma=!1}catch(a){v("initAd",a,!0)}g("initAd")},w.startAd=function(){try{g("startAd"),W.startAd(),e("","_s30 --\x3e start ad"),oa=Date.now()}catch(a){v("startAd",a,!0)}},w.resizeAd=function(a,b,c){try{g("resizeAd",{width:a,height:b,viewMode:c}),W.resizeAd(a,b,c)}catch(a){v("resizeAd",a,!1)}},w.pauseAd=function(){try{g("pauseAd"),W.pauseAd()}catch(a){v("pauseAd",a,!1)}},w.resumeAd=function(){try{g("resumeAd"),W.resumeAd()}catch(a){v("resumeAd",a,!1)}},w.stopAd=function(){try{g("stopAd"),W.stopAd()}catch(a){v("stopAd",a,!1)}},w.skipAd=function(){try{g("skipAd"),W.skipAd()}catch(a){v("skipAd",a,!1)}},w.expandAd=function(){try{g("expandAd"),W.expandAd()}catch(a){v("expandAd",a,!1)}},w.collapseAd=function(){try{g("collapseAd"),W.collapseAd()}catch(a){v("collapseAd",a,!1)}},w.get_adLinear=function(){return B},w.get_adExpanded=function(){return C},w.get_adDuration=function(){return A<2?-1:H},w.get_adRemainingTime=function(){return D},w.get_adVolume=function(){return E},w.get_adWidth=function(){return A<2?-1:F},w.get_adHeight=function(){return A<2?-1:G},w.get_adUnitVersion=function(){return A},w.set_adVolume=function(a){ga=a,null!==W&&W.setAdVolume(ga),b()},w.set_Position=function(a){},w.tick=function(a){try{h(a),m(a)}catch(a){v("_setUpProc",a,!0)}},w.player_isReady=function(){return $},w.player_size=function(a,b){}}}(),fb_videop_exec=function(a,b,c,d){return function(e){function f(a){e.logger.writex({msg:a,prefix:"fb_videop_exec",inst:ga})}function g(a,b,c){var d,f=a.length>0?a:"",g="/_s40 exec_evts";d=g+"/*All*"+f,da.trackhub.sendEvent("vast_h",d,b,c),d=g+"/by_tag/"+e.tagName+f,da.trackhub.sendEvent("vast_h",d,b,c),d=g+"/by_media_case/"+ha+f,da.trackhub.sendEvent("vast_h",d,b,c),d=g+"/by_ad_system/"+ia+f,da.trackhub.sendEvent("vast_h",d,b,c)}function h(a,b){ba.fireEvent(a,b)}function i(c){function d(a){function b(a,b,c,d,e){var f,g={newAdWidth:null,newAdHeight:null},h=a/b;return!0===e?(g.newAdWidth=c,g.newAdHeight=g.newAdWidth/h,f<=d?g:(g.newAdHeight=d,g.newAdWidth=g.newAdHeight*h,g)):(g.newAdWidth=a,g.newAdHeight=b,g.newAdWidth<=c&&g.newAdHeight<=d?g:g.newAdWidth>c&&(g.newAdWidth=c,g.newAdHeight=g.newAdWidth/h,f<=d)?g:(g.newAdHeight=d,g.newAdWidth=g.newAdHeight*h,g))}var c={effWidth:null,effHeight:null},d=!0;void 0!==a.scalable&&("false"!==a.scalable&&!1!==a.scalable||(d=!1));var e=!1;if(void 0!==a.maintain&&("true"!==a.maintain&&!0!==a.maintain||(e=!0)),!0===d){if(!0===e){var f=b(a.adVastWidth,a.adVastHeight,a.adStageWidth,a.adStageHeight,!0);return c.effWidth=Math.round(f.newAdWidth),c.effHeight=Math.round(f.newAdHeight),c}return c.effWidth=a.adStageWidth,c.effHeight=a.adStageHeight,c}var f=b(a.adVastWidth,a.adVastHeight,a.adStageWidth,a.adStageHeight,!1);return c.effWidth=Math.round(f.newAdWidth),c.effHeight=Math.round(f.newAdHeight),c}na=c,_("inst"),g("","_s10 inst"),oa=Date.now(),Ja.background="#000000",sa=!1,ta=!1,ua=!1,va=!1,Ma.setup(c.adTrackList);var h={master:ba,comps:da,hostWnd:ea,domtool:e.domtool,opConfig:ka,startTime:e.startTime,secProt:e.secProt,logger:e.logger,versionTag:e.versionTag,versionFolder:e.versionFolder,baseUrl:e.baseUrl,placementId:e.placementId,hostPageUrl:e.hostPageUrl,hostPageTitle:e.hostPageTitle,passXMLData:c.passXMLData,imprID:e.imprID,main_wrapper_id:e.main_wrapper_id,containerID:e.containerID,segmentID:e.segmentID,segmName:e.segmName,tagName:e.tagName,unitfbxID:e.unitfbxID,uniqueID:e.uniqueID,dummy:0},i={adStageWidth:c.domWidth,adStageHeight:c.domHeight,adVastWidth:parseInt(c.adSizeWidth),adVastHeight:parseInt(c.adSizeHeight),scalable:!0,maintain:!1},j=d(i);if(Ja.width=j.effWidth,Ja.height=j.effHeight,Ea=aa(c.adDuration),f(),"html5"===na.adMediaCase){Na=new a(h),l({cmd:"setupEnv",timeout:500,data:{width:Ja.width,height:Ja.height,adUnitUri:""}});var k={AdParameters:c.adParameters,duration:aa(c.adDuration),fileList:[]};c.adFileList.forEach(function(a){var b={uri:a.URI,type:a.type};k.fileList.push(b)}),l({cmd:"initAd",timeout:15e3,data:{width:Ja.width,height:Ja.height,viewMode:"normal",desiredBitrate:Ka,creativeData:k}})}else if("vpaid"===na.adMediaCase){var m=na.adFileList[0],n=""+m.URI,n=n.replace("PLAYER_WIDTH",Ja.width),n=n.replace("PLAYER_HEIGHT",Ja.height);Na=new b(h),l({cmd:"setupEnv",timeout:4e3,data:{width:Ja.width,height:Ja.height,adUnitUri:n}});var k={AdParameters:c.adParameters};l({cmd:"initAd",timeout:6e3,data:{width:Ja.width,height:Ja.height,viewMode:"normal",desiredBitrate:Ka,creativeData:k}})}f(),Sa=!0,o()}function j(){return{setupEnv:{cpt:"_s00 setupEnv",hnd:p,ackEv:"EnvReady",exd:!1,akd:!1,to:1e3},initAd:{cpt:"_s01 initAd",hnd:q,ackEv:"AdLoaded",exd:!1,akd:!1,to:1e4},startAd:{cpt:"_s02 startAd",hnd:r,ackEv:"AdStarted",exd:!1,akd:!1,to:5e3},resizeAd:{cpt:"_s10 resizeAd",hnd:s,ackEv:"AdSizeChange",exd:!1,akd:!1,to:3e3},pauseAd:{cpt:"_s20 pauseAd",hnd:t,ackEv:"AdPaused",exd:!1,akd:!1,to:3e3},resumeAd:{cpt:"_s21 resumeAd",hnd:u,ackEv:"AdPlaying",exd:!1,akd:!1,to:3e3},stopAd:{cpt:"_s30 stopAd",hnd:v,ackEv:"AdStopped",exd:!1,akd:!1,to:3e3},skipAd:{cpt:"_s31 skipAd",hnd:w,ackEv:"AdSkipped",exd:!1,akd:!1,to:3e3},expandAd:{cpt:"_s40 expandAd",hnd:x,ackEv:"",exd:!1,akd:!1,to:3e3},collapseAd:{cpt:"_s41 collapseAd",hnd:y,ackEv:"",exd:!1,akd:!1,to:3e3},d:0}}function k(a){if(void 0===ja[a])throw{msg:"unknown command: '"+a};return ja[a]}function l(a,b){!0===b?Oa.push(a):Oa.unshift(a)}function m(a){if(!0!==va||!0!==xa)return void(za=a-ya);ya=a-za}function n(a){function b(a){if(sa=!0,null!==a){var b=k(a.cmd);g("/cmd_loop_times/"+b.cpt,"_zzz snpd out"),_("plyr_snpd_out",b.ackEv)}f(),h("playerror",{segID:e.segmentID,tagname:e.tagName}),Ma.sendVASTEvent("error","AdError")}function c(a){if(sa=!0,null!==a){var b=k(a.cmd);g("/cmd_loop_times/"+b.cpt,"_zzz missing (to: "+a.timeout+" ms)"),_("exec_ackevent_missing",b.ackEv),f()}h("playerror",{segID:e.segmentID,tagname:e.tagName}),Ma.sendVASTEvent("error","AdError")}switch(Pa){case"INIT":Pa="READY";case"READY":if(!0===sa||!0===Na.isPlayerError()){b(Qa),Pa="PARK";break}if(null===Qa)break;Pa="WACK";case"WACK":if(null===Qa){Pa="READY";break}if(!0===sa||!0===Na.isPlayerError()){b(Qa),Pa="PARK";break}if(ya-Qa.timestamp>Qa.timeout){c(Qa),Pa="PARK";break}}}function o(){if(0===Oa.length)return void(Sa=!1);var a=Oa.pop(),b=k(a.cmd);void 0===a.timeout&&(a.timeout=b.to,"dev"===fa&&(a.timeout=15e3));var c=Date.now();if(Qa=a,!0===b.exd)throw{msg:"inc_flow",code:"ehjSg73h5G"};b.hnd(c,a.data),b.exd=!0,a.timestamp=ya,f()}function p(a,b){_("_setupEnv (--\x3e)",{cmdData:b}),la=a,Na.setupEnvironment(b),f(),g("","_s20 setup_env (--\x3e)")}function q(a,b){_("_initAd (--\x3e)",{cmdData:b}),ma=a,Na.initAd(b.width,b.height,b.viewMode,b.desiredBitrate,b.creativeData,b.environmentVars),f(),g("","_s30 init_ad (--\x3e)")}function r(a,b){_("_startAd (--\x3e)"),Na.startAd(),f(),g("","_s40 start_ad (--\x3e)"),Ga=0,Ha=0,Ma.start()}function s(a,b){_("_resizeAd (--\x3e)",{cmdData:b}),Na.resizeAd(b.width,b.height,"normal"),f()}function t(a,b){_("_pauseAd (--\x3e)"),Na.pauseAd(),f()}function u(a,b){_("_resumeAd (--\x3e)"),Na.resumeAd(),f()}function v(a,b){_("_stopAd (--\x3e)"),Na.stopAd(),f(),g("","_s60 stop_ad")}function w(a,b){_("_skipAd (--\x3e)"),Na.skipAd(),f()}function x(a,b){_("_expandAd (--\x3e)")}function y(a,b){_("_collapseAd (--\x3e)")}function z(a,b){var c={EnvReady:A,AdLoaded:B,AdStarted:G,AdPaused:H,AdPlaying:I,AdStopped:J,AdSkipped:K,AdSizeChange:C,AdLinearChange:D,AdExpandedChange:E,AdRemainingTimeChange:F,AdVolumeChange:L,AdImpression:M,AdVideoStart:N,AdVideoFirstQuartile:O,AdVideoMidpoint:P,AdVideoThirdQuartile:Q,AdVideoComplete:R,AdInteraction:S,AdUserAcceptInvitation:T,AdUserMinimize:U,AdUserClose:V,AdLog:W,AdError:X,AdPassback:Y,d:0};if(void 0!==c[a]&&(f(),c[a](b),null!==Qa)){var d=k(Qa.cmd);d.ackEv===a&&(g("/cmd_loop_times/"+d.cpt,ya-Qa.timestamp,{scl:"shorttimes"}),d.akd=!0,Qa=null,o())}}function A(a){ra=!0,_("_EnvReady (<--)",{data:a}),g("","_s22 env_ready (<--)")}function B(a){ua=!0,!0===Ca&&Na.get_adUnitVersion()>=2&&(Ja.width=Na.get_adWidth(),Ja.height=Na.get_adHeight()),_("_AdLoaded  (<--)",{data:a}),g("","_s32 ad_loaded (<--)")}function C(a){Ba=!0,!0===Ca&&Na.get_adUnitVersion()>=2&&(Ja.width=Na.get_adWidth(),Ja.height=Na.get_adHeight()),_("_AdSizeChange (<--)",{data:a}),g("","_s34 ad_size_change (<--)")}function D(a){_("_AdLinearChange (<--)",{data:a})}function E(a){_("_AdExpandedChange (<--)",{data:a})}function F(a){_("_AdRemainingTimeChange (<--)",{data:a})}function G(a){va=!0,Ma.sendVASTEvent("creativeView","AdStarted"),h("adStarted"),_("adStarted (<--)",{data:a}),g("","_s42 ad_started (<--)")}function H(a){xa=!1,Fa>0&&(Ma.sendVASTEvent("pause","AdPaused"),Z("video_paused")),_("_AdPaused (<--)",{data:a}),g("","_s46 ad_paused (<--)"),h("adPaused")}function I(a){xa=!0,Ma.sendVASTEvent("resume","AdPlaying"),Z("video_resumed"),_("_AdPlaying (<--)",{data:a}),g("","_s44 ad_playing (<--)"),h("adPlaying")}function J(a){xa=!1,ua=!1,_("_AdStopped (<--)",{data:a}),g("","_s62 ad_stopped (<--)"),h("adStopped")}function K(a){Ma.sendVASTEvent("skip","AdSkipped"),Z("video_skipped"),_("_AdSkipped (<--)",{data:a}),h("adSkipped")}function L(a){Aa=!0;var b=Na.get_adVolume();b>.1?Ra<=.1&&(Ma.sendVASTEvent("unmute","AdVolumeChange"),Z("video_unmuted")):Ra>.1&&(Ma.sendVASTEvent("mute","AdVolumeChange"),Z("video_muted")),Ra=b}function M(a){Ma.sendVASTEvent("Impression","AdImpression"),Z("video_impression"),_("_AdImpression (<--)",{data:a}),g("","_s48 ad_impr (<--)"),h("adImpression")}function N(a){wa=!0,Ma.sendVASTEvent("start","AdVideoStart"),Z("video_start"),_("_AdVideoStart (<--)",{data:a}),g("","_s50 video_start (<--)"),h("adVideoStart")}function O(a){Ma.sendVASTEvent("firstQuartile","AdVideoFirstQuartile"),Z("video_firstQuartile"),_("_AdVideoFirstQuartile (<--)",{data:a}),g("","_s52 q1 (<--)"),h("adQ1")}function P(a){Ma.sendVASTEvent("midpoint","AdVideoMidpoint"),Z("video_midpoint"),_("_AdVideoMidpoint (<--)",{data:a}),g("","_s54 q2 (<--)"),h("adQ2")}function Q(a){Ma.sendVASTEvent("thirdQuartile","AdVideoThirdQuartile"),Z("video_thirdQuartile"),_("_AdVideoThirdQuartile (<--)",{data:a}),g("","_s56 q3 (<--)"),h("adQ3")}function R(a){Ma.sendVASTEvent("complete","AdVideoComplete"),Z("video_complete"),h("mediaEnd",{segID:e.segmentID,tagname:e.tagName}),_("_AdVideoComplete (<--)",{data:a}),g("","_s58 q4 (<--)")}function S(a){_("_AdInteraction (<--)",{data:a}),g("","_s70 usr_intrx (<--)")}function T(a){Ma.sendVASTEvent("acceptInvitation","AdUserAcceptInvitation"),Z("video_acceptinv"),_("_AdUserAcceptInvitation (<--)",{data:a}),g("","_s72 usr_accpt (<--)")}function U(a){Ma.sendVASTEvent("collapse","AdUserMinimize"),Z("video_minimized"),_("_AdUserMinimize (<--)",{data:a}),g("","_s74 ad_minmz (<--)")}function V(a){Ma.sendVASTEvent("close","AdUserClose"),Z("video_closed"),_("_AdUserClose (<--)",{data:a}),g("","_s76 usr_close (<--)"),h("adUsrClose")}function W(a){_("_AdLog (<--)",{data:a}),g("","_s82 ad_log (<--)"),h("adLog",{data:a})}function X(a){sa=!0,Ma.sendVASTEvent("error","AdError"),_("_AdError (<--)",{data:a}),g("","_s80 ad_error (<--)"),h("playerror",{segID:e.segmentID,tagname:e.tagName,data:a})}function Y(a){ta=!0,pa=Date.now()-oa,h("post_passback",{segID:e.segmentID,tagname:e.tagName}),Ma.sendVASTEvent("no_content","AdPassback"),ba.deletePlayer(!1),_("_AdPassback (<--)",{data:a}),g("","_s84 ad_psbk (<--)")}function Z(a){h("vast_tracking",{eventName:a})}function $(a){var b=new d,c=0,e="",f={_effectiveFormat:Ja,_effectiveBitRate:Ka};c=0,e+="specObject:\n",e+=b.printObj(c,f)+"\n\n\n";var g={_loadTime:oa,_passbackTime:pa,_environmentReady:ra,_playerError:sa,_playerPassback:ta,_playerReady:ua,_playerStarted:va,_videoStarted:wa,_playerPlaying:xa,_playerVolumeChanged:Aa,_playerSizeChanged:Ba,_autosizingEnabled:Ca,_playPos:Da,_endPos:Ea,_remainingTime:Fa,_setupVars:na,_opConfig:ka};return c=0,e+="specObject2:\n",e+=b.printObj(c,g,a)+"\n\n\n"}function _(a,b){h("snapshot",{who:"exec",event:a,data:b})}function aa(a){var b=a,c=0,d=-1;return d=a.lastIndexOf("."),-1!==d&&(b=b.substring(0,d)),-1===(d=b.lastIndexOf(":"))?-1:(c+=parseInt(b.substring(d+1)),b=b.substring(0,d),-1===(d=b.lastIndexOf(":"))?c:(c+=60*parseInt(b.substring(d+1)),b=b.substring(0,d),0===b.length?c:c+=60*parseInt(b)*60))}var ba=this,ca=e.master,da=e.comps,ea=e.hostWnd,fa=e.env,ga=(e.domtool,Math.round(999*Math.random()));f();var ha=e.setupVars.adMediaCase.replace(/\//g,"_"),ia=e.setupVars.adSystem.replace(/\//g,"_");ba.fireEvent=function(a,b){ca.fireEvent(a,b)};var ja=new j,ka=e.opConfig,la=null,ma=null,na={},oa=null,pa=null,qa=!1,ra=!1,sa=!1,ta=!1,ua=!1,va=!1,wa=!1,xa=!1,ya=Date.now(),za=0,Aa=!1,Ba=!1,Ca=!0,Da=0,Ea=void 0,Fa=void 0,Ga=0,Ha=0,Ia=!1,Ja={width:0,height:0,background:"#ffffff"},Ka=300,La={opConfig:ka,versionTag:e.versionTag,startTime:e.startTime,logger:e.logger},Ma=new c(La),Na=null,Oa=[],Pa="INIT",Qa=null,Ra=-1,Sa=!1;ba.getDebugReport=function(a){return $(a)},ba.isPlayerReady=function(){return ua},ba.isPlayerError=function(){return sa},ba.isPlayerPassback=function(){return ta},ba.getPassbackTime=function(){return pa},ba.shouldProgress=function(){return!0},ba.isPlayerStarted=function(){return va},ba.isVideoStarted=function(){return wa},ba.isPlayerPlaying=function(){return xa},ba.onQuit=function(){"close"===na.quit&&Na.remainingTime>0&&(Ma.close(),Z("video_closed")),"skip"===na.quit&&(l({cmd:"skipAd"}),Na.remainingTime>0&&(Ma.skip(),Z("video_skipped")))},ba.deletePlayer=function(a){!0===a&&("close"===na.quit&&Na.remainingTime>0&&Ma.close(),"skip"===na.quit&&(l({cmd:"skipAd"}),Ma.skip())),f(),qa=!0},ba.start=function(){l({cmd:"startAd"}),f(),_("start_command"),Ga=0,Ha=0},ba.tick=function(a){if(!0!==Sa&&o(),m(a),n(a),null!==Na&&Na.tick(a),!0===va&&!(Date.now()-Ga<1e3)&&(Ga=Date.now(),!0===xa)){Ha++;var b=Na.get_adDuration();b>0&&(Ea=b),Fa=Na.get_adRemainingTime(),Da=Fa>=0?Math.round(Ea-Fa):Ha,Da>Ea&&(Da=Ea),f(),Ma.tickPlay(Da,Ea)}},ba.pause=function(a,b){!1===a?(l({cmd:"resumeAd"}),void 0===_typeof2(b)&&Ma.pause(!1),f()):(l({cmd:"pauseAd"}),void 0===_typeof2(b)&&Ma.pause(!0),f())},ba.getProgress=function(){return"undefined"===Da?0:"undefined"===Ea||0===Ea?0:100*Da/Ea},ba.getProgressAbs=function(){var a={curtime:0,reftime:0};return Da>0&&"undefined"!==Ea&&Ea>0&&(a.curtime=Da,a.reftime=Ea),a},ba.isMediaEnd=function(){return Na.isMediaEnd()},ba.rewind=function(a){Na.set_Position(0),Ma.rewind()},ba.setVolume=function(a){var b=a;Na.set_adVolume(b/100),f()},ba.trackClick=function(){Ma.click()},ba.trackError=function(){Ma.error()},ba.VPAID_notifyEvent=function(a,b){return z(a,b)},ba.AdClickThru=function(a,b,c){function d(a){0!==a.length&&window.open(a,"_blank")}!0!==Ia&&(Ia=!0,f(),_("ad_click",{target:c}),!0===b&&d(void 0!==c?c:na.adClickUrl),h("click",{segID:e.segmentID,tagname:e.tagName}),Ma.sendVASTClickEvent(),Z("video_click"))},i(e.setupVars)}}(fb_videop_html,fb_videop_vpaid,fb_videop_tracker,textools),fb_videop_root=function(a,b,c,d,e){return function(f){function g(a){f.logger.writex({msg:a,prefix:"fb_vast_player",inst:z})}function h(a,b,c){v.trackhub.sendEvent("vast_l","/_s20 root_evts"+a,b,c)}function i(a,b,c){function d(a,b,c){var d=this;d.eventName=a,d.callback=b,d.mode=c,d.count=0}var e=new d(a,b,c);G.push(e)}function j(a,b){function c(a,b){var c=null;return G.forEach(function(b){null===c&&b.eventName===a&&(c=b)}),c}var d={when:s(),event:a,data:b};D.push(d);var e=c(a);if(null!==e&&"off"!==e.mode){try{e.callback(b)}catch(a){return}return e.count++,"once"===e.mode?void(e.mode="off"):void 0}}function k(a){switch(M){case"HOME":if(null===H)break;j("ready",{setupTime:0}),K=a,h("","_s00 inst"),g(),M="WAIT_FOR_VASTPROC";case"WAIT_FOR_VASTPROC":if(H&&H.tick(a),!0!==H.isReady())break;var b=H.getResult();if(g(),"error"===b.retObj.status){g(),J="error",H=null,j("adError",{tag:O,message:b.retObj.msg,passIdx:b.passIdx}),h("","_s50 load error"),h("/loop_times/error",a-K,{scl:"shorttimes"}),M="ERROR";break}if("no_ads"===b.retObj.status){g(),J="no_content",H=null,j("fb_no_ads"),j("adError",{tag:O,message:"ad_tag_empty"}),h("","_s10 no_ads"),h("/loop_times/no_ads",a-K,{scl:"shorttimes"}),M="NO_ADS";break}if("no_usable_ads"===b.retObj.status){g(),J="no_usable_ads",H=null,j("fb_no_usable_ads"),j("adError",{tag:O,message:"no_compatible_creatives"}),h("","_s12 no_usable_ads"),h("/loop_times/no_usable_ads",a-K,{scl:"shorttimes"}),M="NO_ADS";break}j("fb_usable_ads",b),h("","_s20 usable_ads"),h("/loop_times/usable_ads",a-K,{scl:"shorttimes"}),L=l(b,R),M="WFPR";case"WFPR":if(!0===L.isPlayerError()){h("","_s52 play error"),M="ERROR";break}if(!0!==L.isPlayerReady())break;j("ad_loaded"),M="WFSC";case"WFSC":if(!0!==F)break;L.start(),
h("","_s30 ad loaded"),N=a,M="PLY";case"PLY":if(!0===L.isPlayerError()){h("","_s52 play error"),M="ERROR";break}if(a-N>=1e3){N=a;var c=L.getProgressAbs();j("adTime",{tag:O,position:c.curtime,duration:c.reftime})}if(!0===P){M="PARK";break}break;case"NO_ADS":M="REMV";break;case"ERROR":q({who:"root",event:"setup_error",data:J}),M="REMV";break;case"REMV":null!==L&&L.deletePlayer(!0),M="PARK";break;case"PARK":v.heart.unsubscribe(u)}}function l(a,c){S=JSON.parse(JSON.stringify(a)),S.domWidth=c.width,S.domHeight=c.height;var d={master:u,comps:v,hostWnd:w,env:x,startTime:f.startTime,secProt:f.secProt,domtool:f.domtool,logger:f.logger,macroproc:f.macroproc,vastCaller:I,fireEvent:u.fireEvent,opConfig:b,versionTag:f.versionTag,versionFolder:f.versionFolder,baseUrl:f.baseUrl,placementId:f.placementId,hostPageUrl:f.hostPageUrl,hostPageTitle:f.hostPageTitle,imprID:f.imprID,main_wrapper_id:f.main_wrapper_id,segmName:f.segmName,segmentID:f.segmentID,unitfbxID:f.unitfbxID,tagName:f.tagname,uniqueID:f.uniqueID,containerID:f.containerID,setupVars:S,dummy_item:0};return new e(d)}function m(){j("adPlay",{client:"fb",creativetype:S.adMediaCase,tag:R.advertising.tag,fbData:{segID:f.segmentID,tagname:f.tagname}})}function n(){if(!0!==U){U=!0;var a={adposition:"pre",client:"fb",tagname:A,adsystem:S.adSystem,adtitle:S.adTitle,addesc:S.adDesc,adduration:S.adDuration,addimensions:S.adSizeWidth+"x"+S.adSizeHeight,adfiles:S.adFileList.length,id:S.adId,vastversion:S.passVastCard.version,wrapper:null!==S.wrapper?S.wrapper:"DIRECT",creativetype:S.adMediaCase,apiFramework:S.adApiFramework,mediafile:{tag:R.advertising.tag,file:S.adFileList[0].URI,width:S.adSizeWidth,height:S.adSizeHeight}};j("adImpression",a),T=JSON.parse(JSON.stringify(a));q({who:"root",event:"ad_imp",data:T})}}function o(){var b="";if(null===T)return b+="No Impression Data Available\n\n\n";var c,d=new a;return c=0,b+=d.printObj(c,T)+"\n\n\n"}function p(b){function c(b){var c=100;if(void 0===b)throw{msg:"data_not_defined"};if(void 0===b.data)throw{msg:"excep_data_not_defined"};var d=b.data,e=b.who,f=d.where,g=d.errObj,h=d.otherData,i="";if(i+="-------------- EXCEPTION ---------------\n",i+="Who: "+e+"\n",i+="Where: "+f+"\n",i+="----------------------------------------\n\n",void 0!==g){var j="Message:  ";j+=g+"\n\n",void 0!==g.stack&&(j+="\nStack:\n",j+=g.stack.toString()+"\n\n")}if(i+=j,void 0!==h){var k,l=new a;i+="\n\n------- Context Data -------\n\n",k=0,i+=l.printObj(k,h,c)+"\n\n\n"}return i}var d=c(b);q({when:s(),event:b.event,who:b.who,data:{type:"EXCEPTION",excpText:d}})}function q(a){var b={when:s(),event:a.event,who:a.who,data:a.data};g(),B.push(b)}function r(b){var c=new a,d="";return"object"!==_typeof2(b)?"ERROR PRINTING EVENT LIST":b.length<1?"NO DATA AVAILABLE IN EVENT LIST":(b.forEach(function(a){d+="\n"+a.when+"  ------------ "+a.event.toUpperCase()+" ------------",void 0===a.data||void 0===a.data||null===a.data?d+=" (data not available)":d+=c.printObj(0,a.data,C),d+="\n\n"}),d+"\n\n")}function s(){var a=Date.now()-y,b=a,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?"0"+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}function t(b,c,d,e){function f(b){return(new a).printObj(0,b)}var g="";return void 0!==d&&(g+=d),g+="===============================================================\n",g+="                VAST PLAYER GENERAL REPORT\n",g+="===============================================================\n\n\n",g+="TAGNAME: "+A+"\n\n",g+="EVENT: "+b+"\n\n\n\n",g+="================ DATA OBJECT ================\n",g+=f(c)+"\n\n\n",g+="============== SNAPSHOT REPORT ==============\n",g+=r(B)+"\n\n\n",g+="=============== AD IMP REPORT ===============\n",g+=o()+"\n",null!==I&&(g+="\n---------------- CALLER REPORT -----------------\n\n",g+=I.getDebugReport(e)+"\n\n"),g}var u=this,v=(f.master,f.comps),w=f.hostWnd,x=f.env,y=f.startTime,z=(f.playerWidth,f.playerHeight,Math.round(999*Math.random()));g();var A=f.tagname,B=(f.domtool,[]),C=2e3,D=[],E=[],F=!1,G=[];u.on=function(a,b){i(a,b,"on")},u.off=function(a,b){i(a,b,"off")},u.once=function(a,b){i(a,b,"once")},u.gdr=function(a){return t(a,{},"",100)};var H=null,I=null,J="...",K=0,L=null,M="HOME",N=0,O="---",P=!1,Q=!1,R=null,S=null,T=null,U=!1;u.tick=function(a){k(a),null!==L&&L.tick(a)},u.setVolume=function(a){null!==L&&L.setVolume(a)},u.fireEvent=function(a,b){switch(a){case"adStarted":j("adStarted");break;case"adVideoStart":m();break;case"adImpression":n();break;case"click":j("adClick",{tag:O});break;case"mediaEnd":P=!0,j("adComplete",{tag:O});break;case"post_passback":j("adError",{tag:O,message:"post_passback"});break;case"playerror":j("adError",{tag:O,message:"error playing creative",data:b});break;case"vast_tracking":j("fb_track",b);break;case"mail":return void j("fb_send_mail",b);case"snapshot":return b.event.indexOf("exception")>=0?void p(b):void q(b)}var c={when:s(),event:a,data:b};E.push(c)},u.setup=function(a){R=JSON.parse(JSON.stringify(a)),O=R.advertising.tag;var e={master:u,comps:v,startTime:f.startTime,secProt:f.secProt,logger:f.logger,fireEvent:u.fireEvent,tagName:f.tagname,auxUnitID:"",baseUrl:f.baseUrl,versionFolder:f.versionFolder,placementId:f.placementId,hostPageUrl:f.hostPageUrl,hostPageTitle:f.hostPageTitle,useFlashCaller:!1};I=new d(e);var g={master:u,comps:v,startTime:f.startTime,secProt:f.secProt,logger:f.logger,macroproc:f.macroproc,vastCaller:I,opConfig:b,versionTag:f.versionTag,baseUrl:f.baseUrl,placementId:f.placementId,versionFolder:f.versionFolder,hostPageUrl:f.hostPageUrl,hostPageTitle:f.hostPageTitle,imprID:f.imprID,tagName:f.tagname,tagSnippet:R.advertising.tag,playerWidth:R.width,playerHeight:R.height,fireEvent:u.fireEvent,dummy_item:0};H=new c(g)},u.start=function(){F=!0},u.pause=function(a){},u.play=function(a){},u.stop=function(){j("idle")},u.remove=function(){j("remove"),Q=!0},v.heart.subscribe(u,50,"fb_videop",3,9)}}(textools,config,fb_videop_proc,fb_videop_caller,fb_videop_exec),fmp_lwebad=function(a){return function(a){function b(a){q.logger.writex({msg:a,prefix:"fmp_lwebad",inst:r})}function c(a){if(!0===G&&null!==x){try{if(JSON.parse(a.data).adId!==I)return}catch(a){return}window.open(x.linkUrl,"_top")}}function d(){window.removeEventListener("message",c),window.removeEventListener("unload",d)}function e(a){switch(s){case"INIT":if(!0!==G)break;if(!0!==q.liveWebRoot.isReady())break;u=!0,s="WFSS";case"WFSS":if(!0!==E)break;o.ssac("insimg",{myImgElm:x.myImgElm}),A=!0,s="VSB_OFF";case"VSB_OFF":if(!0!==D)break;t=a,s="SHDLY";case"SHDLY":if(a-t<500)break;B=!0,!0===F&&(C=!0),s="VSB_ON";case"VSB_ON":if(!0===F&&(B=!0,C=!0),!0===D)break;s="VSB_OFF"}}function f(a){switch(y){case"INIT":if(!0!==A)break;y="RDY";case"RDY":if(!0===B){o.ssac("numOn",{}),z=a,y="SHWNUM";break}if(!0===C){o.ssac("tipOn",{}),z=a,y="SHWTIP";break}break;case"SHWNUM":if(!0===C){o.ssac("tipOn",{}),z=a,y="SHWBTH";break}if(a-z<p)break;"hold"!==x.rankmode&&o.ssac("numOff",{}),B=!1,y="RDY";break;case"SHWTIP":if(!0===B){o.ssac("numOn",{}),z=a,y="SHWBTH";break}if(a-z<p)break;o.ssac("tipOff",{}),C=!1,y="RDY";break;case"SHWBTH":if(a-z<p)break;"hold"!==x.rankmode&&o.ssac("numOff",{}),B=!1,o.ssac("tipOff",{}),C=!1,y="RDY"}}function g(a,b){function c(a){var b=a.split(";");""===b[b.length-1]&&(b=b.slice(0,b.length-1));var c=[];return b.forEach(function(a){var b=a.split(":");c.push(b)}),c}function d(a,b,c){var d=!1;a.forEach(function(a){a[0]===b&&(a[1]=c,d=!0)}),!0!==d&&a.push([b,c])}var e=c(a.replace(/\s+/g,""));c(b).forEach(function(a){var b=a[0];d(e,b,a[1])});var f=[];return e.forEach(function(a){f.push(a[0]+":"+a[1])}),f.join(";")}function h(a){return a.replace(/\^\++/g," ")}function i(a,b){var c=""+decodeURIComponent(a);if(c=c.replace(/\&+/g,"&amp;"),c=c.replace(/\"+/g,"&quot;"),c=c.replace(/\"+/g,"&quot;"),c=c.replace(/<br>+/g," "),c=c.replace(/<span>+/g," "),void 0!==b&&"unspecified"!==b){b.replace(/\^\++/g," ").split("|").forEach(function(a){c=c.replace(a,"")})}return c}function j(a){var b=""+decodeURIComponent(a);return b=b.replace(/\/+/g,"|"),b=b.replace(/\&+/g,""),b=b.replace(/\"+/g,""),b=b.replace(/\"+/g,""),b=b.replace(/<br>+/g," "),b=b.replace(/<span>+/g," "),b.length>30?b.substring(0,30)+"...":b}function k(a,b,c){try{var d=q.liveWebRoot.gac();if(null===d)throw{msg:"art_vars"};d.adWidth=b,d.adHeight=c;var e=parseInt(a.parsedObj.imgprc_h);!0===isNaN(e)&&(e=100),d.imgWidth=Math.round(d.adWidth*e/100);var f=parseInt(a.parsedObj.imgprc_v);!0===isNaN(f)&&(f=62),d.imgHeight=Math.round(d.adHeight*f/100),d.myImgElm=document.createElement("img"),d.myImgElm.src=d.imgUrl,d.myImgElm.style.width=d.imgWidth+"px",d.myImgElm.style.height=d.imgHeight+"px",d.myImgElm.style.objectFit="cover",d.txtWidth=d.adWidth,d.txtHeight=d.adHeight-d.imgHeight,d.rankmode=a.parsedObj.rankmode,d.showrank="true"===a.parsedObj.showrank||"show"===a.parsedObj.rankmode;var k=10,l=18;return d.rnkWidth=d.adWidth-2*k,d.rnkHeight=l,d.rnkLeft=k,d.rnkTop=d.imgHeight-k-l,d.rnkText=h(a.parsedObj.ranktxt),d.artTitle=i(d.titleStr,a.parsedObj.filters),d.ecCaption=j(d.titleStr),d.bkgStyle="background-color:white; ",d.txtStyle="font-family:sans-serif; font-weight:bold; font-size:18px; line-height:21px; color:#303030; padding-top:2px; ",d.rnkStyle="font-family:sans-serif; font-weight:normal; font-size:12px; padding-top:2px; padding-bottom:2px; color:black; ","unspecified"!==a.parsedObj.bkgstyle&&(d.bkgStyle=g(d.bkgStyle,a.parsedObj.bkgstyle)),"unspecified"!==a.parsedObj.txtstyle&&(d.txtStyle=g(d.txtStyle,a.parsedObj.txtstyle)),"unspecified"!==a.parsedObj.rnkstyle&&(d.rnkStyle=g(d.rnkStyle,a.parsedObj.rnkstyle)),d}catch(a){}return{}}function l(){if(!0!==G)return"";var a=x,b="";return b+='<style type="text/css">\r',b+="body { margin:0; }\r",b+=".wrapper { position:absolute; left:0; top:0; margin:0; cursor: pointer;",b+=" width:"+a.adWidth+"px; height:"+a.adHeight+"px; "+a.bkgStyle+" }\r",b+=".image_section { max-width:"+a.imgWidth+"px; max-height:"+a.imgHeight+"px; display:table; }\r",b+=".image_box { max-width:"+a.adWidth+"px; max-height:"+a.imgHeight+"px; text-align:center; }\r",b+=".title_section { display:table; margin:0; padding-top:6px; width:"+a.txtWidth+"px; height:"+a.txtHeight+"px; }\r",b+=".title_box { display:table-cell; margin:auto; vertical-align:top; text-align: left; }\r",b+=".title_frame { "+a.txtStyle+" }\r",b+=".rank_number_section { position:absolute; left:8px; top:8px; width:50px; height:32px; display:table; ",b+=" background-color:white; opacity:0.7; border-radius:6px;  visibility: visible; }\r",b+=".rank_number_box { display:table-cell; margin:auto; vertical-align:middle; text-align:center; }\r",b+=".rank_number_frame { font-family:sans-serif; font-weight:bold; font-size:24px; color:black; opacity:1; padding-top:3px;}\r",b+=".rank_text_section { position:absolute; left:"+a.rnkLeft+"px; top:"+a.rnkTop+"px; width:"+a.rnkWidth+"px;",b+="height:"+a.rnkHeight+"px; display:table; background-color:white; opacity:0.7; border-radius:3px; visibility: hidden; }\r",b+=".rank_text_box { display:table-cell; margin:auto; vertical-align:middle; text-align:center; opacity:1; }\r",b+=".rank_text_frame {"+a.rnkStyle+" }\r",b+=".rank_text_frame span { font-weight:bold; font-size:1.1em; }\r",b+="</style>\r",b+="<script>",b+="function clickProcess () {",b+="window.parent.postMessage(JSON.stringify({ adId : "+I+' }), "*");',b+="}",b+='window.document.body.addEventListener("click", clickProcess)',b+="<\/script>",b+="<script>",b+="window._fbcmd = function (cmd, data) {",b+='if(cmd === "insimg") {',b+='var imgBoxElm = document.getElementById("imgBox");',b+="if(imgBoxElm !== null) imgBoxElm.appendChild(data.myImgElm);",b+="}",b+='else if(cmd === "numOn") {',b+='var rank_numb_sect_elm = document.getElementById("rank_numb_sect");',b+='if(rank_numb_sect_elm !== null) rank_numb_sect_elm.style.visibility = "visible";',b+="}",b+='else if(cmd === "numOff") {',b+='var rank_numb_sect_elm = document.getElementById("rank_numb_sect");',b+='if(rank_numb_sect_elm !== null) rank_numb_sect_elm.style.visibility = "hidden";',b+="}",b+='else if(cmd === "tipOn") {',b+='var rank_text_sect_elm = document.getElementById("rank_text_sect");',b+='if(rank_text_sect_elm !== null) rank_text_sect_elm.style.visibility = "visible";',b+="}",b+='else if(cmd === "tipOff") {',b+='var rank_text_sect_elm = document.getElementById("rank_text_sect");',b+='if(rank_text_sect_elm !== null) rank_text_sect_elm.style.visibility = "hidden";',b+="}",b+="};",b+="<\/script>",b+='<div class="wrapper" >',b+='<div class="image_section" >',b+='<div id="imgBox" class="image_box" >',b+="</div>",b+="</div>",b+='<div class="title_section" >',b+='<div class="title_box">',b+='<div class="title_frame" >',b+=a.artTitle,b+="</div>",b+="</div>",b+="</div>","unspecified"===a.rankmode&&!0!==a.showrank||(b+='<div id="rank_numb_sect" class="rank_number_section" >',b+='<div class="rank_number_box" >',b+='<div class="rank_number_frame" >',b+=""+a.rankIdx,b+="</div>",b+="</div>",b+="</div>","unspecified"!==a.rnkText&&(b+='<div id="rank_text_sect" class="rank_text_section" >',b+='<div class="rank_text_box" >',b+='<div class="rank_text_frame" >',b+=""+a.rnkText,b+="</div>",b+="</div>",b+="</div>")),b+="</div>"}function m(a,b){function c(a){var b=["bkgstyle","txtstyle","imgprc_v","imgprc_h","filters","showrank","rankmode","ranktxt","rnkstyle"],c={};b.forEach(function(a){c[a]="unspecified"});var d=a.replace(/\s+/g,"");return""===d?c:(d.split("]").forEach(function(a){var d=a.split("[");if(!(d.length<2)){var e=d[0].replace(/\s+/g,""),f=d[1].replace(/\s+/g,"");b.indexOf(e)<0||(c[e]=f)}}),c)}var d={check:"no",msg:"",parsedObj:{}};return"liveweb"!==a?d:(d.parsedObj=c(b),d.check="yes",d)}var n=this,o=a.master,p=2500,q=a.comps,r=(a.cllBks,a.bootParams,Math.round(999*Math.random()));b();var s="INIT",t=0,u=null,v=null,w=null,x=null,y="INIT",z=0,A=null,B=!1,C=!1,D=!1,E=!1,F=!1,G=!1,H=m(a.ssname,a.natFormatStr);if("yes"===H.check&&(G=!0),n.isItAnAd=function(){return G},!0===G){n.isReady=function(){return u},n.isVarSize=function(){return!0},n.setSize=function(a,b){v=a,w=b,x=k(H,v,w)},n.getAM=function(){return l()},n.notif=function(a,b){if(!0===G&&null!==x)switch(q.liveWebRoot.lwadev(a,x.ecCaption,x.linkUrl),a){case"start":E=!0;break;case"visibOn":D=!0;break;case"visibOff":D=!1;break;case"hoverOn":F=!0;break;case"hoverOff":F=!1}},n.tick=function(a){e(a),f(a)};var I=Math.round(999999999*Math.random());window.addEventListener("message",c),window.addEventListener("unload",d)}}}(),fmp_dirad=function(a,b){return function(c){function d(a){l.logger.writex({msg:a,prefix:"fmp_dirad",inst:n})}function e(b,c){if(!0!==r)return"DIR AD ERROR";var d="http://";(t.secure||m.secProt)&&(d="https://");var e=a.resourceLocations.fbDirectImgPath;"unspecified"!==t.imgpath&&""!==t.imgpath&&(e=t.imgpath);var f="<a href='"+d+t.link+"' target='_blank' >";return f+="<img src='"+d+e+"/"+t.imgfile+"'",f+=" style='width:"+u+"px;height:"+v+"px;' />",f+="</a>"}function f(a){var c={check:"no",parsedObj:{}},d="$fbdirect",e={type:{type:"string",defvalue:"img"},imgpath:{type:"string"},imgfile:{type:"string",req:!0},link:{type:"string",req:!0},secure:{type:"boolean",defvalue:!1}};if(a.indexOf(d)<0)return c;var f=""+a;f=f.replace(d,"");var g=f.indexOf("{");if(g<0)return c;f=f.substring(g+1);var h=f.indexOf("}");if(h<0)return c;f=f.substring(0,h);var i=new b,j=i.parse(f,e);return"ok"!==j.stat?c:(c.check="yes",c.parsedObj=j.parsedObj,c)}function g(a,b){if(!0===r)switch(a){case"imp":h();break;case"click":i();break;case"error":j()}}function h(){if(!0!==o){o=!0;var a="${"+m.placementId+"|*AllPlcms*}$",b=l.trackhub.sendEvent;b("fbdir_view",a+"/"+t.link+"/*AllFiles*","_s10 view "),b("fbdir_view",a+"/"+t.link+"/"+t.imgfile,"_s10 view "),b("fbdir_view",a+"/*AllTargets*/*AllFiles*","_s10 view ")}}function i(){if(!0!==p){p=!0;var a="${"+m.placementId+"|*AllPlcms*}$",b=l.trackhub.sendEvent;b("fbdir_click",a+"/"+t.link+"/*AllFiles*","_s20 click "),b("fbdir_click",a+"/"+t.link+"/"+t.imgfile,"_s20 click "),b("fbdir_click",a+"/*AllTargets*/*AllFiles*","_s20 click ")}}function j(a){if(!0!==q){q=!0;var b="${"+m.placementId+"|*AllPlcms*}$",c=l.trackhub.sendEvent;c("fbdir_error",b+"/"+t.link+"/*AllFiles*","_s30 error "+a),c("fbdir_error",b+"/"+t.link+"/"+t.imgfile,"_s30 error "+a),c("fbdir_error",b+"/*AllTargets*/*AllFiles*","_s30 error "+a)}}var k=this,l=c.comps,m=(c.cllBks,c.bootParams),n=Math.round(999*Math.random());d();var o=!1,p=!1,q=!1,r=!1,s=f(c.snippet);"yes"===s.check&&(r=!0);var t=s.parsedObj,u=null,v=null;k.isItAnAd=function(){return r},!0===r&&(k.isReady=function(){return!0},k.isVarSize=function(){return!1},k.setSize=function(a,b){u=a,v=b},k.getAM=function(){return e()},k.notif=function(a,b){return g(a,b)},k.tick=function(a){})}}(config,textools),fmp_mediadrv_vast=function(a,b,c,d,e){return function(c){function f(a){c.logger.writex({msg:a,prefix:"fmp_mediadrv_vast",inst:Y})}function g(a,b){c.logger.debugAlert(a,b)}function h(a,b){c.master.fireEvent(a,b)}function i(a){function b(a){var b=a-$,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?"0"+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}var c=b(Date.now());Z.push(c+" - "+a)}function j(a,b,c){V.trackhub.sendEvent("vast_l","/_s10 shell_evts"+a,b,c)}function k(a,b,d){j(a,b,d),j("/zz_by_tag/"+c.tagName+a,b,d)}function l(a){Ia=!0,Ja=Date.now(),f(),i("event: 'player ready'"),k("","_s12  <-- setup_ok")}function m(a){Ha=!0,f(),i("event: 'player setup error'"),k("","_s30  <-- error: setup"),h("playerror",{segID:da,tagname:fa,msg:"setup_error"}),R("setup_error","setup_error"),P("setup_error",sa)}function n(a){Ca=!0,f(),i("event: 'player removed'")}function o(a){f(),i("event: 'before play'")}function p(a){f(),i("event: 'player play'")}function q(a){Na=!0,h("mediaEnd",{segID:da,tagname:fa}),f(),i("event: 'media complete'")}function r(a){Ba=!0,f(),i("event: 'player idle'")}function s(a){f(),i("event: 'buffer'")}function t(a){f(),i("event: 'first frame'")}function u(a){f(),i("event: 'error'")}function v(a){f(),i("event: 'Ad Started'"),k("","_s20  <-- ad_started",{res:"hi"})}function w(a){function b(){La=!0,ta=Date.now()-va,f(),i("event: 'procPassback'"),h("post_passback",{segID:da,tagname:fa,delay:ta,msg:l})}function c(a,b,c){Ha=!0,h("playerror",{segID:da,tagname:fa,msg:a}),k("","_s34  <-- error: ad_exec"),k("/ad_error_msgs",a+" ["+b+"]"),void 0!==c.passIdx&&c.passIdx>0?(R(a,"error_ad_exec_ind"),P("ad_exec_ind",{execdata:sa,msg:a,xmsg:b,params:c})):(R(a,"error_ad_exec_dir"),P("ad_exec_dir",{execdata:sa,msg:a,xmsg:b,params:c}))}function d(a){ua.push(a)}function e(a){var b=!0;return ua.forEach(function(c){c==a&&(b=!1)}),b}var g=(a.tag,a.data),j="NA";void 0!==g&&void 0!==g.data&&(j=""+g.data),f(),i("event: 'adError' - msg: "+j);try{var l=a.message.toLowerCase()}catch(a){var l=""}var l=l.replace(/\s+/g,"_");if(f(),i("event: 'adError' - msg (int): "+l),!0===Ga&&h("adImprEnd",{}),!0===e(l)){switch(d(l),l){case"ad_tag_empty":La=!0,ta=Date.now()-va,f(),i("event: '"+l+"'"),h("no_content",{segID:da,tagname:fa,delay:ta,msg:l}),k("","_s40  <-- notif: ad_tag_empty");break;case"post_passback":k("","_s44  <-- notif: post_pb"),b();break;case"no_compatible_creatives":k("","_s42  <-- notif: no_comp_crtvs");var m=""+a.creativetype;m=m.replace(/([\/])/g,"_"),k("/no_comp_crtvs_det",m),b();break;case"error_loading_ad_tag":case"invalid_ad_tag":case"error_playing_creative":c(l,j,a);break;default:c(l,"other_msg",a)}k("/ad_bounce__times",(Date.now()-va)/1e3,{scl:"longtimes"})}}function x(a){Na=!0,h("mediaEnd",{segID:da,tagname:fa}),f(),i("event: 'ad complete'"),!0===Ga&&h("adImprEnd",{}),R("ad_complete","ad_complete"),P("ad_complete",{execdata:sa})}function y(a){if(!0!==Ga){Ga=!0,h("adShown");var b=Date.now(),d=b-wa;gb={unitfbxID:c.unitfbxID,segID:da,tagname:fa,impdata:{impDelay:d,adsystem:a.adsystem,adtitle:a.adtitle,id:a.id,client:a.client,creativetype:a.creativetype,adfile:a.mediafile.file,vastversion:a.vastversion}},h("adImpression",gb),f(),i("player started"),k("","_s22  <-- ad_imp",{res:"hi"});var e="/ad_imp_data";k(e+"/adsys_title",a.adsystem+" - "+a.adtitle,{res:"hi"}),k(e+"/creat_type",a.creativetype,{res:"hi"}),k(e+"/files",a.mediafile.file,{res:"hi"}),k(e+"/tags",a.mediafile.tag,{res:"hi"}),k(e+"/vast_ver",a.vastversion,{res:"hi"}),k(e+"/wrapper",""!==a.wrapper?a.wrapper:"NA",{res:"hi"}),R("ad_impression","ad_impression"),P("ad_impression",{execdata:sa,_impressionData:gb,params:a})}}function z(a){!0!==Fa&&(Fa=!0,wa=Date.now(),cb=0,db=!1,xa.pause(!0),hb={segID:da,tagname:fa,plydata:{client:a.client,creativetype:a.creativetype,id:a.id,tag:a.tag}},h("adPlaying",hb),f(),i("event: 'Ad Play'"),k("","_s23  <-- ad_play (all formats)",{res:"hi"}))}function A(a){function b(){var a=null;switch(Qa){case"IDLE":if(!0!==Ga)break;a="video_impression",Qa="WF_05";break;case"WF_05":if(Oa/Pa<.05)break;a="video_start",h("adProg",{pos:0}),Qa="WF_25";break;case"WF_25":if(Oa/Pa<.25)break;a="video_firstQuartile",h("adProg",{pos:25}),Qa="WF_50",k("","_s52  <-- q1",{res:"hi"});break;case"WF_50":if(Oa/Pa<.5)break;a="video_midpoint",h("adProg",{pos:50}),Qa="WF_75",k("","_s54  <-- q2",{res:"hi"});break;case"WF_75":if(Oa/Pa<.75)break;a="video_thirdQuartile",h("adProg",{pos:75}),Qa="WF_95",k("","_s56  <-- q3",{res:"hi"});break;case"WF_95":if(Oa/Pa<.95)break;a="video_complete",h("adProg",{pos:100}),Qa="PARK",k("","_s58  <-- q4",{res:"hi"})}null!==a&&h("vast_tracking",{eventName:a,tagname:fa})}if(f(),Oa=a.position,Pa=a.duration,b(),!0!==Ea){Ea=!0,f(),i("ad playing"),k("","_s50  <-- playing",{res:"hi"});k("/ad_start__times",(Date.now()-va)/1e3,{scl:"longtimes"})}}function B(a){h("click",{segID:da,tagname:fa}),f(),i("event: 'ad click'"),k("","_s60  <-- notif: ad click",{res:"hi"})}function C(a){f(),h("vast_tracking",a)}function D(a){f(),V.mailmaster.sendObj(a)}function E(a){f(),k("","_s14  <-- ussable_ads");try{var b=a.adMediaCase}catch(a){var b="NA"}k("","_s15  <-- media_case: "+b)}function F(a){f(),k("","_s16  <-- ad_loaded",{res:"hi"}),h("adLoaded",a)}function G(a){f(),k("","_s17  <-- no_ads")}function H(a){f(),k("","_s19  <-- no_usable_ads")}function I(a){!0!==eb&&null!==wa&&(a-wa<1e3||!0===Fa&&(cb++,wa=a,null!==sa&&cb>=sa.maxtime&&(db=!0)))}function J(a){if("jw"===Ra&&!0!==Ka&&!0!==Fa&&null!==wa&&!(a-wa<b.media.impressionTO)){Ha=!0,Ka=!0,h("playerror",{segID:da,tagname:fa,msg:"play_timeout"});var c="play_timeout";f(),i("event: '"+c+"'"),k("","_s32  <-- error: ad_start"),R(c,"error_watchdog"),P("watchdog",{execdata:sa,message:c}),g("Media Driver Vast: ERROR","msg:"+c)}}function K(a){if(!(a-bb<100))switch(bb=a,_a){case"INIT":if(!0!==Ga)break;Xa=Ta,L(Xa),Wa=!0,_a="READY";break;case"READY":if(!0!==Va)break;_a=!0===Wa?"GOINGUP":"GOINGDOWN";break;case"GOINGUP":if(!0!==Va){_a="READY";break}if(!0!==Wa){_a="GOINGDOWN";break}if(Xa<$a&&(!0===Ua?Xa=$a:(Xa+=Ya)>$a&&(Xa=$a),L(Xa)),Xa===$a){Va=!1,_a="READY";break}break;case"GOINGDOWN":if(!0!==Va){_a="READY";break}if(!0===Wa){_a="GOINGUP";break}if(Xa>0&&(!0===Ua?Xa=0:(Xa-=Za)<0&&(Xa=0),L(Xa)),0===Xa){Va=!1,_a="READY";break}}}function L(a){if(null!==xa){var b=a;b>=100&&(b=100),b<=0&&(b=0);var c=b;"jw"===Ra&&"GOINGUP"===_a&&c<=3||(xa.setVolume(c),f())}}function M(a){switch(ya){case"INIT":if(!0!==za)break;f(),xa.remove(),ya="WAIT_REMOVED";case"WAIT_REMOVED":if(!0!==Ca)break;Da.push(xa),ib.empty(na),sa=null,Aa=!0,f(),ya="PARK"}}function N(a){function b(a){function b(a){function b(a,b){if(""===b)return!1;if("*"===b)return!0;var c=!1,d=a.toLowerCase();return b.toLowerCase().split("|").forEach(function(a){!0!==c&&d.indexOf(a)>=0&&(c=!0)}),c}function c(a,b,c){if(null===a)return c;var d=a[b];return void 0!==d&&"unspecified"!==d?d:c}if(null===a)return{mail:{filter:"NA",reduc:1,send:!1},event:{filter:"NA",reduc:1,send:!1}};var d=new e,f=parseInt(c(a,"videoMailReduc",0)),g=c(a,"videoMailFiltr","unspecified"),h=!1,i=!1;!0===isNaN(f)&&(f=0),"dev"===W.env&&(f=1),f>=1&&!0===d.whirliGig(100/f)&&(h=!0),!0===h&&(i=b(fa,g));var j=h&&i,k=parseInt(c(a,"videoEvntReduc",0)),l=c(a,"videoEvntFiltr","unspecified"),m=!1,n=!1;return!0===isNaN(k)&&(k=0),"dev"===W.env&&(k=1),k>=1&&!0===d.whirliGig(100/k)&&(m=!0),!0===m&&(n=b(fa,l)),{mail:{filter:g,reduc:f,send:j},event:{filter:l,reduc:k,send:m&&n}}}function c(a,b,c){V.trackhub.sendEvent("vast_l","/***debug***/_s10 debug_prm"+a,b,c)}var d=b(a);return c("/_s10 mail/_s10 filtr",""+d.mail.filter),c("/_s10 mail/_s20 reduc","r="+d.mail.reduc),c("/_s10 mail/_s30 send",""+d.mail.send),c("/_s20 evnt/_s10 filtr",d.event.filter),c("/_s20 evnt/_s20 reduc","r="+d.event.reduc),c("/_s20 evnt/_s30 send",""+d.event.send),d}null===ca&&!0===V.quickVars.isReady()&&(ca=b(V.quickVars.getAllParams()))}function O(a){switch(ba){case"INIT":if(null===ca)break;ba="MLP";case"MLP":_.length>0&&S(_.shift()),aa.length>0&&Q(aa.shift())}}function P(a,b){aa.push({event:a,dataObj:b})}function Q(a){if(!0===ca.event.send){f();var b={dataObj:a.dataObj};V.trackhub.sendEvent("vast_x","/***debug***/_s20 events/"+fa,a.event,{att:b})}}function R(a,b){_.push({event:a,group:b})}function S(a){function b(a){return"fb"!==Ra?"DEBUG DATA NOT PROVIDED":xa.gdr(a)}if(!0===ca.mail.send){var c=a.event,d=a.group,f="";void 0!==d&&(f=d);var g,h=new e;i("sending debug email...");var j="VIDEO DRIVER REPORT - ";j+=" - [filter: "+ca.mail.filter,j+=" - valve_rd: "+ca.mail.reduc+"]\n\n",j+="'msg': "+c+"\n",j+="'group': "+d+"\n\n",g=0,j+="impression data:\n",j+=h.printObj(g,gb,ra)+"\n\n\n",g=0,j+="play data:\n",j+=h.printObj(g,hb,ra)+"\n\n\n",g=0,j+="execdata:\n",j+=h.printObj(g,sa,ra)+"\n\n\n",g=0,j+="effective format:\n",j+=h.printObj(g,qa,ra)+"\n\n\n",j+="playPos: "+Oa+"\n",j+="endPos: "+Pa+"\n\n",j+="effSnippet:   "+T.effSnippet+"\n\n\n",j+="other data:\n\n",j+="playerError:  "+Ha+"\n",j+="playerReady:  "+Ia+"\n",j+="passbackDetected:  "+La+"\n",j+="wrapperDivID:  "+ia+"\n\n\n\n",j+=b(c);var k=c.replace(/\s+/g,"_"),l=fa+"  ("+k+" - "+f+")",m={debugStrings:Z,from:"VIDEO_DRV",subject:l,text:j,sreduc:ca.mail.reduc};V.mailmaster.sendObj(m)}}var T=this,U=(c.unitDomElm,c.hostWnd),V=c.comps,W=(c.plcmParams,c.bootParams),X=c.secProt,Y=Math.round(999*Math.random());f(),T.fireEvent=function(a,b){return h(a,b)};var Z=[],$=Date.now(),_=[],aa=[],ba="INIT",ca=null;i("init");var da=c.segmentID,ea=c.segmName,fa=c.tagName,ga=c.uniqueID,ha=c.unitfbxID,ia="fbvid_"+ga,ja=null,ka=null,la=null,ma=c.main_wrapper_id,na=c.containerClass,oa=c.macroproc,pa=c.vastCaller,qa={width:0,height:0},ra=2e3,sa=null,ta=null,ua=[],va=0,wa=null,xa=null,ya="INIT",za=!1,Aa=!1,Ba=!1,Ca=!1,Da=[],Ea=!1,Fa=!1,Ga=!1,Ha=!1,Ia=!1,Ja=null,Ka=!1,La=!1,Ma=!1,Na=!1,Oa=0,Pa=void 0,Qa="IDLE",Ra=c.vastDevice,Sa=(c.hasFlash,c.primaryMethod),Ta=0,Ua=!1,Va=!1,Wa=!0,Xa=0,Ya=b.media.audioSpeedUp,Za=b.media.audioSpeedDown,$a=b.media.audioMaxVol,_a="INIT",ab=!1,bb=0,cb=0,db=!1,eb=!1,fb=!0,gb=null,hb=null,ib=new a({hostWnd:U}),jb=null;k("","_s10  --\x3e inst"),T.tick=function(a){!0===ab&&(K(a),M(a),I(a),J(a),N(a),O(a))},T.openStat=function(){return null!==jb||null!==(jb=ib.setWrapperElement(ma))},T.setupPlayer=function(a){va=Date.now(),sa=a,ka=sa.ssname,la=sa.shtagname,qa.width=a.width,qa.height=a.height,"unspecified"!==a.initvol&&(Ta=parseInt(a.initvol)),f();var b={playerWidth:qa.width,playerHeight:qa.height};if(T.effSnippet=oa.expand(sa.snippet,b),!0===X&&(T.effSnippet=T.effSnippet.replace(/\bhttp:\/\//g,"https://")),""!==sa.width&&ib.width(na,parseInt(sa.width)),""!==sa.height&&ib.height(na,parseInt(sa.height)),ja=ib.insertWrapperDiv(na,"forebase_vid_wrapper",c.segmName,ia,da,fa),f(),"fb"===Ra){var e={comps:V,hostWnd:U,main_wrapper_id:ma,domtool:ib,containerID:ia,playerWidth:qa.width,playerHeight:qa.height,startTime:c.startTime,secProt:X,logger:c.logger,master:T,macroproc:oa,vastCaller:pa,baseUrl:c.baseUrl,placementId:c.placementId,versionFolder:c.versionFolder,versionTag:c.versionTag,env:W.env,hostDomain:c.hostDomain,hostPageUrl:c.hostPageUrl,hostPageTitle:c.hostPageTitle,imprID:c.imprID,uniqueID:ga,segmentID:da,segmName:ea,tagname:fa,containerClass:na,unitfbxID:ha,d:0};xa=new d(e),f(),i("using fb player")}else xa=U.jwplayer(ia),f(),i("using 3P player");var g="http://";!0===X&&(g="https://");var h=g+c.baseUrl+"/adserve/resources/dummy.mp4",j=(c.baseUrl,{aspectratio:"16:9",mute:!1,controls:!1,repeat:!1,file:h,primary:Sa,width:qa.width,height:qa.height,advertising:{client:"vast",tag:T.effSnippet}});xa.setup(j),xa.setVolume(Ta),xa.on("ready",l),xa.on("setupError",m),xa.on("remove",n),xa.on("beforePlay",o),xa.on("play",p),xa.on("complete",q),xa.on("idle",r),xa.on("buffer",s),xa.on("firstFrame",t),xa.on("error",u),xa.on("adStarted",v),xa.on("adError",w),xa.on("adComplete",x),xa.on("adImpression",y),xa.on("adPlay",z),xa.on("adTime",A),xa.on("adClick",B),xa.on("fb_track",C),xa.on("fb_send_mail",D),xa.on("fb_usable_ads",E),xa.on("ad_loaded",F),xa.on("fb_no_ads",G),xa.on("fb_no_usable_ads",H),ab=!0,f(),i("vast player set up ok")},T.clicknotif=function(a,b,c){!0===Ia&&!0!==Ma&&(Ma=!0,f(),h("click",{tagname:fa}))},T.isPlayerReady=function(){return Ia},T.isPlayerError=function(){return Ha},T.isPlayerPassback=function(){return La},T.getPassbackTime=function(){return ta},T.getUniqueID=function(){return ga},T.shouldProgress=function(){return null!==sa&&sa.mintime>0},T.isMediaEnd=function(){return Na},T.isPlayerPlaying=function(){return Fa},T.start=function(){xa.start(),k("","_s13  --\x3e start_cmd",{res:"hi"})},T.pause=function(a){"fb"===Ra&&(eb=a,xa.pause(a),!0===a?console.log("video paused"):console.log("video unpaused"))},T.rewind=function(a){},T.mute=function(a){fb=a},T.getProgress=function(){return"undefined"===Oa?0:"undefined"===Pa||0===Pa?0:100*Oa/Pa},T.getProgressAbs=function(){var a={curtime:0,reftime:0};return Oa>0&&"undefined"!==Pa&&Pa>0&&(a.curtime=Oa,a.reftime=Pa),a},T.isEnd=function(){return!1},T.getEstTimeToUnload=function(){return"undefined"===Oa?-1:"undefined"===Pa||0===Pa?-1:Oa-Pa},T.deletePlayer=function(){za=!0},T.checkDeleted=function(){return!0!==za||Aa},T.audio=function(a,b){Ua=void 0!==_typeof2(b)&&b,!0===a?(f(),Va=!0,Wa=!0,f()):(f(),Va=!0,Wa=!1,f())}}}(domtool,config,0,fb_videop_root,textools),fmp_mediadrv_custom=function(a,b,c){return function(a){function c(b){a.logger.writex({msg:b,prefix:"fmp_mediadrv_custom",inst:p})}function d(a,b,c,d){var e="stgexec_ll";!0===a&&(e="stgexec"),l.trackhub.sendEvent(e,"drv_cstm/${"+s+"|*AllLocs*}$/"+b,c,d)}function e(b,c){a.master.fireEvent(b,c)}function f(a){if(!0===O&&!0!==Q){l.msghub.unRegCst(f),Q=!0,K=Date.now()-J;e("passback",{wrapper:I,segID:u,tagname:w,delay:K,ver:"NA",path:"NA"}),c()}}function g(){function a(a){function b(a){if(null!==a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type))if(a.src){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.src=a.src,document.head.appendChild(b)}else eval.call(window,a.innerHTML)}var c=document.createElement("div");c.innerHTML=decodeURIComponent(a);var d=document.createElement("div");d.setAttribute("data-segm",v),d.setAttribute("data-tag",w),j.appendChild(d);for(var e=0;e<100;){e++;var f=c.firstChild;if(b(d.appendChild(f)),c.children.length<=0)break}}l.msghub.regCst(o,f),a(H)}function h(a,b){var c="<script>";c+="",c+="<\/script>";var d={target_element:A,divClass:C,segmName:v,divID:B,segmentID:u,tagname:w,preScript:c,snippet:H,width:a,height:b},e=U.insertFIF(d);return e.style.display="table",e}var i=this,j=a.adPostContElm,k=(a.unitDomElm,a.hostWnd),l=(a.master,a.comps),m=(a.plcmParams,a.bootParams),n=(a.env,a.secProt),o=a.packId,p=Math.round(999*Math.random());c();var q=[];q.push("init");var r=!1,s=m.placementId+"/"+a.tagName,t=a.macroproc,u=a.segmentID,v=a.segmName,w=a.tagName,x=(a.adpName,a.unitName,a.unitfbxID,null),y=null,z=a.main_wrapper_id,A=a.containerClass,B=null,C="fb_cst_wrapper",D=null,E=null,F="",G=!1,H="",I=null,J=null,K=null,L=null,M=null,N=!1,O=!1,P=!1,Q=!1,R=!1,S=0,T=!1,U=new b({hostWnd:k}),V=null;i.openStat=function(){return null!==V||null!==(V=U.setWrapperElement(z))},i.setupPlayer=function(a){N=!1,O=!1,Q=!1,J=Date.now(),c(),E=a,I=E.uniqueID,x=E.ssname,y=E.shtagname,F=E.log,G=E.active,H=E.snippet;var b={playerWidth:E.width,playerHeight:E.height};if(H=t.expand(H,b),
!0===n&&(H=H.replace(/\bhttp:\/\//g,"https://")),""!==E.width&&U.width(A,parseInt(E.width)),""!==E.height&&U.height(A,parseInt(E.height)),B=I,"infif"===E.insmod)D=h(E.width,E.height);else{if("inpage"!==E.insmod)return c(),d(!0,"errors","_s30 unknown insertion mode ["+E.insmod+"]"),void(N=!0);g()}O=!0,c()},i.isPlayerReady=function(){return O},i.isPlayerError=function(){return N},i.isPlayerPassback=function(){return Q},i.getPassbackTime=function(){return K},i.getUniqueID=function(){return I},i.shouldProgress=function(){return null!==E&&E.mintime>0},i.isMediaEnd=function(){return!1},i.isPlayerPlaying=function(){return P},i.start=function(){d(!1,"errors","_s10 drv_start (ref)"),L=Date.now(),M=L,S=0,T=!1,P=!0},i.tick=function(a){!0===P&&(Date.now()-M<1e3||(S++,M=a,null!==E&&S>=E.maxtime&&(T=!0)))},i.pause=function(a){},i.rewind=function(a){},i.mute=function(a){},i.audio=function(a){},i.getProgress=function(){return 0},i.getProgressAbs=function(){return{curtime:0,reftime:0}},i.isEnd=function(){return!1},i.getEstTimeToUnload=function(){return-1},i.deletePlayer=function(){null!==D&&(U.remove(D),D=null),U.empty(A),P=!1,O=!1,E=null,c(),R=!0},i.checkDeleted=function(){return!0},i.sendDebugMail_Ext=function(a,b){function c(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+=c+" = "+d+"\n"}return b}if(!0!==r){r=!0,q.push("sending debug email...");var d="DISPAD DRIVER REPORT\n\n",d="Message:  ";d+=a+"\n\n",d+="Debug msg:  "+b+"\n\n",void 0!==a.stack&&(d+="\nStack:\n",d+=a.stack.toString()+"\n\n"),d+="execdata:\n\n",d+=c(E)+"\n\n",d+="effectiveFormat:\n\n",d+=c({width:E.width,height:E.height})+"\n\n",d+="effSnippet:   "+H+"\n\n\n",d+="other data:\n\n",d+="playerError:  "+N+"\n",d+="playerReady:  "+O+"\n",d+="passbackDetected:  "+Q+"\n",d+="wrapperDivID:  "+B+"\n",d+="wrapperDivElm:  "+i.wrapperDivElm+"\n\n";var e={debugStrings:q,from:"DRV_DISPAD",subject:"dispad_driver_error",text:d};l.mailmaster.sendObj(e)}}}}(0,domtool),fmp_mediadrv_dispadx=function(a,b,c){return function(c){function d(a){c.logger.writex({msg:a,prefix:"fmp_mdrv_dispadx",inst:y})}function e(a,b,c,d){var e="stgexec_ll";!0===a&&(e="stgexec"),t.trackhub.sendEvent(e,"drv_disp/${"+B+"|*AllLocs*}$/"+b,c,d)}function f(a,b){c.master.fireEvent(a,b)}function g(a){if(0!==ta.length&&null!==U){var b=U.contentWindow;if(null!==b&&"function"==typeof b._fbcmd){var c=ta.shift();b._fbcmd(c.cmd,c.data)}}}function h(a){s.document.activeElement!==V&&(V=s.document.activeElement)===U&&j()}function i(a){if(!0!==da&&!0!==ea&&!0!==ha){var b=aa;if(aa=!0,!0!==b)return ca=0,void(ba<Y&&++ba>=Y&&(f("actsenscont",{count:Y}),da=!0));ca++,!0!==_&&ca>$&&(_=!0,e(!0,"errors","_s20 act_sense_sign"),f("send_event",{subpath:"/drvr_msgs",evdata:"act_sense_signaled",hires:!0})),"wf"===M&&1==N&&ca>Z&&(ha=!0,f("playerror",{segID:D,tagname:F,msg:"error_active_sense"}),d(),e(!0,"errors","_s20 act_sense_error"),f("send_event",{subpath:"/drvr_msgs",evdata:"act_sense_error",hires:!0}))}}function j(){!0!==la&&(la=!0,d(),f("click",{tagname:F}))}function k(a,b){if(!0===ia&&!0!==ka){ka=!0,R=Date.now()-Q;var c="dir";"frm"===b?c="frm":"sbx"===b&&(c="sbx");f("passback",{wrapper:P,segID:D,tagname:F,delay:R,ver:a,path:c}),d()}}function l(a,b,c){!0!==q(99,4e3)&&(aa=!1)}function m(a,b){!1===ea&&(f("confmsg",{}),ea=!0)}function n(){var a="_fb_pbfld";void 0===window[a]&&(window[a]={}),window[a][J]=k;var b="_fb_asfld";void 0===window[b]&&(window[b]={}),window[b][J]=l;var c="_fb_cnfld";void 0===window[c]&&(window[c]={}),window[c][J]=m;var d="<script>";d+="window._forebase_pb_installed = true;",d+="window.fbPbClbck = function (ver, src) {",d+="var done = false;",d+="try {",d+="window.top."+a+"["+J+"](ver, src);",d+="done = true;",d+="}",d+="catch (e) {}",d+="if(done === true) return;",d+="try {",d+="window.parent."+a+"["+J+"](ver, src);",d+="}",d+="catch (e) {}",d+="};",d+="window.fbAsClbck = function (count, fbxID, frmSbx) {",d+="var done = false;",d+="try {",d+="window.top."+b+"["+J+"](count, fbxID, frmSbx);",d+="done = true;",d+="}",d+="catch (e) {}",d+="if(done === true) return;",d+="try {",d+="window.parent."+b+"["+J+"](count, fbxID, frmSbx);",d+="}",d+="catch (e) {}",d+="};",d+="window.fbCnfClbck = function (ver, src) {",d+="var done = false;",d+="try {",d+="window.top."+c+"["+J+"](ver, src);",d+="done = true;",d+="}",d+="catch (e) {}",d+="if(done === true) return;",d+="try {",d+="window.parent."+c+"["+J+"](ver, src);",d+="}",d+="catch (e) {}",d+="};",d+="var _asLoopCnt = 0;",d+="function actSens () {",d+='window.fbAsClbck(_asLoopCnt, "'+G+'", false);',d+="_asLoopCnt++;",d+="window.setTimeout(actSens, "+X+");",d+="}",d+="window.setTimeout(actSens, 1);",d+="function _msgCptr (wmsg) {",d+="try {",d+="var dto = JSON.parse(wmsg.data);",d+="if(dto.type === 'adcontrol') {",d+="if(dto.mode === 'psb') {",d+="window.fbPbClbck(dto.ver, 'frm');",d+="}",d+="else if(dto.mode === 'cnf') {",d+="window.fbCnfClbck(dto.ver, 'frm');",d+="}",d+="}",d+="}",d+="catch (e) {}",d+="}",d+="function _unload () {",d+="\twindow.removeEventListener('message', _msgCptr);",d+="\twindow.removeEventListener('unload', _unload);",d+="}",d+="window.addEventListener('message', _msgCptr);",d+="window.addEventListener('unload', _unload);",d+="<\/script>";var e={target_element:I,divClass:K,segmName:E,divID:J,segmentID:D,tagname:F,preScript:d,snippet:O,width:na.width,height:na.height},f=ua.insertFIF(e),g={fbxID:G,divID:J,ssName:S,shTagName:T,log:L.log,active:L.active,vast:!1,insbx:!1,ownCode:d};return t.mad_bs.load(g),sa=!0,f.style.display="table",f}function o(){function a(){var a="";return a+=!0===x?"https:":"http:","dev"===v?(a+="//localhost:3001",a+="/adserve/fbsbx_dev.html"):(a+="//mkt.forebase.com/plugin",a+="/adserve/fbsbx_380.html"),a+="#id="+J,a+="&mrk="+encodeURIComponent(O),a+="&width="+na.width,a+="&height="+na.height,a+="&fbxid="+G,a+="&asper="+X}t.msghub.regSbx(J,p);var b={target_element:I,divClass:K,divID:J,segmName:E,segmentID:D,tagname:F,width:na.width,height:na.height};b.sbxUrl=a();var c=ua.insertSBF(b),d={fbxID:G,divID:J,ssName:S,shTagName:T,log:L.log,active:L.active,vast:!1,insbx:!0,ownCode:""};return t.mad_bs.load(d),sa=!0,c.style.display="table",c}function p(a,b){switch(a.mode){case"psb":return k(a.ver,"sbx");case"asn":return l(a.cnt,a.fbxID,!0);case"cnf":return m(a.ver,"sbx")}}function q(a,b){return!1}var r=this,s=(c.unitDomElm,c.hostWnd),t=(c.master,c.comps),u=(c.plcmParams,c.bootParams),v=c.env,x=c.secProt,y=Math.round(999*Math.random());d();var z=[];z.push("init");var A=!1,B=u.placementId+"/"+c.tagName,C=c.macroproc,D=c.segmentID,E=c.segmName,F=c.tagName,G=(c.adpName,c.unitName,c.unitfbxID),H=c.main_wrapper_id,I=c.containerClass,J=null,K="fb_dsp_wrapper",L=null,M="",N=!1,O="",P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=!1,X=a.media.actSensCheckPer,Y=a.media.actSensContTh,Z=a.media.actSensWatchTh,$=a.media.actSensSignTh,_=!1,aa=!1,ba=0,ca=0,da=!1,ea=!1,fa=null,ga=null,ha=!1,ia=!1,ja=!1,ka=!1,la=!1,ma=!1,na=null,oa=0,pa=!1,qa=!1,ra=!0,sa=!1,ta=[],ua=new b({hostWnd:s}),va=null;r.ssac=function(a,b){ta.push({cmd:a,data:b})},r.openStat=function(){return null!==va||null!==(va=ua.setWrapperElement(H))},r.setupPlayer=function(b){ha=!1,ia=!1,ka=!1,Q=Date.now(),d(),L=b,P=L.uniqueID,S=L.ssname,T=L.shtagname,M=L.log,N=L.active,na={width:b.width,height:b.height},"bd"!==M&&!0===N||(X=a.media.actSensCheckPerBD,Y=a.media.actSensContThBD),O=L.snippet;var c={playerWidth:na.width,playerHeight:na.height};O=C.expand(O,c),!0===x&&(O=O.replace(/\bhttp:\/\//g,"https://")),""!==L.width&&ua.width(I,parseInt(L.width)),""!==L.height&&ua.height(I,parseInt(L.height)),J=P,U=!1!==L.insbx?o():n(),ia=!0,d()},r.isPlayerReady=function(){return ia},r.isPlayerError=function(){return ha},r.isPlayerPassback=function(){return ka},r.getPassbackTime=function(){return R},r.getUniqueID=function(){return P},r.shouldProgress=function(){return null!==L&&L.mintime>0},r.isMediaEnd=function(){return!1},r.isPlayerPlaying=function(){return ja},r.start=function(){ba=0,ca=0,_=!1,aa=!0,e(!1,"errors","_s10 drv_start (ref)"),fa=Date.now(),ga=fa,oa=0,pa=!1,ja=!0},r.tick=function(a){if(g(a),h(a),!0===ja&&!0!==qa&&!(Date.now()-ga<1e3)){if(!0!==W&&(U.style.display="inline",W=!0),!0===q(30,8e3)){d();w}oa++,ga=a,null!==L&&oa>=L.maxtime&&(pa=!0),i(a)}},r.pause=function(a){qa=a},r.rewind=function(a){},r.mute=function(a){ra=a},r.audio=function(a){},r.getProgress=function(){return null===L?0:0===L.mintime?0:oa<L.mintime?100*oa/L.mintime:100},r.getProgressAbs=function(){var a={curtime:0,reftime:0};return null===L?a:(oa<L.mintime?(a.curtime=oa,a.reftime=L.mintime):(a.curtime=L.mintime,a.reftime=L.mintime),a)},r.isEnd=function(){return!1},r.getEstTimeToUnload=function(){return-1},r.deletePlayer=function(){null!==U&&(ua.remove(U),U=null),ua.empty(I),ja=!1,ia=!1,L=null,d(),!0===sa&&t.mad_bs.unload(J),ma=!0},r.checkDeleted=function(){return!0!==ua.findText(I,K)},r.sendDebugMail_Ext=function(a,b){function c(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+=c+" = "+d+"\n"}return b}if(!0!==A){A=!0,z.push("sending debug email...");var d="DISPAD DRIVER REPORT\n\n",d="Message:  ";d+=a+"\n\n",d+="Debug msg:  "+b+"\n\n",void 0!==a.stack&&(d+="\nStack:\n",d+=a.stack.toString()+"\n\n"),d+="execdata:\n\n",d+=c(L)+"\n\n",d+="effectiveFormat:\n\n",d+=c(na)+"\n\n",d+="effSnippet:   "+O+"\n\n\n",d+="other data:\n\n",d+="playerError:  "+ha+"\n",d+="playerReady:  "+ia+"\n",d+="passbackDetected:  "+ka+"\n",d+="wrapperDivID:  "+J+"\n",d+="wrapperDivElm:  "+r.wrapperDivElm+"\n\n";var e={debugStrings:z,from:"DRV_DISPAD",subject:"dispad_driver_error",text:d};t.mailmaster.sendObj(e)}}}}(config,domtool),fmp_textstorage=function(){return{templates:'forebase_template(popup_overlay) {{{\x3c!-- template popup_overlay --\x3e<div id="pow" class="pop_overlay_wrap"> <div class="pop_overlay_wait"> <div class="pop_overlay_wait_logo">Forebase Ads</div> </div> <div id="pop_overlay_shadeid" class="pop_overlay_shade"></div><div id="pop_overlay_container_id" class="pop_overlay_container"><div class="pop_overlay_frame"><div class="pop_overlay_box"><div id="popad" class="pop_overlay_pad"><div class="pop_overlay_pad_frame"><div class="pop_overlay_pad_box"><div id="pop_media_wrapper" class="pop_media_wrapper"><div id="media_container" class="media_container"><div id="media_frame" class="media_frame"><div id="media_box" class="media_box idle"><div class="media_playbox">\x3c!-- ad element or video wrapper here --\x3e</div></div></div></div>\t \t</div></div></div><div id="pop_bottom_frameid" class="pop_bottom_frame"><div id="pop_title_box" class="pop_overlay_pad_title_box"><div id="pop_title" class="pop_overlay_pad_title">${link_brand}</div></div><div id="pop_pb" class="progress_bar_box"><div class="progress_bar_frame"><div class="progress_bar"></div></div></div><div id="pop_quit_box" class="pop_overlay_pad_quitbox"><div id="pop_quit_icon" class="pop_overlay_pad_quiticon"></div><div id="pop_quit_text" class="pop_overlay_pad_quittext"></div></div></div></div></div></div></div></div>}}} forebase_template(fb_video_fix) {{{\x3c!-- template fb_video_wrap --\x3e<div id="media_container" class="media_container"><div id="media_frame" class="media_frame"><div id="media_box" class="media_box idle"><div class="media_playbox"><div id="fbvw" class="fb_video_wrapper"><div class="fb_video_box"><div class="fb_video_frame"><div id="fbvc" class="fb_video_container">\x3c!-- video element here --\x3e</div></div></div><div id="fbvctrl" class="fb_video_controller"><div class="tape_controls"><div id="btn_play" class="play_btn" title=\'${fbv_btn_play}\'></div><div id="btn_pause" class="pause_btn" title=\'${fbv_btn_pause}\'></div></div><div class="progress_num_box"><div class="progress_num_frame"><div id="main_pb" class="progress_num"></div></div></div><div class="audio_controls"><div id="btn_minus" class="minus_btn" title=\'${fbv_btn_minus}\'></div><div id="btn_audOff" class="audio_btn" title=\'${fbv_btn_audioOn}\'></div><div id="btn_audOn" class="mute_btn" title=\'${fbv_btn_audioOff}\'></div><div id="btn_plus" class="plus_btn" title=\'${fbv_btn_plus}\'></div></div></div></div></div></div></div></div>}}}',
styles:".pop_overlay_wrap { visibility: hidden; position: absolute; top: 0; left: 0; right: 0; bottom: 0; -moz-border-radius: 3px; -webkit-border-radius: 3px; -ie-border-radius: 3px; -o-border-radius: 3px; border-radius: 3px; } .pop_overlay_wrap.show { visibility: visible; } .pop_overlay_wait { visibility: hidden; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background:#f8f8f8; } .pop_overlay_wait.show { visibility: visible; } .pop_overlay_wait.icon { background-image:url(data:image/gif;base64,R0lGODlhZABlAOZVAKGhoSkpKdra2qKioqqqqt7e3qWlpaSkpNTU1MTExLKyss3Nzbq6usPDw6urq8zMzLGxsbu7u9vb27m5udXV1d3d3dnZ2TQ0NNPT08vLy0NDQysrKywsLDMzM6mpqdDQ0EZGRsDAwJCQkNHR0b29vaenp87OzkRERM/Pz1paWsLCwnBwcHNzc46OjnV1dbOzsyoqKrCwsFxcXFdXV9zc3Ly8vI2Njb+/v1hYWFtbW4yMjHFxccXFxYuLi6ampr6+vlZWVnR0dHJyco+Pj0FBQTIyMkVFRcHBwV1dXW9vb1lZWXd3d6ysrDU1NZKSknZ2dpGRkUJCQjY2NkdHR6ioqN/f3wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InV1aWQ6OTgzNjY3OTJCQUE4RTExMTk4QzBEOUU5MUVEQUQwREYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzJBMzY4NTkxQzc3MTFFMjgxMzFENTVDQzk4OTVCNkIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzJBMzY4NTgxQzc3MTFFMjgxMzFENTVDQzk4OTVCNkIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCOUY4NkEyNTYwMUJFMjExOTFFNkM1RUI2RTNDNUQ5RCIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDo5ODM2Njc5MkJBQThFMTExOThDMEQ5RTkxRURBRDBERiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUSAFUALAAAAABkAGUAAAf/gFWCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5yHKB0BoaKjpKWhRSadqo4rpq6vASurs4kkG7C4ozA1tL2EM7nBoUC+vj7CyAfFswIayMJEAsuqNs/IPdOcHxfWwh0o2Zos3chC4Zght+TBGz/nlinryErvlFTyzyX1kRIn+MgaJOx7NOTfsxYDG43gZlDYhQ8JF7lo+MxFxERHOFBExiHExUMyNj7L8bGQA5HWPJQURAMEymcgBJYU8dKaiJX+agJcCUUnspslW/rMFXNllZNDYREwKihkUlMkmVZRofHpqI5SBT2xOsriIgsHAIgdS7asWbEHLEga0YRrgAsj/xhNOEu3LoAJkwpyRbgIg92/ZjFIkmDEakBGMQArFgthkger+hZlWEw5w6R4Q+ktquCB8mICFSSFqFpzww1GKjxTbjBpnE5ziwSEVa3YgLRI22p2gLiIAW3KDCZVe4ltEYIBvxcPQDDYmcgotxVBSE5ZwaRjIpUtekDd84NJODbOYFSAQHfKBApIstUQBglGDc57TjBpR0NZsQ3Ip2xb0qd/HaTS236eRZBVFccRSNkAFGSlgIKeWcfUAhCqtoBR5VXomQPqlZSAhqrRV5J5IKK30oclLsbDI7Kdl1YiBTiQImAcPuKbfHglQuGMdl3oSIL7CZbIgzye9QIk0xHYWP8iFCBXJFkMPsIdhJYlEsGTZPHiSIYQgpaIAPph2Z8j8WnIWiIoPiliI2CCeEB0hnDJY42OXFlicIlMyaOPjQAJ4nKKEJmihI4IWiKhh/ipIaCO7Mjjd4ncCKKBW8pYZHpfhlnhmI2kWeSah5RZ4Zlsalokp4ZUQKKCmDpSA5ZjUYrIZBBC2kiTsIoVZSJJ7rekIy/kOhaihmDg5HmMNuKosADwechc8uHZSIzMjkXnIWC5COciPFRLFqgRrertUh56Oxa4CVE7boclLSussyUZCiuxJeGaa7JM2QmrrFK1Kea2THnKI6kHyjljqwcKoueMtiYsiLwa/uqwIIpWiO9ExFVIqqG0GAvib4VvdlyIqBCqIHIhqlboQWgnE0KrglW2TEiv8sUgc7HHnifkzYRAe16OPBOSbXcvBm300UgnrXQxgQAAIfkEBRIAVQAsAgAEAGAARgAAB/+AVYKDhFUWBwCJiouMjYkHFoWSk5SVlpeYVROOnJ0AE5mhoqOWCAOeqIwYpKytmRCpsYkxrrW2gw+yuhm3vaQVBLqyHhW+xpgNwroNx82TAgbKsgcCztaCDNK6DNfOptqyAwjdxwrguhDkvrnnug/qtgXB7bIEBfCuCfTCzPik0Pt0GajmT1SEgMIiFAxF4RTCcOMWXjL3UJcCiZYWVFS2AOOkAg42CnNwzyMhfSKFJTBJaF7KeiwHoXwZa2XMKiBppiJ5U5BGnZ469hT0Aiini0MFNTTKaACFpIMOMlWk8JKJIgGyat3KtWvWDiZCAZw6EFMSr2jTBlghaqbRfpb/asBQS3crDBKh5DG1hwlI3b9ZZ4j6CfTdpQOAExsQRZFmuksCiCQGrIEgpm8vxWHqMTmxDlHZXnK7hKJDZ8AXPoiNJpIaph2nE7MQlUwk3EokNsQGvOFGXpcICRS7hGN34hSi2D3kdcmH8cklRMFC+NiSBA3PE5+QEArzvlWXbGSf3AJ0QFCXPlwYn/jCCLGI2kHCxIL9ZBdQBYXgYD8xhyP5pdDfZDJA5cGAnREwlARGIDgZCDT0NISDnYnQE3YUateTCBkm5kRPEoDQYV1TRNgTASPSxQRUMqSIFhL57eciVxyokF8VLsy41RI3VjHCejpK8V6PLegYgIU9ViHBWwkzgsBdklWUMKMHUA4i4Ig5VDnIDbplyEEIWg5SX4ZBhDmIehSmZuYgOlBow5qDCIBhfxo8CWcVBiAY3Z2DzNAfDnwSkht7G/wQKCErsLfDoYSYYNpzHaBwSSAAIfkEBRIAVQAsAgAfAGAAQgAAB/+AVYKDhIWGh4iJioMWBwCPkJGSk48HFouYmZqbhBOUn6AAE5ykpaQYoamTGKatrocxqrKPEK+2rhmzuhm3vZsVHrqzBBW+xooqwroNx82FAo7KsgYCztYM0roM1s0IA9mzAwjcxhDgugrkvQ/nwg/qrwUE7boEBfCtDfTCCfilAgb26aLmjxM2gboiFNTkDaGuARQWYlLgUFg6iYkWVFS2AOMheRuFObjnkVCCkMr6lRw0D2W9lYNOupzFYxGKDgFy6tzJs2fODiYSFXAwU9XIRUJ8Kl0aYIUijUVDdVT0YwPTqzthkFBEMSqlF5hwYB2bc4YiCt+8RoK4qATZtwb/FEVQG6nGIgka3pLVUA0RQLoACCpqofetDkUy1apM9OFCYbIdPghtGfWooiCP37JQxM7r1EQhOGQmu+EG16gXFeUY/TaFooYuxS3ywFpvCUUHUSpUJAFE7bcnJCT6G1JwIhG/9bZQpC8kM0UjmiR/e2FEogqUEdpbtGS6XheKclV8h0y0d7IcQigyh7DWIiTn9cpQhCEtPdmKmMQvTECRp33bKEKDb/u9BQINiTRCzwF9JeJEgYWJAJMgJ0ColwYTVoGchWRJOGFvHGJlhHAZEhDiVR5kOIgMJyqVg4qDhNYiT+nBOIgLM+4UhI2DjOBYjhdIxqMghOVow5CDSFBhXYsakIhkFW616MOThKRwIg5UEnKDVRZusFWWg7DA4Q5gEtIYhB2gUCYhOkDYw5qECJBXfEQ0CGcVBux3wJ2FzHAeEHwWQgKXv8GwW6CDrDBdEogWYgJOtRURFJiBAAA7); background-position: center; background-repeat:no-repeat; } .pop_overlay_wait_logo { position: absolute; top:10px; left:10px; width:auto; height:auto; background:transparent; color: #c0c0c0; font-size: 18px; font-weight: normal; font-family: Verdana, sans-serif; text-align:center; } .pop_overlay_shade { position:absolute; width:100%; height: 100%; background: transparent; pointer-events: none; } .pop_overlay_shade.shadeon { background: #222222; opacity:0.25; filter:alpha(opacity=25); pointer-events: all; } .pop_overlay_container { position:absolute; width:100%; height: 100%; background: transparent; pointer-events: all; } .pop_overlay_frame { position:relative; width:100%; height: 100%; overflow: hidden; display:table; table-layout: fixed; background: transparent; } .pop_overlay_box { position:relative; overflow: hidden; vertical-align: middle; display: table-cell; text-align: center; background: transparent; } .pop_overlay_pad { display:block; position:relative; width:200px; height:18px; overflow: hidden; margin: 0 auto; background: transparent; opacity:0; filter:alpha(opacity=0); } .pop_overlay_pad.framed { background: #ffffff; -moz-border-radius: 3px; -webkit-border-radius: 3px; -ie-border-radius: 3px; -o-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 2px 2px 12px 0px rgba(160, 160, 160, 0.25); -moz-box-shadow: 2px 2px 12px 0px rgba(160, 160, 160, 0.25); box-shadow: 2px 2px 12px 0px rgba(160, 160, 160, 0.25); } .pop_overlay_pad.darkb { background: #000000; } .pop_overlay_pad.size { transition: width 0.5s, height 0.2s;/* Firefox 4 */-moz-transition:width 0.5s, height 0.2s;/* Safari and Chrome */-webkit-transition:width 0.5s, height 0.2s;/* Opera */-o-transition:width 0.5s, height 0.2s; } .pop_overlay_pad.fade { transition: opacity 1s ease-in-out; -moz-transition: opacity 1s  ease-in-out; -webkit-transition: opacity 1s ease-in-out; -o-transition: opacity 1s ease-in-out; } .pop_overlay_pad.disp { display:block; } .pop_overlay_pad.opak { opacity:1; filter:alpha(opacity=100); } \t .pop_overlay_wrap .pop_overlay_pad.grey { background: #383838; } .pop_overlay_wrap .pop_overlay_pad.sharp { -moz-border-radius: 0; -webkit-border-radius: 0; -ie-border-radius: 0; -o-border-radius: 0; border-radius: 0; } .pop_bottom_frame { width:100%; height:10px; display:none; } .pop_bottom_frame.include { display:block; } .pop_overlay_pad .pop_overlay_pad_title_box { position:absolute; bottom: 0px; left: 8px; height: 18px; padding:0 20px 0 0; margin:0; cursor: pointer; } .pop_overlay_pad .pop_overlay_pad_title_box .pop_overlay_pad_title { position:relative; left:0; height:17px; padding-top:1px; text-align: left; background: transparent; color: #c0c0c0; font-size: 11px; font-weight: normal; font-family: Verdana, sans-serif; visibility:hidden; } .pop_overlay_pad .pop_overlay_pad_title_box .pop_overlay_pad_title.show { visibility:visible; } .pop_overlay_pad .pop_overlay_pad_title_box .pop_overlay_pad_title:hover { color: #4565a5; } /* quit box */ .pop_overlay_pad .pop_overlay_pad_quitbox { display: none; position:absolute; right: 6px; bottom: -2px; height:22px; background: transparent; cursor: pointer; border: 0; opacity:1; filter:alpha(opacity=100); } .pop_overlay_pad .pop_overlay_pad_quitbox.show { display: block; } .pop_overlay_pad .pop_overlay_pad_quitbox .pop_overlay_pad_quittext { position:relative; float: right; padding: 3px 8px 4px 14px; text-align: right; background: transparent; color: #c0c0c0; font-size: 12px; font-weight: b; font-family: Arial, sans-serif; } .pop_overlay_pad .pop_overlay_pad_quitbox:hover .pop_overlay_pad_quittext { color: #4565a5; }   .pop_overlay_pad .pop_overlay_pad_quitbox .pop_overlay_pad_quiticon { position:relative; float: right; overflow: hidden; width:16px; height: 16px; top: 4px; right: 2px; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAAAOCAYAAAA7UaIRAAAALHRFWHRDcmVhdGlvbiBUaW1lAFRodSAxNSBKYW4gMjAxNSAxMTowNDowMCArMDEwMJoaeGMAAAAHdElNRQffAxkLHxXp32MLAAAACXBIWXMAAB7BAAAewQHDaVRTAAAABGdBTUEAALGPC/xhBQAAAhZJREFUeNrtlz1qw0AQhdMJnMKkMDmDWwmBY6IuV8kVJC2WsRvXOkVKgwzudQ4Flb6CUOm8hVHzYNEPo1Qa+Aq9WXbgPZZBLy9LLbXUgNputysQOHo+eJ1j7tf3zwoEjp4PVOc+Ho8VCBw9H0yad71eVyBw9Hww7F4YvQEFeIIz9U6i3+w5TWNg9AYU4AnO1DuJfrPnNObB6A0owBOcqXcS/WbPjbkXRm9AAZ7gTL2T6Dd7rvcymLwXwzsuosekfyiHsRfDOy6ix6SrzIXJezG84yJ6TPqoeTB5L4Z3XESPSe+/FyZ7ICPja/rO7TnlMDyQkfE1fef2nFIYHsjI+Jq+c3tuZBgeyMj4mr5ze27wpRJISyG03UuZqySQlkJou5eiXRJISyG03UuZWhJISyG03UsZXTC+ojB+5zCEC8ZXFMasc2F8RWGozIPxFYUx7V4Yb0BDYTT/8DIMaCiMZsaXYUBDYTQKL8OAhsJoRr0M2RlJz85IZ9oZSc/OSJV3RtKzM9KJOyPp2RnpoJ0Bk3dkvBH9SPqnchg7Mt6IfiRdZS5M3pHxRvQj6aPmweQdGW9EP5Lef6/8Z9zF8AP1jOgleFcOw/5n3MXwA/WM6CVQmSv/GXcx/EA9I3oJRs2T/4y7GH6gnhG9BMPuhdFrEDl6IXjTMIQLRq9B5OiFQHUujF6DyNELwaR5MHoNIkcvBLP4t5Ry/QES3wwq5P3QjAAAAABJRU5ErkJggg==); background-position: -82px -2px; background-repeat:no-repeat; } .pop_overlay_pad .pop_overlay_pad_quitbox:hover .pop_overlay_pad_quiticon { background-position: -32px -2px; } .pop_overlay_pad .pop_overlay_pad_quitbox .pop_overlay_pad_quiticon.skip { background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAASCAYAAACtmXuIAAAALHRFWHRDcmVhdGlvbiBUaW1lAFRodSAxNSBKYW4gMjAxNSAxMTowNDowMCArMDEwMJoaeGMAAAAHdElNRQffAxkLHwCEAofgAAAACXBIWXMAAB7BAAAewQHDaVRTAAAABGdBTUEAALGPC/xhBQAABKtJREFUeNrtV+9PW1UYBhEYNZsM21KhP1iR0NJhmnVjaMacDioz/oojMavFSWS7GzHxg5+URJjEGAgQApZLESgwBrbxS/8KMn6kI4sfG0b4JR/K/GD0E1yfU85hxzvGbq/l232TJ7d9n+Tce54n533fk5GhhRZaaKGFFmmM4uJih8Vi0cnzOTk5utLSUkc63nHqrM9e81nAdBDnvvKdw/PBHV2qa6YSkUjEEY1Gn3pHfX29bm5uTtUeq6urDQMDA68dxDU0NNh7e3tNqa6Z4XQ6mwCpoqIiaDKZMlm+qKgoG7kQ4YDr/0eMS9dH3HU3Z6Q6Ifzw/NVOI8/V3pxuqr1xj3BB1ztfZ6p9x2Gxvr7eBEhAEMjk8tlAiHBra2sp7XFsbOwVIDY6OioB52Wcm+THx8cfdnR0GBUv6nK5KqngO9SUIZiSRblGyu2Sp8PhaFYriPdWJEFEJ8DvhXMf/2hO5oVwYe2NaZLfSXJCeKiy7pusdJoBoQsBIvgOfQ4BWZRrpLldYsrKyoriPULwCWoGwd/A2xyXYNzk5ORCW1ubWdGiZrNZBxN+4YUHJghXUlJiA7dIc0mUl5e3qBHlcvPUbZwEiTMl5vnwzglqygjN7+6dlF8n0mxINjDChKfPCcrZgEWakzY3N6V4PK5ojxC7BnjMmfIXcJFyLVyemBJrbW19WfFHQ/hBXngYNUxN0YN7wBkiGQyGz9UIg5Pg3xce5rz5ad8C47y3woPMLIIz738/nE5TqPiDTHiKYZrXAw9IbmNjQ1peXpa6u7sV7RFiv06NYOJvA27K+WluFyVM6uzsnEM/Vm4KBJ9hwsMECU0+SPJ2u92A3CPeML1ef1WdKfcEJjpOglTjF39nHP7PPOHC0tmPfhg6AlNmZKYEad4APGKmkJPS1dWlaI/EACI6Z8o/wCnKCSwfCoUkURT/UPyxVqs1RIxgojNDjEZjXllZWTwdhpTXCD4iNjPkgu/nfUNQwkJPuCMzJPQMQ/KAuEpD7MCOzBA75XyqDMHYG+DNsNlsyeOM50mckBjj0NglGKSqZDnfavERE1jJunBtYLHi0lfJicd95dsA+gotWdMwo+MoSlbgGSXrJBAjOdrYpf7+fqUlyyUrWY+5kuXjSxbK4Dz0O7xkoUfkQehBKjhr6iLhYIQF+ft8GUMN/EKNGJe/nGxGn9jvEe/e/m32VWd98k6AcVjcN2rPEDHNRrwIiLKmLlLOAtxnJm1tbUnz8/OK9gih3+CnKeBPoIpyzXxTn5qamvV6vS89d9Hc3FyXbOztY1xBQYGfNwruXlMrCnpFgtxD6IQ1W/XJT/kk/0L2CaNs7O1T+45DDDHIxt4+jvPzY+/q6qriPULocdmEdY7j+LF3tr29PV/xB0NsgZoR4PPoE8eQu0sNU20GiYuNwaravYvhEi6G/zm2KF8C7RsBtes/LyC2QEtSQJY/BtylpqS0R5ShQgi+REQnF0EZV0Uvhku4GCqfrEhA+ExcAj0YdY/LOTT2fHBn0iEKRD+NJm49iEMJ87jfaz2e6pqpxPb2ticSiTz1jmg0mp9IJFTtEX3BAuErD+KQP93T02NNdU0ttNCCj38B5oHKC/vnSbgAAAAASUVORK5CYII=); background-position: -82px -4px; background-repeat:no-repeat; } .pop_overlay_pad .pop_overlay_pad_quitbox:hover .pop_overlay_pad_quiticon.skip { background-position: -29px -4px; } .pop_overlay_wrap .pop_overlay_pad_frame { position:relative; width:100%; overflow: hidden; display:table; table-layout: fixed; background: transparent; } .pop_overlay_wrap .pop_overlay_pad_box { position:relative; overflow: hidden; vertical-align: middle; display: table-cell; text-align: center; background: transparent; } .pop_media_wrapper { position:relative; background: transparent; } .media_container { display:block; margin:0 auto; position:relative; background:none; } .media_container.marg { margin-top:9px; } .media_frame { position:absolute; top:0; left:0; right:0; bottom:0; background:none; } .media_box { position:absolute; top:0; bottom:0; left:0; right:0; background:none; overflow: hidden; } .media_box.play { background-image:none; } .media_box.wait { background-image: url(data:image/gif;base64,R0lGODlhIAAfANU8AKGhoSkpKaKiounp6aampuXl5bW1tcDAwMvLy6ysrN/f362trdTU1MnJycrKyt7e3tXV1Tc3Ny0tLbe3t8zMzMHBwba2tr+/vywsLOTk5N3d3efn5+bm5tbW1tzc3DU1NV5eXkpKSnx8fJSUlEdHR0hISLS0tJmZmbCwsGFhYZiYmGNjY35+fnp6epWVlUVFRa+vr11dXXh4eNra2tvb20ZGRpaWlrGxsTY2Nnl5eXt7e19fX+rq6gAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InV1aWQ6OTgzNjY3OTJCQUE4RTExMTk4QzBEOUU5MUVEQUQwREYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjNGNjA3RjEwMTk1MTFFMkJCM0JDNDk5QzQ4Q0EyOTMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjNGNjA3RjAwMTk1MTFFMkJCM0JDNDk5QzQ4Q0EyOTMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyQ0IxMTM5QTkzMDFFMjExQTkwQ0ZBMUIyOEEwQjk4RCIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDo5ODM2Njc5MkJBQThFMTExOThDMEQ5RTkxRURBRDBERiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUSADwALAAAAAAgAB8AAAboQJ4QFigaiyahcsls8jiv47G0cVqZI6lUde3OPtpjxNO1ysJSUbnZwKCPEsp6GXtLU3MlyH5c5YVtfAFxf0ItgixLEACMjYwMSx5gbxEPSgMLjo4JA0sudidLCJqaDkscJGghVUIFBKSOBBlLKGgGSwewmheFPAoCuo4CGoUWwZq3fxPHjsk8DLodSr/MAAKWPAMJugudQhXVB0oOxwhKrscEBa2vwepKo8GmQrnMFZeZsJxCD8DMAgqUdNAFQYmBaowmFDqI0EIhDf6OAex1IVwvHhna6Xp3sUG5i0K0cfMGEhqsgheDAAAh+QQFEgA8ACwAAAAAIAAXAAAGp0CekAEoGosQoXLJbPIGieNxMXBamQ2pFHHtZgjaI6HQtV7C0kO5qRGgjwLFeml4Sy1zZd1unOSFD258cX9CB3wAFUsmAY2OjShLBWBvY0obJY+PNRxLDnZcSiqamiNLUGhUSh4RpI8fNEtEYR1LIq6aOYU8FBK4jxgNhSm/miCFK8WPO4W9ygEYDrsszzq7PA+tvzge1zwnxTbePBshuCSd4wa4N0pBACH5BAUSADwALAAACQAgABYAAAamQJ5wSCwSIYCkMskwOp+DxXKZGDyvQ8R06sBeC4TtkpDxOg/i6cVcVAjSS4GGPbTApwa6cHJf5oUoAYKDgn88bn0AAg9CHCSEhCEbQxWJB0MukJAnQ2B3BAVCHh+ahBGMQlpwXUItpZAsQ1FpVUINGK+EEhRDHWkQQyC5kCt6PDHDhCnGt8kBu8Y8Ms4i0TwzpLkRHtY8I8Mq3TwcL68lk+IwrybdQQA7); background-position: center center; background-repeat: no-repeat; } .media_box.idle { background:none; } .media_box .media_playbox { display:table; overflow:hidden; cursor:pointer; margin:auto; }  .media_box iframe { overflow:hidden; }  .progress_bar_box { visibility: hidden; display: table; position:relative; margin-top:7px; top:auto; transition: none; background: transparent; overflow: hidden; table-layout: fixed; width:100%; height:6px; pointer-events: none; } .progress_bar_box.show { visibility: visible; } .progress_bar_frame { height:6px; width:61px; vertical-align: middle; display: table-cell; text-align:center; } .progress_bar_frame .progress_bar { position:relative; height:6px; width:45px; text-align: center; display: block; margin: 0 auto; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAyCAYAAADbTRIgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMDAyN2UwOC00ZWE2LTU0NDEtYWI3MS01Y2RlZDJjZjQ2MWMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTE3MUQxQzE1ODVCMTFFNDhGNzFFRTA5NzYxRDVCMDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTE3MUQxQzA1ODVCMTFFNDhGNzFFRTA5NzYxRDVCMDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIwMkE2RUE0RUQ4OTExRTNBMUZGOTI5ODk3ODk2Q0JBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIwMkE2RUE1RUQ4OTExRTNBMUZGOTI5ODk3ODk2Q0JBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q5BsVQAAAIxJREFUeNrs1LEJgDAQheGcuI9TOIq1OIk4hAMJt49pLEKMpMpxkf9VgTSP4/GJqt7hHUne5v9DcBhKdV1qzEYXKqM0+fd5qe24ih/7OrGpfFPgiVPgCZ7JpYr5QtUCV/AET0qBZ7d41tISV/AET0qB52/xbIkreIInpcDT+6VkXk42BZ44RaknUYABAP/jLl2KR+fiAAAAAElFTkSuQmCC); background-position:0px 0px; background-repeat:no-repeat; } .progress_bar_box.P-0 .progress_bar { background-position:4px 0px; } .progress_bar_box.P-1 .progress_bar { background-position:4px -9px; } .progress_bar_box.P-2 .progress_bar { background-position:4px -18px; } .progress_bar_box.P-3 .progress_bar { background-position:4px -27px; } .progress_bar_box.P-4 .progress_bar { background-position:4px -36px; } .progress_bar_box.P-5 .progress_bar { background-position:4px -45px; }  .fb_video_wrapper { display:none; margin: 0px; width:100%; height:250px; } .fb_video_wrapper.show { display:block; } .fb_video_wrapper .fb_video_box { overflow: hidden; table-layout: fixed; display: table; width:100%; top:0; bottom:0;  } .fb_video_wrapper .fb_video_frame { text-align: center; vertical-align: middle; display: table-cell; } .fb_video_wrapper .fb_video_container { display: block; margin:auto; width:300px; height:225px; padding:0px; } .fb_video_wrapper .fb_video_container img { max-width:100%; max-height:100%; background:white; } .fb_video_wrapper .fb_video_container iframe { max-width:100%; max-height:100%; } .fb_video_wrapper .fb_video_controller { position:relative; left:0; right:0; height:25px; line-height:38px; background-color:#F5f5f5; padding:4px 6px 0 4px; } .fb_video_wrapper .fb_video_controller .tape_controls { position:relative; width:30px; float:left; height:25px; } .fb_video_wrapper .fb_video_controller .tape_controls .pause_btn { display:none; } .fb_video_wrapper .fb_video_controller .tape_controls .play_btn { display:block; } .fb_video_wrapper .fb_video_controller.playing .tape_controls .pause_btn { display:block; } .fb_video_wrapper .fb_video_controller.playing .tape_controls .play_btn { display:none; } .fb_video_wrapper .fb_video_controller .audio_controls { position:relative; width:90px; float:right; height:25px; } .fb_video_wrapper .fb_video_controller .audio_controls .mute_btn { display:none; } .fb_video_wrapper .fb_video_controller .audio_controls .audio_btn { display:block; } .fb_video_wrapper .fb_video_controller.mute .audio_controls .mute_btn { display:block; } .fb_video_wrapper .fb_video_controller.mute .audio_controls .audio_btn { display:none; } .fb_video_wrapper .fb_video_controller .tape_controls .play_btn, .fb_video_wrapper .fb_video_controller .tape_controls .pause_btn, .fb_video_wrapper .fb_video_controller .audio_controls .minus_btn, .fb_video_wrapper .fb_video_controller .audio_controls .plus_btn, .fb_video_wrapper .fb_video_controller .audio_controls .mute_btn, .fb_video_wrapper .fb_video_controller .audio_controls .audio_btn {width:30px; height:30px; float:left; text-indent:-9999px; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAB7CAYAAABkS+5eAAAAB3RJTUUH3wMZFRAfmCoYoAAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAAmbSURBVHja7Z1JaBRZGMdHE8UYUTNEUcEoqCQRxH30oILYhwE9ibjhEnEBI0hOJrnIeBE8DGhgxIEJehlQMLgdPHgIouDSKhFtGFFwoRUXNG5DcO35f/S/2qLTXV1dVa/zJvkKftTrl6Kp/n6p96re+173Tz/ppptuuummm2666eaxpVKpgsS2/z0SnAVHPI6p8PNeYeno6BgJzoIjHscYP5dkMjkSnAVHPI7JnEcoCQjuJHAHpMDpPMcsATfAMMMCJoE7IAVO5zlmCbgBjJ0LgjsJ3AEpcDrPMUvADTAslAQEdSF4QQE5JaCukvvj4HeDAhaCFxSQUwLqKrk/DoycC4K6ELyggJwSUFfJ/XHwe2AJCOha0OMS0EsCXq8AnaAMjAfdoMaAgLWgxyWglwS8XgE6QRkYD7pBpOeCgK4FPS4BvSTg9QrQCcrAeNANaoqSgCAOAnuzgt9LAspDwWBwCTSwrg38FmHwB4G9WcHvJQHloWAwuAQaWNcGIjkXBHEQ2JsV/F4SUB4KBoNLoIF1beA3TwkIWis4BnYzkM15BGQkYL/R6aSxXwriLC8DV0MEvRUcA7v5ujmPgIwE7Dc6nTT2S0Gc5WUg0LkgaK3gGNjN1815BGQkYL/R6aSxXwriLC8DVwtJyA7wQR8SRoO33EtT9B6MAFXgVQgJ2QE+6EPCaPCWe2mK3oMRoAoEOpccAT7oQ8Jo8JZ7aYregxGgCryKXAKPuwbmsnwPTGH5Sykl8LhrYC7L98AUlgOdSxAJPO4amMvyPTCF5S8mrgTpC56ByXz9HIyVW1Twb4mvBOkLnoHJfP0cjJVbVBDoXAJeCdIXPAOT+fo5GCu3qOBfExI2gCssTwNJlmeAf0osYQO4wvI0kGR5Bgh0LgElbABXWJ6WlD+myzPAP4UkrJY7GrklZSC3+5AwBkxl+RA4wPIe8FcICavljkZuSfl6uw8JY8BUlg+BAyzvAYHOBUFbLXc0ckvK19t9SBgDprJ8CBxgeQ/4q+jnBLnlBJ+9+gQeJ0/KT0E1GAIeSF0Ut4UuMQ3gs1efwOPkSfkpqAZDwAOpi+o85JYTfPbqE3icPCk/BdVgCHggdUEf1uR2810BCaPAPJab5MEtSgGuAMvt5rsCEkaBeSw3yYNb1OfB2813BSSMAvNYbpIHNykHksDATgePvYYteNwc8NJpogyJmA4eew1b8Lg54KXTRBkQMR089hq24HFzwEuniQosgQEeB24WkDAc/GJKgCvA48DNAhKGA6PngsCOAzcLSBgOMucRSoIryKe8hrJLBYN8ymsouxQwyKe8hrLdhJaghEclWIBKsACVYAEqwQJUggWoBAtQCRagEixAJViASrAAlWABKsECVIIFhJbAbLv94IxM3ACpc/5WxuyLTJ1JmG23H5yRiRsgdc7fyph9kakzBbPt9oMzMnEDpM75WxmzLzJ1oSQwlaWNkzpdoM4JOGfemphxYVwCU1naOKnTBeqcgHPmrYkZF0YlMJWljZM6XaDOCThn3pqYcRFeAoJaz/9+Z3ozDmoZ8HrOuEn23QLTEhDUev73O9ObcVDLgNdzxk2y7xaYlICg1vO/35nejINaBryeM26SfbcgtAQEdBG4njXRL1l3NVyzcBd8ANuYaWFMAgK6CFzPmuiXrLsarlm4Cz6Abcy0MCIBAV0ErmdN9EvWXQ3XLNwFH8A2Zlr4l8AgOu16BVgFHuZIeZEM7HXgNq+ALVEHn0F02vUKsAo8zJHyIhnY68BtXgFbogw+g+i06xVgFXiYI+VFMrDXgdu8Ara4g++rY0YAN4F9YA1FxJjsmyv565GkOTIVZrMBAZvAPrCGImJM9s2V/PVI0hyZCrM5YgGbwD6whiJiTPbNlfz1SNIcmQqzOZcAPxI+McCdvAtq9MjAE5K8GiJvfhDETwxwJ++CGj0y8IQkr4ZImx8E8RMD3Mm7oEaPDDwhyashpwA/Er6Ab+AEm6WtHgJeg/Wm2n/JogbfwAk2S1s9BLwG6020/5JFDb6BE2yWtnoIeA3WewnwK+E7OOlDgnTUEw1L+A5O+pAgHfVEgxK+g5M+JEhHPTGshK8M8Hk2RzsLSKg1KOErA3yezdHOAhJqDUn4ygCfZ3O0s4CE2rASJJP6KNjBjnk5eJNHQtz9sGZAgmRSHwU72DEvB2/ySIi7H9YiliCZ1EfBDnbMy8GbPBLi7oe1oBLKmdhbweBWSnp7H0koZ2JvBYNbKentfSChnIm9FQxupaS3G5OQfTCCu5Lp7k9i6dU4JZOQQ8pKprs/6UivximJhBxSVjLd/UkyvRrHnASuwJG1yPfBfLA49mM1f0klcAWOrEW+D+aDxR0/VvOXTAJX4Mha5PtgPlic/LGaPzoJHAmVFTofQYICnEG6WeACJdwyLYEjobJC5yNIUIAzSDcLXKCEWyYlcCRUVuh8BAkKcAbpZoELlHArij5BFo/PBhfBOTAzO8goT+BAXhdHTk31CbJ4fDa4CM6BmdlBRnkCB/K6OHJqok+QxeOzwUVwDszMDjLKEziQ18WR09BXQhWDW50vwLH01ybUuTpwU1dCFYNbnS/AHemvTahzdeAmroQqBrc6X4CT6a9NqHN14OH7BMUcKsECVIIFqAQLUAkWoBIsQCVYgEqwAJVgASrBAlSCBagEC1AJFqASLEAlWIBKsACVYAEqwQJUggWoBAvw3FypLb7o6w/zf0UlWECxElqY6NUctYT29vYWkALNfR0U2yUcpoTDBiQcpoTDfR0UlaASVIKNEqQP+NNFghISWfUtxUpgH/CniwQlJLLqW0x8cH6GHh8kAv5Tyefo8UGikIRUERR7kim/DHQJ/fZKsAntEyxAJViASrCAYiW0UkKLAQmtlNDv+4CwEnTsqNQS+vrkBgoqwQJUggWoBAtQCRagEixAJViASrAAlWABKsECVIIFqAQLUAkWoBIsQCVYgEqwAJVgAb4kxNJf0zzdxAm0t7efB0be+/+CXwkyryxfXv6HfDFhxBJkXvkL+ANE+t5exNI/uiGf67Kf+iDwxzTkK0Ive9UXI8HhVSz9OwrlEUpweAUaQSTvXUBC5jP5qQ8oIfOtxV71QSQ4SBberxFLSLmy8EK/90CQ4BCqvyiQh2qsv+hvEtz9xc8RS3D3F0W/90CTELi/KCI7O9L+oj9LKLq/KCZFPsr+QiWoBKMS5PcVdhlqjrrBLm2OCnfM1cWeaBEdc9HvPZAk6C1qH0rQh7U+lNBtcNiiW4ctvCUEbvd9SDDS7vc3CTqUbRDddNNNNwu3/wBnaMr2k3oT8AAAAABJRU5ErkJggg==); background-repeat:no-repeat; cursor:pointer; } .fb_video_wrapper .fb_video_controller .tape_controls .play_btn { background-position:-20px -102px; } .fb_video_wrapper .fb_video_controller .tape_controls .play_btn:hover { background-position:3px -102px; }   .fb_video_wrapper .fb_video_controller .tape_controls .pause_btn { background-position:-73px -102px; } .fb_video_wrapper .fb_video_controller .tape_controls .pause_btn:hover { background-position:-48px -102px; } .fb_video_wrapper .fb_video_controller .audio_controls .plus_btn { background-position: -17px -70px; } .fb_video_wrapper .fb_video_controller .audio_controls .plus_btn:hover { background-position: 6px -70px; } .fb_video_wrapper .fb_video_controller .audio_controls .minus_btn { background-position:-74px -70px; } .fb_video_wrapper .fb_video_controller .audio_controls .minus_btn:hover { background-position: -50px -70px; } .fb_video_wrapper .fb_video_controller .audio_controls .audio_btn { background-position: -31px -4px; } .fb_video_wrapper .fb_video_controller .audio_controls .audio_btn:hover { background-position: 4px -4px; } .fb_video_wrapper .fb_video_controller .audio_controls .mute_btn {background-position:-31px -34px; } .fb_video_wrapper .fb_video_controller .audio_controls .mute_btn:hover {background-position: 4px -34px; }   .fb_video_wrapper .progress_num_box { display:block; position: relative; float: left; margin-top: 0px; overflow: hidden; table-layout: fixed; width:33%; height:20px; } .fb_video_wrapper .progress_num_box .progress_num_frame { height:20px; width:90px; vertical-align: middle; display: table-cell; text-align:center; } .fb_video_wrapper .progress_num_box .progress_num_frame .progress_num { position:relative; top:-8px; height:20px; width:90px; text-align: center; display: block; margin: 0 auto; font-family: Arial, Helvetica, sans-serif; font-size: 10px; font-weight: normal; color: #646464; } .fb_video_wrapper .progress_num_box .progress_num_frame .progress_num span { margin-left:6px; margin-right:6px; }  .pop_video_wrapper { } .pop_video_container { } ",captions:{english:{but_close:"Close",but_skip:"Skip",link_brand:"Forebase Ads",fbv_btn_play:"Play",fbv_btn_pause:"Pause",fbv_btn_plus:"Increase volume",fbv_btn_minus:"Decrease volume",fbv_btn_audioOn:"Audio On",fbv_btn_audioOff:"Audio Off"},italian:{but_close:"Chiudi",but_skip:"Skip",link_brand:"Forebase Ads",fbv_btn_play:"Play",fbv_btn_pause:"Pausa",fbv_btn_plus:"Alzare il volume",fbv_btn_minus:"Abbassare il volume",fbv_btn_audioOn:"Audio Si",fbv_btn_audioOff:"Audio No"},other:""},dummyItem:"---------"}}(),fmp_container_pop=function(a,b,c){return function(d){function e(a){d.logger.writex({msg:a,prefix:"fmp_container_pop-"+d.adPostContID,inst:x})}function f(a,b,c){u.trackhub.sendEvent("stgexec","media_cont/${"+B+"|*AllLocs*}$/"+a,b,c)}function g(a,b){if(null!==fa)for(var c=0;c<fa.length;c++){var d=fa[c];d.name===b&&C.addClass(a,d.classID)}}function h(a,b){!0===r&&(void 0===q.shoeLx&&(q.shoeLx={}),q.shoeLx[a]=b)}function i(a,b){!0===r&&(void 0===q.shoeLx&&(q.shoeLx={}),void 0===q.shoeLx[a]&&(q.shoeLx[a]=[]),q.shoeLx[a][q.shoeLx[a].length-1]!==b&&q.shoeLx[a].push(b))}function j(){var a=t.getCurZIndex();return null===a?"auto":""+a}function k(){if(h("bC","_autoSizeDetector"),!0!==ya){var a=C.width(E);a!==U&&(U=a,W=!0);var b=C.height(E);b!==V&&(V=b,X=!0)}}function l(a){function b(a){h("bC","showFrame"),C.zindex(Q,Ca),C.zindex(K,Ca),!0===ha&&C.addClass(Q,"shadeon"),g(Q,"adbox_frame"),!0===a?(C.addClass(P,"show"),!0===ga.fill&&(!0===ga.icon&&C.removeClass(R,"icon"),C.removeClass(R,"show"),ga.color)):C.removeClass(P,"show")}function f(a){return null!==C.getElmHandle(a)}function j(a){function b(){G=C.getElmHandle("media_container"),H=C.getElmHandle("media_playbox"),I=C.getElmHandle("pop_overlay_pad"),J=C.getElmHandle("pop_bottom_frame"),K=C.getElmHandle("pop_overlay_container"),L=C.getElmHandle("pop_overlay_pad_title"),M=C.getElmHandle("pop_overlay_pad_quiticon"),N=C.getElmHandle("pop_overlay_pad_quittext"),O=C.getElmHandle("pop_overlay_pad_quitbox"),P=C.getElmHandle("pop_overlay_wrap"),Q=C.getElmHandle("pop_overlay_shade"),R=C.getElmHandle("pop_overlay_wait"),S=C.getElmHandle("pop_overlay_pad_title_box"),T=C.getElmHandle("progress_bar_box")}function c(a){function b(a){!0===a?q.fireEvent("hoverOn"):q.fireEvent("hoverOff")}function c(){}h("bC","bindTargets");var f="media_frame",g=H;if(!0!==a)return C.bind(S,"click",null),C.bind(O,"click",null),C.bind(f,"mouseenter",null),C.bind(f,"mouseleave",null),C.bind(g,"click",null),void C.bind(g,"touchend",null);C.bind(S,"click",function(){o(d.promolinkuri)}),C.bind(O,"click",function(){q.fireEvent("quit")}),C.bind(f,"mouseenter",function(){e(),b(!0)}),C.bind(f,"mouseleave",function(){e(),b(!1)}),C.bind(g,"click",function(){e(),c()}),C.bind(g,"touchend",function(){e(),c()})}h("bC","renderCont"),!0===a?(e(),C.insertTemplate(da.popup_overlay,ea,F),b(),C.zindex(S,Ca),C.zindex(O,Ca),c(!0),!0===ga.fill&&(C.addClass(R,"show"),!0===ga.icon&&C.addClass(R,"icon"),ga.color)):(c(!1),e(),C.empty(F))}function k(a){i("fxin",a),h("bC","fxContainer"),e(),!0===a?(C.cursor(H,"pointer"),ua=!0):(C.cursor(H,"auto"),ua=!1)}function l(a,b){function c(a){return a<0?"":a<19?"P-0":a<38?"P-1":a<57?"P-2":a<76?"P-3":a<95?"P-4":"P-5"}if(h("bC","showProgress"),!(b-ma<300)){if(ma=b,!0!==a||!0!==ka)return void C.removeClass(T,"show");if(null!==Fa&&!0===Fa.shouldProgress()){var d=Fa.getProgress(),e=0;d.reftime>0&&(e=100*d.curtime/d.reftime),C.removeClass(T,"P-0"),C.removeClass(T,"P-1"),C.removeClass(T,"P-2"),C.removeClass(T,"P-3"),C.removeClass(T,"P-4"),C.removeClass(T,"P-5"),C.addClass(T,c(e)),C.addClass(T,"show")}}}switch(h("bC","_procMaster"),i("stateMaster",wa),wa){case"INIT":Ba=a,wa="WEL";case"WEL":if(a-Ba>c.stage.contTimeout){e(),u.trackhub.sendEvent("alerts","fmp_container/"+d.adpName,"error_excont_timeout"),wa="STDN";break}if(!0!==D)break;if(!0!==f(F))break;j(!0),Ba=a,wa="WSB";case"WSB":if(a-Ba>c.stage.contTimeout){e(),u.trackhub.sendEvent("alerts","fmp_container/"+d.adpName,"error_incont_timeout"),wa="STDN";break}if(!0!==f(H))break;z=!0,wa="WEX";case"WEX":if(!0===ya){q.fireEvent("cont_clsd_befx"),wa="WHS";break}if(!0!==xa)break;b(!0),k(!0),l(!1,a),wa="WSD";case"WSD":if(!0===Ea)break;q.fireEvent("cont_expd"),wa="RNN";case"RNN":if(!0!==ya){l(!0,a);break}l(!1,a),q.fireEvent("cont_clsd_aftx"),wa="DCM";case"DCM":k(!1),wa="WHS";case"WHS":if(!0===Ea)break;wa="STDN";case"STDN":e(),b(!1),j(!1),Fa=null,Da=!1,za=!0,wa="PARK"}}function m(a){var b=a,c="setFxType - type:"+b;switch(!0===va&&(b="size",c+=" (forced)"),e(),i("FxType",a),b){case"none":C.removeClass(I,"size"),C.removeClass(I,"fade"),na=0,oa=0,pa=0,qa=0,ra=0;break;case"size":C.addClass(I,"size"),C.removeClass(I,"fade"),na=800,oa=100,pa=200,qa=1e3,ra=1e3;break;case"fade":C.removeClass(I,"size"),C.addClass(I,"fade"),na=800,oa=100,pa=200,qa=1e3,ra=1e3}}function n(a){function b(a){h("bC","opakContainer"),e(),!0===a?(!0===ia?(C.addClass(I,"framed"),C.addClass(J,"include")):(C.removeClass(I,"framed"),C.removeClass(J,"include")),!0===Ga.blackframe?C.addClass(I,"darkb"):C.removeClass(I,"darkb"),"unspecified"!==Ga.framecolor&&C.background(P,Ga.framecolor),C.addClass(I,"opak")):("unspecified"!==Ga.framecolor&&C.background(P,"transparent"),C.removeClass(I,"opak"))}function c(a){h("bC","expandPlaybox");var b=Ga.background,c=Ga.width,d=Ga.height;C.background(H,b),!0===a?(C.width(H,c),C.height(H,d),C.zindex(H,Ca),e()):(C.width(H,0),C.height(H,0),e())}function d(a){
h("bC","positionOuterFrame");var b=Ga.xoff,c=Ga.yoff,d=0,e=0;!0===ia&&(d=30,e=50);var f,g,i,j,k,l;if(!0===a){switch(f=C.width(H),g=C.height(H),i=f+d,j=g+e,C.width(K,i),C.height(K,j),Ga.xalign){case"left":k=0+b+Z;break;case"right":k=U-i+b+Z;break;default:k=(U-i)/2+b+Z}switch(Ga.yalign){case"left":l=0+c;break;case"right":l=V-j+c;break;default:l=(V-j)/2+c}C.left(K,k),C.top(K,l)}}function f(){if(!0!==Y)return!1;var a=C.getrect(K,aa),b=a.left,c=(aa.screen.availWidth-a.width)/2;return Math.abs(b-c)>=1&&(Z+=.8*(c-b),Z>$&&(Z=$),Z<-$&&(Z=-$),_=!0,!0)}function g(a){h("bC","adjustWidth");var b;b=!0===ia?16:0;var c=!1;if(!0===W&&(W=!1,c=!0),!1!==_&&(_=!1,c=!0),!0===a){if(!0===ja)var f=C.width(H);else var f=Ga.width;var g=C.width(G);if(g!==f||!0===c){g=f;var i=g+b;C.width(I,i),C.width(G,g),e()}}else C.width(I,4);!0===c&&d(a)}function j(a){h("bC","adjustHeight");var b;!0===ia?(b=28,C.addClass(G,"marg")):(b=0,C.removeClass(G,"marg"));var c=!1;if(!0===X&&(X=!1,c=!0),!0===a){if(!0===ja)var f=C.height(H);else var f=Ga.height;var g=C.height(G);if(g!==f||!0===c){g=f;var i=g+b;C.height(I,i),C.height(G,g),e(),!0===la&&C.addClass(L,"show")}}else C.height(I,4),!0!==la&&C.removeClass(L,"show"),C.height(G,0);!0===c&&d(a)}if(h("bC","_procFX"),null!==Fa)switch(i("stateFxProc",sa),sa){case"INIT":if(!0!==D)break;e(),m(Ga.fxin),ta=a,sa="READY",e();case"READY":if(a-ta<na)break;if(!0!==ua)break;if(Ea=!0,m(Ga.fxin),c(!0),b(!0),"size"===Ga.fxin){j(!0),ta=a,sa="WAIT_FX_IN_HEIGHT",e();break}j(!0),g(!0),ta=a,sa="DEPLOYED",e();case"DEPLOYED":if(!0===f()&&g(!0),a-ta<qa)break;Ea=!1,e(),ta=a,sa="WAIT_FX_OUT",e();case"WAIT_FX_OUT":if(!0===f()&&g(!0),a-ta>300&&(j(!0),g(!0),ta=a),!0===ua)break;Ea=!0,m(Ga.fxout),"fade"===Ga.fxout&&b(!1),"size"===Ga.fxout&&(c(!1),j(!1),g(!1)),ta=a,sa="FX_OUT_TRANS",e();case"FX_OUT_TRANS":if(a-ta<ra)break;c(!1),b(!1),j(!1),g(!1),Ea=!1,sa="PARK",e();break;case"PARK":break;case"WAIT_FX_IN_HEIGHT":if(!0===f()&&g(!0),a-ta<oa)break;g(!0),ta=a,sa="WAIT_FX_IN_WIDTH",e();break;case"WAIT_FX_IN_WIDTH":if(!0===f()&&g(!0),a-ta<pa)break;sa="DEPLOYED",e()}}function o(a){h("bC","_titleCallback");var b=decodeURIComponent(a);if(0!==b.length){var c=window.screen,d=Math.round(.8*c.availHeight),e=Math.round(.8*c.availWidth),f=Math.round(c.availTop+(c.availHeight-d)/2),g=Math.round(c.availLeft+(c.availWidth-e)/2),i="toolbar=yes, scrollbars=yes, resizable=yes, ";i+="top="+f+", ",i+="left="+g+", ",i+="width="+e+", ",i+="height="+d+", ",window.open(b,"_blank",i)}}function p(a,b){return!1}var q=this,r=d.debugVars.shoeLx,s=(d.master,d.startTime,d.unitDomElm,d.hostWnd),t=d.myUnitObj,u=d.comps,v=d.bootParams,x=(d.bootParams.env,d.stageAttributes,Math.round(999*Math.random()));e();var y=!1,z=!1,A=0,B=v.placementId+"/"+d.sectionName+"/"+d.unitName+"/"+d.adpName+"/"+d.segmentName,C=new a({hostWnd:s}),D=!1,E=d.main_wrapper_id,F=d.internalContainer,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=0,V=0,W=!1,X=!1,Y=d.centscrn,Z=0,$=20,_=!1,aa=window;try{aa=top}catch(a){}var ba=b.styles;void 0!==d.styles&&(ba=d.styles),C.deployStyle("fmp_styles",ba,!0);var ca=b.templates;void 0!==d.templates&&(ca=d.templates);var da={};C.getAllTemplates(ca,da);var ea=b.captions.italian;void 0!==d.captions&&(ea=d.captions);var fa=(d.stylename,d.stylesnippets),ga=d.waitopts,ha=d.shade;void 0===ha&&(ha=!0);var ia=d.frame;void 0===ia&&(ia=!1);var ja=d.flexible;void 0===ja&&(ja=!1);var ka=d.progress;void 0===ka&&(ka=!0);var la=d.promolink;void 0===la&&(la=!0),!0!==ia&&(ka=!1,la=!1);var ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa="INIT",ta=0,ua=!1,va=!1,wa="INIT",xa=!1,ya=!1,za=!1,Aa=null,Ba=0,Ca=null,Da=!0,Ea=!1,Fa=null,Ga={};!0===r&&(q.shoeLx={stageName:d.stageName,stageAttributes:d.stageAttributes,activeLayout:d.activeLayout,sectionName:d.sectionName,unitName:d.unitName,adpName:d.adpName,adPostContID:d.adPostContID,segmentName:d.segmentName,unitNumID:d.unitNumID,stylename:d.stylename,stylesnippets:d.stylesnippets,unitfbxID:d.unitfbxID,mdType:d.mdType,segmType:d.segmType,adPostWidth:d.adPostWidth,adPostHeight:d.adPostHeight,main_wrapper_id:d.main_wrapper_id,internalContainer:d.internalContainer}),q.fireEvent=function(a,b){switch(a){case"hoverOn":case"hoverOff":case"click":case"quit":return void(null!==Fa&&Fa.fireEvent(a,b))}d.master.fireEvent(a,b)},q.tick=function(a){function b(){if(h("bC","domToolSetup"),!0!==D){null!==C.setWrapperElement(E)&&(D=!0)}}if(!0===r&&d.unitfbxID.indexOf(q.shoeLx)>=0){q.shoeLx}if(!1===y&&!(a-A<50)){A=a;try{if(!0===p(70,15e3)){e();w}if(b(),!0!==D)return;Ca=j(),k(),l(a),n(a)}catch(a){if(!0!==y){var c="";!0===r&&void 0!==q.shoeLx&&(c+="Bdc--\x3e "+q.shoeLx.bC.join(" - ")),void 0!==a.stack?(c+=" - Stk--\x3e ",c+=a.stack.toString()):c+=" - Msg--\x3e "+a,c.length>250&&(c=c.substring(0,250)+"..."),f("excepts",c),q.fireEvent("error_mediacont"),y=!0}}}},q.isReady=function(){return z},q.setParams=function(a){Fa=a.srcCtrl,Ga.fxin=a.fxin,Ga.fxout=a.fxout,Ga.blackframe=a.blackframe,Ga.framecolor=a.framecolor,Ga.width=a.width,Ga.height=a.height,Ga.xalign=a.xalign,Ga.yalign=a.yalign,Ga.xoff=a.xoff,Ga.yoff=a.yoff,Ga.background=a.background,i("tagName",a.tagname)},q.getSelector=function(){return"media_playbox"},q.expand=function(){e(),xa=!0,Aa=Date.now(),i("_expandReq",xa)},q.destroy=function(){e(),ya=!0,i("_destroyReq",ya)},q.getDestStat=function(){return!1!==y||za},q.showQuit=function(a,b){i("bShow",a),i("quit_type",b);var c;"close"===b?(c=ea.but_close,C.removeClass(M,"skip")):"skip"===b&&(c=ea.but_skip,C.addClass(M,"skip")),a&&!0===ia?(C.text(N,c),C.addClass(O,"show")):C.removeClass(O,"show")}}}(domtool,fmp_textstorage,config),fmp_driverinterf=function(a,b,c,d,e,f,g,h){return function(a){function c(b){a.logger.writex({msg:b,prefix:"fmp_drvint_"+a.unitfbxID,inst:u})}function i(a,b){null!==z&&z.notif(a)}function j(a,b){null!==z&&z.notif(a)}var k=this,l=a.unitDomElm,m=a.hostWnd,n=a.master,o=a.comps,p=a.cllBks,q=a.plcmParams,r=a.bootParams,s=a.mdType,t=(a.packId,a.segmAttr),u=Math.round(999*Math.random());c();var v={master:k,adPostContElm:a.adPostContElm,unitDomElm:l,hostWnd:m,comps:o,plcmParams:q,bootParams:r,startTime:a.startTime,secProt:a.secProt,logger:a.logger,env:a.env,IE:a.IE,heart:a.heart,macroproc:a.macroproc,vastCaller:a.vastCaller,fireEvent:k.fireEvent,opConfig:b,versionTag:a.versionTag,versionFolder:a.versionFolder,baseUrl:a.baseUrl,placementId:a.placementId,hostPageUrl:a.hostPageUrl,hostPageTitle:a.hostPageTitle,imprID:a.imprID,unitfbxID:a.unitfbxID,main_wrapper_id:a.main_wrapper_id,tagName:a.tagName,segmName:a.segmName,adpName:a.adpName,unitName:a.unitName,segmentID:a.segmentID,packId:a.packId,dummy_item:0},w={},x=!1,y=null,z=null;k.fireEvent=function(a,b){switch(a){case"click":null!==z&&z.notif("click");break;case"actsenscont":null!==z&&z.notif("imp");break;case"playerror":null!==z&&z.notif("error");break;case"hoverOn":null!==z&&z.notif("hoverOn");break;case"hoverOff":null!==z&&z.notif("hoverOff")}n.fireEvent(a,b)},k.ssac=function(a,b){null!==y&&"function"==typeof y.ssac&&y.ssac(a,b)},k.tick=function(a){null!==y&&y.tick(a),null!==z&&z.tick(a)},k.openCmd=function(b){function i(b,c){function d(a,b){var c="";return a.forEach(function(a){""===c&&a.name===b&&(c=a.rawstr)}),c}var e=null,c=d(a.ntvfrmts,t.natformat);return e=new h({master:k,comps:o,cllBks:p,bootParams:r,ssname:b.ssname,snippet:b.snippet,natFormatStr:c}),!0===e.isItAnAd()?{type:"lw",insbx:!1,module:e}:(e=null,e=new g({master:k,comps:o,cllBks:p,bootParams:r,snippet:b.snippet}),!0===e.isItAnAd()?{type:"dir",insbx:!1,module:e}:(e=null,null))}switch(c(),v.containerClass="",null!==a.mediacontainer&&(v.containerClass=a.mediacontainer.getSelector()),w.uniqueID=b.uniqueID,w.tagname=b.tagname,w.ssname=b.ssname,w.shtagname=b.shtagname,w.snippet=b.snippet,w.insbx=b.insbx,w.insmod=b.insmod,w.initvol=t.initvol,w.quit=t.quit,w.fxin=t.fxin,w.fxout=t.fxout,w.mintime=t.mintime,w.maxtime=t.maxtime,w.active=a.active,w.log=a.log,s){case"dsp":w.width=a.sourceWidth,w.height=a.sourceHeight;var j=i(b,a.ntvfrmts);null!==j&&(z=j.module,w.insbx=!1,!0===z.isVarSize()&&(w.width=a.segmWidth,w.height=a.segmHeight)),y=new d(v);break;case"cst":y=new e(v),w.width=a.sourceWidth,w.height=a.sourceHeight;break;case"vid":v.vastDevice=b.vastDevice,v.hasFlash=b.hasFlash,v.primaryMethod=b.primaryMethod,v.tagname=a.tagName,v.uniqueID=b.uniqueID,y=new f(v),w.width=a.segmWidth,w.height=a.segmHeight}null!==a.mediacontainer&&a.mediacontainer.setParams({srcCtrl:n,tagname:w.tagname,width:w.width,height:w.height,xalign:t.xalign,yalign:t.yalign,xoff:t.xoff,yoff:t.yoff,fxin:t.fxin,fxout:t.fxout,blackframe:t.blackframe,framecolor:t.framecolor,background:t.background}),c()},k.openStat=function(a){var b={status:"...",msg:"",data:null};if(null===y)return b.status="error",b;if(!0!==y.openStat())return b.status="...",b;if(null!==z){if(!0!==z.isReady())return b.status="...",b;null!==z&&z.setSize(w.width,w.height),w.snippet=z.getAM()}return k.fireEvent("addVisLstn",i),k.fireEvent("addHovLstn",j),b.status="ok",b},k.loadCmd=function(){y.setupPlayer(w),x=!0},k.loadStat=function(a){var b={status:"..."};return!0===y.isPlayerError()?b.status="error":!0===y.isPlayerReady()&&(b.status="ok"),b},k.startCmd=function(){y.start(),null!==z&&z.notif("start")},k.startStat=function(a){var b={status:"...",msg:"",data:null};return b.status="ok",b},k.stopCmd=function(){y.deletePlayer(!1),k.fireEvent("remVisLstn",i),k.fireEvent("remHovLstn",j)},k.stopStat=function(a){var b={status:"...",msg:"",data:null};switch(s){case"dsp":case"cst":case"vid":var c=y.checkDeleted();!0===c&&(b.status="ok",x=!1)}return b},k.pauseCmd=function(a){y.pause(a)},k.muteCmd=function(a){y.mute(a)},k.audioCmd=function(a){y.audio(a)},k.rewindCmd=function(){y.rewind(!1)},k.sendDebugMail=function(a){switch(c(),s){case"dsp":case"cst":null!==y&&y.sendDebugMail_Ext(a)}},k.shouldProgress=function(){return null!==y&&y.shouldProgress()},k.getProgress=function(){var a={curtime:0,reftime:0};return null===y?a:y.getProgressAbs()},k.getEstTimeToUnload=function(){return null===y?-1:y.getEstTimeToUnload()}}}(0,config,0,fmp_mediadrv_dispadx,fmp_mediadrv_custom,fmp_mediadrv_vast,fmp_dirad,fmp_lwebad),fmp__sourcectrl_wf=function(a,b,c,d,e){return function(b){function f(a){t.logger.writex({msg:a,prefix:"fmp__sourcectrl_wf",inst:H})}function g(a){t.logger.writex({tgl:!0,msg:a,prefix:"unit:"+b.unitName+" (src_ctrl_wf)"})}function h(a,c,d){return 0===z.refprc?null:{domain:"tags",event:b.mdType+"/wf/"+W+"/_s20 by_tag/"+X+a,data:c,evOpts:d}}function i(a,c,d){return 0===z.refprc?null:{domain:"tags",event:b.mdType+"/wf/"+W+"/_s20 by_tag/*AllTags*"+a,data:c,evOpts:d}}function j(a,c,d){if(0===z.refprc)return null;var e=b.mdType+"/wf/"+W+"/_s10 shares"+a;t.trackhub.sendEvent("tags",e,c,d)}function k(a){var b=!1;switch(a.eventName){case"video_start":case"video_impression":case"video_firstQuartile":case"video_midpoint":case"video_thirdQuartile":case"video_complete":b=!0}if(!0===b){var c={unitfbxID:Q,adpID:R,tagName:V,event:a.eventName};s.fireEvent("src_vast_ev",c)}}function l(a,c){function d(a,c){if(!0!==pa){pa=!0;var d=Date.now()-Ja;if("driver_to"===a){var e="dispad_source_player_timeout";!0===J&&(e="vast_source_player_timeout"),r(e),p("plyerr",{msg:"timeout"});var h={unitfbxID:Q,adpID:R,tagName:V,event:a,delay:d};return void s.fireEvent("src_abort",h)}if("playerror"===a){var e="dispad_source_player_error";!0===J&&(e="vast_source_player_error"),r(e),p("plyerr",{msg:c.msg});var h={unitfbxID:Q,adpID:R,tagName:V,event:a+" - "+c.msg,delay:d};return void s.fireEvent("src_abort",h)}var i=!1;"passback"===a&&!0===fa&&(i=!0);var j=a;!0===i&&(j="late_passback");var h={unitfbxID:Q,adpID:R,tagName:V,event:j,delay:d};s.fireEvent("src_abort",h),"passback"!==a&&("post_passback"!==a&&"no_content"!==a||r("vast_source_passback")),_.seb("","_s20 passback"),!0===i&&_.seb("","_s21 late-passback"),_.seb("/pb_path",c.path),_.seb("/pb_version",c.ver),f(),_.seb("/pb_time",d,{scl:"shorttimesLR"}),!0===i&&!1===ha?(ha=!0,p("ltpbck",{delay:d}),r("source_late_pb"),g("late passback on TAG: "+V),t.parcels.sendp("liveacc",{evt:"regSale",data:{ids:[C,D,E,F],aid:G,log:"wf",typ:b.mdType,act:b.active,prc:b.refprc,mod:"cnc"}})):!0!==ia&&(ia=!0,p("pbck",{delay:d}),f())}}d(a,c),_.sed("/dir_evts","_s30 aborted ("+a+")"),_.rap()}function m(){f();var a={master:s,adPostContElm:b.adPostContElm,unitDomElm:w,hostWnd:x,comps:t,plcmParams:b.plcmParams,bootParams:v,startTime:A,heart:t.heart,logger:t.logger,env:b.env,IE:b.IE,main_wrapper_id:b.main_wrapper_id,internalContainer:b.internalContainer,mediacontainer:b.mediacontainer,ntvfrmts:b.ntvfrmts,mdType:b.mdType,packId:b.packId,sourceWidth:b.sourceWidth,sourceHeight:b.sourceHeight,adPostWidth:b.adPostWidth,adPostHeight:b.adPostHeight,segmWidth:b.segmWidth,segmHeight:b.segmHeight,stylename:b.stylename,stylesnippets:b.stylesnippets,versionFolder:b.versionFolder,versionTag:b.versionTag,baseUrl:b.baseUrl,placementId:b.placementId,unitfbxID:b.unitfbxID,hostDomain:b.hostDomain,hostPageUrl:b.hostPageUrl,hostPageTitle:b.hostPageTitle,clientID:b.clientID,imprID:b.imprID,stageName:b.stageName,activeLayout:b.activeLayout,sectionName:b.sectionName,unitName:S,adpName:T,unitNumID:b.unitNumID,sourcesetName:W,segmName:U,segmAttr:b.segmAttr,segMetha:b.segMetha,segmentID:b.segmentID,tagName:V,active:b.active,log:"wf",curSrcData:z,macroproc:t.macroproc,vastCaller:t.vastCaller,catchCallback:b.catchCallback,eventCallback:s.fireEvent,secProt:b.secProt,promolinkuri:b.promolinkuri};return new d(a)}function n(a){if(!(Fa>=da||null===Ea||a-Ea<ca)){Ea=a;p("tick",{tagname:V,time:Math.round(a/1e3),tmval:Math.round(ca/1e3),tickIdx:Fa}),Fa+=1,Fa<ea||_.rap()}}function o(c){function d(a){!0!==pa&&null!==Ja&&!0!==fa&&("dsp"!==b.mdType&&"vid"!==b.mdType||!0===sa)&&(!0!==ta&&a-Ja<ba||(fa=!0,g("running TAG: "+V),_.seb("","_s40 content",{res:"hi"}),_.sed("/dir_evts","_s30 running",{res:"hi"}),_.sed("/win_prc",100*b.refprc,{scl:"mediumtimes",res:"hi",exp:-5}),_.seb("/ap_width_win",b.segmWidth,{scl:"boxWidth",res:"hi"}),_.seb("/src_idx_win",P,{scl:"mediumtimes",res:"hi"}),j("/_s20 wins",X),!0!==ia&&(p("hit",{hitprc:b.refprc}),ia=!0,Ea=a,Fa=0),!0===b.active&&(t.dtomanager.regDTOHit(V),f(),t.dtomanager.regDTOWinPr(V,b.refprc),f()),t.parcels.sendp("liveacc",{evt:"regSale",data:{ids:[C,D,E,F],aid:G,log:"wf",typ:b.mdType,act:b.active,prc:b.refprc,mod:"hit"}})))}switch(Ha){case"INIT":t.beamCannon.fire(O),Ga=m();var e={tagname:V,ssname:W,shtagname:X,uniqueID:N,snippet:b.snippet,insbx:b.insbx,insmod:b.insmod,vastDevice:b.vastDevice,hasFlash:b.hasFlash,primaryMethod:b.primaryMethod};Ga.openCmd(e),Ga.tick(c),Ia=c,Ha="WAIT_FOR_DRV_READY";case"WAIT_FOR_DRV_READY":!0!==pa&&c-Ia>a.media.drvTimeout&&(Ka="driver_to",l("driver_to"),f(),g("driver timeout on TAG: "+V));var h=Ga.openStat(c);if("ok"!==h.status)break;f(),Ka="ok",Ha="READY";case"READY":if(!0!==ja)break;ja=!1;var i="loading TAG: "+V;!0===b.insbx&&(i+=" (insbx)"),g(i),Ga.loadCmd(),Ga.tick(c),p("req");var k={sourceName:V,sourceIdx:P,sandbox:b.insbx,sourcesetName:W,width:Math.round(b.sourceWidth),height:Math.round(b.sourceHeight),segmName:U,stylename:b.stylename,logic:"wf",price:b.refprc>0?b.refprc:"NA",cost:K>0?K:"NA",floor:L>0?L:"NA"};s.fireEvent("tryingsource",k),Ia=c,Ha="LOADING";case"LOADING":if(!0!==pa&&c-Ia>a.media.drvTimeout&&(l("driver_to"),f(),g("driver timeout on TAG: "+V)),!0===na){Ha="UNLOAD";break}var h=Ga.loadStat(c);if("ok"!==h.status)break;ka=!0,Ja=c,_.seb("","_s10 request"),_.seb("/ap_width_req",b.segmWidth,{scl:"boxWidth"}),_.seb("/src_idx_req",P,{scl:"mediumtimes"}),j("/_s10 reqs",X),_.sed("/dir_evts","_s20 tag_loaded"),_.seb("/dir_evts","_s90 request (val)"),!0===b.active&&t.dtomanager.regDTOReq(V),Da=!0,Ha="WFS";case"WFS":if(!0===na){Ha="PLAYING";break}if(d(c),!0===J&&!0!==la)break;Ga.startCmd(),g("playing TAG: "+V),Ha="PLAYING";case"PLAYING":if(d(c),!0!==na)break;Ha="UNLOAD";case"UNLOAD":g("unloading TAG: "+V),Ga.stopCmd(),Ga.tick(c),na=!1,Ha="WAIT_UNLOAD";case"WAIT_UNLOAD":var h=Ga.stopStat(c);if("ok"!==h.status)break;oa=!0,!0!==_.wes()&&_.sed("/dir_evts","_s50 unresolved"),Ha="PARK";break;case"PARK":Da=!1,s.vastproc=null,t.heart.unsubscribe(s),Ha="BLOCK"}}function p(a,c){function d(a,c){var d={event:a,group:"seek_tag_wf",ver:100,data:{tagnam:V,nodenam:Y,srcID:N,log:"wf",vast:s.isVast()?"1":"0",actv:s.isActiveSource()?"1":"0"}},e=d.data;switch(a){case"req":e.cat=b.category,e.top=0===P?1:0,e.pos=P,e.val=b.dtovalue,e.ovr=b.overuse,e.floor=L,e.crbdxhr=z.curbIdx_Hr,e.crbdxer=z.curbIdx_Er,e.crbdxdl=z.curbIdx_Dl,e.crbdxmd=0;break;case"hit":e.pos=P,e.hitprc=c.hitprc;break;case"pbck":case"ltpbck":e.delay=c.delay;break;case"plyerr":e.msg=c.msg;break;case"tick":e.tmval=c.tmval,e.tkidx=c.tickIdx}_.sap(Z,d)}function e(a,b){var c={dsdChannel:v.hostPlcmId,event:a,group:"dto_prf_wf",ver:100,data:{tagnam:V}},d=c.data;switch(a){case"req":break;case"hit":d.pos=P,d.hitprc=b.hitprc;break;case"pbck":case"ltpbck":d.delay=b.delay;break;case"plyerr":d.msg=b.msg;break;default:return}_.sap($,c)}d(a,c),e(a,c)}function q(a){var c=b.getActFlags();switch(ya){case"UNRENDERED":if(!0!==fa)break;ya="INVISIBLE";break;case"INVISIBLE":if(!0!==c.isUnitVisible)break;if(!0!==za){_.sed("/visib","_s10 visible_first"),za=!0,ya="VISIBLE";break}if(!0!==Aa){_.sed("/visib","_s11 visible_second"),Aa=!0,ya="VISIBLE";break}break;case"VISIBLE":if(!0===Ba&&(Ba=!1,!1===Ca&&(Ca=!0,_.sed("/clicks","_s10 click",{res:"max"}))),!0===c.isUnitVisible)break;ya="INVISIBLE"}}function r(a){var c=new e,d=0;I.push("sending debug email...");var f="SOURCE CONTROLLER REPORT - WATERFALL\n\n",g={stageName:b.stageName,activeLayout:b.activeLayout,sectionName:b.sectionName,unitName:S,unitNumID:b.unitNumID,tagname:V,snippet:b.snippet,mdType:b.mdType,vastDevice:b.vastDevice,hasFlash:b.hasFlash,primaryMethod:b.primaryMethod};d=0,f+="------ context info ------\n\n",f+=c.printObj(d,g,s)+"\n\n\n",d=0,f+="------ attributes ------\n\n",f+=c.printObj(d,M,s)+"\n\n\n";var h={sourceName:V,sourceIdx:P,sourcesetName:W,width:Math.round(b.segmWidth),height:Math.round(b.segmHeight),segmName:U,stylename:b.stylename,logic:"wf",price:b.refprc>0?b.refprc:"NA",cost:K>0?K:"NA",floor:L>0?L:"NA"};d=0,f+="------ source info ------\n\n",f+=c.printObj(d,h,s)+"\n\n\n";var i=V.replace(W+"_",""),j=a.replace(/\s+/g,"_"),k="node: "+i+"  ("+j+")",l={debugStrings:I,from:"SRC_CTRL_WF",subject:k,text:f};t.mailmaster.sendObj(l)}var s=this,t=b.comps,u=b.cllBks,v=b.bootParams,w=b.unitDomElm,x=b.hostWnd,y=b.master,z=b.curSrcData,u=b.cllBks,A=(t.tracker,u.addLogLine,b.startTime),B=!1,C=b.stageID,D=b.sectID,E=b.unitID,F=b.partID,G=b.assetID,H=Math.round(999*Math.random());f(),f();var I=["init"],J=b.vastSeg,K=b.cost,L=b.floor,M=b.attributes,N=Math.round(999999999999*Math.random()),O=b.sourceTrackingBeams,P=b.sourceIdx,Q=b.unitfbxID,R=b.adpID,S=b.unitName,T=b.adpName,U=b.segmName,V=z.tagname,W=z.ssname,X=z.shrtname,Y=z.nodeData.name,Z="_tagwf"+Math.round(99999*Math.random());t.accbeam.register(Z,a.accbeam.channels.tagwf.red);var $="_dto_prf_wf_"+Math.round(99999*Math.random());t.accbeam.register($,a.accbeam.channels.dto_prf_wf.red);var _=new c({comps:t,assembleFunct:h,assembleFunctX:i});_.sed("/dir_evts","_s10 inst"),!0===b.insbx&&_.seb("","_s11 in sandbox"),s.provider="";var aa=V.match(/([A-Z]{2,})/g);null!==aa&&(s.provider=aa[aa.length-1]),f();var ba=a.media.adWFRepMinTime,ca=a.accbeam.tickPerDisp,da=a.accbeam.tickCountDisp,ea=a.accbeam.valTickCountDisp;!0===J&&(ba=a.media.adVastRepMinTime,ca=a.accbeam.tickPerVast,da=a.accbeam.tickCountVast,ea=a.accbeam.valTickCountVast),!0!==b.active&&(ba=a.media.adPassRepMinTime,ca=a.accbeam.tickPerPasv);var fa=!1,ga=!1,ha=!1,ia=!1,ja=!1,ka=!1,la=!1,ma=!1,na=!1,oa=!1,pa=!1,qa=!1,ra=!1,sa=!1,ta=!1,ua=!1,va=!1,wa=!1,xa=!1,ya="UNRENDERED",za=!1,Aa=!1,Ba=!1,Ca=!1,Da=!1,Ea=null,Fa=0,Ga=null,Ha="INIT",Ia=0,Ja=null,Ka="---";s.fireEvent=function(a,b){switch(a){case"quit":f(),g("quit on TAG: "+V),xa=!0;break;case"hoverOn":g("hover on TAG: "+V);break;case"hoverOff":break;case"click":f(),g("click on TAG: "+V),Ba=!0;break;case"send_event":var c="";""!==b.subpath&&(c+=b.subpath);var d={};!0===b.hires&&(d.res="hi"),_.sed(c,b.evdata,d);break;case"passback":if(!0===ra)break;ra=!0,Ka="passback",l("passback",b),f(),g("passback on TAG: "+V);break;case"actsenscont":sa=!0,_.seb("","_s41 acsense");break;case"confmsg":sa=!0,ta=!0,_.seb("","_s42 confirmed");break;case"no_content":if(!0===ra)break;ra=!0,Ka="passback",l("no_content",b),f(),g("no content on TAG: "+V);break;case"post_passback":if(!0===ra)break;ra=!0,Ka="passback",l("post_passback",b),f(),g("pseudo-passback on TAG: "+V);break;case"vast_tracking":k(b);break;case"adImpression":var e={unitfbxID:Q,adpID:R,tagName:V,impdata:b.impdata};s.fireEvent("src_imp",e);break;case"adPlaying":if(!0===va)break;va=!0;var e={unitfbxID:Q,adpID:R,tagName:V,plydata:b.plydata};s.fireEvent("src_ply",e);break;case"adShown":sa=!0,ta=!0;break;case"adLoaded":ua=!0;break;case"mediaEnd":f(),wa=!0;break;case"playerror":if(!0===qa)break;qa=!0,l("playerror",b),f(),g("play error on TAG: "+V),t.trackhub.sendEvent("alerts","fmp_sourcectrl/"+V,"error_player"),_.seb("","_s50 player error",{res:"hi"}),_.seb("/error_msgs",b.msg,{res:"hi"})}y.fireEvent(a,b)};var La={unitfbxID:Q,adpID:R,tagName:V,sourceIdx:P};s.fireEvent("src_load",La),s.tick=function(a){try{o(a),!0!==B&&(n(a),q(a),Ga&&Ga.tick(a))}catch(a){if(!0!==B){B=!0;var b="";if(void 0!==a.stack?(b+=" - Stck--\x3e ",b+=a.stack.toString()):b+=" - Msg--\x3e "+a,b.length>250)var c=b.substring(0,250)+"...";var d={msg:c};qa=!0,l("playerror",d),f(),g("play error on TAG: "+V),t.trackhub.sendEvent("alerts","fmp_sourcectrl/"+V,"error_player"),_.seb("","_s51 except",{res:"hi"}),_.seb("/excpt_msgs",c,{ard:10,att:b,res:"hi"})}}},s.wasAborted=function(){return pa},s.getContVldTm=function(){return ba},s.getEstTimeToUnload=function(){return null===Ga?-1:Ga.getEstTimeToUnload()},s.load=function(){ja=!0},s.isLoaded=function(){return ka},s.start=function(){la=!0},s.isStarted=function(){return ma},s.pause=function(a){Ga.pauseCmd(a)},s.audio=function(a){Ga.audioCmd(a)},s.rewind=function(){Ga.rewindCmd()},s.unload=function(){na=!0},s.isUnloaded=function(){return oa},s.isPlayerError=function(){return qa},s.getSourceAttributes=function(){return M},s.getUniqueID=function(){return N},s.getSrcIdx=function(){return P},s.getOpenStatus=function(){return Ka},s.isAdOn=function(){return!0===sa},s.isAdLoaded=function(){return!0===ua},s.isPassback=function(){return ra},s.isMediaEnd=function(){return wa},s.isVast=function(){return J},s.isDispad=function(){return!1===J},s.getTagName=function(){return V},s.getShortTagName=function(){return X},s.getNodeName=function(){return Y},s.getRefPrc=function(){return b.refprc},s.isRunning=function(){return fa},s.isActiveSource=function(){return b.active},s.setFoundReported=function(){ga=!0},s.isFoundReported=function(){return ga},s.shouldProgress=function(){return Ga.shouldProgress()},s.getProgress=function(){return Ga.getProgress()},t.heart.subscribe(s,50,"srcctrl_wf",0,0),s.tick(Date.now())}}(config,0,an_buffer,fmp_driverinterf,textools),fmp__plyctrl_bd=function(a,b,c,d,e){return function(b){function f(a){A.logger.writex({msg:a,prefix:"fmp__plyctrl_bd",inst:G})}function g(a){A.logger.writex({tgl:!0,msg:a,prefix:"unit:"+x.unitName+" (src_ctrl_bd)"})}function h(a,c,d){return{domain:"tags",event:b.mdType+"/bd/"+P+"/_s20 by_tag/"+Q+a,data:c,evOpts:d}}function i(a,c,d){return{domain:"tags",event:b.mdType+"/bd/"+P+"/_s20 by_tag/*AllTags*"+a,data:c,evOpts:d}}function j(a,b){!0!==va&&!0!==$&&u.fireEvent(a,b)}function k(a,b){switch(a){case"quit":f(),g("quit on TAG: "+O),oa=!0;break;case"hoverOn":g("hover on TAG: "+O);break;case"hoverOff":break;case"click":f(),g("click on TAG: "+O),sa=!0;break;case"send_event":var c="";""!==b.subpath&&(c+=b.subpath);var d={};!0===b.hires&&(d.res="hi"),T.sed(c,b.evdata,d);break;case"actsenscont":ja=!0,T.seb("","_s51 acsense");break;case"confmsg":ja=!0,ka=!0,T.seb("","_s52 confirmed");break;case"no_content":if(!0===ia)break;ia=!0,q("no_content",b),f(),g("no content on TAG: "+O);break;case"post_passback":if(!0===ia)break;ia=!0,q("post_passback",b),f(),g("pseudo-passback on TAG: "+O);break;case"vast_tracking":l(b);break;case"adImpression":j("src_imp",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,impdata:b.impdata});break;case"adPlaying":if(!0===ma)break;ma=!0,j("src_ply",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,plydata:b.plydata});break;case"adShown":ja=!0,ka=!0,f();break;case"adLoaded":la=!0;break;case"mediaEnd":f(),na=!0;break;case"playerror":if(!0===ha)break;ha=!0,q("playerror",b),f(),g("play error on TAG: "+O),A.trackhub.sendEvent("alerts","fmp_plyctrl/"+O,"error_player"),T.seb("","_s70 player error",{res:"hi"}),T.seb("/plyr_msgs",b.msg,{res:"hi"})}x.master.fireEvent(a,b)}function l(a){var b=!1;switch(a.eventName){case"video_start":case"video_impression":case"video_firstQuartile":case"video_midpoint":case"video_thirdQuartile":case"video_complete":b=!0}!0===b&&j("src_vast_ev",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,event:a.eventName})}function m(c){switch(ya){case"INIT":A.beamCannon.fire(L),xa=o(z);var d={tagname:O,ssname:P,shtagname:Q,uniqueID:K,snippet:z.adm,insbx:y.insbx,insmod:b.insmod,vastDevice:b.vastDevice,hasFlash:b.hasFlash,primaryMethod:b.primaryMethod};xa.openCmd(d),za=c,ya="WAIT_FOR_DRV_READY";case"WAIT_FOR_DRV_READY":!0!==ga&&c-za>a.media.drvTimeout&&(q("driver_to"),f(),g("driver timeout on TAG: "+O));var e=xa.openStat(c);if("ok"!==e.status)break;f(),ya="READY";case"READY":if(!0!==ba)break;ba=!1;var h="loading TAG: "+O;!0===y.insbx&&(h+=" (insbx)"),g(h),xa.loadCmd();var i={sourceName:O,sourceIdx:M,sandbox:y.insbx,sourcesetName:P,width:Math.round(b.adPostWidth),height:Math.round(b.adPostHeight),segmName:x.segmName,stylename:x.stylename,logic:"bd",price:null!==z?z.clPrc:"NA",cost:x.cost>0?x.cost:"NA",floor:x.floor>0?x.floor:"NA"};u.fireEvent("tryingsource",i),za=c,ya="LOADING";case"LOADING":if(!0!==ga&&c-za>a.media.drvTimeout&&(q("driver_to"),f(),g("driver timeout on TAG: "+O)),!0===ea){ya="UNLOAD";break}var e=xa.loadStat(c);if("ok"!==e.status)break;ca=!0,Aa=c;r("load",{tagname:O,time:Math.round(c/1e3)}),T.seb("","_s50 load"),T.sed("/dir_evts","_s20 tag_loaded"),T.seb("/dir_evts","_s90 request (val)"),ua=!0,ya="WFS";case"WFS":if(!0===ea){ya="PLAYING";break}if(p(c),!0!==da)break;xa.startCmd(),g("playing TAG: "+O),T.sed("/dir_evts","_s30 playing"),ya="PLAYING";case"PLAYING":if(p(c),!0!==ea)break;ya="UNLOAD";case"UNLOAD":xa.stopCmd(),ea=!1,ya="WAIT_UNLOAD";case"WAIT_UNLOAD":var e=xa.stopStat(c);if("ok"!==e.status)break;fa=!0,!0!==T.wes()&&T.sed("/dir_evts","_s50 unresolved"),ya="PARK";break;case"ERROR":case"NOT_READY":ya="PARK";break;case"PARK":ua=!1,u.vastproc=null,A.heart.unsubscribe(u),ya="BLOCK"}}function n(b){if(!0!==va&&!(Z>=X||null===Y||b-Y<W)){r("tick",{tagname:O,time:Math.round(b/1e3),tmval:Math.round(W/1e3),tickIdx:Z}),Y=b,Z+=1,Z>=a.accbeam.valTickCountOther&&T.rap()}}function o(a){f();var c={master:u,adPostContElm:b.adPostContElm,unitDomElm:v,hostWnd:w,comps:A,plcmParams:B,bootParams:C,startTime:E,heart:A.heart,logger:A.logger,env:b.env,IE:b.IE,main_wrapper_id:x.main_wrapper_id,internalContainer:x.internalContainer,mediacontainer:x.mediacontainer,ntvfrmts:b.ntvfrmts,mdType:b.mdType,packId:b.packId,sourceWidth:y.width,sourceHeight:y.height,adPostWidth:b.adPostWidth,adPostHeight:b.adPostHeight,segmWidth:b.segmWidth,segmHeight:b.segmHeight,stylename:x.stylename,stylesnippets:x.stylesnippets,versionFolder:b.versionFolder,versionTag:b.versionTag,baseUrl:b.baseUrl,placementId:b.placementId,unitfbxID:x.unitfbxID,adpID:x.adpID,hostDomain:b.hostDomain,hostPageUrl:b.hostPageUrl,hostPageTitle:b.hostPageTitle,clientID:b.clientID,imprID:b.imprID,stageName:b.stageName,activeLayout:b.activeLayout,sectionName:x.sectionName,unitName:x.unitName,adpName:x.adpName,unitNumID:x.unitNumID,sourcesetName:P,segmName:x.segmName,segmAttr:b.segmAttr,segMetha:x.segMetha,segmentID:x.segmentID,tagName:O,active:y.active,log:"bd",curSrcData:y,macroproc:A.macroproc,vastCaller:A.vastCaller,catchCallback:u.catchCallback,eventCallback:u.fireEvent,secProt:b.secProt,promolinkuri:b.promolinkuri};return new d(c)}function p(a){!0!==ga&&null!==Aa&&!0!==_&&!0===ja&&(!0!==ka&&a-Aa<V||(_=!0,Y=0,g("running TAG: "+O)))}function q(a,b){function c(a,b){if(!0!==ga){ga=!0;var c=Date.now()-Aa;if("driver_to"===a){var d="dispad_source_player_timeout";return!0===I&&(d="vast_source_player_timeout"),t(d),r("plyerr",{msg:"timeout"}),void j("src_abort",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,event:a,delay:c})}if("playerror"===a){var d="dispad_source_player_error";return!0===I&&(d="vast_source_player_error"),t(d),r("plyerr",{msg:b.msg}),void j("src_abort",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,event:a+" - "+b.msg,delay:c})}j("src_abort",{unitfbxID:x.unitfbxID,adpID:x.adpID,tagName:O,event:a,delay:c}),"post_passback"!==a&&"no_content"!==a||t("vast_source_passback")}}c(a,b),T.sed("/dir_evts","_s30 aborted ("+a+")"),T.rap()}function r(a,b){function c(a,b){var c={event:a,group:"seek_tag_bd",ver:100,data:{untID:x.adpID,adpID:x.adpID,untnam:x.unitName,sgmID:x.segmentID,sgmnam:x.segmName,tagnam:O,nodenam:R,srcID:K,log:"bd",vast:u.isVast()?"1":"0",actv:u.isActiveSource()?"1":"0"}},d=c.data;switch(a){case"load":break;case"plyerr":d.msg=b.msg;break;case"tick":d.tmval=b.tmval,d.tkidx=b.tickIdx}T.sap(S,c)}function d(a,b){var c={dsdChannel:C.hostPlcmId,event:a,group:"dto_prf_bd",ver:100,data:{tagnam:O,srcID:K}};c.data;return void 0}c(a,b),d(a,b)}function s(a){var c=b.getActFlags();switch(pa){case"UNRENDERED":if(!0!==_)break;T.sed("/visib","_s00 rendered"),T.sed("/clicks","_s00 rendered"),pa="INVISIBLE";break;case"INVISIBLE":if(!0!==c.isUnitVisible)break;if(!0!==qa){T.sed("/visib","_s10 visible_first"),qa=!0,pa="VISIBLE";break}if(!0!==ra){T.sed("/visib","_s11 visible_second"),ra=!0,pa="VISIBLE";break}break;case"VISIBLE":if(!0===sa&&(sa=!1,!1===ta&&(ta=!0,T.sed("/clicks","_s10 click",{res:"max"}))),!0===c.isUnitVisible)break;pa="INVISIBLE"}}function t(a){if(!0===Ba){var c=new e,d=0;H.push("sending debug email...");var f="SOURCE CONTROLLER REPORT - BIDDING\n\n",g={stageName:b.stageName,activeLayout:b.activeLayout,sectionName:x.sectionName,unitName:x.unitName,unitNumID:x.unitNumID,tagname:O,snippet:y.snippet,insbx:y.insbx,mdType:b.mdType,vastDevice:b.vastSeg,hasFlash:b.hasFlash,primaryMethod:b.primaryMethod};d=0,f+="------ context info ------\n\n",f+=c.printObj(d,g,u)+"\n\n\n",d=0,f+="------ attributes ------\n\n",f+=c.printObj(d,J,u)+"\n\n\n";var h={sourceName:O,sourceIdx:M,sourcesetName:P,width:Math.round(b.adPostWidth),height:Math.round(b.adPostHeight),segmName:x.segmName,stylename:x.stylename,logic:"bd",price:null!==z?z.clPrc:"NA",cost:x.cost>0?x.cost:"NA",floor:x.floor>0?x.floor:"NA"};d=0,f+="------ source info ------\n\n",f+=c.printObj(d,h,u)+"\n\n\n",d=0,f+="------ win info ------\n\n",f+=c.printObj(d,z,u)+"\n\n\n";var i=O.replace(P+"_",""),j=a.replace(/\s+/g,"_"),k="node: "+i+"  ("+j+")",l={debugStrings:H,from:"SRC_CTRL_BD",subject:k,text:f};A.mailmaster.sendObj(l)}}var u=this,v=b.unitDomElm,w=b.hostWnd,x=b.dockInfo,y=b.curSrcData,z=b.winData,A=b.comps,B=b.plcmParams,C=b.bootParams,D=b.cllBks,E=(A.tracker,D.addLogLine,b.startTime),F=!1,G=(x.stageID,x.sectID,x.unitID,x.assetID,Math.round(999*Math.random()));f(),f();var H=["init"],I=b.vastSeg,J=y.attributes,K=y.uniqueID,L=y.tracking,M=y.sourceIdx,N=y.burstIdx,O=y.tagname,P=y.ssname,Q=y.shrtname,R=y.nodeData.name,S=y.accChnID_tagbd,T=(y.accChnID_dto_prf_bd,new c({comps:A,assembleFunct:h,assembleFunctX:i}));T.sed("/dir_evts","_s10 inst"),u.provider="";var U=O.match(/([A-Z]{2,})/g);null!==U&&(u.provider=U[U.length-1]),f();var V=a.media.adBDRepMinTime,W=a.accbeam.tickPerDispBD,X=a.accbeam.tickCountDisp;a.accbeam.valTickCountDisp;!0===I&&(V=a.media.adVastRepMinTime,W=a.accbeam.tickPerVast,X=a.accbeam.tickCountVast,a.accbeam.valTickCountVast)
;var Y=null,Z=0,$=!1,_=!1,aa=!1,ba=!1,ca=!1,da=!1,ea=!1,fa=!1,ga=!1,ha=!1,ia=!1,ja=!1,ka=!1,la=!1,ma=!1,na=!1,oa=!1,pa="UNRENDERED",qa=!1,ra=!1,sa=!1,ta=!1,ua=!1,va=!1,wa=!1,xa=null,ya="INIT",za=0,Aa=null,Ba=!1;u.fireEvent=k.bind(u),u.tick=function(a){if(!0===wa)try{!0!==F&&(n(a),s(a),xa&&xa.tick(a)),m(a)}catch(a){if(!0!==F){F=!0;var b="";if(void 0!==a.stack?(b+=" - Stck--\x3e ",b+=a.stack.toString()):b+=" - Msg--\x3e "+a,b.length>200)var c=b.substring(0,250)+"...";var d={msg:c};ha=!0,q("playerror",d),f(),g("play error on TAG: "+O),A.trackhub.sendEvent("alerts","fmp_sourcectrl/"+O,"error_player"),T.seb("","_s71 except",{res:"hi"}),T.seb("/excpt_msgs",c,{ard:10,att:b,res:"hi"})}}},u.wasAborted=function(){return ga},u.getContVldTm=function(){return V},u.getEstTimeToUnload=function(){return null===xa?-1:xa.getEstTimeToUnload()},u.load=function(){ba=!0},u.isLoaded=function(){return ca},u.isPassback=function(){return ia},u.start=function(){da=!0},u.isStarted=function(){return!1},u.pause=function(a){xa.pauseCmd(a)},u.audio=function(a){xa.audioCmd(a)},u.rewind=function(){xa.rewindCmd()},u.unload=function(a){ea=!0},u.isUnloaded=function(){return fa},u.isPlayerError=function(){return ha},u.getSourceAttributes=function(){return J},u.getUniqueID=function(){return K},u.getSrcIdx=function(){return M},u.getBurstIdx=function(){return N},u.isAdOn=function(){return!0===ja},u.isAdLoaded=function(){return!0===la},u.isMediaEnd=function(){return na},u.isVast=function(){return I},u.isDispad=function(){return!1===I},u.getTagName=function(){return O},u.getShortTagName=function(){return Q},u.getNodeName=function(){return R},u.isRunning=function(){return _},u.isActiveSource=function(){return y.active},u.setFoundReported=function(){aa=!0},u.isFoundReported=function(){return aa},u.shouldProgress=function(){return xa.shouldProgress()},u.getProgress=function(){return xa.getProgress()},wa=!0,A.heart.subscribe(u,50,"plyctrl_bd",0,0),u.tick(Date.now())}}(config,0,an_buffer,fmp_driverinterf,textools),fmp__sourcectrl_bd=function(a,b,c){return function(c){function d(a){u.logger.writex({msg:a,prefix:"fmp__sourcectrl_bd",inst:D})}function e(a){u.logger.writex({tgl:!0,msg:a,prefix:"unit:"+c.unitName+" (src_ctrl_bd)"})}function f(a,b,c){return{domain:"tags",event:r+"/bd/"+M+"/_s20 by_tag/"+N+a,data:b,evOpts:c}}function g(a,b,c){return{domain:"tags",event:r+"/bd/"+M+"/_s20 by_tag/*AllTags*"+a,data:b,evOpts:c}}function h(a,b,c){var d=r+"/bd/"+M+"/_s10 shares"+a;u.trackhub.sendEvent("tags",d,b,c)}function i(a,b,c){if(void 0===c||!1===c){if(!0===X)return;if(!0===aa)return;if(!0===U)return}q.fireEvent(a,b)}function j(a,b,c){var d=v.placementId+"/"+M;u.trackhub.sendEvent("stgexec","src_ctrl_bd_seek/${"+d+"|*AllLocs*}$/"+a,b,c)}function k(a){try{if(!0===X)return;X=!0,p("drverr",{msg:a}),i("src_drverr",{unitfbxID:s.unitfbxID,adpID:s.adpID,tagName:L,msg:a},!0),E.rap()}catch(a){}}function l(){!1===X&&(p("req"),u.dtomanager.regDTOReq(L),d(),e("req. bids from "+L),E.seb("","_s10 request"),E.seb("/ap_width_req",c.segmWidth,{scl:"boxWidth"}),E.seb("/src_idx_req",J,{scl:"mediumtimes"}),h("/_s10 reqs",N),!0===t.insbx&&E.seb("","_s11 in sandbox"),i("src_drvreq",{unitfbxID:s.unitfbxID,adpID:s.adpID,tagName:L}))}function m(a){function b(a){var b=0;return a.forEach(function(a){a.effPrc>b&&(b=a.effPrc)}),Math.round(100*b)/100}function c(a){a.forEach(function(a){var b={bidData:a,srcData:{srcCtrl:q,srcID:H,tagname:L,nodename:O,looptime:$.looptime,params:$.tagParams_gen,sourceIdx:J,burstIdx:K,fromSeg:s.segmName},ssName:M,unFbxName:s.unitfbxID,segID:s.segmentID};u.bdadmin.nbd(b);var c={bdChnID:T,bidPrc:a.effPrc,mtype:a.mtype};u.bdcnxhub.srcNotf("bidrcvd",c)})}if(!1===X){if($=a,!0===aa)return void E.seb("","_s60 late response");if(E.seb("/loop_time",$.looptime,{scl:"shorttimesLR"}),_=!0,0===$.bids.length)return p("pass",{looptime:$.looptime}),E.seb("","_s20 pass"),void(!1===U&&i("src_pass",{unitfbxID:s.unitfbxID,adpID:s.adpID,tagName:L,delay:$.looptime}));F=b($.bids),p("bid",{looptime:$.looptime,bidPrc:F}),u.dtomanager.regDTOBidPr(L,F),u.parcels.sendp("liveacc",{evt:"regSale",data:{ids:[y,z,A],aid:C,log:"bd",typ:r,act:!0,prc:F,mod:"bid"}}),d(),e("real bid rcvd from "+L),E.seb("","_s30 bid"),E.seb("/bd_price",100*F,{scl:"mediumtimes"}),h("/_s20 bids",N),!1===U&&i("src_bid",{unitfbxID:s.unitfbxID,adpID:s.adpID,tagName:L,delay:$.looptime,prc:F,fromcache:!1}),c($.bids)}}function n(){var a={mtype:r,sourceClbk:m,reqNtfClbk:l,drvErrClbk:k,sourceID:H,tagname:L,snippet:I,tagParams_gen:q.tagParams_gen,dtovalue:t.dtovalue,hostPageUrl:c.hostPageUrl,unitName:s.unitName,unitFbxID:s.unitfbxID,unitNumID:s.unitNumID,sourcesetName:M,segmName:s.segmName,priority:s.priority,unitY:s.unitY,sourceWidth:t.width,sourceHeight:t.height,segmWidth:c.segmWidth,segmHeight:c.segmHeight,adUnitCode:s.main_wrapper_id},b=u.bdcnxhub.addReq(a);return"ok"!==b.status?void e(b.status+": source "+L+" ignored (msg: "+b.msg+")"):(Y=!0,Z=Date.now(),p("run"),E.seb("","_s00 running"),b.bdChnID)}function o(b){if(!0===Y&&!0!==_&&!0!==aa&&!0!==X){var c=a.bidding.genBReqTO+3e3;b-Z<c||(aa=!0,p("tmo"),i("src_timo",{unitfbxID:s.unitfbxID,adpID:s.adpID,tagName:L,delay:c},!0),E.seb("","_s60 timeout"),E.rap())}}function p(a,b){function c(a,b){var c={event:a,group:"seek_tag_bd",ver:100,data:{tagnam:L,nodenam:O,srcID:H,log:"bd",vast:q.isVast()?"1":"0",actv:q.isActiveSource()?"1":"0"}},d=c.data;switch(a){case"run":case"cache":break;case"req":d.cat=t.category,d.top=0===J?1:0,d.pos=J,d.val=t.dtovalue,d.ovr=t.overuse,d.floor=s.floor,d.crbdxhr=t.curbIdx_Hr,d.crbdxer=t.curbIdx_Er,d.crbdxdl=t.curbIdx_Dl,d.crbdxmd=0;break;case"pass":d.delay=b.looptime;break;case"tmo":d.delay="NA";break;case"bid":d.bidprc=b.bidPrc,d.delay=b.looptime;break;case"win":d.winprc=b.winPrc;break;case"plyerr":case"drverr":d.msg=b.msg}E.sap(P,c)}function d(a,b){var c={dsdChannel:v.hostPlcmId,event:a,group:"dto_prf_bd",ver:100,data:{tagnam:L}},d=c.data;switch(a){case"req":break;case"pass":d.delay=b.looptime;break;case"tmo":d.delay="NA";break;case"bid":d.bidprc=b.bidPrc,d.delay=b.looptime;break;case"win":d.winprc=b.winPrc;break;default:return}E.sap(Q,c)}c(a,b),d(a,b)}var q=this,r=c.mdType,s=(c.unitDomElm,c.hostWnd,c.dockInfo),t=c.curSrcData,u=c.comps,v=(c.plcmParams,c.bootParams),w=c.cllBks,x=(u.tracker,w.addLogLine,c.startTime,!1),y=s.stageID,z=s.sectID,A=s.unitID,B=s.partID,C=s.assetID,D=Math.round(999*Math.random());d(),d();var E=new b({comps:u,assembleFunct:f,assembleFunctX:g}),F=null,G=t.attributes,H=Math.round(999999999999*Math.random()),I=t.snippet,J=(t.tracking,c.sourceIdx),K=c.burstIdx,L=(c.unitfbxID,c.unitName,c.adpName,c.segmName,t.tagname),M=t.ssname,N=t.shrtname,O=t.nodeData.name,P="_tagbd"+Math.round(99999*Math.random());u.accbeam.register(P,a.accbeam.channels.tagbd.red);var Q="_dto_prf_bd_"+Math.round(99999*Math.random());u.accbeam.register(Q,a.accbeam.channels.dto_prf_bd.red),t.sourceIdx=J,t.burstIdx=K,t.uniqueID=H,t.accChnID_tagbd=P,t.accChnID_dto_prf_bd=Q;var R={srcCtrl:q,srcID:H,ssName:M,segID:s.segmentID};u.bdadmin.nsrctr(R);q.provider="";var S=L.match(/([A-Z]{2,})/g);null!==S&&(q.provider=S[S.length-1]),d();var T="NA",U=!1,V=!1,W=null,X=!1,Y=!1,Z=null,$=null,_=!1,aa=!1;q.fireEvent=function(a,b){s.master.fireEvent(a,b)},q.tick=function(a){try{o(a)}catch(a){if(!0!==x){var b="";void 0!==a.stack?(b+=" - Stck--\x3e ",b+=a.stack.toString()):b+=" - Msg--\x3e "+a,b.length>250&&(b=b.substring(0,250)+"..."),j("excepts",b),d(),e("play error on TAG: "+L),u.trackhub.sendEvent("alerts","fmp_sourcectrl/"+L,"error_player"),x=!0}}},q.youWon=function(a){!0===a.xSeg&&(s=a.newDockInfo),U=!0,!0!==aa&&!0!==X&&(V=!0,W=a,p("win",{winPrc:W.clPrc}),E.seb("/ap_width_win",c.segmWidth,{scl:"boxWidth",res:"hi"}),E.seb("/src_idx_win",J,{scl:"mediumtimes",res:"hi"}),h("/_s30 wins",N),u.dtomanager.regDTOHit(L),d(),u.dtomanager.regDTOWinPr(L,W.clPrc),d(),u.parcels.sendp("liveacc",{evt:"regSale",data:{ids:[y,z,A,B],aid:C,log:"bd",typ:r,act:!0,prc:W.clPrc,mod:"win"}}),u.bdcnxhub.srcNotf("bidwon",{bdChnID:T,clPrc:W.clPrc,mtype:r}),W.drvInt.onBidWon(W.pbBidData),e("winner TAG: "+L),E.seb("","_s40 win",{res:"hi"}),E.seb("/win_prc",100*W.clPrc,{scl:"mediumtimes",res:"hi",exp:-5}),E.rap())},q.youLost=function(){U=!0,E.rap(),null!==F&&u.bdcnxhub.srcNotf("bidlost",{bdChnID:T,bidPrc:F,mtype:r}),u.heart.unsubscribe(q)},q.getSourceAttributes=function(){return G},q.getUniqueID=function(){return H},q.getSrcIdx=function(){return J},q.getBurstIdx=function(){return K},q.isVast=function(){return c.vastSeg},q.isDispad=function(){return!1===c.vastSeg},q.getTagName=function(){return L},q.getShortTagName=function(){return N},q.getNodeName=function(){return O},q.getRefPrc=function(){return t.refprc},q.getSrcData=function(){return t},q.isActiveSource=function(){return t.active},T=n(),u.heart.subscribe(q,50,"srcctrl_bd",0,0),q.tick(Date.now())}}(config,an_buffer),fmp__segmctrl_wf=function(a,b,c,d,e){return function(b){function e(a){B.logger.writex({msg:a,prefix:"fmp__segmctrl_wf",inst:J})}function f(a){B.logger.writex({tgl:!0,msg:a,prefix:"unit:"+b.unitName+" (seg_ctrl_wf)"})}function g(a,c,d){return{domain:"segments",event:"/"+b.mdType+"/wf/${"+fa+"|*AllSegments*}$"+a,data:c,evOpts:d}}function h(a){function c(a){return!0!==ea?"next":!0===ha?"next":!0===a.isPlayerError()?"error":!0===Ba?"stop":"next"}switch(ya!==za&&(e(),za=ya),ya){case"INIT":ya="READY";case"READY":if(!0!==q(ia))break;e(),F(Z+" seeking... - segIdx: "+Y),x.fireEvent("segSeek",{segID:X});var d=b.mdType;d+=" wf seg started - (srcset: "+ja+")",!0===ha&&(d+=" (dev:"+ma+")"),f(d),K.seb("","_s10 seek"),e(),L.fire(la),w(P,"start"),Qa=a,Na=0,ya="TRNS";break;case"DSPNS":if(!0===t(ia)){e(),ya="CLSSG";break}if(!1===Ma.isActiveSource()){e(),ya="CLSSG";break}if(Na++,ia.maxcall>0&&Na>=ia.maxcall){e(),e(),ya="CLSSG";break}a-Qa>1e3*x.maxSeekTime&&(e(),e(),Ra=!0),e(),ya="TRNS";case"TRNS":Ma=null,Za=!0,$a=!1,ya="WFNS";case"WFNS":var g=i(ja,Ra);if("..."===g.status)break;if("end_of_list"===g.status){e(),Za=!1,ya="CLSSG";break}Oa=g.data,Ma=k(Oa,Na),ga=Ma.getTagName(),e(),ya="WSDN";case"WSDN":var h=Ma.getOpenStatus();if("---"===h)break;if("ok"!==h){Za=!1,e(),ya="DSPNS";break}Fa=ia.mintime,Ga=ia.maxtime,Ja=ia.quit,ya="LOAD";case"LOAD":if(!0!==r(ia,ha))break;e(),Ma.load(),Aa=a,ya="WLRD";case"WLRD":if(!0===Ma.wasAborted()){m(),Za=!1,e(),ya="UNLOAD";break}if(!0===qa){e(),ya="UNLOAD";break}if(!0!==Ma.isLoaded())break;e(),e(),v(ia),Aa=a,Ea=0,Da=0,Ca=a,Ka=!1,La=!1,p(!1,ia),_startTimeAnchor=a,ya="SRCPL";case"SRCPL":if(l(a-_startTimeAnchor,a-Qa,Na,ia,Ma.isActiveSource()),!0===Ma.wasAborted()){m(),Za=!1,e(),ya="UNLOAD";break}if(!0===qa){e(),ya="UNLOAD";break}if(v(ia),Da=a-Ca,Ea=Math.floor(Da/1e3),n(a),0!==Fa&&Ea<Fa)break;if(!0!==Ka&&(Ka=!0,p(!0,ia)),!0===u(ia,Ea,Ga)){ya="UNLOAD";break}break;case"UNLOAD":e(),Ma.unload(),Ha=!0,Aa=a,ya="WUNLD";case"WUNLD":if(!0!==Ma.isUnloaded())break;if(!0===Ma.wasAborted()){j(Ma);var o=c(Ma);if("next"!==o){"error"===o&&x.fireEvent("whitesp",{segID:X}),ya="CLSSG";break}}ya="DSPNS";break;case"CLSSG":!0===Va&&!0===Za&&($a=!0),Ua=!0,e(),!0!==$a?(w(P,"nocnt"),f("waterfall segment "+fa+" closed (no content)"),K.seb("","_s30 NO content")):f("waterfall segment done"),K.rap(),p(!1,ia),Ma=null,e(),ra=!0,Ta=!1,ya="PARK";break;case"PARK":B.heart.unsubscribe(x)}}function i(a,b){var c={status:"...",msg:null,data:null},d=N.gbns(a,b,W,!0,Y,Na);if("..."===d.status)return c.status="...",c;if("ok"===d.status){var e=d.data;c.data={};var f=c.data;return f.attributes=JSON.parse(JSON.stringify(ia)),f.ssname=a,f.tagname=e.tagname,f.shrtname=e.shrtname,f.nodeData=e.nodeData,f.width=e.width,f.height=e.height,f.snippet=e.snippet,f.insbx=e.insbx,f.insmod=e.insmod,f.category=e.category,f.dtovalue=e.dtovalue,f.curbIdx_Hr=e.curbIdx_Hr,f.curbIdx_Er=e.curbIdx_Er,f.curbIdx_Dl=e.curbIdx_Dl,f.overuse=e.overuse,f.active=e.active,f.hires=e.hires,f.refprc=e.refprc,c.status="ok",c}return c.status="end_of_list",c}function j(a){N.releaseSource(ja,a.getTagName())}function k(a,c){var f;e(),xa.push(a);var g=(f={master:x,adPostContElm:b.adPostContElm,unitDomElm:y,hostWnd:z,comps:B,cllBks:E,plcmParams:C,bootParams:D,startTime:G,heart:B.heart,unitfbxID:Z,testCase:b.testCase},_defineProperty(f,"startTime",b.startTime),_defineProperty(f,"logger",B.logger),_defineProperty(f,"env",b.env),_defineProperty(f,"IE",b.IE),_defineProperty(f,"sourceIdx",c),_defineProperty(f,"baseUrl",b.baseUrl),_defineProperty(f,"placementId",b.placementId),_defineProperty(f,"hostDomain",b.hostDomain),_defineProperty(f,"hostPageUrl",b.hostPageUrl),_defineProperty(f,"hostPageTitle",b.hostPageTitle),_defineProperty(f,"clientID",b.clientID),_defineProperty(f,"imprID",b.imprID),_defineProperty(f,"accChnID_stage",O),_defineProperty(f,"accChnID_unit",P),_defineProperty(f,"accChnID_segm",Q),_defineProperty(f,"stageID",R),_defineProperty(f,"sectID",S),_defineProperty(f,"unitID",T),_defineProperty(f,"partID",U),_defineProperty(f,"assetID",V),_defineProperty(f,"adpID",W),_defineProperty(f,"attributes",a.attributes),_defineProperty(f,"tagname",a.tagname),_defineProperty(f,"mdType",b.mdType),_defineProperty(f,"packId",b.packId),_defineProperty(f,"sourceWidth",a.width),_defineProperty(f,"sourceHeight",a.height),_defineProperty(f,"adPostWidth",b.adPostWidth),_defineProperty(f,"adPostHeight",b.adPostHeight),_defineProperty(f,"segmWidth",b.segmWidth),_defineProperty(f,"segmHeight",b.segmHeight),_defineProperty(f,"curSrcData",JSON.parse(JSON.stringify(a))),_defineProperty(f,"category",a.category),_defineProperty(f,"dtovalue",a.dtovalue),_defineProperty(f,"overuse",a.overuse),_defineProperty(f,"refprc",a.refprc),_defineProperty(f,"snippet",a.snippet),_defineProperty(f,"insbx",a.insbx),_defineProperty(f,"insmod",a.insmod),_defineProperty(f,"vastDevice",ma),_defineProperty(f,"hasFlash",na),_defineProperty(f,"primaryMethod",oa),_defineProperty(f,"initvol",pa),_defineProperty(f,"active",a.active),_defineProperty(f,"hires",a.hires),_defineProperty(f,"seekAnchor",Qa),_defineProperty(f,"userval",va),_defineProperty(f,"debugVars",wa),_defineProperty(f,"getActFlags",I),_defineProperty(f,"row",b.row),_defineProperty(f,"location",b.location),_defineProperty(f,"unitfbxID",Z),_defineProperty(f,"main_wrapper_id",b.main_wrapper_id),_defineProperty(f,"internalContainer",b.internalContainer),_defineProperty(f,"mediacontainer",H),_defineProperty(f,"stylename",b.stylename),_defineProperty(f,"stylesnippets",b.stylesnippets),_defineProperty(f,"cost",sa),_defineProperty(f,"onsold",ta),_defineProperty(f,"floor",ua),_defineProperty(f,"stageName",$),_defineProperty(f,"activeLayout",_),_defineProperty(f,"sectionName",aa),_defineProperty(f,"unitfbxID",Z),_defineProperty(f,"unitName",ba),_defineProperty(f,"adpName",ca),_defineProperty(f,"unitNumID",da),_defineProperty(f,"sourcesetName",ja),_defineProperty(f,"segmentID",X),_defineProperty(f,"segmName",fa),_defineProperty(f,"segmAttr",ia),_defineProperty(f,"ntvfrmts",b.ntvfrmts),_defineProperty(f,"versionFolder",b.versionFolder),_defineProperty(f,"versionTag",b.versionTag),_defineProperty(f,"beamCannon",L),_defineProperty(f,"accbeam",M),_defineProperty(f,"dtomanager",B.dtomanager),_defineProperty(f,"macroproc",B.macroproc),_defineProperty(f,"expregister",B.expregister),_defineProperty(f,"vastCaller",B.vastCaller),_defineProperty(f,"secProt",b.secProt),_defineProperty(f,"promolinkuri",b.promolinkuri),_defineProperty(f,"vastSeg",ha),_defineProperty(f,"sourceTrackingBeams",a.tracking),_defineProperty(f,"dummy",0),f);return new d(g)}function l(b,c,d,f,g){function h(a,b,c){if(!0!==s(c))return!0;if(!0===ha){if(!0===Ma.isAdLoaded())return!1}else if(a>b)return!1;return!0}if(!0!==Sa&&!0!==Ma.isFoundReported()){var i=0;!0===g&&(i=a.media.adFoundRepMinTime,"unspecified"!==f.holdoff&&(i=parseInt(f.holdoff))),!0!==h(b,i,f)&&(e(),Ma.setFoundReported(),x.fireEvent("mediaready",{unitName:ba,unitfbxID:Z}),Sa=!0)}}function m(){if(!0===ab){cb=null,ab=!1,Va=!1,Ya=null,_a=!1,Ua=!1,db=null;var a={stageName:$,activeLayout:_,sectionName:aa,unitName:ba,adpName:ca,unitfbxID:Z,adpID:W,segmName:fa,segmIdx:Y,tagName:Ma.getTagName(),cntValTm:Ma.getContVldTm(),contTime:Xa,vast:ha,active:x.active,logic:"wf",sourceIdx:Ma.getSrcIdx(),clPrc:Ma.getRefPrc(),floor:ua,cost:sa};x.fireEvent("adisoff",a)}}function n(a){!0!==ab&&!0===Ma.isRunning()&&(ab=!0,o(a))}function o(a){Va=!0,Wa=Math.round((a-Ma.getContVldTm()-Qa)/100)/10,Xa=Math.round((a-Ma.getContVldTm()-G)/100)/10,Ya=Math.round(999999999999*Math.random()),_a=Ma.isActiveSource(),cb=a,Ua=!0,db=a,Pa=Ma.getRefPrc();var b=Ma.getTagName(),c=Ma.getNodeName();w(P,"cnt",{contID:Ya,tagName:b,nodeName:c,vast:ha,active:_a,logic:"wf",idx:Na,ctm:Wa,clPrc:Pa,fstPrc:0,sndPrc:0,trdPrc:0,floor:_a?ua:0}),j(Ma);var d={stageName:$,activeLayout:_,sectionName:aa,unitName:ba,adpName:ca,unitfbxID:Z,adpID:W,segmName:fa,segmIdx:Y,tagName:Ma.getTagName(),cntValTm:Ma.getContVldTm(),contTime:Xa,vast:ha,active:x.active,logic:"wf",fromcache:!1,sourceIdx:Ma.getSrcIdx(),clPrc:Ma.getRefPrc(),floor:ua,cost:sa};if(x.fireEvent("adison",d),!0!==bb){if(bb=!0,e(),!0===_a){K.seb("","_s20 YES content (active)");var f="/_s10 active"}else{K.seb("","_s21 YES content (passive)");var f="/_s20 passive"}var g=Ma.getTagName(),h=g.replace(ja+"_","");K.seb(f+"/_s00 cnt tags",h);var i=Math.round((a-Qa)/1e3);K.seb(f+"/_s10 cnt time",i,{scl:"mediumtimes"}),K.seb(f+"/_s20 src idx",Ma.getSrcIdx(),{scl:"mediumtimes"}),K.seb(f+"/_s50 clr price",100*Pa,{scl:"mediumtimes"})}}function p(a,b){"close"!==Ja&&"skip"!==Ja||null!==H&&H.showQuit(a,Ja)}function q(a){var b=I();switch(a.seek){case"always":return!0;case"onvisible":return b.isUnitVisible;case"onactive":return b.isUnitActive;case"onhover":return b.isUnitHovering;case"onaction":return b.isMouseAction}return!1}function r(a,b){var c=I();switch(a.load){case"always":return!0;case"onvisible":return c.isUnitVisible;case"onactive":return c.isUnitActive;case"onhover":return c.isUnitHovering;case"onaction":return c.isMouseAction}return!1}function s(a){var b=I();if(void 0===a.expand)return!0;switch(a.expand){case"onstart":return!0;case"onvisible":return b.isUnitVisible}return!0}function t(a){var b=I();switch(a.break){case"onvisible":return b.isUnitVisible;case"onnotvisible":return!b.isUnitVisible;case"onactive":return b.isUnitActive;case"onhover":return b.isUnitHovering;case"onaction":return b.isMouseAction}return!1}function u(a,b,c){if(!0===Ma.isMediaEnd())return!0;if(c>0&&b>c)return e(),!0;if("close"===Ja)return!0===Ia&&(e(),!0);if("skip"===Ja)return!0===Ia?(e(),!0):!0===Ma.isMediaEnd();var d=I();switch(Ja){case"never":return!1;case"onnotvisible":return!d.isUnitVisible;case"onnotactive":return!d.isUnitActive}return!1}function v(a){function b(a){var b=I();switch(a.audio){case"never":return!1;case"always":return!0;case"onvisible":return b.isUnitVisible;case"onactive":return b.isUnitActive;case"onhover":return b.isUnitHovering;case"onaction":return b.isMouseAction}return!1}!0===b(a)?!1===La&&(Ma.audio(!0),e(),La=!0):!1!==La&&(Ma.audio(!1),e(),La=!1)}function w(a,b,c){var d={event:b,group:"seek_segm_wf",ver:100,data:{untID:W,adpID:W,sgmID:X,untnam:ba,adpnam:ca,sgmnam:fa}},e=d.data;switch(e.cst=sa>0?sa:"NA",e.ons=ta?"1":"0",b){case"start":break;case"cnt":e.cntID=c.contID,e.tagnam=c.tagName,e.nodenam=c.nodeName,e.vast=c.vast?"1":"0",e.actv=c.active?"1":"0",e.log=c.logic,e.idx=c.idx,e.ctm=c.ctm,e.clprc=c.clPrc>0?c.clPrc:"NA",e.fstprc=c.fstPrc>0?c.fstPrc:"NA",e.sndprc=c.sndPrc>0?c.sndPrc:"NA",e.trdprc=c.trdPrc>0?c.trdPrc:"NA",e.flr=c.floor;break;case"nocnt":break;case"tick_sg":e.cntID=c.contID,e.tmval=c.tmval,e.tkidx=c.tickIdx}K.sap(a,d)}var x=this,y=b.unitDomElm,z=b.hostWnd,A=b.master,B=b.comps,C=b.plcmParams,D=b.bootParams,E=b.cllBks,F=(B.tracker,E.addLogLine),G=b.startTime,H=b.mediacontainer,I=b.getActFlags,J=Math.round(999*Math.random());e();var K=new c({comps:B,assembleFunct:g}),L=b.beamCannon,M=b.accbeam,N=(b.userValueMgr,b.sourceadmin),O=b.accChnID_stage,P=b.accChnID_unit,Q=b.accChnID_segm,R=b.stageID,S=b.sectID,T=b.unitID,U=b.partID,V=b.assetID,W=b.adpID,X=Math.round(999999999999*Math.random()),Y=b.segmIdx,Z=b.unitfbxID,$=b.stageName,_=b.activeLayout,aa=b.sectionName,ba=b.unitName,ca=b.adpName,da=b.unitNumID,ea=b.smart,fa=b.segmName,ga="NA_sgctrl_wf",ha=!1;"vid"===b.mdType&&(ha=!0);var ia=b.segmentdata.attributes,ja=ia.sourceset,ka=N.getSSInfo(ja),la=(b.segmentdata.conditions,b.segmentdata.tracking),ma=b.vastDevice,na=b.hasFlash,oa=b.primaryMethod,pa=ia.initvol,qa=!1,ra=!1,sa=b.cost,ta=b.onsold,ua=ka.floor,va=0,wa=b.debugVars,xa=[],ya="INIT",za=null,Aa=0,Ba=!1,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=!1,Ia=!1,Ja=null,Ka=!1,La=!1,Ma=null,Na=0,Oa=null,Pa=null,Qa=null,Ra=!1,Sa=!1,Ta=!0,Ua=!1,Va=!1,Wa=null,Xa=null,Ya=null,Za=!1,$a=!1,_a=!1,ab=!1,bb=!1,cb=null,db=null,eb=0;x.maxSeekTime=a.media.defMaxSeekTime,"unspecified"!==ia.maxSeekTime&&(x.maxSeekTime=parseInt(ia.maxSeekTime)),x.fireEvent=function(a,b){switch(a){case"src_abort":Za=!1;break;case"hoverOn":case"hoverOff":case"click":break;case"quit":Ia=!0}A.fireEvent(a,b)},x.getContStatus=function(){var a={segmName:fa,segmentID:X,logic:"wf",vast:ha,sourcesetName:ja,nodeName:"NA",tagName:"NA",status:"...",content:null,active:null,contentTime:void 0,mediaReady:void 0,mediaValid:void 0,segUnloaded:void 0,inProgress:Ta};return!0!==Ua?a:(a.content=Va,a.contentTime=Xa,a.mediaReady=Sa,a.mediaValid=Za,a.segUnloaded=Ha,a.status="ok",!0===Va&&(a.clPrc=Pa,a.fstPrc=0,a.sndPrc=0,a.trdPrc=0,null!==Ma&&(a.nodeName=Ma.getNodeName(),a.tagName=Ma.getTagName(),a.contVldTm=Ma.getContVldTm()),a.active=_a,a.floor=a.active?ua:0),a)},x.isBusy=function(){return Ta},x.isContentDef=function(){return Ua},x.isSegComplete=function(){return $a},x.start=function(){null!==Ma&&Ma.start(),Ba=!0},x.unload=function(){qa=!0},x.getLastTagName=function(){return ga},x.tick=function(b){if(!0===Ta){if(null!==db&&b-db>a.accbeam.tickPerOther&&eb<a.accbeam.tickCountOther){var c={contID:Ya,tmval:Math.round(a.accbeam.tickPerOther/1e3),tickIdx:eb};w(P,"tick_sg",c),db=b,eb++,eb>=a.accbeam.valTickCountOther&&K.rap()}h(b)}},B.heart.subscribe(x,50,"segctrl_wf",1,0),x.tick(Date.now())}}(config,0,an_buffer,fmp__sourcectrl_wf),fmp__segmctrl_bd=function(a,b,c,d,e,f){return function(b){function f(a){D.logger.writex({msg:a,prefix:"fmp__segmctrl_bd",inst:L})}function g(a){D.logger.writex({tgl:!0,msg:a,prefix:"unit:"+b.unitName+" (seg_ctrl_bd)"})}function h(a,c,d){return{domain:"segments",event:"/"+b.mdType+"/bd/${"+ha+"|*AllSegments*}$"+a,data:c,evOpts:d}}function i(a){switch(Ca!==Da&&(f(),Da=Ca),Ca){case"INIT":if(!0!==Ba)break;var c={ssName:la,unFbxName:_,segID:Z,floor:wa,sgmCtrl:z};D.bdadmin.rsg(c),f();var d=b.mdType;d+=" bd seg started - (srcset: "+la+")",!0===ja&&(d+=" (dev:"+oa+")"),g(d),H(_+" seeking... - segIdx: "+$),M.seb("","_s10 seek"),z.fireEvent("segSeek",{segID:Z}),Ea=a,Ma=0,Ha=0,Ia=0,Ca="WAIT_BURST_SG";case"WAIT_BURST_SG":if(!0===za){Ua="imp_granted",Ca="SEEK_CLOSED";break}if(!0!==La)break;La=!1,Ja=Ka;var e={ssName:la,unitFbxID:_,segmName:ha,burstIdx:Ia,callSpan:Ja};z.fireEvent("bd_new_burst",e),Ca="SEEK_LOOP";case"SEEK_LOOP":f();var h=j(la);if("..."===h.status)break;if("end_of_list"===h.status){Ga=!0,f(),g("seek closed (end of source list) | "+da),Ua="end_of_source_list",Ca="SEEK_CLOSED";break}var i=h.data;f();k(i,Ma);if(f(),Ma++,Ha++,ka.maxcall>0&&Ma>=ka.maxcall){f(),g("seek closed (call limit) | "+da),Ua="call_limit",Ca="SEEK_CLOSED";break}if(Ha>=Ja){Ha=0,Ia++,Ca="WAIT_BURST_SG";break}break;case"SEEK_CLOSED":M.seb("/_s80 end status",Ua),Fa=a,Ca="WAIT_RES";case"WAIT_RES":if(!0!==za)break;if(null!==Aa){Pa=Aa.impData,Qa=Aa.clPrc,Ra=Aa.fstPrc,Sa=Aa.sndPrc,Ta=Aa.trdPrc,Na=Aa.srcData.srcCtrl,Wa=!0,Va=!0,nb=!0;var l={mtype:Pa.mtype,adm:Pa.adm,drvInt:Pa.drvInt,pbBidData:Pa.pbBidData,clPrc:Qa,fstPrc:Ra,sndPrc:Sa,trdPrc:Ta,unFbxID:_,xSeg:Aa.xSeg,newDockInfo:m()};Na.youWon(l),f(),g("unit granted to: "+Na.getTagName()+(!0===Aa.xSeg?" (xseg)  ":"")+", clrPrc: "+Qa),M.seb("","_s20 YES content (active)"),Ca="PARK";break}Wa=!1,Va=!0,jb=!1,ib=!0,nb=!1,g("bidding segment closed, no bids available"),f(),y(R,"nocnt"),M.seb("","_s22 NO content"),M.rap(),hb=!1,Ca="PARK"}}function j(a){var b={status:"...",msg:null,data:null},c=P.gbns(a,!1,Y,!1,$,Ma);if("..."===c.status)return b.status="...",b;if("ok"===c.status){var d=c.data;b.data={};var e=b.data;return e.attributes=JSON.parse(JSON.stringify(ka)),e.ssname=a,e.tagname=d.tagname,e.shrtname=d.shrtname,e.nodeData=d.nodeData,e.width=d.width,e.height=d.height,e.snippet=d.snippet,e.insbx=d.insbx,e.insmod=d.insmod,e.category=d.category,e.dtovalue=d.dtovalue,e.curbIdx_Hr=d.curbIdx_Hr,e.curbIdx_Er=d.curbIdx_Er,e.curbIdx_Dl=d.curbIdx_Dl,e.overuse=d.overuse,e.active=d.active,e.hires=d.hires,e.refprc=d.refprc,b.status="ok",b}return b.status="end_of_list",b}function k(a,c){var e;f();var g=(e={master:z,adPostContElm:b.adPostContElm,unitDomElm:A,hostWnd:B,comps:D,cllBks:G,plcmParams:E,bootParams:F,startTime:I,heart:D.heart,testCase:b.testCase},_defineProperty(e,"startTime",I),_defineProperty(e,"logger",D.logger),_defineProperty(e,"env",b.env),_defineProperty(e,"IE",b.IE),_defineProperty(e,"sourceIdx",c),_defineProperty(e,"burstIdx",Ia),_defineProperty(e,"baseUrl",b.baseUrl),_defineProperty(e,"placementId",b.placementId),_defineProperty(e,"hostDomain",b.hostDomain),_defineProperty(e,"hostPageUrl",b.hostPageUrl),_defineProperty(e,"hostPageTitle",b.hostPageTitle),_defineProperty(e,"clientID",b.clientID),_defineProperty(e,"imprID",b.imprID),_defineProperty(e,"accChnID_stage",Q),_defineProperty(e,"accChnID_unit",R),_defineProperty(e,"accChnID_segm",S),_defineProperty(e,"mdType",b.mdType),_defineProperty(e,"packId",b.packId),_defineProperty(e,"adPostWidth",b.adPostWidth),_defineProperty(e,"adPostHeight",b.adPostHeight),_defineProperty(e,"segmWidth",b.segmWidth),_defineProperty(e,"segmHeight",b.segmHeight),_defineProperty(e,"curSrcData",JSON.parse(JSON.stringify(a))),_defineProperty(e,"vastDevice",oa),_defineProperty(e,"hasFlash",pa),_defineProperty(e,"primaryMethod",qa),_defineProperty(e,"initvol",ra),_defineProperty(e,"seekAnchor",Ea),_defineProperty(e,"userval",xa),_defineProperty(e,"debugVars",ya),_defineProperty(e,"getActFlags",K),_defineProperty(e,"stageName",aa),_defineProperty(e,"activeLayout",ba),_defineProperty(e,"sectionName",ca),_defineProperty(e,"unitfbxID",_),_defineProperty(e,"unitName",da),_defineProperty(e,"adpName",ea),_defineProperty(e,"unitNumID",fa),_defineProperty(e,"sourcesetName",la),_defineProperty(e,"segmentID",Z),_defineProperty(e,"segmName",ha),_defineProperty(e,"segmAttr",ka),_defineProperty(e,"ntvfrmts",b.ntvfrmts),_defineProperty(e,"versionFolder",b.versionFolder),_defineProperty(e,"versionTag",b.versionTag),_defineProperty(e,"beamCannon",N),_defineProperty(e,"accbeam",O),_defineProperty(e,"dtomanager",D.dtomanager),_defineProperty(e,"bdcnxhub",D.bdcnxhub),_defineProperty(e,"sourceadmin",D.sourceadmin),_defineProperty(e,"macroproc",D.macroproc),_defineProperty(e,"expregister",D.expregister),_defineProperty(e,"vastCaller",D.vastCaller),_defineProperty(e,"secProt",b.secProt),_defineProperty(e,"promolinkuri",b.promolinkuri),_defineProperty(e,"vastSeg",ja),_defineProperty(e,"dockInfo",m()),_defineProperty(e,"dummy",0),e);return new d(g)}function l(a){var c;f();var d=(c={master:z,adPostContElm:b.adPostContElm,unitDomElm:A,hostWnd:B,comps:D,cllBks:G,plcmParams:E,bootParams:F,startTime:I,heart:D.heart,testCase:b.testCase},_defineProperty(c,"startTime",I),_defineProperty(c,"logger",D.logger),_defineProperty(c,"env",b.env),_defineProperty(c,"IE",b.IE),_defineProperty(c,"sourceIdx",0),_defineProperty(c,"burstIdx",Ia),_defineProperty(c,"baseUrl",b.baseUrl),_defineProperty(c,"placementId",b.placementId),_defineProperty(c,"hostDomain",b.hostDomain),_defineProperty(c,"hostPageUrl",b.hostPageUrl),_defineProperty(c,"hostPageTitle",b.hostPageTitle),_defineProperty(c,"clientID",b.clientID),_defineProperty(c,"imprID",b.imprID),_defineProperty(c,"accChnID_stage",Q),_defineProperty(c,"accChnID_unit",R),_defineProperty(c,"accChnID_segm",S),_defineProperty(c,"mdType",b.mdType),_defineProperty(c,"packId",b.packId),_defineProperty(c,"adPostWidth",b.adPostWidth),_defineProperty(c,"adPostHeight",b.adPostHeight),_defineProperty(c,"segmWidth",b.segmWidth),_defineProperty(c,"segmHeight",b.segmHeight),_defineProperty(c,"curSrcData",JSON.parse(JSON.stringify(a))),_defineProperty(c,"vastDevice",oa),_defineProperty(c,"hasFlash",pa),_defineProperty(c,"primaryMethod",qa),_defineProperty(c,"initvol",ra),_defineProperty(c,"seekAnchor",Ea),_defineProperty(c,"userval",xa),_defineProperty(c,"debugVars",ya),_defineProperty(c,"getActFlags",K),_defineProperty(c,"stageName",aa),_defineProperty(c,"activeLayout",ba),_defineProperty(c,"sectionName",ca),_defineProperty(c,"unitfbxID",_),_defineProperty(c,"unitName",da),_defineProperty(c,"adpName",ea),_defineProperty(c,"unitNumID",fa),_defineProperty(c,"sourcesetName",la),_defineProperty(c,"segmentID",Z),_defineProperty(c,"segmName",ha),_defineProperty(c,"segmAttr",ka),_defineProperty(c,"ntvfrmts",b.ntvfrmts),_defineProperty(c,"versionFolder",b.versionFolder),_defineProperty(c,"versionTag",b.versionTag),_defineProperty(c,"beamCannon",N),_defineProperty(c,"accbeam",O),_defineProperty(c,"dtomanager",D.dtomanager),_defineProperty(c,"bdcnxhub",D.bdcnxhub),_defineProperty(c,"sourceadmin",D.sourceadmin),_defineProperty(c,"macroproc",D.macroproc),_defineProperty(c,"expregister",D.expregister),_defineProperty(c,"vastCaller",D.vastCaller),_defineProperty(c,"secProt",b.secProt),_defineProperty(c,"promolinkuri",b.promolinkuri),_defineProperty(c,"vastSeg",ja),_defineProperty(c,"dockInfo",m()),_defineProperty(c,"winData",{adm:Pa.adm,clPrc:Qa,fstPrc:Ra,sndPrc:Sa,trdPrc:Ta,unFbxID:_,xSeg:Aa.xSeg}),_defineProperty(c,"dummy",0),c);return new e(d)}function m(){return{master:z,stageID:T,sectID:U,unitID:V,partID:W,assetID:X,adpID:Y,segmentID:Z,segmName:ha,row:b.row,location:b.location,unitY:b.unitY,priority:b.priority,sectionName:ca,unitfbxID:_,unitName:da,adpName:ea,unitNumID:fa,main_wrapper_id:b.main_wrapper_id,internalContainer:b.internalContainer,mediacontainer:b.mediacontainer,stylename:b.stylename,stylesnippets:b.stylesnippets,cost:ua,onsold:va,floor:wa}}function n(a){switch(Xa!==Ya&&(f(),Ya=Xa),Xa){case"INIT":f(),Xa="READY";case"READY":if(!0!==t(ka))break;f(),N.fire(na),y(R,"start"),Ba=!0,Xa="WAIT_SEEK_RES";break;case"WAIT_SEEK_RES":if(!0!==Va)break;if(!0!==Wa){Xa="CLOSE_SEGMENT";break}if(null===(Oa=l(Na.getSrcData())))throw"could_not_launch_plyctr - code: ahWhD5e9J";ia=Oa.getTagName(),f(),cb=ka.mintime,db=ka.maxtime,sb=ka.quit,Xa="LOAD";case"LOAD":if(!0!==u(ka,Oa.isVast()))break;f(),Oa.load(),Za=a,Xa="WAIT_LOAD_READY";case"WAIT_LOAD_READY":if(!0===Oa.wasAborted()){nb=!1,f(),Xa="UNLOAD";break}if(!0===sa){f(),Xa="UNLOAD";break}if(!0!==Oa.isLoaded())break;f(),f(),x(ka),Za=a,bb=0,ab=0,_a=a,tb=!1,ub=!1,s(!1,ka),Xa="PLAYING";case"PLAYING":if(o(ka),!0===Oa.wasAborted()){nb=!1,f(),Xa="UNLOAD";break}if(!0===sa){f(),Xa="UNLOAD";break}if(x(ka),ab=a-_a,bb=Math.floor(ab/1e3),q(a),0!==cb&&bb<cb)break;if(!0!==tb&&(tb=!0,s(!0,ka)),!0===w(ka,bb,db)){Xa="UNLOAD";break}break;case"UNLOAD":f(),Oa.unload(),eb=!0,Za=a,Xa="UNLOAD_WAIT";case"UNLOAD_WAIT":if(!0!==Oa.isUnloaded())break;!0===Oa.wasAborted()&&(nb=!1,p(),!0===ga&&z.fireEvent("whitesp",{segID:Z})),Xa="CLOSE_SEGMENT";case"CLOSE_SEGMENT":!0===jb&&!0===nb&&(ob=!0),f(),s(!1,ka),Oa=null,ta=!0,hb=!1,Xa="PARK";break;case"PARK":D.heart.unsubscribe(z)}}function o(a){function b(a){return!0!==v(a)||!0===ja&&!0!==Oa.isAdLoaded()}if(!0===gb)return!0;!0!==b(a)&&(z.fireEvent("mediaready",{unitName:da,unitfbxID:_}),gb=!0)}function p(){if(!0===pb){rb=null,pb=!1,jb=!1,kb=null,ib=!1,vb=null;var a={stageName:aa,activeLayout:ba,sectionName:ca,unitName:da,adpName:ea,unitfbxID:_,adpID:Y,segmName:ha,segmIdx:$,tagName:Oa.getTagName(),cntValTm:Oa.getContVldTm(),contTime:mb,vast:ja,active:!0,logic:"bd",sourceIdx:Oa.getSrcIdx(),clPrc:Qa,floor:wa,cost:ua};z.fireEvent("adisoff",a)}}function q(a){!0!==pb&&!0===Oa.isRunning()&&(pb=!0,r(a))}function r(a){if(null===Oa)throw"incons_flow_play_process";jb=!0,lb=Math.round((a-Oa.getContVldTm()-Ea)/100)/10,
mb=Math.round((a-Oa.getContVldTm()-I)/100)/10,kb=Math.round(999999999999*Math.random()),ib=!0,rb=a,vb=a;var b=Oa.getTagName(),c=Oa.getNodeName(),d={contID:kb,tagName:b,nodeName:c,vast:ja,active:!0,logic:"bd",idx:Oa.getSrcIdx(),ctm:lb,clPrc:Qa,fstPrc:Ra,sndPrc:Sa,trdPrc:Ta,floor:wa};y(R,"cnt",d);var e={stageName:aa,activeLayout:ba,sectionName:ca,unitName:da,adpName:ea,unitfbxID:_,adpID:Y,segmName:ha,segmIdx:$,tagName:Oa.getTagName(),cntValTm:Oa.getContVldTm(),contTime:mb,vast:ja,active:!0,logic:"bd",fromcache:!1,sourceIdx:Oa.getSrcIdx(),clPrc:Qa,floor:wa,cost:ua};if(z.fireEvent("adison",e),!0!==qb){qb=!0,f();var g="/_s20 passive";!0===Oa.isActiveSource()&&(g="/_s10 active");var h=Oa.getTagName(),i=h.replace(la+"_","");M.seb(g+"/_s00 cnt tags",i);var j=Math.round((a-Ea)/1e3);M.seb(g+"/_s10 cnt time",j,{scl:"mediumtimes"}),M.seb(g+"/_s20 src idx",Oa.getSrcIdx(),{scl:"mediumtimes"}),M.seb(g+"/_s50 clr price",100*Qa,{scl:"mediumtimes"})}}function s(a,b){"close"!==sb&&"skip"!==sb||null!==J&&J.showQuit(a,sb)}function t(a){var b=K();switch(a.seek){case"always":return!0;case"onvisible":return b.isUnitVisible;case"onactive":return b.isUnitActive;case"onhover":return b.isUnitHovering;case"onaction":return b.isMouseAction}return!1}function u(a,b){var c=K();switch(a.load){case"always":return!0;case"onvisible":return c.isUnitVisible;case"onactive":return c.isUnitActive;case"onhover":return c.isUnitHovering;case"onaction":return c.isMouseAction}return!1}function v(a){var b=K();if(void 0===a.expand)return!0;switch(a.expand){case"onstart":return!0;case"onvisible":return b.isUnitVisible}return!0}function w(a,b,c){if(!0===Oa.isMediaEnd())return!0;if(c>0&&b>c)return f(),!0;if("close"===sb)return!0===fb&&(f(),!0);if("skip"===sb)return!0===fb?(f(),!0):!0===Oa.isMediaEnd();var d=K();switch(sb){case"never":return!1;case"onnotvisible":return!d.isUnitVisible;case"onnotactive":return!d.isUnitActive}return!1}function x(a){function b(a){var b=K();switch(a.audio){case"never":return!1;case"always":return!0;case"onvisible":return b.isUnitVisible;case"onactive":return b.isUnitActive;case"onhover":return b.isUnitHovering;case"onaction":return b.isMouseAction}return!1}!0===b(a)?!1===ub&&(Oa.audio(!0),f(),ub=!0):!1!==ub&&(Oa.audio(!1),f(),ub=!1)}function y(a,b,c){var d={event:b,group:"seek_segm_bd",ver:100,data:{untID:Y,adpID:Y,sgmID:Z,untnam:da,adpnam:ea,sgmnam:ha}},e=d.data;switch(e.cst=ua>0?ua:"NA",e.ons=va?"1":"0",b){case"start":break;case"cnt":e.cntID=c.contID,e.tagnam=c.tagName,e.nodenam=c.nodeName,e.vast=c.vast?"1":"0",e.actv=c.active?"1":"0",e.log=c.logic,e.idx=c.idx,e.ctm=c.ctm,e.clprc=c.clPrc>0?c.clPrc:"NA",e.fstprc=c.fstPrc>0?c.fstPrc:"NA",e.sndprc=c.sndPrc>0?c.sndPrc:"NA",e.trdprc=c.trdPrc>0?c.trdPrc:"NA",e.flr=c.floor;break;case"nocnt":break;case"tick_sg":e.cntID=c.contID,e.tmval=c.tmval,e.tkidx=c.tickIdx}M.sap(a,d)}var z=this,A=b.unitDomElm,B=b.hostWnd,C=b.master,D=b.comps,E=b.plcmParams,F=b.bootParams,G=b.cllBks,H=(D.bdcnxhub,D.tracker,G.addLogLine),I=b.startTime,J=b.mediacontainer,K=b.getActFlags,L=Math.round(999*Math.random());f();var M=new c({comps:D,assembleFunct:h}),N=b.beamCannon,O=b.accbeam,P=(D.userValueMgr,D.sourceadmin),Q=(b.bootParams.testCase,b.accChnID_stage),R=b.accChnID_unit,S=b.accChnID_segm,T=b.stageID,U=b.sectID,V=b.unitID,W=b.partID,X=b.assetID,Y=b.adpID,Z=Math.round(999999999999*Math.random()),$=b.segmIdx,_=b.unitfbxID,aa=b.stageName,ba=b.activeLayout,ca=b.sectionName,da=b.unitName,ea=b.adpName,fa=b.unitNumID,ga=b.smart,ha=b.segmName,ia="NA_sgctrl_bd",ja=!1;"vid"===b.mdType&&(ja=!0);var ka=b.segmentdata.attributes,la=ka.sourceset,ma=P.getSSInfo(la),na=(b.segmentdata.conditions,b.segmentdata.tracking),oa=b.vastDevice,pa=b.hasFlash,qa=b.primaryMethod,ra=ka.initvol,sa=!1,ta=!1,ua=b.cost,va=b.onsold,wa=ma.floor,xa=0,ya=b.debugVars,za=!1,Aa=null;f();var Ba=!1,Ca="INIT",Da=null,Ea=0,Fa=0,Ga=!1,Ha=0,Ia=0,Ja=0,Ka=0,La=!1,Ma=0,Na=null,Oa=null,Pa=null,Qa=null,Ra=null,Sa=null,Ta=null,Ua="...",Va=!1,Wa=!1,Xa="INIT",Ya=null,Za=0,$a=!1,_a=0,ab=0,bb=0,cb=0,db=0,eb=!1,fb=!1,gb=!1,hb=!0,ib=!1,jb=!1,kb=null,lb=null,mb=null,nb=!1,ob=!1,pb=!1,qb=!1,rb=null,sb=null,tb=!1,ub=!1,vb=null,wb=0;z.maxSeekTime=a.media.defMaxSeekTime,"unspecified"!==ka.maxSeekTime&&(z.maxSeekTime=parseInt(ka.maxSeekTime)),z.fireEvent=function(a,b){switch(a){case"src_abort":nb=!1;break;case"hoverOn":case"hoverOff":case"click":break;case"quit":fb=!0}C.fireEvent(a,b)},z.getContStatus=function(){var a={segmName:ha,segmentID:Z,logic:"bd",vast:ja,sourcesetName:la,nodeName:"NA",tagName:"NA",status:"...",content:null,active:null,contentTime:void 0,mediaReady:void 0,mediaValid:void 0,segUnloaded:void 0,inProgress:hb};return!0!==ib?a:(a.content=jb,a.contentTime=mb,a.mediaReady=gb,a.mediaValid=nb,a.segUnloaded=eb,a.status="ok",!0===jb&&(a.clPrc=Qa,a.fstPrc=Ra,a.sndPrc=Sa,a.trdPrc=Ta,null!==Na&&(a.nodeName=Na.getNodeName(),a.tagName=Na.getTagName()),a.active=!0,a.floor=wa,a.contVldTm=Oa.getContVldTm()),a)},z.isBusy=function(){return hb},z.isContentDef=function(){return ib},z.isSegComplete=function(){return ob},z.start=function(){null!==Oa&&Oa.start(),$a=!0},z.unload=function(){sa=!0},z.getLastTagName=function(){return ia},z.burst=function(a){La=!0,Ka=a},z.bdClbck=function(a){if(za=!0,null!==a){if(Aa=a,!0===a.xSeg){f();var b={unitfbxID:_,adpID:Y,fromSeg:a.srcData.fromSeg,tagName:a.srcData.tagname,prc:a.clPrc};z.fireEvent("src_xseg",b)}else f();var c={unitfbxID:_,adpID:Y,tagName:a.srcData.tagname,prc:a.clPrc};z.fireEvent("src_win",c)}},z.tick=function(b){if(!0===hb){if(null!==vb&&b-vb>a.accbeam.tickPerOther&&wb<a.accbeam.tickCountOther){var c={contID:kb,tmval:Math.round(a.accbeam.tickPerOther/1e3),tickIdx:wb};y(R,"tick_sg",c),vb=b,wb++,wb>=a.accbeam.valTickCountOther&&M.rap()}i(b),n(b)}},D.heart.subscribe(z,50,"segctrl_bd",1,0),z.tick(Date.now())}}(config,0,an_buffer,fmp__sourcectrl_bd,fmp__plyctrl_bd),fmp__root=function(a,b,c,d,e){return function(d){function f(a){d.logger.writex({msg:a,prefix:"fmp__root",inst:x})}function g(a){v.push(a),!0===w?a("hoverOn",{}):a("hoverOff",{})}function h(a){var b=[];v.forEach(function(c){c!==a&&b.push(c)}),v=b}function i(a,b){v.forEach(function(c){c(a,b)})}function j(){var a={master:m,unitDomElm:n,hostWnd:o,myUnitObj:p,comps:q,cllBks:t,plcmParams:r,bootParams:s,startTime:u,logger:d.logger,heart:d.heart,catchCallback:d.catchCallback,macroproc:d.macroproc,debugVars:d.debugVars,unitfbxID:d.unitfbxID,main_wrapper_id:d.main_wrapper_id,internalContainer:d.internalContainer,shade:d.segmentdata.attributes.shade,frame:d.segmentdata.attributes.frame,flexible:d.segmentdata.attributes.flexible,stylename:d.stylename,stylesnippets:d.stylesnippets,waitopts:d.waitopts,mdType:d.mdType,segmType:d.segmType,adPostWidth:d.adPostWidth,adPostHeight:d.adPostHeight,segmWidth:d.segmWidth,segmHeight:d.segmHeight,centscrn:d.centscrn,progress:d.segmentdata.attributes.progress,stageName:d.stageName,stageAttributes:d.stageAttributes,activeLayout:d.activeLayout,sectionName:d.sectionName,unitName:d.unitName,adpName:d.adpName,adPostContID:d.adPostContID,segmentName:d.segmentName,unitNumID:d.unitNumID,baseUrl:d.baseUrl,placementId:d.placementId,versionFolder:d.versionFolder,versionTag:d.versionTag,hostDomain:d.hostDomain,hostPageUrl:d.hostPageUrl,hostPageTitle:d.hostPageTitle,clientID:d.clientID,imprID:d.imprID,accChnID_stage:y,accChnID_unit:z,accChnID_segm:A,promolink:"",promolinkuri:"",fmpRoot:m,dummy:0};return new e(a)}function k(){var a,e=(a={master:m,adPostContElm:d.adPostContElm,unitDomElm:n,hostWnd:o,comps:q,cllBks:t,plcmParams:r,bootParams:s,startTime:u,stageID:d.stageID,sectID:d.sectID,unitID:d.unitID,partID:d.partID,assetID:d.assetID,adpID:d.adpID,vastDevice:d.vastDevice,userval:d.userval,getActFlags:d.getActFlags,debugVars:d.debugVars,addLogLine:d.addLogLine,secProt:d.secProt,promolinkuri:d.promolinkuri,logolinkuri:d.logolinkuri,heart:d.heart,logger:d.logger,env:d.env,IE:d.IE,catchCallback:d.catchCallback,beamCannon:d.beamCannon,accbeam:d.accbeam,dtomanager:d.dtomanager,userValueMgr:d.userValueMgr,bdcnxhub:d.bdcnxhub,sourceadmin:d.sourceadmin,macroproc:d.macroproc,mediacontainer:B,main_wrapper_id:d.main_wrapper_id,internalContainer:d.internalContainer,versionFolder:d.versionFolder,versionTag:d.versionTag,baseUrl:d.baseUrl,placementId:d.placementId,unitfbxID:d.unitfbxID,segmentdata:d.segmentdata,segmName:d.segmentdata.name,segmIdx:d.segmIdx,stageName:d.stageName,stageAttributes:d.stageAttributes,activeLayout:d.activeLayout,sectionName:d.sectionName,unitName:d.unitName,adpName:d.adpName,adPostContID:d.adPostContID,segmentName:d.segmentName,unitNumID:d.unitNumID,smart:d.smart,priority:d.priority,ntvfrmts:d.ntvfrmts,mdType:d.mdType,packId:d.packId,segmType:d.segmType,adPostWidth:d.adPostWidth,adPostHeight:d.adPostHeight,segmWidth:d.segmWidth,segmHeight:d.segmHeight,unitY:d.unitY,stylename:d.stylename,stylesnippets:d.stylesnippets,cost:d.cost,onsold:d.onsold,hostDomain:d.hostDomain,hostPageUrl:d.hostPageUrl,hostPageTitle:d.hostPageTitle,clientID:d.clientID,imprID:d.imprID,accChnID_stage:y,accChnID_unit:z,accChnID_segm:A,tracker:d.tracker},_defineProperty(a,"vastDevice",d.vastDevice),_defineProperty(a,"primaryMethod",d.primaryMethod),_defineProperty(a,"hasFlash",d.hasFlash),a);return"bd"===e.segmType?new c(e):new b(e)}function l(a){switch(E){case"INIT":if(null!==B&&!0!==B.isReady())break;D=k(),G=!0,E="RUNNING";case"RUNNING":if(!0===D.isBusy())break;f(),null!==B&&B.destroy(),E="WAIT_CONTAINER";case"WAIT_CONTAINER":if(null!==B&&!0!==B.getDestStat())break;K=!0,F=!1,E="PARK"}}var m=this,n=d.unitDomElm,o=d.hostWnd,p=(d.master,d.myUnitObj),q=(d.unitName,d.adpName,d.comps),r=d.plcmParams,s=d.bootParams,t=d.cllBks,u=(q.tracker,t.addLogLine,d.startTime),v=[],w=!1,x=Math.round(999*Math.random());f();var y=d.accChnID_stage,z=d.accChnID_unit,A="_segm"+Math.round(9999*Math.random());d.accbeam.register(A,a.accbeam.channels.segm.red);var B=null,C=!1,D=null,E="INIT",F=!0,G=!1,H=!0,I=!0,J=!1,K=!1;m.fireEvent=function(a,b){switch(a){case"mediaready":H=!0;break;case"error_mediacont":C=!0;break;case"addHovLstn":g(b);break;case"remHovLstn":h(b);break;case"hoverOn":w=!0,i(a,{});break;case"hoverOff":w=!1,i(a,{})}d.master.fireEvent(a,b)},m.tick=function(a){l(a),null!==B&&B.tick(a)},m.isReady=function(){return G},m.isContentDef=function(){return D.isContentDef()},m.isSegComplete=function(){return D.isSegComplete()},m.getContStatus=function(){return D.getContStatus()},m.isBusy=function(){return F},m.placeMedia=function(){f(),null!==B&&B.expand(),D.start(),I=!0},m.getLastTagName=function(){return null===D?"NA_fmp":D.getLastTagName()},m.unload=function(){D.unload(),J=!0},m.getUnloadStat=function(){return K},"cst"!==d.mdType&&(B=j());var L=d.unitfbxID+" fmp launching..., segIdx: "+d.segmIdx;d.addLogLine(L),f()}}(config,fmp__segmctrl_wf,fmp__segmctrl_bd,0,fmp_container_pop),barlogix=function(){return function(a){var b=this,c="unspecified",d=a.bootParams,e=Date.now(),f="";b.shouldPub=function(a,b){if("object"!==_typeof2(a))return"no";if(1===a.length&&"released"===a[0])return"all";if(null===b)return"wait";if("string"!=typeof b.pCode)return"no";if(b.pCode.length<1)return"no";for(var c=0;c<a.length;c++)if(!(a[c].length<1)&&b.pCode===a[c])return"you";return"no"},b.checkEnvCond=function(a,b,f,g,h,i){function j(a){for(var b=0;b<g.length;b++){var c=g[b];if(c.entityName===a)return c.deployed}return null}function k(a){for(var b=0;b<h.length;b++){var c=h[b];if(c.entityName===a)return c.content}return null}function l(a){return null===f?null:void 0===f[a]?null:f[a]}var m={status:"dontknow",msg:""},n=!0;if(null!==b&&null!==f&&(n=!1),!0!==i&&!0===a.pinned)return m.status="go",m.msg="dont_care",m;if(a.delay!==c){var o=Date.now(),p=1e3*parseInt(a.delay);if(o-e<p)return m.status="wait",m}if(!0===i){if(a.ifwidthmore!==c){if(null===b)return m.status="dontknow",m;if(b.windowWidth<parseInt(a.ifwidthmore))return m.status="dontgo",m.msg="avoided_room",m}if(a.ifwidthless!==c){if(null===b)return m.status="dontknow",m;if(b.windowWidth>=parseInt(a.ifwidthless))return m.status="dontgo",m.msg="avoided_room",m}if(a.ifbrowser!==c){var q=d.envInfo.browserName.toLowerCase(),r=a.ifbrowser.toLowerCase();if(q.indexOf(r)<0)return m.status="dontgo",m.msg="avoided_browser",m}if(a.ifnotbrowser!==c){var q=d.envInfo.browserName.toLowerCase(),r=a.ifnotbrowser.toLowerCase();if(q.indexOf(r)>=0)return m.status="dontgo",m.msg="avoided_browser",m}}if("NA"!==f&&void 0!==a.iftrue&&a.iftrue!==c){if(!0===n)return m.status="dontknow",m;var s=a.iftrue,t=l(s);if(null===t)return m.status="dontknow",m;if(!0!==t)return m.status="dontgo",m.msg="avoided_snip",m}if("NA"!==f&&void 0!==a.ifnottrue&&a.ifnottrue!==c){if(!0===n)return m.status="dontknow",m;var s=a.ifnottrue,t=l(s);if(null===t)return m.status="dontknow",m;if(!0===t)return m.status="dontgo",m.msg="avoided_snip",m}if("NA"!==g&&void 0!==a.ifdeployed&&a.ifdeployed!==c){var u=j(a.ifdeployed);if(null===u)return m.status="dontknow",m;if(!0!==u)return m.status="dontgo",m.msg="avoided_link",m}if("NA"!==g&&void 0!==a.ifnotdeployed&&a.ifnotdeployed!==c){var u=j(a.ifnotdeployed);if(null===u)return m.status="dontknow",m;if(!0===u)return m.status="dontgo",m.msg="avoided_link",m}if("NA"!==h&&void 0!==a.ifcontent&&a.ifcontent!==c){var u=k(a.ifcontent);if(null===u)return m.status="dontknow",m;if(!0!==u)return m.status="dontgo",m.msg="avoided_cnt",m}if("NA"!==h&&void 0!==a.ifnotcontent&&a.ifnotcontent!==c){var u=k(a.ifnotcontent);if(null===u)return m.status="dontknow",m;if(!0===u)return m.status="dontgo",m.msg="avoided_cnt",m}if("NA"!==h&&void 0!==a.after&&a.after!==c){var u=k(a.after);return null===u?(m.status="dontknow",m):(m.status="go",m.msg="cond_met",m)}return m.status="go",m.msg="dont_care",m},b.checkReductions=function(a,b){function e(a){for(var b=a.toLowerCase(),c=["sun","mon","tue","wed","thu","fri","sat"],d=0;d<c.length;d++)if(b===c[d])return d;return"NaN"}function g(a,b,c){return b<=c?a>=b&&a<=c:!(a>c&&a<b)}function h(){var b={message:"",go:!1};if(!0===m){var c=!1;if(!0===a.ifcasea&&"A"!==d.testCase&&(c=!0),!0===a.ifcaseb&&"B"!==d.testCase&&(c=!0),!0===c)return b.message="by test case ("+d.testCase+")",b.go=!1,b}if(!0===n){if(!0!==a.ifcase.toLowerCase().indexOf(d.testCase.toLowerCase())>=0)return b.message="by test case ("+d.testCase+")",b.go=!1,b}if(!0===o){if(!0!==a.ifgroup.indexOf(d.testGroup)>=0)return b.message="by test group ("+d.testGroup+")",b.go=!1,b}if(p||q){var f=parseInt(a.fromhour),h=parseInt(a.tohour),i=!1;if((f<0||f>23||"NaN"===f)&&(i=!0),(h<0||h>23||"NaN"===h)&&(i=!0),!1!==i)return b.message="invalid hour interval ( ["+a.fromhour+"-"+a.tohour+"]",b.go=!1,b;if(!0!==g(k,f,h))return b.message="by hour interval ( ["+a.fromhour+"-"+a.tohour+"] : "+k+")",b.go=!1,b}if(r||s){var j=e(a.fromday),x=e(a.today),i=!1;if(null!==j&&"NaN"!==j||(i=!0),null!==x&&"NaN"!==x||(i=!0),!1!==i)return b.message="invalid day interval ( ["+a.fromday+"-"+a.today+"]",b.go=!1,b;if(!0!==g(l,j,x))return b.message="by day interval ( ["+a.fromday+"-"+a.today+"] : "+l+")",b.go=!1,b}return u||t?u&&w?(b.go=!0,b):t&&v?(b.go=!0,b):(b.message="prob:"+a.prob+", vbar:"+a.vbar,b.go=!1,b):(b.go=!0,b)}var i=!0,j=new Date,k=j.getHours(),l=j.getDay(),m=!0===a.ifcasea||!0===a.ifcaseb;!0===a.ifcasea&&a.ifcaseb&&(m=!1);var n=a.ifcase!==c&&void 0!==a.ifcase,o=a.ifgroup!==c&&void 0!==a.ifgroup,p=a.fromhour!==c,q=a.tohour!==c,r=a.fromday!==c,s=a.today!==c,t=!1,u=!1;void 0!==a.vbar&&a.vbar>0&&(t=!0),void 0!==a.prob&&a.prob>0&&(u=!0);var v=!0;t&&b<a.vbar&&(v=!1);var w=!0,x=Math.round(100*Math.random());u&&x>a.prob&&(w=!1);var i=h();return!0===i.go?(x<10&&(x="0"+x),b<10&&(b="0"+b),f="params: ",f+="prob ("+a.prob+":"+x+"), ",f+="vbar ("+a.vbar+":"+b+"), ",f+="fromhour ("+a.fromhour+":"+k+"), ",f+="tohour ("+a.tohour+":"+k+")",f+="fromday ("+a.fromday+":"+l+"), ",f+="today ("+a.today+":"+l+")",!0):(f=i.message,!1)},b.getMessage=function(){return f}}}(),overlaywnd=function(){return function(a){function b(){p=Date.now()}function c(){p=0}function d(a,b,c,d,e){function f(a){var b={left:0,top:0};null!==a&&(b=a.getBoundingClientRect());var c=0,d=0;return"relative"===getComputedStyle(window.document.body).position&&(c=parseInt(getComputedStyle(window.document.body)["margin-left"].replace("px","")),d=parseInt(getComputedStyle(window.document.body)["margin-top"].replace("px",""))),{left:b.left-c,top:b.top-d}}var g=500,h=400,i=80,j=80;!0===d&&(i=0,j=0);var k=f(e),l=c.windowWidth-30,m=c.windowHeight,n=a.getBoundingClientRect(),o=n.left+k.left,p=n.top+k.top,q=o+window.top.pageXOffset+j,r=q+g;!0!==d&&r>window.top.pageXOffset+l&&(r=o+window.top.pageXOffset+n.width-j,q=r-g);var s=p+window.top.pageYOffset+i,t=s+h;!0!==d&&t>window.top.pageYOffset+m&&(t=p+window.top.pageYOffset+n.height-i,s=t-h);var u=14,v=o+window.top.pageXOffset-u,w=p+window.top.pageYOffset-u,x=n.width,y=n.height,z={left:q,top:s,width:g,height:h,highLeft:v,hightTop:w,highWidth:x,highHeight:y,highBorder:u};if(null!==b){var A=b.getBoundingClientRect(),B=A.left+k.left,C=A.top+k.top;z.refshowBorder=14,z.refshowLeft=B+window.top.pageXOffset-z.refshowBorder,z.refshowTop=C+window.top.pageYOffset-z.refshowBorder,z.refshowWidth=A.width,z.refshowHeight=A.height}return z}var e=this,f="ovr_"+a.abstrElmID,g=a.domBoxElm,h=a.confined,i=a.refElm,j=a.hostElm,k=a.genWinInfo,l=999999999,m=0,n=0,o=0,p=Date.now(),q=document.createElement("div");q.id=f,document.body.appendChild(q);var r=document.createElement("div");q.appendChild(r);var s=d(g,i,k(),h,j),t=JSON.stringify(s),u=!1;q.addEventListener("mousemove",b),r.addEventListener("mousemove",b),q.addEventListener("scroll",b),q.addEventListener("mouseleave",c);var v=q.style;v.left=s.left+"px",v.top=s.top+"px",v.minWidth=s.width+"px",v.minHeight=s.height+"px",v.maxWidth=s.width+"px",v.maxHeight=s.height+"px",v.padding="0",v.display="inline-block",v.overflowY="scroll",v.zIndex=""+l,v.position="absolute",v.float="left",v.pointerEvents="auto",v.background="#efefff",v.opacity="0.96",v.border="2px solid #292929",!0===h&&(v.border="0px");var w=r.style;w.width="auto",w.height="auto",w.fontSize="14px",w.padding="14px 8px 14px 8px",w.opacity="1",w.overflow="hidden",w.textOverflow="ellipsis",!0===h&&(w.fontSize="12px",w.padding="8px 4px 8px 4px");var x=document.createElement("div");x.id="highl_"+f,document.body.appendChild(x);var y=x.style;if(y.left=s.highLeft+"px",y.top=s.hightTop+"px",y.width=s.highWidth+"px",y.minWidth=s.highWidth+"px",y.maxWidth=s.highWidth+"px",y.height=s.highHeight+"px",y.minHeight=s.highHeight+"px",y.maxHeight=s.highHeight+"px",y.border=s.highBorder+"px dashed #8888ec",y.display="inline-block",y.zIndex=""+(l-1),y.position="absolute",y.float="left",y.pointerEvents="none",y.background="#e8e8f8",y.opacity="0.6",null!==i){e.refshowElm=document.createElement("div"),e.refshowElm.id="refshow_"+f,document.body.appendChild(e.refshowElm);var z=e.refshowElm.style;z.left=s.refshowLeft+"px",z.top=s.refshowTop+"px",z.width=s.refshowWidth+"px",z.minWidth=s.refshowWidth+"px",z.maxWidth=s.refshowWidth+"px",z.height=s.refshowHeight+"px",z.minHeight=s.refshowHeight+"px",z.maxHeight=s.refshowHeight+"px",z.border=s.refshowBorder+"px dotted #cccc78",z.display="none",z.zIndex=""+(l-2),z.position="absolute",z.float="left",z.pointerEvents="none",z.opacity="0.8"}e.setStrings=function(a){null!==q&&(r.innerHTML=a)},e.tick=function(a){if(null!==i){if(a-n>200){n=a;var b=d(g,i,k(),h,j);JSON.stringify(b)!==t&&(u=!0)}if(a-o>60){o=a,m+=1,m>=10&&(m=0);var c=e.refshowElm.style;c.display=m>=5&&m<=6?"inline-block":"none"}}},e.checkDims=function(){return u},e.isMouseMovg=function(){return Date.now()-p<2e3},e.kill=function(){function b(a){for(var b=0;a.firstChild&&b<1e3;)b++,a.removeChild(a.firstChild)}b(q),document.body.removeChild(q),document.body.removeChild(x),null!==i&&document.body.removeChild(e.refshowElm),a.heart.unsubscribe(e)},a.heart.subscribe(e,10,f,!1),e.tick(Date.now())}}(),dombox=function(a,b,c,d){return function(e){function f(a){I.logger.writex({msg:a,prefix:"dombox - "+P,inst:S})}function g(a,b,c){I.trackhub.sendEvent("stgexec","dombox/${"+L+"|*AllPlcmts*}$/"+a,b,c)}function h(a,b){function c(a,b){var c=""+a.className;c.indexOf(b)>=0||(c+=" "+b,a.className=c)}if(null!==la)for(var d=0;d<la.length;d++){var e=la[d];e.name===b&&c(a,e.classID)}}function i(a,b){K(a,b)}function j(a){return"restr"===a||"confined"!==a&&("infif"!==a&&"dref"!==a)}function k(a){function b(a,b,c){var d=b;return null!==c&&(d=c),a.document.getElementById(d)}function c(a,b){return b>=a.length?null:a[b]}function d(a,b){function c(a,b){function c(a,b){var c=!1;return a.forEach(function(a){a===b&&(c=!0)}),c}var d=!0,e=""+a.className,f=e.split(" ");return b.forEach(function(a){!0!==c(f,a)&&(d=!1)}),d}for(var d=[],e=""+b,f=e.split(" "),g=0;g<a.length;g++){var h=a[g];!0===c(h,f)&&d.push(h)}return d}function f(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e.id;"string"==typeof f&&(""!==f&&f.indexOf(b)>=0&&c.push(e))}return c}if("infif"===a)return null;if("restr"===a){var g=Z.document.getElementById(_);return g}if("dref"===a)return b(Z,e.targetTagId,ba);if("sref"===a){var h=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(void 0!==d.classList&&!0===d.classList.contains(b))return d}return null};if(void 0===T.reference)return null;if("unspecified"===T.reference)return null;var i=T.reference,j=i,k=null,l=i.indexOf(".");l>=0&&(j=i.substring(0,l),k=i.substring(l+1));var g=Z.document.getElementById(j);if(null!==g)return g;var m=Z.document.getElementsByClassName(j);return null===k?1===m.length?m[0]:null:(g=h(m,k),null!==g?g:null)}if(void 0===T.refcls)return null;if(void 0===T.refid)return null;if(void 0===T.refidx)return null;var n=!1;"unspecified"!==T.refcls&&(n=!0);var o=!1;"unspecified"!==T.refid&&(o=!0);var p=!1;"unspecified"!==T.refidx&&(p=!0);var q=Z.document.getElementsByTagName("*");if(!0===n){var r=T.refcls.replace(/\./g," "),s=d(q,r);if(1===s.length)return s[0];if(!0===o){var t=f(s,T.refid);return 1===t.length?t[0]:null}return!0===p?c(s,T.refidx):null}if(!0===o){var u=f(q,T.refid);return 1===u.length?u[0]:!0===p?c(u,T.refidx):null}return null}function l(b){function c(){if(null===na)return!1;if(null===Pa)return!1;var a=r(Oa,Ha,Ia);return!0===a.changed&&(oa=a.domElmParams,pa=a.newSign,f(),!0)}function d(a){if("number"!=typeof a)return!1;var b={top:0,bottom:0};if(null!==Y&&(b=Y.getBoundingClientRect()),null!==na){var c=J.genWinInfo(),d=na.getBoundingClientRect(),e=d.top+b.top,f=d.bottom+b.bottom;return!(e-a>c.windowHeight)&&!(f+a<0)}}function e(b){function c(){return void 0!==window.scrollX?window.scrollX:-window.document.body.getBoundingClientRect().left}function d(){return void 0!==window.scrollY?window.scrollY:-window.document.body.getBoundingClientRect().top}if(null===na)return!1;var e=na.getBoundingClientRect(),g=Math.round(e.left),h=Math.round(e.top);!0!==b&&(g+=Math.round(c()),h+=Math.round(d()));var i=!1;return Math.abs(g-La)>a.stage.unitCorrTol&&(La=g,i=!0),Math.abs(h-Ma)>a.stage.unitCorrTol&&(Ma=h,i=!0),!0===i&&f(),i}function g(){function a(a){function b(){return void 0!==window.scrollX?window.scrollX:Math.round(-window.document.body.getBoundingClientRect().left)}function c(){return void 0!==window.scrollY?window.scrollY:Math.round(-window.document.body.getBoundingClientRect().top)}function d(a,c){var d=a.getBoundingClientRect().left+b(),e=d-Da;return Da=d,Math.round(e)}function e(a,b){var d=a.getBoundingClientRect().top+c(),e=d-Ea;return Ea=d,Math.round(e)}var f=b(),g=c(),h=Math.round(f-Fa),i=Math.round(g-Ga);return Fa=f,Ga=g,0!==h?d(a,H)===h?"active":"inactive":0!==i?e(a,H)===i?"active":"inactive":"dontknow"}if("ontop"!==da)return!1;if(null===oa.refElm)return!1;var b=oa.refElm,c=a(b);if("dontknow"===c)return!1;var d=!1;return c!==Ba&&(d=!0),Ba=c,!0===d&&(f(),Ca="active"===Ba),d}if(null===na)return!1;if(b-ta<50)return!1;ta=b,null===ha&&null!==ga||(ea=!0===V||d(ha)),!0===ea&&!0!==fa?i("visibOn"):!0!==ea&&!0===fa&&i("visibOff"),fa=ea;var h=c(),j=g(),k=e(Ca);return!0!==h&&!0!==j&&!0!==k||p(),!0}function m(b){function c(){var a="";return a+="refcls: '"+T.refcls+"'",a+=" - refid: '"+T.refid+"'",a+=" - refidx: '"+T.refidx+"'"}function d(a){function b(a){a.forEach(function(a){ea=!0===a.isIntersecting})}if(void 0===window.IntersectionObserver)return null;var c=new window.IntersectionObserver(b,{threshold:.01});return c.observe(a),c}switch(wa){case"INIT":Pa=o(),ya=b,wa="WAIT_LOOP";break;case"WAIT_LOOP":if(b-ya>a.stage.orderTimeout){xa="reference_timeout",i("lcherr_to",{msg:xa+" - ("+c()+")"}),wa="PARK";break}if(null===(Oa=k(Pa))&&!0===j(Pa))break;var e=r(Oa,Ha,Ia);if(!0===e.domElmParams.error){xa=e.domElmParams.msg;break}if(!0!==e.domElmParams.roomOk){xa="no_room";break}oa=e.domElmParams;var e=q(e.domElmParams);if("ok"!==e.status){xa=e.msg,i("lcherr_ex",{msg:xa+" - ("+c()+")"}),wa="PARK";break}na=e.domBoxElm,p(!0),na.addEventListener("mouseenter",function(){Va=!0,n()}),na.addEventListener("mouseleave",function(){Va=!1,n()}),ga=d(na),w(0),ja=B(),i("lchok",{upper:ja}),za=!0,wa="RUNNING";break;case"RUNNING":if(!0===Aa){xa="dombox_error",i("dmbx_error",{msg:xa+" - ("+c()+")"}),g("oversized","YES"),wa="PARK";break}}}function n(){Qa=!0===Va||!0===Wa?Date.now():0}function o(){function a(){return void 0!==T.refcls&&(void 0!==T.refid&&(void 0!==T.refidx&&("unspecified"!==T.refid||"unspecified"!==T.refcls)))}function b(){return void 0!==T.reference&&"unspecified"!==T.reference}return!0===$?(ca="inpage",da="inspace","restr"):!0===V?"confined":!0===X?"infif":!0===a()?"xref":!0===b()?"sref":e.targetTagId.length>0?"dref":"noref"}function p(a){function b(a,b){var c=parseInt(e.zindex);return!0===isNaN(c)&&(c=null),!0===a||!0===b?null!==c?c+1:"999999":!0===aa||!1===b?null!==c?c-1:"-999999":null!==c?c:null}function c(a,b,c){if(a.width=b.width+"px",a.minWidth=b.width+"px",a.maxWidth=b.width+"px",!0===c)return void(!0===b.expandable&&!0===T.expand?(a.height="1px",a.minHeight="1px",a.maxHeight="1px",va=!0):(a.height=b.height+"px",a.minHeight=b.height+"px",a.maxHeight=b.height+"px",va=!1));!0===va?(a.height="1px",a.minHeight="1px",a.maxHeight="1px"):(a.height=b.height+"px",a.minHeight=b.height+"px",a.maxHeight=b.height+"px")}var d=!1;if(void 0!==a&&(d=!0),null!==na){if(!1!==Na){var f=na.style;return void(f.display="none")}var f=na.style,g=oa;qa=b(g.statTop,g.dynZ),f.zIndex=null===qa?"auto":""+qa,f.left=g.left+"px",f.top=g.top+"px",f.position=g.position,f.display=!0===g.dispON?"inline-block":"none",f.boxShadow=g.boxShadow,c(f,oa,d),f.marginLeft=g.marginLeft+"px",f.marginRight=g.marginRight+"px",f.marginTop=g.marginTop+"px",f.marginBottom=g.marginBottom+"px",f.padding="0px",f.overflow=g.overflow,f.border=g.border,f.float=g.floatpar;var h=J.genWinInfo();g.width>3*h.windowWidth&&(Aa=!0),g.height>3*h.windowHeight&&(Aa=!0),!0!==d&&i("updatePos")}}function q(a){function b(a){window.document.body.appendChild(a)}function d(a,b,d,e,f,g,h){function i(){window.removeEventListener("message",j),window.removeEventListener("unload",i)}function j(a){try{var b=JSON.parse(a.data);"sandbox"===b.type&&("psb"===b.mode||"cnf"===b.mode?window.top.postMessage(JSON.stringify({type:b.type,mode:b.mode,ver:b.ver,sbVer:b.sbVer,divID:b.divID}),"*"):"asn"===b.mode&&window.top.postMessage(JSON.stringify({type:b.type,mode:b.mode,cnt:b.cnt,fbxID:b.fbxID,sbVer:b.sbVer,divID:b.divID}),"*"))}catch(a){}}function k(a,b,d){if(null!==d){var e=new c({hostWnd:a});e.setWrapperElement("");for(var f="",g=0;g<d.length;g++){var h=d[g];f+="."+h.classID+" {"+h.string+"} \n"}e.deployStyle("_fb_dynstl_"+b,f,!1)}}var l=!1;return parseInt(getComputedStyle(d).width.replace("px",""))<e&&(d.style.width=e+"px",l=!0),parseInt(getComputedStyle(d).height.replace("px",""))<f&&(d.style.height=f+"px",l=!0),b.document.body.appendChild(a),b.addEventListener("message",j,!1),b.addEventListener("unload",i,!1),b._fb_data_={},b._fb_data_.ctxID=Math.round(999999999*Math.random()),k(b,g,h),l}function e(a,b,c,d){function e(a,b){var c=[];if(void 0===a.childNodes[0])return c;for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(!(void 0!==e.id&&e.id.indexOf(b)>=0)){var f="dummystring_"+e;f=f.toLowerCase(),f.indexOf("iframe")>0?c.push(e):1!==e.nodeType||c.push(e)}}return c}var f=e(b,d),g=f.length,h=!1,i=!1;if(void 0===f||null===f||0===g)h=!0;else{var j=0;switch(c){case"unspecified":case"first":j=0;break;case"afterfirst":g<1&&(i=!0),j=1;break;case"last":g<1&&(i=!0),h=!0;break;case"beforelast":g<2&&(i=!0),j=g-1;break;default:j=Math.floor(parseInt(c)),isNaN(j)&&(i=!0),j<0&&(i=!0),j>40&&(i=!0)}j<0?i=!0:j>=f.length&&(i=!0)}if(!0===i)return!1;if(!0===h)b.appendChild(a);else{var k=f[j];b.insertBefore(a,k)}return!0}function f(a){for(var b=a.firstChild,c=10;c>0&&(c--,1!==b.nodeType);)if(null===(b=b.nextSibling))return null;for(b=b.nextSibling,c=10;c>0&&(c--,1!==b.nodeType);)if(null===(b=b.nextSibling))return null;return b}function i(a){for(var b=a.lastChild.previousSibling,c=10;c>0&&(c--,1!==b.nodeType);)if(null===(b=b.previousSibling))return null;return b}ma.push("_execDomBox");var j={status:"---",msg:""},k=!1,l=Z.document.createElement("div");if(l.id=Q,null===l)return j.status="error",j.msg="error_creating_dombox_"+P,j;if(null!==la&&h(l,"adbox_frame"),"confined"===Pa)b(l),g("ins_mode","conf");else if("infif"===Pa){var m=d(l,Z,Y,a.width,a.height,ka,la);g("fif_adjusted",!0===m?"YES":"NO"),g("ins_mode","fif")}else{var n,o=T.index;switch(da){case"before":if(null===(n=a.refElm)){k=!0;break}n.parentElement.insertBefore(l,n),g("ins_mode","before");break;case"after":if(null===(n=a.refElm)){k=!0;break}n.parentElement.insertBefore(l,n.nextSibling),g("ins_mode","after");break;case"inspace":if(null===(n=a.refElm)){k=!0;break}n.appendChild(l),g("ins_mode","inspace");break;case"ontop":window.document.body.appendChild(l),g("ins_mode","ontop");break;case"inlist":if(null===(n=a.refElm)){k=!0;break}var p=e(l,n,o,R);!0!==p&&(k=!0),g("ins_mode","inlist");break;case"predef":window.document.body.appendChild(l),g("ins_mode","predef");break;case"fixed":window.document.body.appendChild(l),g("ins_mode","fixed");break;case"default":if(null===(n=a.refElm)){k=!0;break}n.parentElement.insertBefore(l,n.nextSibling),g("ins_mode","default");break;case"first":if(null===(n=a.refElm)){k=!0;break}n.insertBefore(l,n.firstChild),g("ins_mode","first");break;case"afterfirst":if(null===(n=a.refElm)){k=!0;break}var q=f(n);if(null===q){k=!0;break}n.insertBefore(l,q),g("ins_mode","afterfirst");break;case"last":if(null===(n=a.refElm)){k=!0;break}n.appendChild(l),g("ins_mode","last");break;case"beforelast":if(null===(n=a.refElm)){k=!0;break}var q=i(n);if(null===q){k=!0;break}n.insertBefore(l,q),g("ins_mode","beforelast")}}return!0===k?(j.status="error",j.msg="error while executing dombox",j):(j.domBoxElm=l,j.domElmParams=a,j.status="ok",j)}function r(a,b,c){function d(a){var b=0;return JSON.stringify(a,function(a,c){switch(_typeof2(c)){case"object":return b++,b>1?"{}":c;case"string":case"boolean":case"number":return c}})}function e(a,b,c){function d(a){var b={};b.status="ok",b.msg="NA",b.refElm=null,b.position=null,b.expandable=!0,b.statTop=!1;var c={};switch(da){case"before":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_before";break}var d=b.refElm.parentElement;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"after":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_after";break}var d=b.refElm.parentElement;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"inspace":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_inspace";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="absolute";break;case"ontop":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_ontop";break}b.expandable=!1,b.statTop=!0;var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z,!0,Ca),b.position=c.position;break;case"inlist":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_inlist";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"default":if(b.expandable=!1,b.refElm=a,null===b.refElm){!0,b.status="error",
b.msg="could_not_find_default_reference";break}var d=b.refElm.parentElement;e(c,T,d,Z,da),f(c,T,d,Z),c.left=0,c.top=0,b.position="relative";break;case"first":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_first";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"afterfirst":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_afterfirst";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"last":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_last";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative";break;case"beforelast":if(b.refElm=a,null===b.refElm){!0,b.status="error",b.msg="could_not_find_reference_beforelast";break}var d=b.refElm;e(c,T,d,Z,da),f(c,T,d,Z),b.position="relative"}return b.domBoxDims=c,b}function e(a,b,c,d,e){function f(a){return"default"===a||("predef"===a||("fixed"===a||("ontop"===a||("inspace"===a||"inlist"===a))))}var g,h,i={status:"error",msg:"NA"};J.genWinInfo();a.width=0,a.height=0;var j={width:d.innerWidth,height:d.innerHeight};if(null!==c&&(j=c.getBoundingClientRect()),g=j.width,h=j.height,"auto"===b.width)g=j.width;else if(g=parseInt(b.width),!0===isNaN(g))return i.msg="cannot interpret width as number",i;if("unspecified"!==T.xfactor&&(g=g*parseInt(b.xfactor)/100),"unspecified"!==T.maxwidth){var k=parseInt(b.maxwidth);g>k&&(g=k)}if("unspecified"!==T.minwidth){var l=parseInt(b.minwidth);g<l&&(g=l)}if("auto"===b.height)h=!0===f(e)?j.height:"unspecified"!==T.formfactor?g*parseInt(b.formfactor)/100:.66*g;else if(h=parseInt(b.height),!0===isNaN(h))return i.msg="cannot interpret height as number",i;if("unspecified"!==T.yfactor&&(h=h*parseInt(b.yfactor)/100),"unspecified"!==T.maxheight){var m=parseInt(b.maxheight);h>m&&(h=m)}if("unspecified"!==T.minheight){var n=parseInt(b.minheight);h<n&&(h=n)}return a.width=Math.round(g),a.height=Math.round(h),i.status="ok",i}function f(a,b,c,d,e,f){var g,h,i,j={status:"error",msg:"NA"};J.genWinInfo();a.left=0,a.top=0,a.position="x";var k=c.getBoundingClientRect();if(g=k.left,h=k.top,i="x",!0===e)if(!0===f)i="fixed";else{var l=0,m=0;"relative"===getComputedStyle(window.document.body).position&&(l=parseInt(getComputedStyle(window.document.body)["margin-left"].replace("px","")),m=parseInt(getComputedStyle(window.document.body)["margin-top"].replace("px",""))),g=(k.width-a.width)/2+k.left+(window.pageXOffset-l),h=(k.height-a.height)/2+k.top+(window.pageYOffset-m),i="absolute"}else{switch(b.xalign){case"left":g=0;break;case"center":g=(k.width-a.width)/2;break;case"right":g=k.width-a.width;break;default:g=0}switch(b.yalign){case"top":h=0;break;case"center":h=(k.height-a.height)/2;break;case"bottom":h=k.height-a.height;break;default:h=0}}return a.left=Math.round(g),a.top=Math.round(h),a.position=i,j}var g=J.genWinInfo(),h={};if(h.error=!1,h.msg="NA","confined"===Pa)return h.left=0,h.top=0,h.width=window.innerWidth,h.height=window.innerHeight,h.spotInTh=0,h.spotElmTop=0,h.spotLength=0,h.rowPixels=0,h.rowIdx=0,h.roomOk=!0,h.refElm=null,h.position="absolute",h.expandable=!1,h.marginLeft=0,h.marginRight=0,h.marginTop=0,h.marginBottom=0,h.dynZ=null,h.statTop=!1,h.dispON=!0,h.overflow="hidden",h.border="0",h;if("infif"===Pa){var i=Z.innerWidth;"auto"!==T.width&&(i=parseInt(T.width));var j=Z.innerHeight;return"auto"!==T.height&&(j=parseInt(T.height)),h.left=0,h.top=0,h.width=i,h.height=j,h.spotInTh=0,h.spotElmTop=0,h.spotLength=0,h.rowPixels=0,h.rowIdx=0,h.roomOk=!0,h.refElm=null,h.position="absolute",h.expandable=!1,h.marginLeft=0,h.marginRight=0,h.marginTop=0,h.marginBottom=0,h.dynZ=null,h.statTop=!1,h.dispON=!0,h.overflow="hidden",h.border="0",h}h.spotable=!1,"predef"===T.position&&"unspecified"!==T.spotlength&&parseInt(T.spotlength)>0&&(h.spotable=!0),h.shareable=!1,"fixed"===T.position&&!0===T.shared&&(h.shareable=!0),h.refElm=null,h.position="relative",h.expandable=!0,h.floatpar=T.floatpar,h.marginLeft=parseInt(T.marginleft),h.marginRight=parseInt(T.marginright),h.marginTop=parseInt(T.margintop),h.marginBottom=parseInt(T.marginbottom),h.dynZ=null,h.statTop=!1,h.dispON=!0,h.overflow=!0===W?"hidden":"visible",!0===U&&(h.border="0");var k="980";"unspecified"!==T.clearance&&(k=parseInt(T.clearance));var l="40";"unspecified"!==T.xmargin&&(l=parseInt(T.xmargin));var m=0;"unspecified"!==T.rowidx?m=parseInt(T.rowidx):void 0!==T.row&&!0!==isNaN(parseInt(T.row))&&(m=parseInt(T.row)-1);var n=g.physicalHeight,o=n;"unspecified"!==T.vertspacing&&(o=parseInt(T.vertspacing)*n/100);var p=0;"unspecified"!==T.vertoffset&&(p=parseInt(T.vertoffset)*n/100);var q=0;"unspecified"!==T.spotlength&&(q=parseInt(T.spotlength)*n/100);var r,s=Math.floor(g.bodyHeight/o),t=g.windowWidth,u=g.windowHeight,v=(t-k)/2,w=0,x=0,y=0,z=!0,A={},B=6,C=0,D=0;switch(ca){case"left":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=(u-j)/2,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+(o-j)/2+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}if(y+j,v-(i+l)>=0){x=v-l,w=x-i;break}if((r=v-i)>0){x=v-r,w=x-i;break}w=v-i,x=v;break;case"right":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=(u-j)/2,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+(o-j)/2+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}if(y+j,v-(i+l)>=0){w=t-v+l,x=w+i;break}if((r=v-i)>0){w=t-v+r,x=w+i;break}w=t-v,x=w+i;break;case"center":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=(u-j)/2,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=p+m*o,m>s&&(z=!1),h.position="absolute"}y+j,w=(t-i)/2,x=w+i;break;case"bottom":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=u-B-j,h.position="fixed",y+j,w=(t-i)/2,x=w+i;break;case"topleft":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=0+B+p,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+B+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}y+j,w=B,x=w+i;break;case"topright":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=0+B+p,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+B+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}y+j,w=window.document.body.clientWidth-B-i,x=w+i;break;case"botleft":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=u-B-j,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+u-B-j+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}y+j,w=B,x=w+i;break;case"botright":e(A,T,null,Z,da);var i=A.width,j=A.height;if(h.refElm=null,h.expandable=!0,"fixed"===da)y=u-B-j,h.position="fixed";else{if("predef"!==da){h.error=!0,h.msg="incompatible_position_params";break}y=m*o+u-B-j+p,C=y-(o-j)/2,D=(o-j)/2,m>s&&(z=!1),h.position="absolute"}y+j,w=window.document.body.clientWidth-B-i,x=w+i;break;case"inpage":var E=d(a);if("error"===E.status){h.error=!0,h.msg="in_page_insertion_not_possible_now / "+E.msg;break}h.refElm=E.refElm,h.position=E.position,h.expandable=E.expandable,h.statTop=E.statTop,w=E.domBoxDims.left,y=E.domBoxDims.top,i=E.domBoxDims.width,j=E.domBoxDims.height}if(h.width=Math.round(i),h.height=Math.round(j),h.left=Math.round(w+parseInt(T.xoff)),h.top=Math.round(y+parseInt(T.yoff)),h.spotInTh=C,h.spotElmTop=D,h.spotLength=q,h.rowPixels=o,h.rowIdx=m,h.roomOk=z,!0===h.spotable)switch(b){case"BEFORE_SPOT":h.position="absolute";break;case"IN_SPOT":h.top=h.spotElmTop,h.position="fixed";break;case"AFTER_SPOT":h.top=h.top+h.spotLength,h.position="absolute";break;default:h.position="absolute"}else if(!0===h.shareable)switch(c){case"NOT_IN_SHOW":h.dynZ=null,!1===ra&&(h.dispON=!1);break;case"IN_SHOW":h.dynZ=!0,h.dispON=!0,ra=!0;break;default:h.dynZ=null,!1===ra&&(h.dispON=!1)}else"fore"===Ka?(h.dispON=!0,h.dynZ=!0):"back"===Ka?(h.dispON=!1,h.dynZ=!1):(h.dispON=!0,h.dynZ=null);!0===Ja&&(h.dispON=!1),!0===sa&&(h.dispON=!1);var F=T.xtrim,G=h.width/2*.9;F>=G&&(F=G),F<0&&(F=0);var H=T.ytrim,I=h.height/2*.9;return H>=I&&(H=I),H<0&&(H=0),h.left+=Math.round(F),h.top+=Math.round(H),h.width-=Math.round(2*F),h.height-=Math.round(2*H),h}var f={status:"ok",domElmParams:null,changed:!1,msg:null};f.domElmParams=e(a,b,c);var g=d(f.domElmParams);return g!==pa&&(f.changed=!0,f.newSign=g),!0===f.domElmParams.error&&(f.status="error",f.msg=f.domElmParams.msg),f}function s(){function a(a){if(null!==a)for(var b=0;a.firstChild&&b<1e3;)b++,a.removeChild(a.firstChild)}function b(a){null!==a&&a.parentNode.removeChild(a)}E(),a(na),b(na),na=null,Na=!0,ma.push("_deleteDomBox")}function t(){ma.push("placeMedia"),!1===Na&&!0!==ua&&(!0===va&&(va=!1),p(),ua=!0)}function u(){ma.push("removeMedia"),!1===Na&&(sa=!0,p())}function v(){}function w(a){null!==oa&&!1===Na&&!0===l(Date.now())&&(!0===oa.spotable&&z(a),!0===oa.shareable&&A(a))}function x(){null!==oa&&!1===Na&&p()}function y(){null!==oa&&!1===Na&&p()}function z(a){var b=oa.spotInTh,c=b+oa.spotLength,d=null;switch(Ha){case"INIT":if(a>c){d="AFTER_SPOT",f();break}if(a<b){d="BEFORE_SPOT",f();break}d="IN_SPOT",f();break;case"BEFORE_SPOT":if(a>b){d="IN_SPOT",f();break}break;case"IN_SPOT":if(a<b){d="BEFORE_SPOT",f();break}if(a>c){d="AFTER_SPOT",f();break}break;case"AFTER_SPOT":if(a<c){d="IN_SPOT",f();break}}null!==d&&d!==Ha&&(Ha=d,p())}function A(a){var b=Math.floor(a/oa.rowPixels),c=oa.rowIdx;switch(Ia){case"INIT":if(b===c){Ia="IN_SHOW",p(),f();break}Ia="NOT_IN_SHOW",p(),f();break;case"IN_SHOW":if(b!==c){Ia="NOT_IN_SHOW",p(),f();break}break;case"NOT_IN_SHOW":if(b===c){Ia="IN_SHOW",p(),f();break}}}function B(){if(!0===V)return!0;if(null===na)return!0;var a=na.getBoundingClientRect(),b={top:0,bottom:0};null!==Y&&(b=Y.getBoundingClientRect());var c=a.top+b.top,d=window.top.document.body;return c<(parseInt(getComputedStyle(d).height.replace("px",""))+parseInt(getComputedStyle(d)["margin-top"].replace("px","")))*ia/100}function C(a){var b=!1;switch(a-Qa<1e4&&(b=!0),Ra){case"INIT":if(!0!==O()){Ra="NOT_SHOWING";break}if(!0===Ya){Ra="NOT_SHOWING";break}if(!0!==b){Ra="NOT_SHOWING";break}Ra="BEFORE_SHOWING";break;case"NOT_SHOWING":if(!0===b&&!0!==Ya){Sa=a,Ra="BEFORE_SHOWING";break}break;case"BEFORE_SHOWING":if(!0!==O()){Ra="NOT_SHOWING";break}if(!0===Ya){Ra="NOT_SHOWING";break}if(!0===F()){Ra="NOT_SHOWING";break}if(!0!==b){Ra="NOT_SHOWING";break}if(a-Sa>400){D(),Ta=a,Ra="SHOWING";break}break;case"SHOWING":if(!0!==O()){E(),Ra="NOT_SHOWING";break}if(!0===G())break;if(!0===Ya){E(),Ra="NOT_SHOWING";break}if(!0===F()){E(),Ra="NOT_SHOWING";break}if(a-Ta>1e4){E(),Ra="NOT_SHOWING";break}if(!0!==b){Sa=a,Ra="AFTER_SHOWING";break}break;case"AFTER_SHOWING":if(!0!==O()){E(),Ra="NOT_SHOWING";break}if(!0===Ya){E(),Ra="NOT_SHOWING";break}if(!0===F()){E(),Ra="NOT_SHOWING";break}if(!0===b){Ra="SHOWING";break}if(a-Sa>200){E(),Ra="NOT_SHOWING";break}}}function D(){if(null!==na){var a={heart:I.heart,abstrElmID:P,domBoxElm:na,confined:V,refElm:Oa,hostElm:Y,genWinInfo:J.genWinInfo};if(null!==ba&&"dref"!==Pa&&(a.hostElm=window.document.getElementById(ba)),null!==(Ua=new b(a))){var c=M();null!==Ua&&(Ua.setStrings(c),Xa=!0)}}}function E(){null!==Ua&&(Ua.kill(),Ua=null,Xa=!1)}function F(){return null!==Ua&&Ua.checkDims()}function G(){return null!==Ua&&Ua.isMouseMovg()}var H=this,I=(e.master,e.comps),J=(e.bootParams,e.cllBks),K=e.msgClbk,L=e.plcmID,M=e.ovlStrClbk,N=e.enableOvr,O=e.mayShowOvrNow,P=e.abstrElmID,Q=e.domElmId,R=e.domElmIdPrfx,S=Math.round(999*Math.random());f();var T=(new d,e.attributes),U=e.noBorder,V=e.confined,W=e.isAdFrame,X=e.insInFIF,Y=e.hostElm,Z=e.hostWnd,$=e.restrLoc,_=e.pntDomElmID,aa=e.ovrl,ba=null;"string"==typeof e.contFrmTagId&&"NA"!==e.contFrmTagId&&""!==e.contFrmTagId&&(ba=e.contFrmTagId);var ca=""+T.location,da=""+T.position,ea=!1,fa=!1,ga=null,ha=null;"number"==typeof T.voff&&T.voff>0&&(ha=Math.abs(T.voff));var ia=I.quickVars.getParam("upperThrshPrc",a.smartunits.upperThrshPrc),ja=!0,ka=e.stylename,la=e.stylesnippets,ma=[],na=null,oa=null,pa="",qa=null,ra=!1,sa=!1,ta=0,ua=!1,va=!1,wa="INIT",xa="NA",ya=0,za=!1,Aa=!1,Ba="dontknow",Ca=!1,Da=-1e3,Ea=-1e3,Fa=-1e3,Ga=-1e3,Ha="INIT",Ia="INIT",ra=!1,Ja=!1,Ka=null,La=0,Ma=0,sa=!1,Na=!1,Oa=null,Pa=null,Qa=0,Ra="INIT",Sa=0,Ta=0,Ua=null,Va=!1,Wa=!1,Xa=!1,Ya=!1;Z.document.body.addEventListener("keydown",function(a){!0===a.ctrlKey&&(Ya=!0)}),Z.document.body.addEventListener("keyup",function(a){!0!==a.ctrlKey&&(Ya=!1)}),this.tick=function(a){!1===Na&&(m(a),!0===l(a)&&!0===N&&C(a))},this.isReady=function(){return za},H.isOvrOn=function(){return Xa},this.setHover=function(a){Wa=a,n()},H.getDomElm=function(){return na},H.getHostWnd=function(){return Z},H.isVisib=function(){return ea},H.getDomParams=function(){return oa},H.getDomBoxStatus=function(){return{width:oa.width,height:oa.height,dispON:oa.dispON,compressed:va,pinned:Ca}},H.getCurZIndex=function(){return qa},this.newScroll=function(a){return w(a)},H.placeMedia=function(){return t()},H.removeMedia=function(){return u()},H.enableMedia=function(){return v()},H.delDomBox=function(){s()},H.hideDomBox=function(){Ja=!0,x()},H.setForeBack=function(a){Ka=a,y()}}}(config,overlaywnd,domtool,textools),adpost=function(a,b,c,d){return function(c){function e(a){E.logger.writex({msg:a,prefix:S,inst:U})}function f(a){E.logger.writex({tgl:!0,msg:a,prefix:"unit:"+c.unitName+" (adpst_exec)"})}function g(a,b){E.logger.debugAlert(a,b)}function h(a,b,c){return{domain:"adposts",event:a,data:b,evOpts:c}}function i(a,b,c){V.seb("/"+qa+a,b,c),V.seb("/*AllAdPosts*/"+(!0===sa?R:"dmb")+a,b,c)}function j(a,b,c){function d(a){return a<10?"0"+a:""+a}return"_fb_ap_"+a+"_"+d(b)+"_"+c}function k(a){if(!0!==Sa){Sa=!0;var c="Message:\n";c+=a.message+"\n",void 0!==a.stack&&(c+="\nStack:\n",c+=a.stack.toString()+"\n\n");var d={origin:S,red:b.analytics.emailDefRed,from:"FMP_LOOP",subject:"exception_adpost",text:c};E.mailmaster&&E.mailmaster.sendObj(d),g("AdPost: _catchCallback",d)}}function l(){e(),Ca=document.createElement("div"),Ca.id=S,n(!1)}function m(a){e();var b=null;void 0!==a.firstChild&&(b=a.firstChild),a.insertBefore(Ca,b)}function n(a){function b(a){var b={};b.show=a,b.width=Y,b.height=Z,b.left=0,b.top=0,b.position="absolute",b.curZIndex="auto";var c=I.getCurZIndex();null!==c&&(b.curZIndex=""+c),Ra=b}b(a);var c=Ca.style;c.left=Ra.left+"px",c.top=Ra.top+"px",c.width=Ra.width+"px",c.height=!0===_?"1px":Ra.height+"px",c.position=Ra.position,c.zIndex=""+Ra.curZIndex,c.pointerEvents="none",!0===Ra.show?c.display="inline":c.display="none"}function o(){za=!0}function p(){function a(a){for(var b=0;a.firstChild&&b<1e3;)b++,a.removeChild(a.firstChild)}null!==Ca&&(e(),a(Ca),aa.removeChild(Ca))}function q(a,b,c){Y=a,Z=b,_=c}function r(a){switch(!0!==Ba&&a-Aa>5e3&&(e(),A.fireEvent("adp_running",{unitName:pa}),Ba=!0),Ea){case"INIT":Ga=a,Ia=a,y(W,"lnch",{delay:a-K}),z(W,"lnch",{delay:a-K}),y(W,"start"),z(W,"start"),i("","_s20 start"),Ea="SEGL";case"SEGL":var c=v(Ha,Ka,a);if(Da={segmIdx:Ha,segmName:c.name,ssName:c.ssName,vast:c.vastSeg,logic:c.logic,msg:c.msg},"eov"===c.status||"delivered"===c.status){A.fireEvent("mediaover",{unitfbxID:Q}),!0!==Ka&&(y(W,"nocnt"),z(W,"nocnt")),Fa=!1,Ea="WES";break}if("disabled"===c.status||"skipped"===c.status||"avoided"===c.status){var d={unitfbxID:Q,adpID:T,segmIdx:Da.segmIdx,segmName:Da.segmName,ssName:Da.ssName,vast:Da.vast,logic:Da.logic,reason:Da.msg};A.fireEvent("segm_skipped",d),f("segment "+Da.segmName+" skipped - reason: "+c.msg),Ha++;break}if("..."===c.status){if(a-Ia<b.media.segTimeOut)break;var g="segment TIMEOUT: "+Da.segmName+" - msg: "+Da.msg;e(),J(g);var d={unitfbxID:Q,adpID:T,segmIdx:Da.segmIdx,segmName:Da.segmName,ssName:Da.ssName,vast:Da.vast,logic:Da.logic,reason:Da.msg};A.fireEvent("segm_to",d),f("segment "+Da.segmName+" timed out - reason: "+Da.msg),i("","_s33 segm_to",{res:"hi"}),Ha++;break}Ea="WMMR";case"WMMR":if(!0!==Ja.isReady())break;var d={unitfbxID:Q,adpID:T,segmIdx:Da.segmIdx,segmName:Da.segmName,ssName:Da.ssName,vast:Da.vast,logic:Da.logic};A.fireEvent("new_segm",d),f("segment "+Da.segmName+" launched"),i("","_s30 segm"),Ea="WCD";break;case"WCD":if(!0===$a){Ja.unload(),Ea="EXT";break}if(!0!==Ja.isContentDef())break;var c=x();if("ok"===c.status&&!0===c.content)La=Math.round((a-c.contVldTm-Ga)/100)/10,null===Ma&&(Ma=La),Na=a,u(a,c);else;Ea="WSE";break;case"WSE":if(!0===$a){Ja.unload(),Ea="EXT";break}if(!0!==Ja.isContentDef()){La=null,Na=null,t(),Ea="WCD";break}if(!0===Ja.isBusy())break;Ka=Ja.isSegComplete();var d={unitfbxID:Q,adpID:T,segmIdx:Da.segmIdx,segmName:Da.segmName,segmComp:Ka};A.fireEvent("segm_clsd",d),f("segment "+Da.segmName+" unloaded - status: "+(!0===Ka?"content":"no_content")),Ha++,Ia=a,Ea="SEGL";break;case"WES":if(!0!==$a)break;null!==Ja&&Ja.unload(),Ea="EXT";case"EXT":if(null!==Ja&&!0!==Ja.getUnloadStat())break;p(),Ia=a,_a=!0,A.fireEvent("adp_end",{adpName:qa,adpIdx:C,adpID:T,unitfbxID:Q}),Ja=null,B.fireEvent("adp_removeinst",T),V.rap(),Ea="PARK"}}function s(){function a(){for(var a=[],b=0;b<120;b++)if(b%4==0){var c={thrsh:b,sent:!1};a.push(c)}return a}function b(a){for(var b=0;b<40;b++){var c=l[b];void 0!==c&&(!0!==c.sent&&(a<c.thrsh||(i("/_s90 user_actv/_s10 visib_time_dist",c.thrsh,{scl:"mediumtimes"}),e(),c.sent=!0)))}}var c=this,d=!1,f=!1,g="INIT",h=0,j=0,k=0,l=a();c.run=function(a){f=a},c.tick=function(a){if(!0===f)switch(g){case"INIT":g="NONV";break;case"NONV":if(!0!==d)break;h++,1===h?(e(),i("/_s90 user_actv","_s10 frst_visib")):h>1&&(e(),i("/_s90 user_actv","_s11 re_visib")),j=a,g="YESV";break;case"YESV":if(!0!==d){g="NONV";break}if(a-j<1e3)break;k+=a-j,j=a,b(Math.round(k/1e3))}},c.setVisibilty=function(a){d=a},c.getVisibilty=function(){return d},c.getAccVisibTime=function(){return Math.round(k/1e3)}}function t(){!0===Oa&&(Oa=!1,Pa=null,ab=null,bb=0,i("","_s32 segm_cont_void",{res:"hi"}))}function u(a,b){if(!0!==Oa){Oa=!0,ab=a,Pa=Math.round(999999999999*Math.random());var c={segRetInfo:b,segmIdx:Ha,contID:Pa,contTime:La};if(y(W,"cnt",c),z(W,"cnt",c),!0!==Qa){Qa=!0,!0===b.active&&e(),A.fireEvent("adp_content",{unitName:pa,active:b.active,vast:b.vast,logic:b.logic}),i("","_s31 segm_cont"),i("/_s10 cont/_s10 by_adp_idx",C),i("/_s10 cont/_s20 by_seek_time",Ma,{scl:"mediumtimes"}),i("/_s10 cont/_s30 by_seg_idx",Ha);i("/_s10 cont/_s40 by_node",b.tagName.replace(b.sourcesetName+"_",""));var d="";!0===b.vast?d+="/vast":d+="/disp",!0===b.active?d+="/active":d+="/passive",i("/_s10 cont/_s50 by_src_type",d);var f="wf";"bd"===b.logic&&(f="bd"),i("/_s10 cont/_s60 by_logic",f),H.fireLdrEvt("/_s60 adpost","_s20 cont")}}}function v(b,d,f){var g,h={status:"error",msg:"NA",name:"NA",ssName:"NA",vastSeg:null,logic:"NA"};if(b>=D.segments.length)return h.status="eov",h.msg="end_of_media",h;var i=D.segments[b];if(void 0===i)return h;if(null===i)return h;if(h.name=i.name,h.ssName=i.attributes.sourceset,!0===i.attributes.backup&&!0===d)return h.status="delivered",h.msg="delivered",h;if(!0!==i.attributes.enabled)return e(),h.status="disabled",h.msg="disabled",h;e();var j=E.sourceadmin.getMdType(i.attributes.sourceset);if(null===j)return h.status="...",h.msg="ss_not_yet_available",h;if(i.mdType=j,i.packId=E.sourceadmin.getPackId(i.attributes.sourceset),i.segmType=E.sourceadmin.getSegmType(i.attributes.sourceset),h.logic=i.segmType,"bd"===i.segmType){var l=E.bdcnxhub.gms();if("..."===l)return h.status="...",h.msg="bm_not_ready",h;if("ok"!==l)return e(),h.status="avoided",h.msg="bdm_error",h}if("vid"===i.mdType?h.vastSeg=!0:h.vastSeg=!1,"vid"===i.mdType){if("unspecified"!==i.attributes.vastdevice&&(ua=i.attributes.vastdevice),H.loadVastLibs(ba,ua),"fb"!==ua){if(void 0===ba.jwplayer||null===ba.jwplayer)return h.status="...",h.msg="jw_not_available",h;ba.jwplayer.key=gb}wa="html5",e()}var m=w(i.attributes,Ra.width,Ra.height);m.status;var n=(g={master:A,adPostContElm:Ca,unitDomElm:aa,hostWnd:ba,myUnitObj:I,comps:E,cllBks:H,plcmParams:F,bootParams:G,startTime:K,stageID:L,sectID:M,unitID:N,partID:O,assetID:P,unitName:pa,smart:sa,adpID:T,adpName:qa,segmentdata:i,natFormat:i.attributes.natformat,centscrn:D.attributes.centscrn,mdType:i.mdType,packId:i.packId,segmType:i.segmType,adPostWidth:Ra.width,adPostHeight:Ra.height,segmWidth:m.width,segmHeight:m.height,unitY:$,userval:c.userval,getActFlags:c.getActFlags,debugVars:c.debugVars,addLogLine:c.addLogLine,secProt:c.secProt,promolinkuri:c.promolinkuri,logolinkuri:c.logolinkuri,segmIdx:b,env:c.env,IE:c.IE,bdcnxhub:E.bdcnxhub,sourceadmin:E.sourceadmin,macroproc:E.macroproc,logger:E.logger,beamCannon:E.beamCannon,accbeam:E.accbeam,dtomanager:E.dtomanager,heart:E.heart,tracker:E.tracker,myMgrfbxAttnID:ja,catchCallback:k,main_wrapper_id:S,internalContainer:"",versionFolder:c.bootParams.versionFolder,versionTag:c.bootParams.versionTag,baseUrl:c.bootParams.baseUrl,placementId:c.bootParams.placementId,unitfbxID:Q,vastDevice:ua,hasFlash:va,primaryMethod:wa,cost:ca,onsold:da,hostDomain:c.bootParams.hostDomain,hostPageUrl:c.bootParams.hostPageUrl,hostPageTitle:c.bootParams.hostPageTitle,stageName:ka,stageAttributes:la,activeLayout:ma,ntvfrmts:na,sectionName:oa},_defineProperty(g,"unitName",pa),_defineProperty(g,"adpName",qa),_defineProperty(g,"adPostContID",S),_defineProperty(g,"segmentName",i.name),_defineProperty(g,"unitNumID",ra),_defineProperty(g,"priority",ta),_defineProperty(g,"clientID",c.clientID),_defineProperty(g,"imprID",c.imprID),_defineProperty(g,"accChnID_stage",W),_defineProperty(g,"accChnID_unit",X),_defineProperty(g,"stylename",ga),_defineProperty(g,"stylesnippets",ha),_defineProperty(g,"waitopts",ia),g);return Ja=new a(n),h.status="ok",h.msg="launched",h}function w(a,c,d){var e,f,g={status:"ok",msg:"",width:null,height:null};if("auto"!==a.width)e=parseInt(a.width);else{e=c,"unspecified"!==a.xfactor&&(e=c*parseInt(a.xfactor)/100);var h=c*(1+b.stage.secMaxFactor/100);if(e>h&&(e=h,g.msg="adpost_width_clamped_for_safety",g.status="warning"),"unspecified"!==a.maxwidth){var i=parseInt(a.maxwidth);e>i&&(e=i)}if("unspecified"!==a.minwidth){var j=parseInt(a.minwidth);e<j&&(e=j)}}if("auto"!==a.height)f=parseInt(a.height);else{f=d,"unspecified"!==a.yfactor&&(f=d*parseInt(a.yfactor)/100);var k=d*(1+b.stage.secMaxFactor/100);if(f>k&&(f=k,g.msg="adpost_height_clamped_for_safety",g.status="warning"),"unspecified"!==a.maxheight){var l=parseInt(a.maxheight);f>l&&(f=l)}if("unspecified"!==a.minheight){var m=parseInt(a.minheight);f<m&&(f=m)}}return g.width=Math.round(e),g.height=Math.round(f),g}function x(){try{return Ja.getContStatus()}catch(a){}return{status:"unknown"}}function y(a,b,c){var d={event:b,group:"seek_adp",ver:100,data:{adpID:T}},e=d.data;switch(b){case"inst":e.untID=N,e.cst=ca>0?ca:"NA",e.ons=da?"1":"0",e.adpnam=qa;break;case"lnch":e.dly=Math.round(c.delay/1e3);break;case"start":break;case"cnt":e.cntID=c.contID,e.sgmID=c.segRetInfo.segmentID,e.sgmnam=c.segRetInfo.segmName,e.tagnam=c.segRetInfo.tagName,e.nodenam=c.segRetInfo.nodeName,e.vast=c.segRetInfo.vast?"1":"0",e.actv=c.segRetInfo.active?"1":"0",e.log=c.segRetInfo.logic,e.clprc=c.segRetInfo.clPrc>0?c.segRetInfo.clPrc:"NA",e.idx=c.segmIdx,e.ctm=c.contTime>0?c.contTime:"NA";break;case"nocnt":break;case"tick_un":e.cntID=c.contID,e.tmval=c.tmval,e.tkidx=c.tickIdx}V.sap(a,d)}function z(a,b,c){var d=T,e=qa;!0!==sa&&(e=pa+"_ap"+(C<10?"0"+C:""+C)+"_"+R);var f={event:b,group:"seek_unit",ver:100,data:{untID:d,untnam:e}},g=f.data;switch(g.cst=ca>0?ca:"NA",g.ons=da?"1":"0",b){case"inst":g.sctID=M;break;case"lnch":g.cst=ca>0?ca:"NA",g.ons=da?"1":"0",g.dly=Math.round(c.delay/1e3);break;case"start":break;case"cnt":g.cntID=c.contID,g.sgmID=c.segRetInfo.segmentID,g.sgmnam=c.segRetInfo.segmName,g.tagnam=c.segRetInfo.tagName,g.nodenam=c.segRetInfo.nodeName,g.vast=c.segRetInfo.vast?"1":"0",g.actv=c.segRetInfo.active?"1":"0",g.log=c.segRetInfo.logic,g.clprc=c.segRetInfo.clPrc>0?c.segRetInfo.clPrc:"NA",g.idx=c.segmIdx,g.ctm=c.contTime>0?c.contTime:"NA";break;case"nocnt":break;case"tick_un":g.cntID=c.contID,g.tmval=c.tmval,g.tkidx=c.tickIdx}V.sap(a,f)}var A=this,B=c.master,C=c.adPostIdx,D=c.adpostdata,E=c.comps,F=c.plcmParams,G=c.bootParams,H=c.cllBks,I=c.myUnitObj,J=(E.tracker,H.addLogLine),K=c.startTime,L=(c.debugVars,Date.now(),c.stageID),M=c.sectID,N=c.unitID,O=c.partID,P=c.assetID,Q=c.unitfbxID,R="nrm";!0===D.attributes.premium?R="prm":!0===D.attributes.filler&&(R="fil");var S=j(Q,C,R),T=Math.round(999999999999*Math.random()),U=Math.round(999*Math.random());e();var V=new d({comps:E,assembleFunct:h}),W=c.accChnID_stage,X=c.accChnID_unit,Y=0+c.unitWidth,Z=0+c.unitHeight,$=0+c.unitY,_=c.compressed,aa=c.unitDomElm,ba=c.hostWnd,ca=c.cost,da=c.onsold,ea=b.smartunits.defSeekTime;!0!==isNaN(parseInt(D.attributes.seektime))&&(ea=parseInt(D.attributes.seektime)),ea>b.smartunits.maxSeekTime&&(ea=b.smartunits.maxSeekTime),ea<b.smartunits.minSeekTime&&(ea=b.smartunits.minSeekTime);var fa=b.smartunits.defPlayTime;!0!==isNaN(parseInt(D.attributes.playtime))&&(fa=parseInt(D.attributes.playtime)),fa>b.smartunits.maxPlayTime&&(fa=b.smartunits.maxPlayTime),fa<b.smartunits.minPlayTime&&(fa=b.smartunits.minPlayTime);var ga=c.stylename,ha=c.stylesnippets,ia=c.waitopts,ja=(c.refElmId,c.myMgrfbxAttnID),ka=c.stageName,la=c.stageAttributes,ma=c.activeLayout,na=c.ntvfrmts,oa=c.sectionName,pa=c.unitName,qa=D.name,ra=c.unitNumID,sa=c.smart,ta=c.priority;H.fireLdrEvt("/_s60 adpost","_s10 inst");var ua=c.bootParams.vastDevice,va=c.bootParams.hasFlash,wa="html5";y(W,"inst"),z(W,"inst");var xa=0,ya=!1,za=!1,Aa=Date.now(),Ba=!1,Ca=null,Da={},Ea="INIT",Fa=!0,Ga=null,Ha=0,Ia=null,Ja=null,Ka=!1,La=null,Ma=null,Na=null,Oa=!1,Pa=null,Qa=!1,Ra={},Sa=!1,Ta=!1,Ua=0,Va=!1,Wa=!1,Xa=0,Ya=!1,Za=!1,$a=!1,_a=!1,ab=null,bb=0,cb={},db=!1,eb=0,fb=new s,gb="Ui9XB1lm1DDnVlOsaKrEBP7NrOg03ZuDqbSv3w==";A.fireEvent=function(a,b){switch(a){case"mediaready":Ta=!0,Ua=Date.now();break;case"cont_expd":i("","_s45 cnt_exp"),f("cnt_exp");break;case"cont_clsd_befx":i("","_s46 cnt_clsd_befx"),f("cnt_clsd_befx");break;case"cont_clsd_aftx":i("","_s47 cnt_clsd_aftx"),f("cnt_clsd_aftx");break;case"adImpression":Va=!0;break;case"adImprEnd":Wa=!0;break;case"click":var c=Date.now()-xa,d={adpName:qa,delay:c};B.fireEvent("adp_click",d),i("/_s90 user_actv","_s40 click",{res:"max"}),i("/_s90 user_actv/_s20 click_time_dist",Math.round(c/1e3),{res:"max",scl:"mediumtimes"});break;case"hoverOn":db=!0,eb=Date.now();break;case"hoverOff":db=!1,eb=0;break;case"error_mediacont":case"whitesp":ya=!0;break;case"tryingsource":cb=b}B.fireEvent(a,b)},A.fireEvent("adp_start",{adpName:qa,adpIdx:C,adpID:T,unitfbxID:Q}),A.getContStatus=function(){return x()},A.getConTm=function(){return La},A.freeze=function(){o()},A.render=function(a){if(!1===za)return n(a)},A.destroy=function(){return p()},A.updateContDims=function(a,b,c,d){!1===za&&(q(a,b,c),n(d))},A.isReady=function(){return Ta},A.goFw=function(){!1===za&&(Ja.placeMedia(),xa=Date.now(),fb.run(!0),A.fireEvent("adp_gofw",{adpName:qa,adpIdx:C,adpID:T,unitfbxID:Q}),i("","_s40 gofw"),i("/_s90 user_actv","_s01 gofw (ref)"),f("adp gofw - "+qa+" ("+A.getLastTagName()+")"))},A.isSeekTime=function(){return!1!==za||Ya},A.isPlayOver=function(){return!1!==za||Za},A.getNetShowTime=function(){return fb.getAccVisibTime()},A.isAdImprOn=function(){return Va},A.isAdImprEnd=function(){return!1!==za||Wa},A.exit=function(){$a=!0,fb.run(!1)},A.isBusy=function(){return!1===za&&Fa},A.isHover=function(){return db},A.getExitStat=function(){return!1!==za||_a},A.getName=function(){return qa},A.getNameExt=function(){var a=T%999;return a<10?a="00"+a:a<100&&(a="0"+a),qa+"-"+a},A.getLastTagName=function(){return null===Ja?"NA_adp":Ja.getLastTagName()},A.getInstId=function(){return T},A.getContId=function(){return S},A.isError=function(){return!1!==za||ya},A.getCurSrcInfo=function(){return!1!==za&&(cb.sourceName="error",cb.sourcesetName="error"),cb},A.setVisib=function(a){fb.setVisibilty(a)},A.isVisibleNow=function(){return fb.getVisibilty()},A.isFiller=function(){return D.attributes.filler},A.isContShow=function(){return D.attributes.contshow},A.isPremium=function(){return D.attributes.premium},A.getAdPostIdx=function(){return C},A.$0_unit=pa,A.$1_adpst=qa,l(),m(aa),i("","_s10 inst"),A.tick=function(a){if(!1===za&&!0!==_a){if(null!==ab&&a-ab>b.accbeam.tickPerOther&&bb<b.accbeam.tickCountOther){var c={contID:Pa,tmval:Math.round(b.accbeam.tickPerOther/1e3),tickIdx:bb};y(W,"tick_un",c),z(W,"tick_un",c),ab=a,bb++,bb>=b.accbeam.valTickCountOther&&V.rap()}if(r(a),null!==Ja&&Ja.tick(a),fb.tick(a),!(a-Xa<1e3)){Xa=a;var d=fb.getAccVisibTime();d>ea&&(Ya=!0),d>fa&&(Za=!0),!0===db&&a-eb>5e3&&(db=!1,eb=0),e()}}}}}(fmp__root,config,0,an_buffer),unit_flow=function(a,b,c){return function(d){function e(a){M.logger.writex({msg:a,prefix:"unit_flow - "+T,inst:$})}function f(a){M.logger.writex({tgl:!0,msg:a,prefix:"unit:"+R.unitName+" (unit_dom)"})}function g(a,b,c){M.trackhub.sendEvent("units","/*AllUnits*"+a,b,c),M.trackhub.sendEvent("units","/"+R.unitName+a,b,c)}function h(a,b,c,d,e){function f(a,b,c,d){g("/_s00 by_type/"+a+b,c,d)}function h(a,b,c,d){g("/_s00 by_adpst/"+a+b,c,d)}g(c,d,e),""!==a&&f(a,c,d,e),""!==b&&h(b,c,d,e)}function i(a,b,c,d){h(a,b,c,Math.round(d/1e3),{scl:"mediumtimes"})}function j(a,b){M.logger.debugAlert(a,b)}function k(a){var b=this,c="/"+a,d=0,e=0,f=0,i=0;b.addOne=function(a,b){function j(a,b,c,d){h(a,b,c,d)}var k=!1;return"prm"===a?(d++,j(a,b,c,d),1===d&&(k=!0)):"nrm"===a?(e++,j(a,b,c,e),1===e&&(k=!0)):(f++,j(a,b,c,f),1===f&&(k=!0)),i++,g(c,i),k}}function l(a){mb=!0,p();var b="unit_execution_error: exception - unitID: "+T+" - name: "+_+" - msg: "+a;e(),Q(b),f("unit_execution_error: exception - msg: "+a),J.fireEvent("unitError_Exec",{unitName:_,unitfbxID:T,msg:""+a}),I(a,"DOMUNIT_EXEC_ERROR","exception")}function m(a){var b=[];na.forEach(function(c){c.getInstId()!==a&&b.push(c)}),na=b}function n(a,b){switch(a){case"visibOn":pa=!0;break;case"visibOff":pa=!1;break;case"updatePos":o()}}function o(){if(!0===ma){var a=V.getDomBoxStatus();e(),null!==Da&&Da.updateContDims(a.width,a.height,a.compressed,a.dispON)}}function p(a){na.forEach(function(a){f("freezing adpost: "+a.getName()+" ("+a.getLastTagName()+")"),a.freeze()})}function q(){na.forEach(function(a){f("killing adpost: "+a.getName()+" ("+a.getLastTagName()+")"),a.freeze(),a.destroy()})}function r(a){return!(a-va<Ya)&&P.canSearchVideo(aa)}function s(a,b){!0===P.getRelSearchVideo(!0,aa)?(e(),ua=a):e()}function t(a){var b=!1;if(null===a?b=!0:a===ua&&(b=!0),va=0,null!==ua&&!0===b)return P.getRelSearchVideo(!1),e(),void(ua=null);e()}function u(a){return!(a-wa<Za)&&P.canShowVideo(aa)}function v(a){P.getRelShowVideo(!0,aa);e()}function w(a){P.getRelShowVideo(!1),wa=a,e()}function x(){return P.canSwitchNow()}function y(){return P.updateSwitchTimer()}function z(){return null===Da||(!0===Da.isFiller()||!0!==Da.isPremium()&&Da.getNetShowTime()>10)}function A(a){function b(){if(null!==Da&&!0===Da.isNewError()&&!0!==Va){Va=!0,Pa=!0;var a="NA",b="NA";null!==Da&&(a=Da.getName(),Da.getNameExt(),b=Da.getType()),e(),h(b,a,"","_s52 ap_blank")}}function c(){Ia!==Ja&&(e(),Ja=Ia)}function d(a,b,c,d,e){function f(a,b){return!0}function g(a,b){return!0}function h(a,b){return null===a||!0===a.isSeekTime()}if(0!==e&&c<e)return!1;if(!0===d)return!0;switch(a){case"":return!0;case"fil":return f(b,c);case"prm":return g(b,c);case"nrm":return h(b,c)}return!0}function f(a,b,c,d){function e(a){return!(H(fb,a,!0)<1)}function f(a){return!(H(db,a,!1)<1)}function g(a){return!(H(eb,a,!1)<1)}function h(a,b){var c=null;if(i(),"prm"===a)c=db[0];else if("fil"===a)c=fb[0];else{if("nrm"!==a)throw{msg:"unkown_ap_def"};c=eb[0]}return c.useCnt++,c}function i(a){function b(a,b){
return a.useCnt!==b.useCnt?a.useCnt-b.useCnt:a.failCnt!==b.failCnt?a.failCnt-b.failCnt:a.lastFail!==b.lastFail?a.lastFail-b.lastFail:a.idx-b.idx}db.sort(b),eb.sort(b),fb.sort(b)}function j(){var a=null,b="";return cb.forEach(function(b){null===a&&0===b.useCnt&&(b.useCnt=1,a=b)}),null!==a&&(b=!0===a.data.attributes.premium?"prm":!0===a.data.attributes.filler?"fil":"nrm"),{adPostType:b,adPostDef:a}}function k(a){return!0===jb.contshow||!0===a.isContShow()}var l="",m=Math.round(999999999*Math.random()),n=r(c);if(!0!==X){var o=j();return{mediaType:o.adPostType,adPostDef:o.adPostDef,searchID:m}}if(!0===d)l=!0===e(c)?"fil":!0===g(c)?"nrm":!0===f(c)?"prm":"";else switch(a){case"fil":l=!0===kb?!0===n&&!0===f(c)?"prm":!0===g(c)?"nrm":!0===k(b)?"fil":"":!0===g(c)?"nrm":!0===n&&!0===f(c)?"prm":!0===k(b)?"fil":"";break;case"prm":l=!0===g(c)?"nrm":!0===e(c)?"fil":"";break;case"nrm":l=!0===n&&!0===f(c)?"prm":!0===k(b)?"fil":!0===g(c)?"nrm":"";break;default:l=!0===e(c)?"fil":!0===g(c)?"nrm":!0===n&&!0===f(c)?"prm":""}var p=null;return""!==l&&(p=h(l,c)),{mediaType:l,adPostDef:p,searchID:m}}function j(a,b,c,d,e){var f="go",g="wait",h="abort";if(!0!==c.isContStable())return g;if(!0===ia){if(!0!==jb.overlay&&!0===xa)return g;if(!0===jb.overlay&&!0!==xa)return g}var i=!1;switch(null!==b&&!0===x()&&(i=!0),a){case"fil":return!0===e?f:!0===i?f:g;case"prm":return!0!==qa?g:!0===e?!0===u(d)?f:h:!0!==u(d)?g:(ra=!1,f);case"nrm":return!0===e?f:!0===i?f:g}return g}function k(a,b,c,d,e){function f(a,b,c){return 0===a.getAdPostIdx()||!0===a.isPlayOver()}function g(a,b,c){if(!0===a.isAdImprOn()){if(!0===a.isAdImprEnd())return!0}else if(!0===a.isPlayOver(b))return!0;return!1}function h(a,b,c){return!0===a.isPlayOver()||!0===c&&a.getNetShowTime()>bb}if(!0===d)return!0;if(""===a)return!0;if(!0===b.isHover())return!1;switch(a){case"fil":if(!0===f(b,c,e))return!0;break;case"prm":if(!0===g(b,c,e))return!0;break;case"nrm":if(!0===h(b,c,e))return!0}return!1}switch(c(),b(),Ia){case"INIT":if(!0!==ma)break;i("","","/_s08 setup_times",a-Qa),Ka="",Ma="",La="",Na=0,Oa=null,Ra=a,Ia="HOME";case"HOME":if(na.length>=ab){e(),Ia="PARK";break}if(!0===ta){e(),Ia="PARK";break}if(!0!==d(La,Da,a,Va,Wa))break;var l=f(La,Da,a,Va);if(""===l.mediaType)break;e(),Ka=l.mediaType,Na=l.searchID,Oa=l.adPostDef,Pa=!1,Fa=B({adPostDef:Oa,searchID:Na}),Sa=a,"prm"===Fa.getType()&&s(Na,a);0!==l.adPostDef.lastFail&&""+Math.round((a-l.adPostDef.lastFail)/100)/10,e(),h(Ka,Fa.getName(),"","_s20 ap_launch"),g("/_s00 by_type","_s00 ap_launch - (ref)"),g("/_s00 by_type","_s10 ap_launch - "+Ka),i(Ka,Fa.getName(),"/_s10 launch_times",a-Ra),!0===gb.addOne(Ka,Fa.getName())&&i(Ka,Fa.getName(),"/_s11 first_launch_times",a-Ra),Ia="WAIT_ADP_RDY";case"WAIT_ADP_RDY":if(!0===ta){e(),Ia="PARK";break}if(!0===Pa){Pa=!1,e(),h(Ka,Fa.getName(),"","_s22 ap_aborted_at_search"),Ga="abort",Sa=0,Ka="",Ia="WFAB";break}var m=Fa.getResult();if("..."===m)break;if("prm"===Ka&&t(Na),"apcr_ready"!==m){"apcr_empty"===m&&(e(),h(Ka,Fa.getName(),"","_s24 ap_empty")),"apcr_faulty"===m&&(e(),h(Ka,Fa.getName(),"","_s25 ap_faulty"),h(Ka,Fa.getName(),"/_s95 faulty_tags",Fa.getLastTagName())),0!==Sa&&(i(Ka,Fa.getName(),"/_s20 search_times_nocont",a-Sa),Sa=0),Ga="abort",Oa.lastFail=a,Oa.failCnt+=1,Ka="",Ia="WFAB";break}J.foreMsg("adprdy",{unitexec:K,unitname:R.unitName,unitid:R.unitDomElmID,unitattr:R.unitAttributes}),"prm"===Ka&&(sa=!0),Ta=a,e(),h(Ka,Fa.getName(),"","_s30 ap_cont_avail"),0!==Sa&&(i(Ka,Fa.getName(),"/_s25 search_times_cont",a-Sa),Sa=0),Ia="WAIT_ADP_TURN";case"WAIT_ADP_TURN":if(!0===ta){e(),Ia="PARK";break}var n=j(Ka,Da,Fa,a,Va);if("abort"===n){e(),h(Ka,Fa.getName(),"","_s32 ap_aborted_at_wait"),Ga="abort",Oa.lastFail=a,Oa.failCnt+=1,Ka="",Ia="WFAB";break}if("go"!==n)break;if(!0!==k(Ma,Da,a,Va,sa))break;"prm"===Ma&&w(a),sa=!1,"prm"===Ka&&v(a),y(),e(),h(Ka,Fa.getName(),"","_s40 ap_cont_shown");var o=hb.addOne(Ka,Fa.getName());0!==Ta&&(i(Ka,Fa.getName(),"/_s30 wait_times",a-Ta),Ta=0),Ga="switch",Ma="",null!==Da&&(i(Da.getType(),Da.getName(),"/_s40 show_times",Da.getNetShowTime()),!0===o&&i(Da.getType(),Da.getName(),"/_s41 first_show_times",Da.getNetShowTime())),Ia="WAIT_SW";case"WAIT_SW":if(!0===Ha){e(),Ha=!1,Ua=a,Ia="STDBY";break}if(null!==Ga)break;La=Ka,Ma=Ka,Ka="",Va=!1,Ia="HOME";break;case"WFAB":if(!0===Ha){null!==Fa&&Fa.getNameExt(),e(),Ha=!1,Ua=a,Ia="STDBY";break}if(null!==Ga)break;Ua=a,Ia="STDBY";break;case"STDBY":if(a-Ua<1e3)break;Ka="",Ia="HOME"}}function B(a){var b={idx:oa,adPostDef:a.adPostDef,searchID:a.searchID},c=new C(b);return na.push(c),oa++,c}function C(a){function c(a){function b(){k!==l&&(e(),l=k)}switch(b(),k){case"INIT":o=a,k="WFR";break;case"WFR":if(!0===m.isError()||a-o>L){e(),f("faulty adpost: "+m.getName()+" ("+m.getContId()+")"),m.exit(),n="apcr_faulty",k="PARK";break}if(!0!==m.isBusy()){e(),f("empty adpost: "+m.getName()+" ("+m.getContId()+")"),m.exit(),n="apcr_empty",k="PARK";break}if(!0!==m.isReady())break;e(),f("ready to activate adpost: "+m.getName()+" ("+m.getLastTagName()+")"),n="apcr_ready",k="PARK"}}function d(a,c){function d(a,c,d){var e=V.getDomBoxStatus();lb.push("createAdPost");var f=V.getDomElm(),g=f.getBoundingClientRect().top,h={master:J,adPostIdx:c,comps:M,cllBks:P,plcmParams:N,bootParams:O,startTime:S,heart:M.heart,logger:M.logger,env:N.env,IE:O.IE,stageID:R.stageID,sectID:R.sectID,unitID:R.unitID,partID:R.partID,assetID:R.assetID,unitfbxID:T,myMgrfbxAttnID:R.thisfbxAttnID,refElmId:aa,location:jb.location,unitDomElm:f,hostWnd:W,myUnitObj:K,stageName:da,stageAttributes:ea,activeLayout:fa,ntvfrmts:ga,sectionName:ha,unitName:_,unitNumID:U,priority:jb.priority,smart:X,cost:ba,onsold:ca,stylename:R.stylename,stylesnippets:R.stylesnippets,waitopts:{fill:jb.waitfill,color:jb.waitcolor,icon:jb.waiticon,logo:jb.waitlogo},unitWidth:e.width,unitHeight:e.height,unitY:g,compressed:d,vastDevice:ja,userval:ka,debugVars:la,addLogLine:Q,secProt:ib,getActFlags:R.getActFlags,clientID:R.clientID,imprID:R.imprID,accChnID_stage:R.accChnID_stage,accChnID_unit:R.accChnID_unit,adpostdata:a,dummy:0};Q(T+" adpost launching...");var i=new b(h);return null!==i&&i.render(!0),i}return d(a.data,c,!1)}var g=this,h=a.idx,i=a.adPostDef,j=a.searchID,k="INIT",l=null,m=null,n="...",o=0,p=!1;g.tick=function(a){c(a),m.tick(a)},g.getResult=function(){return n},g.getSearchID=function(){return j},g.getInstIdx=function(){return h},g.getAdPostDef=function(){return i},g.getName=function(){return m.getName()},g.getNameExt=function(){return m.getNameExt()},g.getLastTagName=function(){return m.getLastTagName()},g.getType=function(){return!0===i.data.attributes.premium?"prm":!0===i.data.attributes.filler?"fil":"nrm"},g.getContId=function(){return m.getContId()},g.getExitStat=function(){return m.getExitStat()},g.getAdPostIdx=function(){return m.getAdPostIdx()},g.getInstId=function(){return m.getInstId()},g.isAdImprEnd=function(){return m.isAdImprEnd()},g.isAdImprOn=function(){return m.isAdImprOn()},g.isVisibleNow=function(){return m.isVisibleNow()},g.isPremium=function(){return m.isPremium()},g.isFiller=function(){return m.isFiller()},g.isContShow=function(){return m.isContShow()},g.isSeekTime=function(){return m.isSeekTime()},g.isPlayOver=function(){return m.isPlayOver()},g.getNetShowTime=function(){return m.getNetShowTime()},g.isHover=function(){return m.isHover()},g.getNetShowTime=function(){return m.getNetShowTime()},g.isContStable=function(){var a=m.getContStatus();return"bd"===a.logic||!0===a.vast||"ok"===a.status&&(!0===a.content&&!0===a.mediaValid)},g.goFw=function(){return m.goFw()},g.exit=function(){return m.exit()},g.setVisib=function(a){return m.setVisib(a)},g.updateContDims=function(a,b,c,d){return m.updateContDims(a,b,c,d)},g.isError=function(){return m.isError()},g.isNewError=function(){return!0!==p&&(!0===m.isError()&&(p=!0,!0))},g.getCurSrcInfo=function(){return m.getCurSrcInfo()},g.freeze=function(){return m.freeze()},g.destroy=function(){return m.destroy()},m=d(i,h),e(),f("launched adpost: "+m.getName()+" ("+m.getContId()+")")}function D(a){function b(){Aa!==Ba&&(e(),Ba=Aa)}switch(b(),Aa){case"INIT":if(!0!==ma)break;Ga=null,Aa="RDY";break;case"RDY":if(null===Ga)break;if(e(),Ha=!1,"abort"===Ga){Ea=Fa,Fa=null,Aa="EXT";break}if(null===Da){Aa="ANA";break}Ea=Da,Aa="EXT";case"EXT":Ea.exit(),e(),Ca=a,Aa="WPAG";case"WPAG":if(a-Ca>5e3){Ha=!0,Aa="ERR";break}if(!0!==Ea.getExitStat())break;if(Ea=null,"abort"===Ga){Ga=null,Aa="RDY";break}Aa="ANA";case"ANA":Da=Fa,Fa=null,Da.goFw(),K.plcMed(),o(),e(),f("activating adpost: "+Da.getName()+" ("+Da.getLastTagName()+")"),Ga=null,Aa="RDY";break;case"ERR":if(!1!==Ha)break;Ga=null,Aa="RDY"}}function E(a){null!==Da&&Da.setVisib(pa),qa=pa}function F(){var a=0;R.adpostdata.forEach(function(b){if(!0===b.attributes.enabled&&!0===G(b)){var c={};c.data=JSON.parse(JSON.stringify(b)),c.idx=a,c.useCnt=0,c.failCnt=0,c.lastFail=0,cb.push(c),!0===b.attributes.premium?db.push(c):!0===b.attributes.filler?fb.push(c):eb.push(c),a++}})}function G(a){if(!0===O.debugVars.disableBarLogic)return!0;if(!0!==Z.checkReductions(a.conditions,0))return e(),h("","","","_s14 ap_skipped"),!1;e();var b=Z.checkEnvCond(a.conditions,P.getWindowInfo(),P.getSnippetValues(),P.getDeployedList(),P.getContentList(),!1);if("go"===b.status)return h("","","","_s12 ap_deployed"),!0;var c="NA";return"dontknow"===b.status?c="dontknow":"wait"===b.status?c="wait":"avoided_room"===b.msg?c="room":"avoided_snip"===b.msg?c="snip":"avoided_browser"===b.msg?c="browser":"avoided_link"===b.msg?c="link":"avoided_cnt"===b.msg&&(c="cnt"),h("","","","_s16 ap_avoided ["+c+"]"),!1}function H(a,b,c){var d=0;return a.forEach(function(a){if(!(a.failCnt>=_a||b-a.lastFail<$a))return!0===c?void(d+=1):void(a.useCnt>a.data.attributes.maxpage||(d+=a.data.attributes.maxpage-a.useCnt))}),d}function I(a,b,c){function d(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+=c+" = "+d+"\n"}return b}var e="Message:  ";e+=a+"\n\n",void 0!==a.stack&&(e+="\nStack:\n",e+=a.stack.toString()+"\n\n"),e+="====== Unit Data: ======\n\n"+d({unitNumID:U,fbxID:T,reference:aa,stageName:da,stageAttributes:ea,activeLayout:fa,sectionName:ha,unitName:_,vastDevice:ja,stylename:R.stylename})+"\n\n",e+="====== Unit Attributes: ======\n\n"+d(jb)+"\n\n",e+="====== DOM Params: ======\n\n"+d(V.getDomParams())+"\n\n";var f={debugStrings:[],from:b,subject:c,text:e};M.mailmaster.sendObj(f),j(b+" --\x3e "+c,f)}var J=this,K=d.master,L=6e4,M=d.comps,N=d.plcmParams,O=d.bootParams,P=d.cllBks,Q=(M.tracker,P.addLogLine),R=d.unitOptions,S=d.startTime,T=d.fbxID,U=d.unitNumID,V=R.domBox,W=(R.stageID,R.sectID,R.unitID,R.assetID,R.unitInFIF,R.unitHostElm,R.hostWnd),X=d.unitOptions.smart,Y=d.unitOptions.seekdelay,Z=new a({bootParams:O});O.secProt;var $=Math.round(999*Math.random());e(),!0===O.confined&&e();var _=R.unitName,aa=R.unitDomElmID,ba=(R.unitDomElmIdPrfx,R.cost),ca=R.onsold,da=R.stageName,ea=R.stageAttributes,fa=R.activeLayout,ga=R.ntvfrmts,ha=R.sectionName,ia=R.phySect,ja=(R.sectDomElmID,R.vastDevice),ka=R.userval,la=R.debugVars,ma=(R.afterAds,R.floatpar,!1),na=[],oa=0,pa=!1,qa=!1,ra=!1,sa=!1,ta=!1,ua=null,va=0,wa=0,xa=!1,ya=null,za=null,Aa="INIT",Ba="",Ca=0,Da=null,Ea=null,Fa=null,Ga=null,Ha=!1,Ia="INIT",Ja="",Ka="",La="",Ma="",Na=0,Oa=null,Pa=!1,Qa=Date.now(),Ra=0,Sa=0,Ta=0,Ua=0,Va=!0,Wa=0;if("unspecified"!==Y){var Xa=parseInt(Y);!0!==isNaN(Xa)&&(Wa=Date.now()+1e3*Xa)}M.quickVars.refreshParams();var Ya=1e3*M.quickVars.getParam("prmSearchHoldOff",c.smartunits.prmSearchHoldOff),Za=1e3*M.quickVars.getParam("prmShowHoldOff",c.smartunits.prmShowHoldOff),$a=1e3*M.quickVars.getParam("lastFailHoldOff",c.smartunits.lastFailHoldOff),_a=M.quickVars.getParam("_maxFailCnt",c.smartunits.maxFailCnt),ab=M.quickVars.getParam("maxAdPostCount",c.smartunits.maxAdPostCount),bb=M.quickVars.getParam("pullOutTime",c.smartunits.pullOutTime),cb=[],db=[],eb=[],fb=[];F();var gb=new k("_s50 count_dist_search"),hb=new k("_s51 count_dist_show"),ib=N.secProt,jb=R.unitAttributes,kb=jb.prime,lb=[],mb=!1,nb=!1;J.fireEvent=function(a,b){switch(a){case"mediaready":case"mediaover":break;case"adImprEnd":ra=!0,w(Date.now());break;case"adProg":b.pos;break;case"hoverOn":case"hoverOff":break;case"adp_click":ta=!0;break;case"adp_removeinst":m(b)}K.fireEvent(a,b)},J.gcapi=function(){return Da},J.runAdPosts=function(a){ma=a},J.killAllAdps=function(){q(),nb=!0},J.domBoxMsg=function(a,b){n(a,b)},J.tick=function(a){function b(a){na.forEach(function(b){b.tick(a)})}if(V&&!0!==nb&&!0!==mb)try{A(a),D(a),E(a),b(a)}catch(a){l(a)}},J.foreCmd=function(a,b){switch(a){case"canfore":return z();case"fore_ON":xa=!0;break;case"fore_OFF":xa=!1;break;case"fore_in":ya=!0;break;case"fore_out":ya=!1;break;case"back_in":za=!0;break;case"back_out":za=!1}},J.foreMsg=function(a,b){return K.foreMsg(a,b)},h("","","","_s10 unit_inst")}}(barlogix,adpost,config),unit_actv=function(a){return function(b){function c(a){b.logger.writex({msg:a,prefix:"unit_actv",inst:g})}function d(a){switch(s=r,i.isMouseAction=s,t){case"INIT":if(!0!==h.isReady())break;t="READY";break;case"READY":c(),m=a,t="INVISIBLE",i.isUnitVisible=!1,i.isUnitActive=!1,i.isUnitHovering=!1,B="sleep";break;case"INVISIBLE":if(!0!==u)break;l?(l=!1,h.fireEvent("frst_visib")):h.fireEvent("re_visib"),c(),n=a,t="VISIBLE",i.isUnitVisible=!0,i.isUnitActive=!1,i.isUnitHovering=!1,B="visible";break;case"VISIBLE":if(!0===f.isInFrame()||!0===f.isInMedia()){k?(k=!1,h.fireEvent("frst_actv")):h.fireEvent("re_actv"),p=a,o=a,c(),t="ACTIVE",i.isUnitVisible=!0,i.isUnitActive=!0,i.isUnitHovering=!1,B="active";break}if(!0!==u){c(),m=a,t="INVISIBLE",i.isUnitVisible=!1,i.isUnitActive=!1,i.isUnitHovering=!1,B="sleep";break}break;case"ACTIVE":if(!0!==f.isInFrame()&&!0!==f.isInMedia()){c(),n=a,t="VISIBLE",i.isUnitVisible=!0,i.isUnitActive=!1,B="visible";break}if(!0===f.isInMedia()){q=a,c(),j?(j=!1,h.fireEvent("frst_hvr")):h.fireEvent("re_hvr"),t="IN_MEDIA",i.isUnitVisible=!0,i.isUnitActive=!0,i.isUnitHovering=!0,B="hover";break}break;case"IN_MEDIA":if(!1===f.isInMedia()){c(),o=a,t="ACTIVE",i.isUnitVisible=!0,i.isUnitActive=!0,i.isUnitHovering=!1,B="active";break}}}function e(b){switch(A){case"INIT":if(!0!==h.isReady())break;A="STATE_STEADY";break;case"STATE_STEADY":if(!0===v){r=!0,c(),A="STATE_MOVING";break}break;case"STATE_MOVING":if(!0===v)break;z=b,A="STATE_MOVING_PERSISTENCE";break;case"STATE_MOVING_PERSISTENCE":if(!0===v){A="STATE_MOVING";break}if(b-z>a.mouseProcessor.idleTimeLimit){c(),r=!1,A="STATE_STEADY";break}}}var f=this,g=Math.round(999*Math.random());c();var h=b.master,i=b.activityFlags,j=(b.unitName,b.location,!0),k=!0,l=!0,m=0,n=0,o=0,p=0,q=0,r=!1,s=!1,t="INIT",u=!1,v=!1,w=!1,x=!1,y=!1,z=0,A="INIT",B="";f.tick=function(a){d(a),e(a)},f.activityReport=function(a){if("docstatus"===a.cmd)return v=a.isDocActive,void(w=a.isDocVisible)},f.visibReport=function(a){u=a},f.mouseActionReport=function(a){!0===a.inFrame?(x=!0,c()):(x=!1,c())},f.mouseHoverReport=function(a){y=a,c()},f.isActive=function(){return"ACTIVE"===t||("INACTIVE_PERSISTENCE"===t||"IN_MEDIA"===t)},f.isInFrame=function(){return x},f.isInMedia=function(){return y},f.isAction=function(){return!1}}}(config),unit_exec=function(a,b,c,d,e,f){return function(g){function h(a){P.logger.writex({msg:a,prefix:"unit_exec",inst:ea})}function i(a,b){P.logger.debugAlert(a,b)}function j(a){P.logger.writex({tgl:!0,msg:a,prefix:"unit:"+g.unitName+" (unit_exec)"})}function k(a,b){S.fireLdrEvt("/_s50 unit"+a,b)}function l(a,b){P.trackhub.sendEvent("stage","/"+R.placementId+"/_s50 units",a,b)}function m(a,b){P.trackhub.sendEvent("stage","/"+R.placementId+"/_s20 exec_tree/"+g.activeLayout+"/"+ra+"/"+va,a,b)}function n(a,b,c){P.trackhub.sendEvent("units","/${"+va+"|*AllUnits*}$"+a,b,c)}function o(){function a(a,b){return"unspecified"===a?a:a.split("-")[b]}function b(a){var b="*** WARNING *** unit code not found ("+va+")";return h(),j(b),"ERROR"}if(!0===ya)return"dontuse";var c=a(wa.unitCodes,Ca);if(void 0===c||""===c)return b(c);if("unspecified"!==c)return c;if("adf"!==R.ctxId)return b(c);var c=a(R.adfrm_vars.unitCodes,Ca);return void 0===c?b(c):"unspecified"===c||""===c?b(c):c}function p(a){mb.push("foreback:"+a),_.setForeBack(a),h()}function q(a){Pa.push(a),!0===Qa?a("visibOn",{}):a("visibOff",{})}function r(a){var b=[];Pa.forEach(function(c){c!==a&&b.push(c)}),Pa=b}function s(a,b){Pa.forEach(function(c){c(a,b)})}function t(a,b){switch(a){case"visibOn":ib=!0,h(),N.fireEvent("visibOn",{unitName:va,fbxID:Ya});break;case"visibOff":ib=!1,h(),N.fireEvent("visibOff",{unitName:va,fbxID:Ya});break;case"lchok":aa=!0,N.fireEvent("unit_created",{unitName:va});break;case"lcherr_to":case"lcherr_ex":j("could not launch unit - msg: "+b.msg);break;case"dmbx_error":N.abortNow(),j("unit dombox error - msg: "+b.msg)}null!==Xa&&Xa.domBoxMsg(a,b)}function u(){function a(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+="<b>"+c+"</b>: "+d+"</br>"}return b}var b;b=!0===R.confined?"Framed":null!==Z?"In-FIF":"In-Page";var c="NA",d={sourceName:"NA",sourceIdx:"NA",sandbox:"NA",sourcesetName:"NA",width:"NA",height:"NA",segmName:"NA",stylename:"NA",logic:"NA",zindex:"NA",price:"NA",cost:"NA",floor:"NA"};if(null!==Xa){var e=Xa.gcapi();null!==e&&(c=e.getName(),d=e.getCurSrcInfo())}var f="";f+="<p>",f+="<b> << </b><mark><strong>"+Ya+"</strong></mark><b> >> </b>",f+=!0===ya?"&nbsp;&nbsp;<strong>("+xa.classID+")</strong>":"",f+="</p>",f+="<b>Unit:</b> "+va+"</br>",f+="<b>Section:</b> "+ra+" "+(!0===sa?"(physical)":"(virtual)")+"</br>",f+="<b>Layout:</b> "+pa+"</br>",f+="<b>Stage:</b> "+na+"  ("+oa.tag+")</br>",f+="<b>Partition:</b> "+Ea+"</br>",f+="</br>",!0!==ya&&(f+="<b>Adpost:</b> "+c+"</br>",f+="<b>Tag:</b> "+d.sourceName+"</br>",f+="<b>Segment:</b> "+d.segmName+"</br>",f+="<b>Call Idx:</b> "+d.sourceIdx+"</br>",f+="<b>Sandbox: </b> "+(!0===d.sandbox?"YES":"NO")+"</br>",f+="</br>"),f+="<b>Context: </b> "+b+"</br>",f+="</br>",f+="<b>Location:</b> "+wa.location+"</br>",f+="<b>Position:</b> "+wa.position+"</br>",f+="<b>Index:</b> "+wa.index+"</br>",f+="<b>RowIdx:</b> "+wa.rowidx+"</br>",f+="</br>",f+="<b>Reference:</b> "+wa.reference+"</br>",f+="<b>Ref Cls:</b> "+wa.refcls+"</br>",f+="<b>Ref ID:</b> "+wa.refid+"</br>",f+="<b>Ref Idx:</b> "+wa.refidx+"</br>",f+="</br>";var g={};return null!==_&&(g=_.getDomBoxStatus()),f+="<b>Dims:</b> "+g.width+"x"+g.height+"</br>",f+="<b>zIndex:</b> "+wa.zindex+"</br>",f+="<b>Style:</b> "+wa.style+"</br>",f+="</br>",f+="<b>Expand:</b> "+wa.expand+"</br>",f+="<b>Compress:</b> "+wa.compress+"</br>",f+="<b>HoldOff:</b> "+wa.holdoff+"</br>",f+="<b>Visib Offset:</b> "+wa.voff+"</br>",f+="<b>MaxSeekTime:</b> "+wa.maxSeekTime+"</br>",f+="</br>",f+="<b>Width:</b> "+wa.width+"</br>",f+="<b>Max Width:</b> "+wa.maxwidth+"</br>",f+="<b>Min Width:</b> "+wa.minwidth+"</br>",f+="<b>X-Factor:</b> "+wa.xfactor+"</br>",f+="<b>X-Align:</b> "+wa.xalign+"</br>",f+="<b>X-Trim:</b> "+wa.xtrim+"</br>",f+="<b>X-Off:</b> "+wa.xoff+"</br>",f+="</br>",f+="<b>Height:</b> "+wa.height+"</br>",f+="<b>Max Height:</b> "+wa.maxheight+"</br>",f+="<b>Min Height:</b> "+wa.minheight+"</br>",f+="<b>Y-Factor:</b> "+wa.yfactor+"</br>",f+="<b>Y-Align:</b> "+wa.yalign+"</br>",f+="<b>Y-Trim:</b> "+wa.ytrim+"</br>",f+="<b>Y-Off:</b> "+wa.yoff+"</br>",f+="<b>Form Factor:</b> "+wa.formfactor+"</br>",f+="</br>",f+="<b>Float Param:</b> "+wa.floatpar+"</br>",f+="<b>Margin Left:</b> "+wa.marginleft+"</br>",f+="<b>Margin Right:</b> "+wa.marginright+"</br>",f+="<b>Margin Top:</b> "+wa.margintop+"</br>",f+="<b>Margin Bottom:</b> "+wa.marginbottom+"</br>",f+="</br>",f+="<b>Logic:</b> "+d.logic+"</br>",f+="<b>Price:</b> "+d.price+"</br>",f+="<b>Floor:</b> "+d.floor+"</br>",f+="<b>Cost:</b> "+d.cost+"</br>",f+="</br>",f+="<b>Wait Fill:</b> "+wa.waitfill+"</br>",f+="<b>Wait Color:</b> "+wa.waitcolor+"</br>",f+="<b>Wait Icon:</b> "+wa.waiticon+"</br>",f+="<b>Wait Logo:</b> "+wa.waitlogo+"</br>",f+="</br>",f+="<b>Version:</b> "+Q.versionFolder+"</br>",f+="</br>",f+="</br><b>--- Publishing ----</b></br>",f+=a(Aa),f=f.replace(/\s/g,"&nbsp;")}function v(){return!0}function w(){function a(a,b,c){function d(a,b,c){return!0!==c&&(!0!==R.confined&&("ifrm"===b&&("inpage"===a.location&&"default"===a.position)))}if(!0===V)Y=!1,Z=W,$=X;else if(!0===(Y=d(wa,a,sa))){var e=da.locateInPage(window,b,c);if(null===e)return void A("cannot locate:"+b);Z=e,$=e.contentWindow}}var b=!1;!0===R.debugVars.dpx&&(b=!0),"sys"!==R.ctxId&&(b=!1);var d=Da.cntElmID,f=Da.trgElmID,g=Da.trgElmType;a(Da.trgElmType,Da.trgElmID,Da.cntElmID),_=new e({master:N,comps:P,bootParams:R,plcmID:Q.placementId,cllBks:S,msgClbk:t,ovlStrClbk:u,mayShowOvrNow:v,enableOvr:b,restrLoc:sa,pntDomElmID:ua,abstrElmID:Ya,noBorder:!0,attributes:wa,contFrmTagId:d,targetTagId:f,targetElmType:g,domElmId:$a,domElmIdPrfx:Wa,stylename:Sa,stylesnippets:Ta,confined:R.confined,isAdFrame:ya,insInFIF:Y,hostElm:Z,hostWnd:$,zindex:wa.zindex,ovrl:wa.overlay}),actMgrOptions={master:N,testCase:R.testCase,startTime:U,logger:P.logger,activityFlags:hb,unitfbxID:Ya,unitName:va,position:Ja,reference:Ka,row:La,location:Ma,trackhub:P.trackhub,dummy_item:0},ba=new c(actMgrOptions)}function x(){var a={domBox:_,fbxID:Ya,thisfbxAttnID:Za,unitDomElmID:$a,unitDomElmIdPrfx:Wa,afterAds:Na,floatpar:Oa,en:R.debugVars.dpx,publishing:Aa,insInFIF:Y,hostElm:Z,hostWnd:$,cost:Fa,onsold:Ga,stylename:Sa,stylesnippets:Ta,stageName:na,stageAttributes:oa,activeLayout:pa,ntvfrmts:qa,sectionName:ra,phySect:sa,sectDomElmID:ua,unitName:va,unitAttributes:wa,adframeParams:xa,isAdFrame:ya,vastDevice:R.vastDevice,userval:Ua,debugVars:R.debugVars,imprID:R.imprID,clientID:R.clientID,stageID:ga,sectID:ha,unitID:ia,partID:Ea,assetID:Ia,smart:wa.smart,prime:wa.prime,seekdelay:wa.seekdelay,accChnID_stage:ma,accChnID_unit:Va,adpostdata:g.adpostdata,getActFlags:D};h(),T(Ya+" launching...");var b={master:N,comps:P,cllBks:S,plcmParams:Q,bootParams:R,startTime:U,fbxID:Ya,unitNumID:Ba,trackDomain:"",sectionHostElm:W,sectionHostWnd:X,sectionInFIF:V,sectID:ha,unitOptions:a,dummy:0};return T(Ya+" dom launching..."),new d(b)}function y(){if(null===ca){var a=_.getDomBoxStatus(),b=_.getDomElm();return P.xFrameInt.ladfm({origin:va,hostWnd:$,domBoxElm:b,width:a.width,height:a.height,adframeParams:xa,ntvfrmts:qa,stageAttributes:oa,adfMsgClbk:z,unitCodes:wa.unitCodes})}}function z(a,b){switch(a){case"medplcd":H(!1);break;case"medovr":I(!1)}}function A(a){var b="unit_execution_error: exception - unitID: "+Ya+" - name: "+va+" - msg: "+a;h(),T(b),j("unit_execution_error: exception - msg: "+a),N.fireEvent("unitError_Exec",{unitName:va,unitfbxID:Ya,msg:""+a}),B(a,"DOMUNIT_EXEC_ERROR","exception")}function B(a,b,c){function d(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+=c+" = "+d+"\n"}return b}var e="Message:  ";e+=a+"\n\n",void 0!==a.stack&&(e+="\nStack:\n",e+=a.stack.toString()+"\n\n"),e+="====== Unit Data: ======\n\n"+d({unitNumID:Ba,fbxID:Ya,reference:$a,stageName:na,stageAttributes:oa,activeLayout:pa,sectionName:ra,unitName:va})+"\n\n",e+="====== Unit Attributes: ======\n\n"+d(_stageUnitAttr)+"\n\n",e+="====== DOM Params: ======\n\n"+d(_.getDomParams())+"\n\n";var f={debugStrings:[],from:b,subject:c,text:e};P.mailmaster.sendObj(f),i(b+" --\x3e "+c,f)}function C(b){function c(){function a(a){var b=S.getSnippetValues();return null===b?null:void 0===b[a]?null:b[a]}return!0===a(wa.hideon)}switch(_a){case"INIT":if(k("","_s10 proc_start"),!0!==wa.enabled)return h(),m("_s00 unit_ignored"),void(_a="PARK");if(!0===P.quickVars.shouldByPass("units",va))return h(),m("_s00 unit_bypassed"),void(_a="PARK");_a="CHECK_PUB";case"CHECK_PUB":var d=fa.shouldPub(Aa,R.debugVars);if("wait"===d){h();break}if("no"===d){h(),_a="PARK";break}if(l("/_s10 allotted/"+va),m("_s10 unit_allotted"),h(),"sys"===R.ctxId){var e=!0;if(!0===R.debugVars.disableBarLogic&&(e=!1),!0===e&&!0!==fa.checkReductions(za,0)){h(),m("_s20 unit_skipped"),_a="PARK";break}}h(),_a="CHECK_PART";case"CHECK_PART":if(null===Da)break;if(l("/_s20 triggered/"+va+" ["+Ea+"]"),m("_s30 unit_part_triggered ("+Ea+")"),"sys"!==R.ctxId){_a="ALLCLR";break}m("_s35 unit_wait_cond"),ab=b,_a="WAIT_ENV_COND";case"WAIT_ENV_COND":if("unspecified"===za.delay&&b-ab>a.stage.envTimeout){m("_s40 unit_env_timeout"),_a="PARK";break}var f=fa.checkEnvCond(za,S.getWindowInfo(),S.getSnippetValues(),S.getDeployedList(),S.getContentList(),!0);if("dontknow"===f.status||"wait"===f.status)break;if("go"!==f.status){var i="NA";"avoided_room"===f.msg?i="room":"avoided_snip"===f.msg?i="snip":"avoided_browser"===f.msg?i="browser":"avoided_link"===f.msg?i="link":"avoided_cnt"===f.msg&&(i="cnt"),S.registerDeployment(va,!1),m("_s45 unit_avoided ["+i+"]"),j("unit avoided - "+i),_a="PARK";break}_a="ALLCLR";case"ALLCLR":m("_s50 unit_deployed"),T(Ya+" deployed"),n("/_s90 user_actv","_s00 deployed (ref)"),Ia=o(),P.parcels.sendp("liveacc",{evt:"regPrxTrg",data:{name:va,type:"unit",id:ia,aid:Ia,exdata:null}}),!1===wa.onsoldx&&E(!1),S.execSnippet(wa.ondeploy),P.tracker.exNotif("depl",{unitName:va}),S.registerDeployment(va,!0),fb=!0,M(ma,"lnch",{delay:b-U}),P.beamCannon.fire(g.unitTrackingBeams),w(),k("","_s30 deployed"),ab=b,_a="WFDB";case"WFDB":if(b-ab>a.stage.domboxTimeout){m("_s60 dombox to"),_a="PARK";break}if(null===_||!0!==aa)break;!0===ya?ca=y():(Xa=x(),Xa.runAdPosts(!0)),gb=!0,ab=b,_a="RUNNING";case"RUNNING":if(!0===ja){J(),m("_s90 unit_aborted"),S.registerDeployment(va,!1),_a="PARK";break}if(b-ab<a.stage.condCheckPeriod)return;ab=b;var f=fa.checkEnvCond(za,S.getWindowInfo(),S.getSnippetValues(),S.getDeployedList(),S.getContentList(),!1);if("go"!==f.status){J(),m("_s90 unit_aborted"),S.registerDeployment(va,!1),_a="PARK";break}if(!0===c()){K(),m("_s90 unit_hidden"),S.registerDeployment(va,!1),_a="PARK";break}ba&&ba.visibReport(_.isVisib())}}function D(){return hb}function E(a){if(!0!==Ha){var b=F();null!==b&&(N.fireEvent("costping",{costType:"unit",amnt:b,onsold:!0===a?"1":"0"}),Ha=!0)}}function F(){function a(a){return h(),j("STAGE ERROR - unit: "+va+" - "+a),m("_s38 unit_error_costx - "+a,{res:"hi"}),null}function b(a){return void 0!==a.exdata&&("NA"!==a.exdata&&null!==a.exdata)}if("unspecified"!==wa.costx){var c=parseFloat(wa.costx);return!0===isNaN(c)?a("bad stage cost spec"):Math.round(100*c)/100}if("unspecified"!==wa.partition){if(!0!==b(Da))return null;var c=parseFloat(Da.exdata.prc)/100;return!0===isNaN(c)?a("bad exdata cost spec"):Math.round(100*c)/100}return null}function G(){function a(){for(var a=[],b=0;b<120;b++)if(b%4==0){var c={thrsh:b,sent:!1};a.push(c)}return a}function b(a){for(var b=0;b<40;b++){var c=i[b];void 0!==c&&(!0!==c.sent&&(a<c.thrsh||(n("/_s90 user_actv/_s10 visib_time_dist",c.thrsh,{scl:"mediumtimes"}),h(),c.sent=!0)))}}var c=this,d="INIT",e=!1,f=0,g=0,i=a();c.tick=function(a){switch(d){case"INIT":if(null===Xa)break;d="NONV";break;case"NONV":if(!0!==_.isVisib())break;!0!==e&&(e=!0,M(ma,"vson")),f=a,d="YESV";break;case"YESV":if(!0!==_.isVisib()){d="NONV";break}if(a-f<1e3)break;g+=a-f,f=a,b(Math.round(g/1e3))}}}function H(a){!0===a&&"adf"===R.ctxId&&P.xFrameInt.smth("medplcd"),!0===wa.expand&&!1===ka&&!0!==nb&&(mb.push("placeMedia"),_.placeMedia(),nb=!0)}function I(a){!0===a&&"adf"===R.ctxId&&P.xFrameInt.smth("medovr"),!0===wa.compress&&(mb.push("removeMedia"),_.removeMedia()),N.foreMsg("adpdone",{unitexec:N,unitname:va,unitid:$a,unitattr:wa})}function J(){if(!0!==ka){h(),j("unit aborted ("+Ya+")"),null!==Xa&&Xa.killAllAdps(),_.delDomBox(),mb.push("abortUnit");var a={unitName:va,unitfbxID:Ya};N.fireEvent("unit_aborted",a),ka=!0}}function K(){if(!0!==la){h(),j("unit hidden ("+Ya+")"),mb.push("hideUnit"),_.hideDomBox();var a={unitName:va,unitfbxID:Ya};N.fireEvent("unit_hidden",a),la=!0}}function L(a,b){var c="xxx",d=parseInt(a);return d>0&&d<=1&&(c="top"),d>1&&d<=2&&(c="mid"),d>2&&d<=3&&(c="low"),d>3&&(c="bot"),c+"_"+b}function M(a,b,c){return}var N=this,O=g.master,P=g.comps,Q=g.plcmParams,R=g.bootParams,S=g.cllBks,T=S.addLogLine,U=g.startTime,V=g.sectionInFIF,W=g.sectionHostElm,X=g.sectionHostWnd,Y=!1,Z=null,$=window,_=null,aa=!1,ba=null,ca=null,da=new f,ea=Math.round(999*Math.random());h(),k("","_s00 inst");var fa=new b({bootParams:R}),ga=g.stageID,ha=g.sectID,ia=Math.random().toString(16).substr(2,12),ja=!1,ka=!1,la=!1,ma=g.accChnID_stage,na=g.stageName,oa=g.stageAttributes,pa=g.activeLayout,qa=g.ntvfrmts,ra=g.sectionName,sa=g.phySect,ta=g.sectPartAttr,ua=g.sectDomElmID,va=g.unitName,wa=g.attributes,xa=g.adframe,qa=g.ntvfrmts,ya=void 0!==xa,za=g.conditions,Aa=g.publishing,Ba=g.unitNumID,Ca=g.unitLoopIdx,Da=null,Ea="intrinsic";"unspecified"!==ta?Ea=ta:"unspecified"!==wa.partition&&(Ea=wa.partition);var Fa=0;"unspecified"!==wa.cost&&(Fa=parseFloat(wa.cost));var Ga=wa.onsold,Ha=!1,Ia="NA",Ja=g.attributes.position,Ka=g.attributes.reference,La=g.attributes.row,Ma=g.attributes.location,Na=wa.afterads,Oa=wa.floatpar,Pa=[],Qa=!1;void 0===Oa&&(Oa="left");var Ra=JSON.parse(JSON.stringify(g.winInfo)),Sa=g.attributes.style,Ta=null;"unspecified"!==Sa&&(Ta=S.getStyleSnippets(Sa));var Ua=(L(La,Ma),0),Va="_unit"+Math.round(9999*Math.random());P.accbeam.register(Va,a.accbeam.channels.unit.red),M(ma,"inst");var Wa="_fb_",Xa=null,Ya="unit_"+Ba,Za=Ya+"_mgr",$a=Wa+Ya,_a="INIT",ab=0,bb=!1,cb=!1,db=new G,eb=[],fb=!1,gb=!1,hb={isUnitVisible:!1,isUnitActive:!1,isUnitHovering:!1,isMouseAction:!1},ib=!1,jb=!1,kb=null,lb=null,mb=[],nb=!1;N.fireEvent=function(a,b){switch(a){case"adp_running":l("/_s40 adp running/"+va);break;case"adp_content":l("/_s50 adp content/"+va),!0===b.active&&l("/_s52 adp content (act)/"+va),!0===wa.onsoldx&&!0===b.active&&E(!0);break;case"unit_created":l("/_s30 unit created/"+va);break;case"unitError_Create":m("_s30 unit_error_creat",{res:"hi"});break;case"unitError_Exec":m("_s31 unit_error_exec",{res:"hi"});break;case"unitError_Oversized":m("_s32 unit_error_oversized",{res:"hi"});break;case"frst_visib":return void n("/_s90 user_actv","_s10 frst_visib");case"re_visib":return void n("/_s90 user_actv","_s11 re_visib");case"frst_actv":return void n("/_s90 user_actv","_s20 frst_actv");case"re_actv":return void n("/_s90 user_actv","_s21 re_actv");case"frst_hvr":return void n("/_s90 user_actv","_s30 frst_hvr");case"re_hvr":return void n("/_s90 user_actv","_s31 re_hvr");case"adp_click":!0!==cb&&(cb=!0,M(ma,"clck"),n("/_s90 user_actv","_s40 click",{res:"max"}),n("/_s90 user_actv/_s30 click_adp",b.adpName,{res:"max"}));break;case"hoverOn":if(_.setHover(!0),ba&&ba.mouseHoverReport(!0),!0===bb)break;bb=!0,M(ma,"hvon");break;case"hoverOff":_.setHover(!1),ba&&ba.mouseHoverReport(!1);break;case"addVisLstn":q(b);break;case"remVisLstn":r(b);break;case"visibOn":Qa=!0,s(a,{});break;case"visibOff":Qa=!1,s(a,{});break;case"mediaready":break;case"mediaover":I(!0);break;case"mail":P.mailmaster.send(b.from,b.subject,b.text,b.debugStrings);break;case"costping":if(null!==F()&&"unit"!==b.costType)return;b.untnam=va}O.fireEvent(a,b)},N.fireEvent("unit_start",{unitName:va,unitfbxID:Ya,smart:wa.smart}),N.fireEvent("unit_ex",{unitObj:N,unitName:va}),N.portMsg=function(a){if(a.attn===Za){var b=(a.from,a.payload);switch(b.cmd){case"userInteraction":h(),eb.push(b);break;case"mouseaction":ba&&ba.mouseActionReport(b)}}},N.newScroll=function(a){return null!==_&&_.newScroll(a)},N.getCurZIndex=function(){return null===_?"auto":_.getCurZIndex()},N.getUnitName=function(){return va},N.isOvrOn=function(){return null!==Xa&&(null!==_&&_.isOvrOn())},N.getUnitFbxID=function(){return Ya},N.abortNow=function(){ja=!0},N.plcMed=function(){H(!0)},N.newWinInfo=function(a){Ra=JSON.parse(JSON.stringify(a))},N.activityReport=function(a){ba&&ba.activityReport(a)},N.isDeployed=function(){return fb},N.isReady=function(){return gb},N.tick=function(a){!0!==ka&&(null!==_&&_.tick(a),null===Da&&(Da=S.getPartitionObj(Ea)),C(a),db.tick(a),Xa&&Xa.tick(a),ba&&ba.tick(a))},N.foreCmd=function(a,b){if(null===Xa)return"error";switch(a){case"fore_ON":jb=!0;break
;case"fore_OFF":jb=!1;break;case"fore_in":kb=!0,p("fore");break;case"fore_out":kb=!1,p(null);break;case"back_in":lb=!0,p("back");break;case"back_out":lb=!1,p(null)}return Xa.foreCmd(a,b)},N.foreMsg=function(a,b){return O.foreMsg(a,b)},P.heart.subscribe(N,50,"unit_exec",2,0),N.tick(Date.now())}}(config,barlogix,unit_actv,unit_flow,dombox,textools),section_exec=function(a,b,c,d,e){return function(f){function g(a){C.logger.writex({msg:a,prefix:"sectionmgr",inst:I})}function h(a){C.logger.writex({tgl:!0,msg:a,prefix:"sect:"+f.sectionName+" (sct_exec)"})}function i(a,b){F.fireLdrEvt("/_s40 section"+a,b)}function j(a,b,c){var d="/"+E.placementId+"/_s20 exec_tree/"+f.activeLayout+"/"+T+a;C.trackhub.sendEvent("stage",d,b,c)}function k(a,b){j("",a,b)}function l(a,b){var c=void 0;void 0!==b&&(c={att:b,ard:100}),j("/_s00 **errors**",a,c)}function m(a,b){switch(a){case"visibOn":ra=!0;break;case"visibOff":ra=!1;break;case"updatePos":case"lchok":break;case"lcherr_to":case"lcherr_ex":h("could not launch section - msg: "+b.msg);break;case"dmbx_error":A.abortNow(),h("section dombox error - msg: "+b.msg)}}function n(){function a(a){if(null===a)return"{null}";if(void 0===a)return"undefined";var b="";for(var c in a){var d=a[c];d=null===d?"null":void 0===d?"undefined":d.toString(),b+="<b>"+c+"</b>: "+d+"</br>"}return b}var b;b=!0===la?"Framed":null!==oa?"In-FIF":"In-Page";var c="";c+="<p>",c+="<b> << </b><mark><strong>"+ga+"</strong></mark><b> >> </b>",c+=!0===Z?"&nbsp;&nbsp;<strong>("+X.classID+")</strong>":"",c+="</p>",c+="<b>Section:</b> "+T+" (physical)</br>",c+="<b>Layout:</b> "+f.activeLayout+"</br>",c+="<b>Stage:</b> "+R+"  ("+S.tag+")</br>",c+="<b>Partition:</b> "+ka+"</br>",c+="</br>",c+="<b>Context: </b> "+b+"</br>",c+="</br>",c+="<b>Location:</b> "+W.location+"</br>",c+="<b>Position:</b> "+W.position+"</br>",c+="<b>Index:</b> "+W.index+"</br>",c+="<b>RowIdx:</b> "+W.rowidx+"</br>",c+="</br>",c+="<b>Ref Cls:</b> "+W.refcls+"</br>",c+="<b>Ref ID:</b> "+W.refid+"</br>",c+="<b>Ref Idx:</b> "+W.refidx+"</br>",c+="</br>",c+="<b>Width:</b> "+W.width+"</br>",c+="<b>Max Width:</b> "+W.maxwidth+"</br>",c+="<b>Min Width:</b> "+W.minwidth+"</br>",c+="<b>X-Factor:</b> "+W.xfactor+"</br>",c+="<b>X-Align:</b> "+W.xalign+"</br>",c+="<b>X-Trim:</b> "+W.xtrim+"</br>",c+="<b>X-Off:</b> "+W.xoff+"</br>",c+="</br>",c+="<b>Height:</b> "+W.height+"</br>",c+="<b>Max Height:</b> "+W.maxheight+"</br>",c+="<b>Min Height:</b> "+W.minheight+"</br>",c+="<b>Y-Factor:</b> "+W.yfactor+"</br>",c+="<b>Y-Align:</b> "+W.yalign+"</br>",c+="<b>Y-Trim:</b> "+W.ytrim+"</br>",c+="<b>Y-Off:</b> "+W.yoff+"</br>",c+="<b>Form Factor:</b> "+W.formfactor+"</br>",c+="</br>",c+="<b>Float Param:</b> "+W.floatpar+"</br>",c+="<b>Margin Left:</b> "+W.marginleft+"</br>",c+="<b>Margin Right:</b> "+W.marginright+"</br>",c+="<b>Margin Top:</b> "+W.margintop+"</br>",c+="<b>Margin Bottom:</b> "+W.marginbottom+"</br>",c+="</br>";var d=ha.getDomBoxStatus();return c+="<b>Dims:</b> "+d.width+"x"+d.height+"</br>",c+="<b>Style:</b> "+W.stylename+"</br>",c+="</br>",c+="<b>Version:</b> "+D.versionFolder+"</br>",c+="</br>",c+="</br><b>--- Publishing ----</b></br>",c+=a(f.publishing),c=c.replace(/\s/g,"&nbsp;")}function o(){function a(){var a=!1;return O.forEach(function(b){!0===b.isOvrOn()&&(a=!0)}),a}return!0!==da||!0!==a()}function p(b){switch(ua){case"INIT":if(i("","_s10 proc_start"),null!==N){g(),h("STAGE ERROR - section: "+T+" - "+N),l(N),ua="PARK";break}if(!0!==W.enabled){g(),k("_s00 section_ignored"),ua="PARK";break}if(!0===C.quickVars.shouldByPass("sections",T)){g(),k("_s00 section_bypassed"),ua="PARK";break}ua="CHECK_PUB";case"CHECK_PUB":var c=J.shouldPub(_,E.debugVars);if("wait"===c){g();break}if("no"===c){g(),ua="PARK";break}if(k(!0===da?!0===Z?"_s10 section_allotted [adframe]":"_s10 section_allotted [physical]":"_s10 section_allotted [virtual]"),g(),"sys"===E.ctxId){var d=!0;if(!0===E.debugVars.disableBarLogic&&(d=!1),!0===d&&!0!==J.checkReductions($,0)){g(),ua="PARK";break}}g(),ua="CHECK_PART";case"CHECK_PART":if(!0===da&&null===ja)break;if(k("_s20 sect_part_triggered ["+ka+"]"),"sys"!==E.ctxId){ua="ALLCLR";break}k("_s30 section_wait_cond"),va=b,ua="WEC";case"WEC":if("unspecified"===$.delay&&b-va>a.stage.envTimeout){g(),ua="PARK";break}var e=J.checkEnvCond($,F.getWindowInfo(),F.getSnippetValues(),F.getDeployedList(),F.getContentList(),!0);if("dontknow"===e.status||"wait"===e.status)break;if("go"!==e.status){var j="NA";"avoided_room"===e.msg?(g(),j="room"):"avoided_snip"===e.msg?(g(),j="snip"):"avoided_browser"===e.msg?(g(),j="browser"):"avoided_link"===e.msg?(g(),j="link"):"avoided_cnt"===e.msg&&(g(),j="cnt"),F.registerDeployment(T,!1),k("_s40 section_avoided ["+j+"]"),h("section avoided - "+j),ua="PARK";break}ua="ALLCLR";case"ALLCLR":if(k("_s50 section_deployed"),G("section deployed"),z(P,"lnch"),i("","_s30 deployed"),C.parcels.sendp("liveacc",{evt:"regPrxTrg",data:{name:T,type:"sect",id:ba,exdata:null}}),!1===W.onsoldx&&r(!1),F.execSnippet(W.ondeploy),!0===da&&null===(ha=t())){g(),k("_s72 section_undeployed"),ua="PARK";break}F.registerDeployment(T,!0),pa=!0,g(),C.beamCannon.fire(f.sectionTrackingBeams),va=b,ua="WAIT_DOMBOX";case"WAIT_DOMBOX":if(b-va>a.stage.domboxTimeout){k("_s52 dombox to"),ua="PARK";break}if(!0===da){if(!0!==ha.isReady())break;!0===Z&&(ia=u())}if(0===(wa=aa.length)){g(),ua="PARK";break}G("creating section units..."),x(b),k("_s60 section_complete"),qa=!0,g(),G("section complete"),va=b,ua="READY";case"READY":if(!0===M){y(),k("_s70 section_aborted"),F.registerDeployment(T,!1),L=!0,ua="PARK";break}if(b-va>a.stage.condCheckPeriod){var e=J.checkEnvCond($,F.getWindowInfo(),F.getSnippetValues(),F.getDeployedList(),F.getContentList(),!1);if("go"!==e.status){y(),k("_s70 section_aborted"),F.registerDeployment(T,!1),L=!0,ua="PARK";break}va=b}!0===sa&&(sa=!1,w())}}function q(a){function b(a,b){var c=!0;return O.forEach(function(d){d!==a&&null!==d&&!0!==d.foreCmd(b,{})&&(c=!1)}),c}function c(a,b){return a.foreCmd(b,{})}switch(xa){case"INIT":if(!0!==da)break;if(null===za)break;xa="RDY";case"RDY":if(!0!==Aa)break;if(!0!==ra)break;if(!0!==b(za,"canfore"))break;b(null,"fore_ON"),c(za,"fore_in"),b(za,"back_in"),ya=a,xa="FRNG";break;case"FRNG":if(!0===Aa)break;c(za,"fore_out"),b(za,"back_out"),za=null,ya=a,xa="HLDOFF";break;case"HLDOFF":if(a-ya<5e3)break;b(null,"fore_OFF"),xa="RDY"}}function r(a){if(!0!==ca){var b=s();null!==b&&(A.fireEvent("costping",{costType:"sect",amnt:b,onsold:!0===a?"1":"0"}),ca=!0)}}function s(){function a(a){return g(),h("STAGE ERROR - section: "+T+" - "+a),l(a),null}function b(a){return void 0!==a.exdata&&("NA"!==a.exdata&&null!==a.exdata)}if("unspecified"!==W.costx){var c=parseFloat(W.costx);return!0===isNaN(c)?a("bad stage cost spec"):Math.round(100*c)/100}if("unspecified"!==W.partition){if(!0!==b(ja))return null;var c=parseFloat(ja.exdata.prc)/100;return!0===isNaN(c)?a("bad exdata cost spec"):Math.round(100*c)/100}return null}function t(){function a(a,b){return!0!==la&&("ifrm"===b&&("inpage"===a.location&&"default"===a.position))}var b=W.style,c=f.getStyleSnippets(b),d=!1;!0===E.debugVars.dpx&&(d=!0),"sys"!==E.ctxId&&(d=!1);var g=ja.cntElmID,h=ja.trgElmID,i=ja.trgElmType;if(!0===(ma=a(W,i))){if(null===(oa=K.locateInPage(window,h,g)))return k("_s90 section_error [cannot locate '"+h+"']"),null;na=oa.contentWindow}return new e({master:A,comps:C,bootParams:E,plcmID:D.placementId,cllBks:f.cllBks,msgClbk:m,ovlStrClbk:n,mayShowOvrNow:o,enableOvr:d,restrLoc:!1,pntDomElmID:"",abstrElmID:fa,noBorder:!1,attributes:W,contFrmTagId:g,targetTagId:h,targetElmType:i,domElmId:ga,domElmIdPrfx:ea,stylename:b,stylesnippets:c,confined:la,isAdFrame:Z,insInFIF:ma,hostElm:oa,hostWnd:na,zindex:W.zindex,ovrl:!1})}function u(){if(null===ia){var a=ha.getDomBoxStatus(),b=ha.getDomElm();return C.xFrameInt.ladfm({origin:T,hostWnd:na,domBoxElm:b,width:a.width,height:a.height,adframeParams:X,ntvfrmts:Y,stageAttributes:S,adfMsgClbk:v,unitCodes:W.unitCodes})}}function v(a,b){}function w(){O.forEach(function(a){a.newWinInfo(V)})}function x(a){function b(a,b){g(),G("creating unit "+b+", section:"+U);var c=100*(U+1)+b,e={master:A,comps:C,cllBks:F,plcmParams:D,bootParams:E,startTime:H,stageID:Q,stageName:f.stageName,ntvfrmts:f.ntvfrmts,activeLayout:f.activeLayout,sectionAttr:W,sectionName:T,sectID:ba,phySect:da,sectPartAttr:W.partition,sectDomElmID:ga,unitName:a.name,attributes:a.attributes,conditions:a.conditions,publishing:a.publishing,adframe:a.adframe,adpostdata:a.adposts,unitLoopIdx:b,unitNumID:c,sectionInFIF:ma,sectionHostElm:oa,sectionHostWnd:na,winInfo:V,unitTrackingBeams:a.tracking,stageAttributes:f.stageAttributes,accChnID_stage:P,promolinkuri:f.promolinkuri,logolinkuri:f.logolinkuri},h=new d(e);if(null===h)throw"could_not_create_unit - code: 6GwdSnn3";return h}aa.forEach(function(a,c){var d=b(a,c);O.push(d)})}function y(){!0!==L&&O.forEach(function(a){a.abortNow()})}function z(a,b,c){var d={event:b,group:"seek_sect",ver:100,data:{sctID:ba}},e=d.data;switch(b){case"inst":e.sctnam=T,e.stgID=Q}C.accbeam.fire(a,d)}var A=this,B=f.master,C=f.comps,D=f.plcmParams,E=f.bootParams,F=f.cllBks,G=F.addLogLine,H=f.startTime,I=Math.round(999*Math.random());g(),i("","_s00 inst");var J=new c({bootParams:E}),K=new b,L=!1,M=!1,N=null,O=[],P=f.accChnID_stage,Q=f.stageID,R=f.stageName,S=f.stageAttributes,T=f.sectionName,U=f.sectionIdx,V=JSON.parse(JSON.stringify(f.winInfo)),W=f.attributes,X=f.adframe,Y=f.ntvfrmts,Z=void 0!==X,$=f.conditions,_=f.publishing,aa=f.sectionUnits,ba=Math.random().toString(16).substr(2,12),ca=!1;z(P,"inst");var da=W.physical||Z,ea="_fb_sect_",fa=""+100*(U+1),ga=ea+fa,ha=null,ia=null,ja=null,ka="intrinsic";"unspecified"!==W.partition&&(!0===da?ka=W.partition:N="partition specified in a non-physical section");var la=E.confined,ma=!1,na=window,oa=null,pa=!1,qa=!1,ra=!1,sa=!1,ta=0,ua="INIT",va=0,wa=0,xa="INIT",ya=0,za=null,Aa=!1;A.fireEvent=function(a,b){switch(a){case"mediaready":case"mediaover":case"adImpression":break;case"costping":if(null!==s()&&"sect"!==b.costType)return;b.sctnam=T;break;case"unit_content":!0===W.onsoldx&&!0===b.active&&r(!0)}B.fireEvent(a,b)},A.foreMsg=function(a,b){switch(a){case"adprdy":if(!0!==da)break;if(!0!==b.unitattr.overlay)break;za=b.unitexec,Aa=!0;break;case"adpdone":if(!0!==da)break;if(!0!==b.unitattr.overlay)break;if(za!==b.unitexec)break;Aa=!1}},A.isDeployed=function(){return pa},A.isReady=function(){return qa},A.activityReport=function(a){O.forEach(function(b){null!==b&&!0===b.isDeployed()&&!0===b.isReady()&&void 0!==b.activityReport&&b.activityReport(a)})},A.newWinInfo=function(a){V=JSON.parse(JSON.stringify(a)),sa=!0},A.portMsg=function(a){O.forEach(function(b){b.portMsg(a)})},A.tick=function(a){null===ja&&(ja=F.getPartitionObj(ka)),p(a),null!==ha&&ha.tick(a),a-ta<100||(ta=a,q(a))},A.abortNow=function(){M=!0},G("section initialized"),C.heart.subscribe(A,50,"sectionexec",3,0),A.tick(Date.now())}}(config,textools,barlogix,unit_exec,dombox),stage_exec=function(a,b,c,d){return function(b){function e(a){N.logger.writex({msg:a,prefix:"stageexec",inst:V})}function f(a){N.logger.writex({tgl:!0,msg:a,prefix:"stage:"+P.placementId+" (stg_exec)"})}function g(a,b){Q.fireLdrEvt("/_s30 stage"+a,b)}function h(a,b,c){i("/_s20 exec_tree",b,c)}function i(a,b,c){j("/"+P.placementId+a,b,c),j("/*AllStages*"+a,b,c)}function j(a,b,c){N.trackhub.sendEvent("stage",a,b,c)}function k(a){i("/_s25 times_ms"+a,Date.now()-R,{scl:"shorttimes"})}function l(){return fa}function m(){return ha}function n(a){if(void 0!==a&&null!==a&&"unspecified"!==a)return N.snippetManager.execSnippet(a)}function o(a){var b=null;return ia.forEach(function(c){null===b&&c.partId===a&&(b=c.data)}),b}function p(a){function b(a){N.parcels.sendp("partdata",a)}function c(a){function b(a){var b=!1;return ia.forEach(function(c){c.partId===a&&(b=!0)}),b}function c(a){try{var b=JSON.parse(JSON.stringify(a));b.exdata=JSON.parse(b.exdata),b.status="ok"}catch(a){}return b.status="error",b}var d=!1;return a.forEach(function(a){if(!0!==b(a.partId)){var f={partId:a.partId,data:c(a)};ia.push(f),d=!0,e(),N.parcels.sendp("liveacc",{evt:"regPrxTrg",data:{name:f.partId,type:"part",id:f.partId,exdata:f.data.exdata}}),e()}}),d}if(!(a-Z<200)){Z=a;var d=Q.getPartData();!0===c(d)&&(b(d),N.liveDboRoot.updatePartitions(d),e(),U("partitions status changed"))}}function q(){return ja}function r(a,b){function c(a){for(var b=0;b<ja.length;b++){var c=ja[b];if(c.entityName===a)return c}return null}if("unspecified"!==a){var d=c(a);if(null!==d)return void(d.deployed=b);var e={entityName:a,deployed:b};ja.push(e)}}function s(){return ka}function t(a,b){function c(a){for(var b=0;b<ka.length;b++){var c=ka[b];if(c.entityName===a)return c}return null}if("unspecified"!==a){var d=c(a);if(null!==d)return void(d.content=b);var e={entityName:a,content:b};ka.push(e)}}function u(a){for(var b=ba.csscode.styles,c=0;c<b.length;c++){var d=b[c];if(d.name===a)return d.styleSnippets}return null}function v(a,b){function c(b,c){var d=a.document.createElement("script");d.setAttribute("type","text/javascript"),d.src=c,d.id=b,a.document.head.appendChild(d)}var d="mainwnd";if(void 0!==a._fb_data_&&(d=a._fb_data_.ctxID),void 0===la[d]){la[d]=b;var f="http://";!0===P.secProt&&(f="https://"),"fb"!==b&&("undefined"!=typeof jwplayer&&null!==jwplayer?(U("video module found ..."),U("... version --\x3e "+jwplayer.version),U("... key --\x3e "+jwplayer.key)):"jw"===b&&"dev"===P.env&&(c("hlplib",f+"localhost:3001/altp/ref/altproot.js"),e()))}}function w(a){return!(Date.now()-oa<qa)&&(null===ma||ma===a)}function x(a,b){return!0===a?null===ma&&(ma=b,!0):(ma=null,oa=Date.now(),!0)}function y(a){return!(Date.now()-pa<ra)&&(null===na||na===a)}function z(a,b){return!0===a?null===na&&(na=b,!0):(na=null,pa=Date.now(),!0)}function A(){return!(Date.now()-sa<ta)}function B(){sa=Date.now()}function C(a){if(!0!==$){var b=D();null!==b&&(M.fireEvent("costping",{costType:"stage",entCost:b,onSold:!0===a?"1":"0"}),$=!0)}}function D(){function a(a){return e(),f("STAGE ERROR - stage: "+_sectionName+" - "+a),h("","_s90 costx error"),null}if("unspecified"!==ba.attributes.costx){var b=parseFloat(ba.attributes.costx);return!0===isNaN(b)?a("bad stage cost spec"):Math.round(100*b)/100}return null}function E(a){var b={event:a.costType,group:"costx",ver:100,data:{stgnam:void 0!==a.stgnam?a.stgnam:"",sctnam:void 0!==a.sctnam?a.sctnam:"",untnam:void 0!==a.untnam?a.untnam:"",amnt:a.amnt,onsold:a.onsold}};N.accbeam.fire(da,b);var c=a.costType+": "+a.amnt;!0===a.onsold&&(c+=" (on sold)"),i("/_s50 cst_pings",c),i("/_s51 cst_amts",a.amnt),e()}function F(a){if(!0===X){var b=Q.getStageMsg();if(null!==b){if("port"===b.type)return void _.forEach(function(a){a.portMsg(b.data)});if("dyninf"===b.type){var c=b.data;if("wininfo"===c.cmd){var d=JSON.stringify(c.params);if(d===JSON.stringify(fa))return;return e(),U("wininfo status rcvd"),fa=JSON.parse(d),void(ga=!0)}if("snippetupdate"!==c.cmd)return"docstatus"===c.cmd?(Da=c.isDocActive,Ea=c.isDocVisible,U("docstatus rcvd"),void _.forEach(function(a){a.activityReport(c)})):void 0;var f=JSON.stringify(ha);if(JSON.stringify(c.snippetValues)===f)return;va=c.snippetCount,ha=JSON.parse(JSON.stringify(c.snippetValues)),wa=!0;for(var g in ha)e();if(!0===xa){xa=!1,U("snippet info avail");for(var g in ha){var h="[ "+g+" ] = '"+ha[g]+"'";j(P.placementId+"/_s30 snippets",h)}}else e(),U("snippet info changed")}}}}function G(c){switch(!0===ga&&(ga=!1,I()),ya){case"INIT":if(!0===O.totstop){ya="STG_STP";break}Q.debugPing("/_s30 stgexc","_10 inst"),g("","_s10 proc_start"),f("stage start - plcm: "+P.placementId+", clID: "+P.clientID.substring(10,16)+", tgroup: "+P.testGroup+", tcase: "+P.testCase+", ctxId: "+P.ctxId),h("","_s10 start"),k("/_s10 start"),za=c,ya="WAIT_AVAIL";case"WAIT_AVAIL":var d=N.stageManager.getStatus();if("..."===d)break;if("all_ok"!==d){e(),Aa=d,ya="STG_MGR";break}if(g("","_s20 allotted"),h("","_s20 allotted"),k("/_s20 data_avail"),ba=N.stageManager.getStgCard(),e(),U("stage data available, tag:"+ba.attributes.tag),i("/_s40 tags",ba.attributes.tag),Q.debugPing("/_s30 stgexc","_20 stgcrd"),null===H()){Aa="noconfig",ya="STG_AVD";break}if(f("stage running - layout: "+ba._activeLayout),!0!==ba.attributes.enabled){e(),Aa="not_enabled",ya="STG_IGN";break}if(!0===N.quickVars.shouldByPass("stages",ba.name)){e(),Aa="passby",ya="STG_IGN";break}ya="CHECK_CMP";case"CHECK_CMP":k("/_s30 cmp_avail"),ya="CHECK_PUB";case"CHECK_PUB":var j=W.shouldPub(ba.publishing,P.debugVars);if("wait"===j){e();break}if("no"===j){e(),Aa="not_published",ya="STG_IGN";break}if(Q.debugPing("/_s30 stgexc","_30 stgpub"),k("/_s40 pub_ok"),e(),"sys"!==P.ctxId){ya="ALLCLR";break}var o=!0;if(!0===P.debugVars.disableBarLogic&&(o=!1),!0===o&&!0!==W.checkReductions(ba.conditions,0)){Aa=W.getMessage(),ya="STG_SKP";break}e(),U("stage survived reduc"),k("/_s50 red_ok"),za=c,ya="WFEC";case"WFEC":if("unspecified"===ba.conditions.delay&&c-za>a.stage.envTimeout){Aa="stage_env_timeout",ya="STG_ERR";break}var p=W.checkEnvCond(ba.conditions,l(),m(),"NA","NA",!0);if("dontknow"===p.status||"wait"===p.status)break;if("go"!==p.status){"avoided_room"===p.msg?Aa="room":"avoided_snip"===p.msg?Aa="snippet":"avoided_browser"===p.msg&&(Aa="browser"),ya="STG_AVD";break}ya="ALLCLR";case"ALLCLR":e(),U("stage survived conditions"),k("/_s60 cond_ok"),Q.debugPing("/_s30 stgexc","_40 allclr"),!1===ba.attributes.onsoldx&&C(!1),L(da,"lnch"),N.parcels.sendp("liveacc",{evt:"regPrxTrg",data:{name:ca,type:"stage",id:ea,exdata:null}});var q=N.quickVars.getMetha();if(i("/_s90 qv_status","status: "+q.status+" | msg: "+q.msg+" | code: "+q.code),n(ba.attributes.ondeploy),g("","_s30 deployed"),h("","_s30 deployed"),f("stage deployed"),ua=!0,e(),0===(Ba=ba.sections.length)){Aa="no_sections_found",ya="STG_IGN";break}Ca=c,J(c),h("","_s40 complete"),k("/_s70 complete"),U("stage complete"),N.trackhub.sendEvent("performance","/times/_s20 load_to_stage_ready",Date.now()-b.startTime,{scl:"cycleCount"}),Q.debugPing("/_s30 stgexc","_50 ready"),za=c,ya="STG_RDY";case"STG_RDY":if(c-za>a.stage.condCheckPeriod){var p=W.checkEnvCond(ba.conditions,l(),m(),"NA","NA",!1);if("go"!==p.status){K(),Aa="aborted",ya="STG_ABT",Q.debugPing("/_s30 stgexc","_60 abrt");break}za=c}break;case"STG_STP":e(),f("stage total stop!!!"),h("","_s80 total_stop"),ya="PARK";break;case"STG_MGR":e(),f("stage manager code: "+Aa),h("","_s81 stgmgr_code: "+Aa),ya="PARK";break;case"STG_SKP":e(),f("stage skipped - "+Aa),h("","_s82 skipped"),ya="PARK";break;case"STG_AVD":e(),f("stage avoided - "+Aa),h("","_s83 avoided"),ya="PARK";break;case"STG_NA":e(),f("stage unavailable"),h("","_s84 unavailable"),ya="PARK";break;case"STG_ERR":e(),f("stage error - "+Aa),h("","_s85 error"),ya="PARK";break;case"STG_IGN":e(),f("stage ignored - "+Aa),h("","_s86 ignored"),ya="PARK";break;case"STG_ABT":e(),f("stage aborted"),h("","_s87 aborted"),ya="PARK"}}function H(){function a(a,b,c){for(var d=ba.configurations,e=0;e<d.length;e++){var f=d[e].attributes;if(!0===f.enabled&&!("unspecified"!==f.pubcode&&c.pCode!==f.pubcode||!0===f.ifcasea&&!1===f.ifcaseb&&"A"!==b||!1===f.ifcasea&&!0===f.ifcaseb&&"B"!==b||"unspecified"!==f.ifcase&&b.toLowerCase()!==f.ifcase.toLowerCase()||"unspecified"!==f.ifwidthmore&&a<parseInt(f.ifwidthmore)||"unspecified"!==f.ifwidthless&&a>parseInt(f.ifwidthless)))return{configIdx:e,layoutName:d[e].attributes.layout}}return null}function b(a){for(var b=ba.layouts,c=0;c<b.length;c++){var d=b[c];if(d.name===a)return d}return null}var c=O.testCase,d=Q.genWinInfo(),g=d.physicalWidth,h=a(g,c,P.debugVars);if(null===h)return null;ba._activeConfigIdx=h.configIdx,ba._activeLayout=h.layoutName;var j=b(h.layoutName);return null===j?(N.trackhub.sendEvent("alerts","stage_mgr/"+P.placementId,"stage_error_nolayout"),i("/_s40 errors","_s10 layout_error"),e(),f("WARNING: layout error:"+h.layoutName),null):(ba.sections=j.sections,h.configIdx)}function I(){for(var a=0;a<_.length;a++){var b=_[a];b&&b.newWinInfo(fa)}}function J(a){function c(a){var c=ba.sections[a];e(),U("creating section: "+c.name),Q.getSnippetValues=m,Q.execSnippet=n,Q.getPartitionObj=o,Q.getWindowInfo=l,Q.getStyleSnippets=u,Q.getDeployedList=q,Q.getContentList=s,Q.registerDeployment=r,Q.registerContent=t,Q.loadVastLibs=v,Q.canSearchVideo=w,Q.getRelSearchVideo=x,Q.canShowVideo=y,Q.getRelShowVideo=z,Q.canSwitchNow=A,Q.updateSwitchTimer=B;var f={master:M,comps:N,cllBks:Q,plcmParams:O,bootParams:P,testCase:O.testCase,vastDevice:P.vastDevice,versionTag:P.versionTag,startTime:b.startTime,heart:N.heart,logger:N.logger,genWinInfo:Q.genWinInfo,addLogLine:Q.addLogLine,getSnippetValues:m,getPartitionObj:o,getWindowInfo:l,getStyleSnippets:u,getDeployedList:q,getContentList:s,registerDeployment:r,registerContent:t,stageName:ca,stageAttributes:ba.attributes,ntvfrmts:ba.ntvfrmts,activeLayout:ba._activeLayout,sectionName:c.name,attributes:c.attributes,adframe:c.adframe,conditions:c.conditions,publishing:c.publishing,sectionIdx:a,winInfo:fa,sectionTrackingBeams:c.tracking,sectionUnits:c.units,mailmaster:N.mailmaster,beamCannon:N.beamCannon,accbeam:N.accbeam,dtomanager:N.dtomanager,macroproc:N.macroproc,bdcnxhub:N.bdcnxhub,sourceadmin:N.sourceadmin,snippetManager:N.snippetManager,activityDet:N.activityDet,tracker:N.tracker,placementId:P.placementId,baseUrl:P.baseUrl,hostDomain:P.hostDomain,hostPageUrl:P.hostPageUrl,hostPageTitle:P.hostPageTitle,referer:P.referer,imprID:P.imprID,clientID:P.clientID,stageID:ea,accChnID_stage:da};return new d(f)}U("creating sections...");for(var f=ba.sections,g=0;g<f.length;g++){var h=c(g);null!==h&&_.push(h)}}function K(){for(var a=0;a<_.length;a++){var b=_[a];null!==b&&b.abortNow()}Y=!0}function L(a,b,c){var d={event:b,group:"seek_stage",ver:100,data:{stgID:ea}},e=d.data;switch(b){case"inst":e.stgnam=ca}N.accbeam.fire(a,d)}var M=this,N=b.comps,O=b.plcmParams,P=b.bootParams,Q=b.cllBks,R=b.startTime,S=N.exeControl,T=N.bdadmin,U=Q.addLogLine;Q.debugPing("/_s30 stgexc","_00 build");var V=Math.round(999*Math.random());e(),g("","_s00 inst"),h("","_s00 inst"),k("/_s00 inst");var W=new c({bootParams:P});U("stage exec here");var X=!1,Y=!1,Z=0,$=!1,_=[],aa=[],ba=null,ca=P.placementId;M.fireEvent=function(a,b){switch(a){case"unit_ex":aa.push(b.unitObj),N.tracker.exNotif("rung",{unitName:b.unitName});break;case"segSeek":break;case"mediaready":N.tracker.exNotif("mediaon",{unitName:b.unitName});break;case"adison":t(b.unitName,!0),N.tracker.exNotif("mediavld",{unitName:b.unitName});break;case"costping":if(null!==D()&&"stage"!==b.costType)return;return b.stgnam=ca,void E(b);case"unit_content":!0===ba.attributes.onsoldx&&!0===b.active&&C(!0)}S.hcComm({event:a,data:b}),T.hcComm({event:a,data:b})};var da="_stage";N.accbeam.register(da,a.accbeam.channels.stage.red);var ea=Math.random().toString(16).substr(2,12);L(da,"inst");var fa=(P.placementId,Q.genWinInfo()),ga=!1,ha=null,ia=[],ja=[],ka=[],la={},ma=null,na=null,oa=0,pa=0,qa=1e3*N.quickVars.getParam("prmSearchHoldOff",a.smartunits.prmSearchHoldOff),ra=1e3*N.quickVars.getParam("prmShowHoldOff",a.smartunits.prmShowHoldOff),sa=0,ta=3e3;f("stage instance - version: "+P.versionTag+" - filter: "+P.filterTag);var ua=!1,va=0,wa=!1,xa=!0,ya="INIT",za=0,Aa=null,Ba=0,Ca=null,Da=(Date.now(),!1),Ea=!0;M.scrollEvent=function(a){aa.forEach(function(b){b.newScroll(a)})},M.isReady=function(){return ua},X=!0,M.tick=function(a){F(a),p(a),G(a)},N.heart.subscribe(M,50,"stageexec",4,0),M.tick(Date.now()),N.trackhub.sendEvent("performance","/times/_s10 load_to_stage_start",Date.now()-b.startTime,{scl:"cycleCount"})}}(config,0,barlogix,section_exec),stm_cachedfile=function(a,b,c){return function(a){function d(a){o.logger.writex({msg:a,prefix:"stm_cachedfile",inst:t})}function e(a,b,c){var d="/cachef/"+q.placementId+a;o.trackhub.sendEvent("performance",d,b,c)}function f(b){switch(A){case"INIT":if(!0===a.forcerefresh){e("","_s12 forced"),A="LAC";break}x=null,j(w),B=b,A="WCS";case"WCS":if(null===x)break;if(!0===x){e("","_s20 from_cache"),m("ok",z,"from_cache"),A="PARK";break}A="LAC";case"LAC":y=null,l(v),B=b,A="WFR";case"WFR":if(b-B>a.timeout){e("","_s34 from_file_to"),m("error",null,"timeout"),A="PARK";break}if(null===y)break;if(!0!==y){e("","_s36 from_file_err"),m("error",null,"call_error"),A="PARK";break}e("","_s30 from_file"),e("/_s10 sizeK",Math.round(z.length/100)/10,{scl:u}),m("ok",z,"from_file"),k(z,w),A="PARK";break;case"PARK":o.heart.unsubscribe(n)}}function g(a){var b="http://";return!0===a.secProt&&(b="https://"),b+i(a)}function h(a){var b=i(a),c=b.indexOf("/");c>=0&&(b=b.substring(c+1));var d=b.replace(/\//g,"_"),e=d.indexOf("?");e>=0&&(d=d.substring(0,e));var f=d.indexOf("#");return f>=0&&(d=d.substring(0,f)),"stgm_"+d}function i(a){var b="";return null===a.synchro||"dev"===a.env?b+=a.dataBaseUrl+"/"+a.folderPath+"/"+a.fileName+"."+a.fileExt:b+=a.dataBaseUrl+"/"+a.folderPath+"/"+a.fileName+"_fbx999_"+a.synchro+"."+a.fileExt,!0===a.forcerefresh&&(b+="?cb="+Math.round(999999*Math.random())),b}function j(b){function c(b){var c=s;"dev"===a.env&&(c=1e4),x=!1;try{if(null===b)throw{msg:"no_data"};if(b.ver!==r)throw{msg:"incomp_cache_version"};if(Date.now()-b.ts>c)throw{msg:"cache_data_too_old"};if(null===(z=b.filedata))throw{msg:"invalid_data"};return void(x=!0)}catch(a){}}c(o.memhub.getItem(b))}function k(b,c){if(null===b)return!1;var d={ts:Date.now(),ver:r,filedata:b},e={folder:a.mhfolder,inclear:a.inclear,maxage:a.lifeTime};return o.memhub.setItem(c,d,e),"sys"===q.ctxId&&o.baseBridge.setItem(c,d,e),!0}function l(b){function d(b){y=!1,null!==b&&"string"==typeof b&&""!==b&&(z=""+b,!0===a.shorten&&(z=z.replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,"")),y=!0)}function e(){y=!1}function f(a,b,d){var e={method:"GET",url:a,onSucc:function(a){b(""+a.responseText)},onFail:function(){d("")},options:{timeout:5e3,withCredentials:!1}};new c(e)}f(b,d,e)}function m(b,c,e){d(),z=c,"ok"===b?a.callback(b,c,e):a.callback("error",null,e)}var n=this,o=a.comps,p=a.cllBks,q=a.bootParams,r=100,s=2592e6,t=(p.addLogLine,Math.round(999*Math.random()));d();var u="trgFileSize";!0!==b.isSeries(u)&&b.addSeries(u,{start:0,maxval:100,inc:10,exp:!0});var v=g(a),w=h(a),x=null,y=null,z=null,A="INIT",B=0;this.tick=function(a){f(a)},o.heart.subscribe(this,100,"stm_cachedfile",0,0),n.tick(Date.now()),e("","_s10 inst")}}(0,antools,ajaxcall),stm_blockdet=function(a,b){return function(c){function d(a){k.logger.writex({msg:a,prefix:"stm_blockdet",inst:x})}function e(a){switch(r){case"INIT":s=a,r="WAIT_URL_RES";case"WAIT_URL_RES":if(null===t&&a-s>2e3){g(!1),r="PARK";break}if(null===v)break;g(v),h(v),r="PARK";break;case"PARK":k.heart.unsubscribe(j)}}function f(){function c(){v=!1,g(v)}function d(){w.push("url blocked"),v=!0,g(v)}function e(a,c,d){var e={method:"GET",url:a,onSucc:function(a){c(""+a.responseText)},onFail:function(){d("")},options:{timeout:5e3,withCredentials:!1}};new b(e)}var f="http://";location.protocol.toLowerCase().indexOf("https")>=0&&(f="https://"),e(f+a.resourceLocations.adServeUrl+"/adbox_ad_banner_Ad300x250.jpg",c,d)}function g(a){if(!1===u){u=!0;var b="unknown";null===t&&(!0===a?(b="yes_detected",t=!0):!1===a&&(b="not_detected",t=!1));q("ad-blocker status: "+b),d()}}function h(a){if(!0===a||!1===a)try{var b={ts:Date.now(),ver:n,abDataStr:JSON.stringify({det:a})},c=JSON.stringify(b);return k.memhub.setItem(p,c),"sys"===m.ctxId&&k.baseBridge.setItem(p,c),!0}catch(a){return!1}}function i(){try{var a=k.memhub.getItem(p),b=JSON.parse(a);if(b.ver!==n)throw{msg:"incomp_versions"};if(Date.now()-b.ts>o)throw{msg:"data_too_old"};var c=JSON.parse(b.abDataStr);return null===c?null:c.det}catch(a){return null}}var j=this,k=c.comps,l=c.cllBks,m=c.bootParams,n=110,o=216e5,p="device_adblk",q=l.addLogLine,r="INIT",s=0,t=null,u=!1,v=null,w=[],x=Math.round(999*Math.random());if(d(),j.getStatus=function(){return t},j.tick=function(a){e(a)},"dev"!==m.env){var y=i();if(null!==y)return void g(y)}f(),k.heart.subscribe(j,100,"stm_blockdet",0,0)}}(config,ajaxcall),stm_srcsrvr=function(a,b,c){return function(b){function d(a){b.logger.writex({msg:a,prefix:"stm_srcsrvr",inst:C})}function e(a,b,c){function d(d){function e(e){F.sendEvent("stage",d+"/_s10 stgmgr/_s20 srcsrv/"+e+a,b,c)}e("*AllSrcSets*"),e(D)}d("*AllStages*"),d(A.placementId)}function f(a,b){if("ok"!==a)return void(Y=!1);try{X=JSON.parse(b),Z=b.length,Y=!0}catch(a){Y=!1}}function g(a,b,c,d){var e="NA";null!==T&&(e=T.segmType);var f=T.mdType+"/"+e+"/"+D,g="/_s00 ss_inf/"+b;F.sendEvent("tags",f+g,c,d)}function h(a,b,c,d){var e="NA";null!==T&&(e=T.segmType);var f=T.mdType+"/"+e+"/"+D,g="/_s20 by_tag/${"+a+"|*AllTags*}$/"+b;F.sendEvent("tags",f+g,c,d)}function i(){function a(a){function b(a){var b={status:"-",tagname:"",rem:""},c=""+a,d=c.indexOf("${");if(d<0)return b;var e=c.indexOf("}");if(e<0)return b;var f=c.substring(d,e+1);return b.rem=c.replace(f,""),b.tagname=f.substring(2,f.length-1),b.status="ok",b}for(var c,d=[],e=0,f=a;e<100&&(e++,c=b(f),"ok"===c.status);)d.push(c.tagname),f=c.rem;return d}var b=[];try{var c=window.localStorage.getItem("fb_spec_tags");if(null===c)throw"no_spec_tags_file";var b=a(c)}catch(a){}return b}function j(a){var b=!1;return W.forEach(function(c){c===a&&(b=!0)}),b}function k(){function a(a,b){try{for(var c=0;c<a.length;c++){var f=a[c];if(f.name===b){if("ok"!==f.status)break;return f.synchro}}}catch(a){}return d(),e("","_s80 no_synchro_data"),null}return a(b.ssFileData,D)}function l(a){switch(M){case"INIT":e("","_s10 inst"),N=a,M="WAIT_FOR_SRCDATA";break;case"WAIT_FOR_SRCDATA":if(null===Y)break;if(!0!==Y){d();var c="ss_file_error - "+D;$.push(c),e("","_s32 ss_file_error"),e("/ss_file_error",D),M="ERROR";break}d(),e("","_s14 file_retr_ok"),e("/_s10 file_size_k",Math.round(Z/1e3),{scl:"mediumtimes"}),e("/_s20 file_rtrv_tm_ms",a-N,{scl:"shorttimes"}),M="WAIT_FOR_DTODATA";case"WAIT_FOR_DTODATA":var f=G.isDtoAvail();if(null===f)break;if(!0===f){var c="source_loop_starts (dto ok)";$.push(c),e("","_s20 dto_retr_OK")}else{var c="source_loop_starts (dto not available)";$.push(c),e("","_s22 dto_retr_NOT_OK")}e("","_s30 ss_build");var i=s(D,b.useCount,X);if("ok"!==i.status){d();var c="ss_build_error - "+D+" - stat:"+i.status+", msg: "+i.msg;$.push(c),e("","_s32 ss_build_error"),e("/ss_build_error",c),M="ERROR";break}var k=G.mergeDtoInfo(i.sourceSetInfo);T=k.locSourceInfo,U=k.dtoFactors,$.push("DTO factors: "+JSON.stringify(U)),p(T),e("","_s34 ss_build_ok"),O=0,P=null,M="TAG_LOOP";case"TAG_LOOP":if(Q=t(O,T,L),O++,null===Q){if(!0===L){if(null!==P){var l=0;O>0&&(l=100*P/O),g(S,"perfm/_s10 top_idx",P,{scl:"mediumtimes"}),g(S,"perfm/_s20 top_prc",l,{scl:"percRange"}),g(S,"perfm/_s30 cutoff","yes")}else g(S,"perfm/_s30 cutoff","no");L=!1,O=0;break}r();var c="sourceset sent";$.push(c),M="READY";break}R=JSON.parse(JSON.stringify(Q)),S=R.sourceName.replace(T.name+"_","");var u=S;u+=" - v:"+R.compvalue,u+=" - xv:"+R.extDTOVars.combValue,u+=" - iv:"+R.intDTOVars.combValue,u+=" - sc:"+R.intDTOVars.sessCount,u+="  |  rc:"+R.intDTOVars.reqCount,u+="  |  hc:"+R.intDTOVars.hitCount,u+="  |  hs:"+R.intDTOVars.hrShare,u+="  |  bc:"+R.intDTOVars.bidCount,u+="  |  bp:"+R.intDTOVars.bidAvgPrc,u+="  |  bs:"+R.intDTOVars.bidAmtShr,u+="  |  wc:"+R.intDTOVars.winCount,u+="  |  wp:"+R.intDTOVars.winAvgPrc,u+="  |  ws:"+R.intDTOVars.winAmtShr;var v=j(R.sourceName);if(h(S,"use","_s01 inst"),!0!==v&&!0!==R.enabled){d();var c="tag_disabled - "+u;$.push(c),h(S,"use","_s10 disabled"),R=null,M="TAG_LOOP";break}if(R.curbIdx_Hr=0,R.curbIdx_Er=0,R.curbIdx_Dl=0,!0===R.active&&!0===R.curb){var i=n(R.extDTOVars,T.mdType);if(h(S,"curbIdx/hit",i.curbIdx_Hr,{scl:"percRange"}),h(S,"curbIdx/err",i.curbIdx_Er,{scl:"percRange"}),h(S,"curbIdx/dly",i.curbIdx_Dl,{scl:"percRange"}),R.curbIdx_Hr=i.curbIdx_Hr,R.curbIdx_Er=i.curbIdx_Er,R.curbIdx_Dl=i.curbIdx_Dl,"go"!==i.status){var c="tag_avoided ("+i.reason+") - "+u;$.push(c),h(S,"use","_s20 avoided - "+i.reason),R=null,M="TAG_LOOP";break}}if(!0===R.active){if(h(S,"perfm/value",R.p_val,{scl:"mediumtimes"}),h(S,"perfm/idx",R.p_idx,{scl:"mediumtimes"}),!0!==o(R,T)){$.push("tag_avoided (perfm) - "+u),h(S,"use","_s20 avoided - perfm"),R=null,
null===P&&(P=O),h(S,"perfm/in_top","_s20 no"),M="TAG_LOOP";break}h(S,"perfm/in_top","_s10 yes")}var x="sourcetag",y="tag_"+R.sourceName,z=0;void 0!==R.maxday&&"unspecified"!==R.maxday&&(z=parseInt(R.maxday));var B=!1;void 0!==R.strict&&("true"!==R.strict&&!0!==R.strict||(B=!0));var C=0,F=!1;if(R.overuse=0,0!==z&&(C=H.getExpCount("sourcetag",y,864e5),C>=z&&(!0===B?F=!0:(R.category=4,R.overuse=C-z)),C-z<=4&&H.registerExposure(x,y)),!0===F){var c="tag_skipped - "+u+", dcnt:"+C;$.push(c),d(),h(S,"use","_s30 skipped"),R=null,M="TAG_LOOP";break}if(R.insbx=!1,"sys"===A.ctxId){var i=m(T,R,K,E,R.sbxmode),I="NA";!0===i.enoughInfo&&(I=i.hintValue);var J="  |  hint_v: "+I+" ("+i.hintNum+":"+i.hintDenom+")";i.banTimeLeft>0&&(J+=" - (banned) left: "+i.banTimeLeft+" (mins)"),!0!==v&&!0===i.insbx&&(R.insbx=!0)}!0===R.insbx&&h(S,"use","_s45 sandboxed (mad)"),q(R);var c="tag_sent - "+u+" - c:"+String.fromCharCode(65+R.category);c+=J,$.push(c),d(),h(S,"use","_s40 dispatched"),R=null,M="TAG_LOOP";break;case"READY":e("","_s40 done"),M="PARK";break;case"ERROR":e("","_s42 error"),M="PARK";break;case"PARK":b.heart.unsubscribe(w)}}function m(b,c,d,e,f){function g(a,b){return void 0!==b[a]}function h(a,b,c,d,e,f,g){function h(a,b,c){F.sendEvent("madevt_l",a,b,c)}var i=a.name,j=b.sourceName.replace(i+"_","");h("_s10 bfsValues/"+i+"/${"+j+"|*AllTags*}$/_s12 hintValues",c,{scl:"dtoRange"}),h("_s10 bfsValues/"+i+"/${"+j+"|*AllTags*}$/_s20 tagLoads",b.bfsVars.loads,{scl:"cycleCount"}),h("_s10 bfsValues/"+i+"/${"+j+"|*AllTags*}$/_s40 inBanPeriod",!0===e?"YES":"NO"),h("_s10 bfsValues/"+i+"/${"+j+"|*AllTags*}$/_s50 inLocalBan",!0===f?"YES":"NO"),h("_s10 bfsValues/"+i+"/${"+j+"|*AllTags*}$/_s60 sbxMode",g)}var i={insbx:!0,enoughInfo:!1,hintValue:0,hintNum:0,hintDenom:0,banTimeLeft:"--"},j=c.bfsVars,k=!1;i.hintNum=j.hints,i.hintDenom=j.loads,j.loads>=a.mad.banMinLoad&&(i.enoughInfo=!0,i.hintValue=Math.round(100*j.hints/j.loads),i.hintValue>a.mad.banThresh&&(k=!0));var l=g(c.sourceName,e),m=!1,n=Math.floor(j.lastban/1e3),o=n+60*a.mad.banPeriod,p=Math.floor(d/1e3),q=o-p,r=Math.round(q/60);if(q>0&&(m=!0,r<600&&(i.banTimeLeft=r)),h(b,c,i.hintValue,k,m,l,f),"no"===f)return i.insbx=!1,i;if("yes"===f)return i.insbx=!0,i;if(!0===m||!0===l)return i.insbx=!0,i;if(!1===k)return i.insbx=!1,i;var s={group:"mad_tag",event:"ban",ver:100,data:{tagnam:c.sourceName,time:a.mad.banPeriod}};return J.fire(_,s),i.hintNum=j.hints,i.hintDenom=j.loads,w.fireEvent("bannedTag",{tagName:c.sourceName,hints:j.hints,loads:j.loads,hintValue:i.hintValue}),i.insbx=!0,i}function n(b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(!(a>=d.value)){if(0===c)return 0;var d=b[c-1];return d.curb}}var d=b[b.length-1];return d.curb}function e(a){var b=1e4,c=b*(100-a)/100;return Math.round(Math.random()*b)>c}var f={status:"---",reason:"NA",curbIdx_Hr:null,curbIdx_Er:null,curbIdx_Dl:null};return f.curbIdx_Hr=d(b.hitrate,a.tagserver.curbTable_Hr),"vid"===c&&(f.curbIdx_Hr=0),f.curbIdx_Er=d(b.errate,a.tagserver.curbTable_Er),f.curbIdx_Dl=d(b.avgdelay,a.tagserver.curbTable_Dl),b.total<a.tagserver.minCount?(f.status="go",f):!0===e(f.curbIdx_Hr)?(f.status="dontgo",f.reason="hitrate",f):!0===e(f.curbIdx_Er)?(f.status="dontgo",f.reason="errate",f):!0===e(f.curbIdx_Dl)?(f.status="dontgo",f.reason="avgdelay",f):(f.status="go",f)}function o(a,b){function c(a){return Math.random()<a/100}return!0===a.p_top||!0===c(B)}function p(a){var b=G.getRotIdx();V={sourcesetName:a.name,useCount:a.useCount,mdType:a.mdType,packid:a.packid,floor:a.floor,segmType:a.segmType,sourceWidth:a.width,sourceHeight:a.height,rotIdx:b,tags:[]}}function q(a){V.tags.push(a)}function r(){y.sourceadmin.addFullSrcSet(V),I("srcset file TXd")}function s(a,b,c){function d(a){var b={status:"---",msg:"NA",width:null,height:null},c=a.toLowerCase(),d=c.indexOf("x");return d<0?(b.status="error",b.msg="could_not_parse_dims",b):(b.width=parseInt(c.substring(0,d)),b.height=parseInt(c.substring(d+1)),b.status="ok",b)}function e(a){var b={};return b.sourceName=g.name+"_"+a.name,b.active=!0!==a.passive,b.enabled=a.enabled,b.category=parseInt(a.cat),b.curb=a.curb,b.snippet=decodeURIComponent(a.tag),b.sbxmode="auto",void 0!==a.sbxmode&&(b.sbxmode=a.sbxmode),b.maxpage=a.maxpage,b.maxday=a.maxday,b.strict=a.strict,b.share=a.share,b.hires=!!a.hires&&a.hires,b.insmod="inpage",void 0!==a.insmod&&(b.insmod=a.insmod),!1!==isNaN(parseFloat(a.defrefprc))?b.defrefprc=0:b.defrefprc=parseFloat(a.defrefprc),b}var f={status:"---",msg:"NA",sourceSetInfo:{}},g={};if(g.name=a,g.useCount=b,g.mdType="dsp","vast"===c.adtype&&(g.mdType="vid"),"native"===c.adtype&&(g.mdType="nat"),"custom"===c.adtype&&(g.mdType="cst"),g.packid="",void 0!==g.packid&&(g.packid=c.packid),g.segmType=c.logic,void 0===g.segmType&&(g.segmType="wf"),g.floor=0,void 0!==c.floor){var h=parseFloat(c.floor);!1===isNaN(h)&&(g.floor=h)}g.activeList=[],g.passiveList=[],g.origin="server";var i=d(c.dimension);"ok"===i.status?(g.width=i.width,g.height=i.height):(g.width=1,g.height=1);for(var j=0;j<c.tags.length;j++){var k=e(c.tags[j]);!0===k.active?g.activeList.push(k):g.passiveList.push(k)}return f.status="ok",f.sourceSetInfo=g,f}function t(a,b,c){if(!0===c)var d=b.activeList;else var d=b.passiveList;return a<d.length?d[a]:null}function u(a){return JSON.stringify({Version:"100",dimension:"1x1",adtype:"dispad",floor:"0",tags:[{tag:"",name:"LIVEWEB",cat:"3",enabled:!0,wrap:!1,share:"25",maxpage:"0",sbxmode:"no",defrefprc:"0",passive:!0,curb:!1}]})}function v(a){function b(a){var b=["300x250","160x600","300x600","640x360","640x480"],c=null;return b.forEach(function(b){null===c&&a.indexOf(b)>=0&&(c=b)}),c}function c(a){var b="NODE_"+String.fromCharCode(65+a)+"_V1";return{tag:"drvid:"+b+", partnerid:10, siteid:100, unitid:100",name:b,cat:"0",enabled:!0,wrap:!1,share:"100",maxpage:"0",sbxmode:"no",defrefprc:"0",passive:!1,curb:!1}}var d=""+a;d=d.replace("bidsim_","");var e=b(d);null===e?e="SIZE_ERROR":d=d.replace(e,"");var f="dispad";d=d.replace("dsp_",""),d.indexOf("vid_")>=0&&(f="vast",d=d.replace("vid_",""));for(var g={Version:"100",logic:"bd",dimension:e,adtype:f,floor:"0",tags:[]},h=0;h<8;h++)g.tags.push(c(h));return JSON.stringify(g)}var w=this,x=b.master,y=b.comps,z=b.cllBks,A=b.bootParams,B=(b.testCase,b.startTime,15),C=Math.round(999*Math.random());d();var D=b.sourceSetName,E=b.localBanDB,F=b.trackhub,G=b.dtomanager,H=b.expregister,I=b.addLogLine,J=b.accbeam,K=G.getDTOTime(),L=!0,M="INIT",N=0,O=0,P=null,Q=null,R=null,S=null,T=null,U=null,V={},W=[],X=null,Y=null,Z=0,$=[];w.fireEvent=function(a,b){x.fireEvent(a,b)},w.getLog=function(){var a="SourceSet: "+D+"\n\n";return $.forEach(function(b){a+="\t"+b+"\n"}),a+="\n"},w.tick=function(a){l(a)},W=i();var _="dto_mad_ban_"+C;if(J.register(_,a.accbeam.channels.dto_mad_ban.red),"liveweb"===D)f("ok",u(D));else if(0===D.indexOf("bidsim"))f("ok",v(D));else{var aa=!1;!0!==b.useLocalCache&&(aa=!0),new c({comps:y,cllBks:z,bootParams:A,callback:f,timeout:1e4,shorten:!0,inclear:b.inClear,lifeTime:b.lifeTime,mhfolder:b.mhfolder,secProt:b.secProt,dataBaseUrl:a.resourceLocations.dataurl,folderPath:"sourcesets",fileName:D,fileExt:"json",synchro:k(),forcerefresh:aa,env:b.bootParams.env})}b.heart.subscribe(w,30,"srcserver",5,0)}}(config,0,stm_cachedfile),stm_expreg=function(a){return function(b){function c(a){e.logger.writex({msg:a,prefix:"stm_expreg",inst:g})}var d=this,e=b.comps,f=(b.cllBks,b.bootParams),g=Math.round(999*Math.random());c();var h=100,i=f.locus+"_expreg",j=null,k=!1,l=a.stage.expMaxStorage,m=b.savePeriod?b.savePeriod:2e3,n=0,o=!1;e.heart.subscribe(d,300,"stm_expreg",!1),d.tick=function(a){a-n<m||(n=a,o&&(o=!1,d._saveData()))},d.newData=function(){o=!0},d._saveData=function(){e.memhub.setItem(i,j,{folder:"stgmgr"})},d.genEventKey=function(a,b){return b+"_%%%_"+a},d.getExpCount=function(a,b,c){for(var e=Date.now(),f=0,g=d.genEventKey(a,b),h=0;h<j.exposures.length;h++){var i=j.exposures[h];i.eventKey===g&&(e-i.timeStamp<c&&f++)}return f},d.registerExposure=function(a,b){var c=d.genEventKey(a,b);j.exposures.length>=l&&j.exposures.pop();var e={eventKey:c,timeStamp:Date.now()};j.exposures.unshift(e),d.newData()},d.initialize=function(){d._getOrCreateData()},d._getOrCreateData=function(){k=!1;var a={version:h,exposures:[]},b=e.memhub.getItem(i);null!==b?!0===d.parseDataInFile(a,b)&&(c(),k=!0):k=!0,j=JSON.parse(JSON.stringify(a)),!0===k&&d._saveData()},d.parseDataInFile=function(a,b){var c=!1;if(void 0===b)return!0;if(void 0===b.version)return!0;if(b.version!==h)return!0;if(void 0===b.exposures)return!0;for(var d=0,e=0;e<b.exposures.length;e++){var f=b.exposures[e];if(d>=l)return void(c=!0);if(void 0===f||null===f)return void(c=!0);var g={eventKey:"",timeStamp:0};if(void 0===f.eventKey||null===f.eventKey)return void(c=!0);if(g.eventKey=f.eventKey,void 0===f.timeStamp||null===f.timeStamp)return void(c=!0);g.timeStamp=f.timeStamp,a.exposures.push(g)}return a.exposures.sort(function(a,b){return a.timeStamp-b.timeStamp}),c}}}(config),stm_dtomgr=function(a){return function(b){function c(a){u.logger.writex({msg:a,prefix:"stm_dtomgr",inst:A})}function d(a,b,c){u.trackhub.sendEvent("performance","/dtomgr/"+v.placementId+a,b,c)}function e(b){switch(O){case"INIT":P=b,O="WSDSI";case"WSDSI":if(b-P>a.stage.sdsTimeout){_stageMgrStatus="stg_sds_to",c(),O="POST_DSD";break}if(!1===u.inLineData.getSDSStatus()){_stageMgrStatus="stg_sds_error",c(),O="POST_DSD";break}if(!0!==u.inLineData.getSDSStatus())break;N=u.inLineData.getBroadDataDTO(),O="POST_DSD";case"POST_DSD":f(),O="WAIT_REPO_READ";case"WAIT_REPO_READ":if(null===H)break;k(N),h(),P=b,O="WAIT_ACTFL";case"WAIT_ACTFL":if(null===J)break;j(J),I=!1,g(),P=b,O="WAIT_REPO_SAVE";case"WAIT_REPO_SAVE":if(!0!==I)break;P=b,O="SAVE_ALERT";case"SAVE_ALERT":!0===L&&(K=!1,i(),P=b,O="SAVE_HOLDOFF");break;case"SAVE_HOLDOFF":if(!0!==K)break;if(b-P<w)break;O="SAVE_ALERT"}}function f(){c();var a=u.memhub.getItem(C);null!==a?(c(),H=a):(c(),d("","_s60 warning_no_dto_repo"),H={},H.Version=x,H.sourceList=[])}function g(){c(),u.memhub.setItem(C,H,{folder:"dto"}),I=!0}function h(){c();var a=u.memhub.getItem(D);null!==a?(c(),J=a):(c(),d("","_s62 warning_no_ss_file"),J=[])}function i(){c(),u.memhub.setItem(D,F,{folder:"dto"}),K=!0,L=!1}function j(a){function b(a){switch(a.code){case"req":var b=r(a.sourceName);if(null===b)return null;var c=b.sessions[0];c.rc+=1;break;case"hit":var b=r(a.sourceName);if(null===b)return null;var c=b.sessions[0];c.hc+=1;break;case"bpr":var b=r(a.sourceName);if(null===b)return null;var c=b.sessions[0];c.bc+=1,c.bt=Math.round(100*(c.bt+a.prc))/100;break;case"wpr":var b=r(a.sourceName);if(null===b)return null;var c=b.sessions[0];c.wc+=1,c.wt=Math.round(100*(c.wt+a.prc))/100}}for(;a.length>0;)b(a.shift())}function k(a){function b(a){function b(a){var b=0;return a.forEach(function(a,c){b+=a.rc}),b}var c=[];return a.forEach(function(a){0!==b(a.sessions)&&c.push(a)}),c}function c(a,b){for(var c=[],d=0;d<b;d++){var e=a[d];c.push(e)}return c}function d(a,b){var c=l({sessionCount:a.length}),d=a.length;d>b.calcSpan&&(d=b.calcSpan);for(var e=0;e<d;e++){var f=a[e];c.reqCount+=f.rc,c.hitCount+=f.hc,c.bidAmt+=f.bt,c.bidCount+=f.bc,c.winAmt+=f.wt,c.winCount+=f.wc}return c.bidAmt=Math.round(100*c.bidAmt)/100,c.winAmt=Math.round(100*c.winAmt)/100,c.reqCount>0&&(c.hitrate=Math.round(1e3*c.hitCount/c.reqCount)),c.bidCount>0&&(c.bidAvgPrc=Math.round(c.bidAmt/c.bidCount*100)/100),c.winCount>0&&(c.winAvgPrc=Math.round(c.winAmt/c.winCount*100)/100),c}void 0===H.rotIdx?H.rotIdx=0:++H.rotIdx>=3&&(H.rotIdx=0),H.sourceList=b(H.sourceList);for(var e=H.sourceList,f=0;f<e.length;f++){var g=e[f];g.intDTOVars=d(g.sessions,B);var h=n();g.sessions.unshift(h),g.sessions.length>=y&&(g.sessions=c(g.sessions,y))}void 0!==a?(E=q(a),M=a.timestamp,G=!0):G=!1}function l(a){return{sessCount:a.sessionCount,reqCount:0,hitCount:0,hitrate:0,hrShare:0,bidAmt:0,bidCount:0,bidAvgPrc:0,bidAmtShr:0,winAmt:0,winCount:0,winAvgPrc:0,winAmtShr:0,combValue:0}}function m(){return{hitrate:0,errate:0,total:0,avgdelay:0,hrShare:0,bidAmtShr:0,winAmtShr:0,combValue:0}}function n(){return{rc:0,hc:0,bt:0,bc:0,wt:0,wc:0}}function o(a){function b(a,b,c){function d(a,b,c){if(!0===b){var d=0;d+=a.winAmtShr*c.revWeight/100,d+=a.bidAmtShr*c.bidWeight/100,d=Math.round(d)}else var d=a.hrShare;return d}for(var e=0,f=0,g=0,h=0,i=0;i<a.length;i++){var j=a[i],k=r(j.sourceName);j.intDTOVars=k.intDTOVars,e+=j.intDTOVars.bidAmt,f+=j.intDTOVars.winAmt,g+=j.intDTOVars.hitrate,h+=j.intDTOVars.sessCount}a.length>0&&(h=Math.round(h/a.length));for(var i=0;i<a.length;i++){var j=a[i],l=j.intDTOVars;l.bidAmtShr=0,e>0&&(l.bidAmtShr=Math.round(999*l.bidAmt/e)),l.winAmtShr=0,f>0&&(l.winAmtShr=Math.round(999*l.winAmt/f)),l.hrShare=0,g>0&&(l.hrShare=Math.round(999*l.hitrate/g)),l.combValue=d(l,b,c)}return h}function c(a,b,c){function d(a,b,c){if(!0===b){var d=0;d+=a.winAmtShr*c.revWeight/100,d+=a.bidAmtShr*c.bidWeight/100,d=Math.round(d)}else var d=a.hrShare;return d}for(var e=0,f=0,g=0,h=0;h<a.length;h++){var i=a[h];i.extDTOVars=m();var j=i.extDTOVars,k=p(i.sourceName);i.bfsVars=k,j.hitrate=0,k.total>0&&(j.hitrate=Math.round(1e3*k.hits/k.total)),j.errate=0,k.total>0&&(j.errate=Math.round(1e3*k.errors/k.total)),e+=k.rev,f+=k.bidamt,g+=j.hitrate,i.refprice=0,void 0!==k.refprice&&k.refprice>0?i.refprice=k.refprice:void 0!==i.defrefprc&&i.defrefprc>0&&(i.refprice=i.defrefprc)}for(var h=0;h<a.length;h++){var i=a[h],j=i.extDTOVars;j.winAmtShr=0,e>0&&(j.winAmtShr=Math.round(999*i.bfsVars.rev/e)),j.bidAmtShr=0,f>0&&(j.bidAmtShr=Math.round(999*i.bfsVars.bidamt/f)),j.hrShare=0,g>0&&(j.hrShare=Math.round(999*j.hitrate/g)),j.avgdelay=i.bfsVars.avgdelay,j.total=i.bfsVars.total,j.combValue=d(j,b,c)}}function d(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e],g=f.extDTOVars.combValue;f.intDTOVars.combValue>g&&(g=f.intDTOVars.combValue),f.compvalue=g}}function e(a,b){a.sort(function(a,b){return b.compvalue-a.compvalue});var c=0;a.forEach(function(a,b){a.p_val=a.compvalue,c+=a.p_val,a.p_idx=b});var d=c*b/100,e=0,f=!0;a.forEach(function(a){a.p_top=f,(e+=a.compvalue)>d&&(f=!1)})}function f(a){for(var b=0;b<a.length;b++){var c=a[b];c.extDTOVars=m(),c.intDTOVars=l({sessionCount:0}),c.compvalue=0,c.bfsVars=p(c.sourceName),c.refprice=c.defrefprc}}var g=JSON.parse(JSON.stringify(a)),h=!1;"bd"===g.segmType&&(h=!0);var i=b(g.activeList,h,B);return c(g.activeList,h,B),d(g.activeList,i,h,B),e(g.activeList,z),g.activeList.sort(function(a,b){return b.compvalue-a.compvalue}),f(g.passiveList),{locSourceInfo:g,dtoFactors:B}}function p(a){return void 0!==E[a]?E[a]:{hits:0,errors:0,total:0,avgdelay:0,bidamt:0,bids:0,rev:0,refprice:0,loads:0,hints:0,lastban:0}}function q(a){var b=a.map,c={};try{for(var e in a.data){var f=a.data[e];for(var g in f){var h=e+"_"+g,i=f[g],j={};b.forEach(function(a,b){j[a]=i[b]}),c[h]={hits:parseInt(j.Hits),errors:isNaN(parseInt(j.Errors))?0:parseInt(j.Errors),total:parseInt(j.Total),avgdelay:parseInt(j.AvgDelay),refprice:isNaN(parseInt(j.RefPrice))?0:parseInt(j.RefPrice),bidamt:parseFloat(j.BidAmt),bids:parseInt(j.Bids),rev:parseFloat(j.Rev),loads:isNaN(parseInt(j.Loads))?0:parseInt(j.Loads),hints:isNaN(parseInt(j.Hints))?0:parseInt(j.Hints),lastban:isNaN(parseInt(j.LastBan))?0:parseInt(j.LastBan)}}}}catch(a){return d("","_s64 warning_bad_dto_info"),{}}d("","_s20 dto_ok");var k=0;for(var l in c)k++;return d("/items",k,{scl:"mediumtimes"}),c}function r(a){var b=s(a);if(null!==b)return b;var b={sourceName:a,intDTOVars:l({sessionCount:0}),sessions:[]},c=n();return b.sessions.push(c),H.sourceList.push(b),b}function s(a){for(var b=H.sourceList,c=0;c<b.length;c++){var d=b[c];if(d.sourceName===a)return d}return null}var t=this,u=b.comps,v=(b.cllBks,b.bootParams),w=5e3,x=100,y=20,z=90,A=Math.round(999*Math.random());c();var B=null;v.testCase,B={revWeight:70,bidWeight:30,calcSpan:20,minSpan:5};var C=v.locus+"_dto_repo",D=v.locus+"_dto_ss",E={},F=[],G=null,H=null,I=!1,J=null,K=!1,L=!1,M=Date.now(),N={},O="INIT",P=0;t.getDTOTime=function(){return M},t.getRotIdx=function(){return H.rotIdx},t.regDTOReq=function(a){F.push({code:"req",sn:a}),L=!0},t.regDTOHit=function(a){F.push({code:"hit",sn:a}),L=!0},t.regDTOBidPr=function(a,b){F.push({code:"bpr",sn:a,prc:b}),L=!0},t.regDTOWinPr=function(a,b){F.push({code:"wpr",sn:a,prc:b}),L=!0},t.isDtoAvail=function(){return G},t.mergeDtoInfo=function(a){return o(a)},t.tick=function(a){e(a)},c(),d("","_s10 inst"),u.heart.subscribe(t,100,"dtomgr",!1)}}(config),stm_stgproc=function(a,b,c){return function(a){function d(a){J.logger.writex({msg:a,prefix:"stageproc",inst:M})}function e(b){J.logger.writex({tgl:!0,msg:b,prefix:"stage:"+a.placementId+" (parser)"})}function f(a,b,c){"ok"===a?(U=!0,T=b,V=b.length):U=!1}function g(b){function c(b){Y.push("sending ERROR debug email...");var c="";try{c=void 0!==b.data?JSON.stringify(b.data).replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,""):JSON.stringify(b)}catch(b){c="(unable to extract error data)"}var d="";d+="Stage Name: "+P+"\n\n",d+="Code: "+b.code+"\n",d+="Context: "+c+"\n",d+="Message: "+b.msg+"\n",d+="============ STAGE TEXT ============\n\n",d+=T+"\n\n",a.mailmaster.send("STAGE_PROC","parsing_error",d,Y)}switch(R){case"INIT":S=b,R="WAITING_FOR_FILE";case"WAITING_FOR_FILE":if(null===U)break;if(!0!==U){d(),e("file_error - "+g),O("stage_error_file"),N.sendEvent("alerts","stage_proc/"+P,"file_error"),c("file_error"),X.msg="file_error",X.code="file_error",R="STAGE_ERROR";break}d();var f=h(T,W);if("error"===f.status){var g="code: "+f.code+", msg: "+f.msg;d(),e("parse_error - "+g),O("stage_error_parse"),N.sendEvent("alerts","stage_proc/"+P,"parse error - code: "+f.code),c(f.err),X.msg="parse_error - "+f.msg,X.code=f.code,R="STAGE_ERROR";break}var i="stage_data_parsed_ok";i+=" - name: "+W.name,i+=" - tag: "+W.attributes.tag,O(i),e(i),X.status="ok",Q=!1,R="PARK";break;case"STAGE_ERROR":d(),X.status="error",Q=!1,R="PARK";break;case"PARK":a.heart.unsubscribe(I)}}function h(a,b){function c(a,b){function c(a){function c(a){var c=null;return b.library.defines.forEach(function(b){null===c&&b.name===a&&(c=b)}),c}function d(a){var b=a.split(","),c={};return b.forEach(function(a){var b=a.split(":");0!==b[0].length&&(c[b[0]]=b[1])}),c}function e(a,b){var c=""+a;for(var d in b){var e=new RegExp("\\${"+d+"}","g");c=c.replace(e,b[d])}return c}var f,g,h={status:"not_found",newCon:null+a},i="<insert",j="</insert>";if((f=a.indexOf(i))<0)return h;if((g=a.indexOf(j))<0)return h;g+=j.length;var k=a.substring(f,g),l=k.indexOf(">");if(l<0)return h;var m=k.substring(0,l),n=m.replace(i,"").replace("name:","").replace(/\s+/g,""),o=k.substring(l+1).replace(j,"").replace(/\s+/g,""),p=d(o),q=c(n);if(null===q)return h;var r=e(q.content,p),s=a.replace(k,r);return h.status="ok",h.newCon=s,h}for(var d=""+a,e=1e3;e>0;){e--;var f=c(d);if("ok"!==f.status)break;d=f.newCon}return d}function d(a,b){function c(a,b,c){var d=a.indexOf("}");if(d<=0)return a;var e=a.substring(0,d),f=a.substring(d+1);if(!0===c){var g="false";void 0!==b[e]&&(g="true")}else{var g="unspecified";void 0!==b[e]&&(g=b[e])}return""+g+f}if("sys"===L.ctxId)return a;if("object"!==_typeof2(L.adfrm_vars))return a;if("object"!==_typeof2(L.adfrm_vars.stageParams))return a;var d="$xparam{";!0===b&&(d="$xifdef{");var e=L.adfrm_vars.stageParams,f=a.split(d),g=[];return f.forEach(function(a,d){0===d?g.push(a):g.push(c(a,e,b))}),g.join("")}function e(a){function b(a,b){function c(a){var b=-1;return d.forEach(function(c,d){b>=0||c.name===a&&(b=d)}),b}var d=[];return a.forEach(function(a){d.push(a)}),b.forEach(function(a){var b=c(a.name);b>=0?d[b]=a:d.push(a)}),d}return"sys"===L.ctxId?a:"object"!==_typeof2(L.adfrm_vars)?a:"object"!==_typeof2(L.adfrm_vars.ntvfrmts)?a:b(a,L.adfrm_vars.ntvfrmts)}function f(a){if("sys"!==L.ctxId&&"object"===_typeof2(L.adfrm_vars)&&"object"===_typeof2(L.adfrm_vars.lwparams)){var b=L.adfrm_vars.lwparams;a.lw_enabled=b.lw_enabled,a.lw_reducer=b.lw_reducer,a.lw_sort=b.lw_sort,a.lw_maxitem=b.lw_maxitem,a.lw_ogtype=b.lw_ogtype,a.lw_chan_rx=b.lw_chan_rx,a.lw_chan_tx="unspecified"}}function g(){var a="undefined";return{stageName:a,layoutName:a,layoutIdx:a,sectionName:a,sectionIdx:a,unitName:a,unitIdx:a,adpostName:a,adpostIdx:a,segmentName:a,segmentIdx:a}}function h(a){function b(a){var b=a.attributes.sourceset;return""!==b&&"unspecified"!==b}function c(a){var b=null;if(d.forEach(function(c){null===b&&c.name===a&&(b=c)}),null!==b)return b.count++,b;b={name:a,count:1},d.push(b)}var d=[];return a.layouts.forEach(function(a){a.sections.forEach(function(a){!0===a.attributes.enabled&&a.units.forEach(function(a){!0===a.attributes.enabled&&a.adposts.forEach(function(a){!0===a.attributes.enabled&&a.segments.forEach(function(a){if(!0===a.attributes.enabled){if(!0!==b(a))throw{code:15,msg:"error sourcename",data:base};c(a.attributes.sourceset)}})})})})}),d}var s={status:"---"};try{var t={};t.unitCodes=$,t.holdoff=$,t.maxSeekTime=$,t.smart=!1,t.prime=!1,t.seektime=$,t.playtime=$,t.seekdelay=$,t.zindex=$,t.sourceset=$,t.natformat=$,t.centscrn=!1,t.style=$,t.priority=$,t.cost=$,t.onsold=!1,t.clearance=$,t.xmargin=$,t.vertoffset=$,t.vertspacing=$,t.spotlength=$,t.shared=!1;r(p(o(n(m(l(k(d(d(c(q(j(a),b),b),!1),!0),b),b),b),b),b),b).replace(/\s+/g," "),b,t,g()),b.ntvfrmts=e(b.ntvfrmts),f(b.attributes),b.ssObjList=h(b),b.debmail=[],i(b.debMailString,b.debmail),s.status="ok",s.code="",s.msg="no errors found",s.data=null,s.err=null}catch(a){s.status="error",s.code=a.code,s.msg=a.msg,s.data=a.data,s.err=a}return s}function i(a,b){function c(a,b){function c(a,b,c,d){var e=E(b,a);if(0!==e.tags.length)for(var f=0;f<e.tags.length;f++){var g=A(e.tags[f].tagContent,d);g.filter!==$&&c.push(g)}return e.rem}var d;return d=a,d=c("channel",d,b,aa)}var d=F(a,"debmail"),e=d.rem;return c(d.tagContent,b),e}function j(a){function b(a){var b,c,d,e={status:"not_found",rem:""},f="\x3c!--",g="--\x3e";return(b=a.indexOf(f))<0?(e.rem=a,e):(d=a.substring(0,b),(c=a.indexOf(g))<0?(e.rem=a,e):(c+=g.length,d+=a.substring(c),e.status="found",e.rem=d,e))}for(var c,d=a,e=1e3;e>0&&(e--,c=b(d),"not_found"!==c.status);)d=c.rem;return d}function k(a,b){b.debMailString="";var c,d,e,f="<debmail>",g="</debmail>";if((c=a.indexOf(f))<0)return a;if(e=a.substring(0,c),(d=a.indexOf(g))<0)return a;d+=g.length,e+=a.substring(d);var h=a.substring(c,d);return b.debMailString=h.replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,""),e}function l(a,b){b.patchString="";var c,d,e,f="<patch>",g="</patch>";if((c=a.indexOf(f))<0)return a;if(e=a.substring(0,c),(d=a.indexOf(g))<0)return a;d+=g.length,e+=a.substring(d);var h=a.substring(c,d);return b.patchString=h.replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,""),e}function m(a,b){b.bypassString="";var c,d,e,f="<bypass>",g="</bypass>";if((c=a.indexOf(f))<0)return a;if(e=a.substring(0,c),(d=a.indexOf(g))<0)return a;d+=g.length,e+=a.substring(d);var h=a.substring(c,d);return b.bypassString=h.replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,""),e}function n(a,b){function c(a,b){function c(a){var b,c,d,e,f,g,h,i={status:"not_found",name:"",content:"",rem:""},j="<format",k="</format>",l=""+a;return(b=l.indexOf(j))<0?i:(d=l.substring(0,b),(c=l.indexOf(k))<0?(i.status="parse_error",i):(c+=k.length,d+=l.substring(c),i.rem=d,h=l.substring(b,c),h=h.replace(j,""),h=h.replace(k,""),g=h,(e=g.indexOf("name"))<0?(i.status="parse_error",i):(e+=5,(f=g.indexOf(">"))<0?(i.status="parse_error",i):(g=g.substring(e,f).replace(/\s+/g,""),i.name=g,h=h.replace(g,""),h=h.replace("name:>",""),i.content=h,i.status="ok",i))))}for(var d,e=""+a,f=1e3;f>0&&(f--,d=c(e),"not_found"!==d.status);){if("ok"!==d.status)throw{code:12,msg:"parse error nativeformats",data:e};var g={name:d.name,rawstr:d.content};b.push(g),e=d.rem}}b.ntvfrmts=[];var d,e,f,g="<nativeformats>",h="</nativeformats>";return(d=a.indexOf(g))<0?a:(f=a.substring(0,d),(e=a.indexOf(h))<0?a:(e+=h.length,f+=a.substring(e),c(a.substring(d,e),b.ntvfrmts),f))}function o(a,b){function c(a){function b(a){function b(a){var b,c,d,e={status:"not_found",styleSnippName:"",styleSnippString:"",rem:a},f=""+a,g=null,h=null,i="{",j="}";return(b=f.indexOf(i))<0?e:(h=f.substring(0,b),(c=f.indexOf(j))<0?e:(c+=j.length,d=f.substring(c),g=f.substring(b,c),e.status="ok",e.rem=d,e.styleSnippString=g.replace("{","").replace("}",""),e.styleSnippName=h.replace(/\s+/g,""),e))}a.styleSnippets=[];for(var c=""+a.rawstylestr,d=100;d>0;){d--;var e=b(c);if("ok"!==e.status)break;var f={};f.name=e.styleSnippName,f.string=e.styleSnippString,f.classID="fbdynclass_"+Math.round(1e9*Math.random()),a.styleSnippets.push(f),c=e.rem}}for(var c=0;c<a.length;c++){b(a[c])}}function d(a,b){function c(a){var b,c,d,e,f,g,h,i={status:"not_found",name:"",content:"",rem:""},j="<style",k="</style>",l=""+a;return(b=l.indexOf(j))<0?i:(d=l.substring(0,b),(c=l.indexOf(k))<0?(i.status="parse_error",i):(c+=k.length,d+=l.substring(c),i.rem=d,h=l.substring(b,c),h=h.replace(j,""),h=h.replace(k,""),g=h,(e=g.indexOf("name"))<0?(i.status="parse_error",i):(e+=5,(f=g.indexOf(">"))<0?(i.status="parse_error",i):(g=g.substring(e,f).replace(/\s+/g,""),i.name=g,h=h.replace(g,""),h=h.replace("name:>",""),i.content=h,i.status="ok",i))))}for(var d,e=""+a,f=1e3;f>0&&(f--,d=c(e),"not_found"!==d.status);){if("ok"!==d.status)throw{code:12,msg:"parse error csscode",data:e};var g={name:d.name,rawstylestr:d.content};b.styles.push(g),e=d.rem}}b.csscode={},b.csscode.styles=[];var e,f,g,h="<csscode>",i="</csscode>";return(e=a.indexOf(h))<0?a:(g=a.substring(0,e),(f=a.indexOf(i))<0?a:(f+=i.length,g+=a.substring(f),d(a.substring(e,f),b.csscode),c(b.csscode.styles),g))}function p(a,b){function c(a,b){function c(a){function b(a){var b,c,d,e,f,g,h={status:"error",name:"",oncall:!1,snippet:""},i="<snippet",j="</snippet>",k=""+a;if((b=k.indexOf(i))<0)return h;if((c=k.indexOf(">"))<0)return h;d=k.substring(b,c+1),k=k.replace(d,""),k=k.replace(j,""),h.snippet=k.replace(/\s+/g," ");var l="oncall";(g=d.indexOf(l))>=0&&(h.oncall=!0,d=d.replace(l,""));var m="name",e=d.replace(i,""),e=e.replace(">","");return(f=e.indexOf(m))<0?h:(e=e.replace(m,""),(f=e.indexOf(":"))<0?h:(f+=1,h.name=e.substring(f).replace(/\s+/g,""),h.status="ok",h))}var c,d,e,f,g={status:"not_found",name:"",oncall:!1,content:"",rem:a},h="<snippet",i="</snippet>",j=""+a;if((c=j.indexOf(h))<0)return g;if(e=j.substring(0,c),j=j.substring(c),(d=j.indexOf(i))<0)return g.status="parse_error",g;d+=i.length,e+=j.substring(d),g.rem=e,f=j.substring(0,d);var k=b(f);return"ok"!==k.status?(g.status="parse_error",g):(g.content=k.snippet,g.name=k.name,g.oncall=k.oncall,g.status="ok",g)}for(var d,e=""+a,f=1e3;f>0&&(f--,d=c(e),"not_found"!==d.status);){if("ok"!==d.status)throw{code:10,msg:"parse error javacode",data:e};var g={name:d.name,oncall:d.oncall,content:d.content};b.snippets.push(g),e=d.rem}}b.javacode={},b.javacode.snippets=[];var d,e,f,g="<javacode>",h="</javacode>";if((d=a.indexOf(g))<0)return a;if(f=a.substring(0,d),(e=a.indexOf(h))<0)return a;e+=h.length,f+=a.substring(e);var i=a.substring(d,e);return i=i.replace(g,""),i=i.replace(h,""),c(i,b.javacode),f}function q(a,b){function c(a,b){function c(a){function b(a){var b,c,d,e,f,g={status:"error",name:"",define:""},h="<define",i="</define>",j=""+a;if((b=j.indexOf(h))<0)return g;if((c=j.indexOf(">"))<0)return g;d=j.substring(b,c+1),j=j.replace(d,""),j=j.replace(i,""),g.define=j.replace(/\s+/g," ");var k="name",e=d.replace(h,""),e=e.replace(">","");return(f=e.indexOf(k))<0?g:(e=e.replace(k,""),(f=e.indexOf(":"))<0?g:(f+=1,g.name=e.substring(f).replace(/\s+/g,""),g.status="ok",g))}var c,d,e,f,g={status:"not_found",name:"",content:"",rem:a},h="<define",i="</define>",j=""+a;if((c=j.indexOf(h))<0)return g;if(e=j.substring(0,c),j=j.substring(c),(d=j.indexOf(i))<0)return g.status="parse_error",g;d+=i.length,e+=j.substring(d),g.rem=e,f=j.substring(0,d);var k=b(f);return"ok"!==k.status?(g.status="parse_error",g):(g.content=k.define,g.name=k.name,g.status="ok",g)}for(var d,e=""+a,f=1e3;f>0&&(f--,d=c(e),"not_found"!==d.status);){if("ok"!==d.status)throw{code:910,msg:"parse_error_in_library",data:a};var g={name:d.name,content:d.content};b.defines.push(g),e=d.rem}}b.library={},b.library.defines=[];var d,e,f,g="<library>",h="</library>";if((d=a.indexOf(g))<0)return a;if(f=a.substring(0,d),(e=a.indexOf(h))<0)return a;e+=h.length,f+=a.substring(e);var i=a.substring(d,e);if(i=i.replace(g,""),i=i.replace(h,""),i.indexOf("insert")>=0)throw{code:900,msg:"recursion_is_not_allowed_in_libraries",data:a};return c(i,b.library),f}function r(a,b,c,d){var e,f;if(b.configurations=[],b.layouts=[],e=a,f=F(e,"STAGE"),"ok"!==f.status)throw{code:100,msg:"no valid STAGE tag",data:{stageContent:a}};if(b.version=parseInt(D(f.tagStr,"version")),b.name=D(f.tagStr,"name"),null===b.name&&(b.name=P),d.stageName=b.name,e=H(f.tagContent,["stageName"],d),f=F(e,"publishing","<conditions"),"ok"!==f.status)throw{code:111,msg:"no valid publishing elements found",data:{tagStr:f.tagStr,tagContent:e}};if(e=f.rem,b.publishing=[],z(f.tagContent,b.publishing),f=F(e,"conditions","<configurations"),"ok"!==f.status)throw{code:112,msg:"no valid conditions elements found",data:{tagStr:f.tagStr,tagContent:e}};e=f.rem,b.conditions=A(f.tagContent,_,{}),f=F(e,"params","<configurations"),e=f.rem,b.attributes=A(f.tagContent,ba,c),f=F(e,"tracking","<configurations"),e=f.rem,b.tracking=[],y(f.tagContent,b.tracking);var g={};if(g.unitCodes=b.attributes.unitCodes,g.holdoff=b.attributes.holdoff,g.maxSeekTime=b.attributes.maxSeekTime,g.smart=b.attributes.smart,g.prime=b.attributes.prime,g.seektime=b.attributes.seektime,g.playtime=b.attributes.playtime,g.seekdelay=b.attributes.seekdelay,g.zindex=b.attributes.zindex,g.sourceset=b.attributes.sourceset,g.natformat=b.attributes.natformat,g.centscrn=b.attributes.centscrn,g.style=b.attributes.style,g.priority=b.attributes.priority,g.cost=b.attributes.cost,g.onsold=b.attributes.onsold,g.clearance=b.attributes.clearance,g.xmargin=b.attributes.xmargin,g.vertoffset=b.attributes.vertoffset,g.vertspacing=b.attributes.vertspacing,g.spotlength=b.attributes.spotlength,g.shared=b.attributes.shared,f=F(e,"configurations","<layout"),e=f.rem,"not_found"===f.status){var h={};h.attributes=A("",ca,{}),h.attributes.layout="default",b.configurations.push(h);var i={};return t(0,"name:default",e,i,g,d),void b.layouts.push(i)}if(s(f.tagContent,b.configurations),f=E(e,"layout"),e=f.rem,0!==f.tags.length)for(var j=0;j<f.tags.length;j++){var k={};t(j,f.tags[j].tagStr,f.tags[j].tagContent,k,g,d),b.layouts.push(k)}}function s(a,b){auxObj=E(a,"case");for(var c=0;c<auxObj.tags.length;c++){var d={};d.attributes=A(auxObj.tags[c].tagContent,ca,{}),b.push(d)}}function t(a,b,c,e,f,g){var h,i;d(),e.name=D(b,"name"),null===e.name&&(e.name=$),g.layoutIdx=a,e.name=H(e.name,["layoutIdx"],g),g.layoutName=e.name,h=H(c,["layoutName","layoutIdx"],g),i=F(h,"params","<section"),h=i.rem,e.attributes=A(i.tagContent,da,f),i=F(h,"tracking","<section"),h=i.rem,e.tracking=[],y(i.tagContent,e.tracking);var j={};if(j.unitCodes=e.attributes.unitCodes,j.holdoff=e.attributes.holdoff,j.maxSeekTime=e.attributes.maxSeekTime,j.smart=e.attributes.smart,j.prime=e.attributes.prime,j.seektime=e.attributes.seektime,j.playtime=e.attributes.playtime,j.seekdelay=e.attributes.seekdelay,j.zindex=e.attributes.zindex,j.sourceset=e.attributes.sourceset,j.natformat=e.attributes.natformat,j.centscrn=e.attributes.centscrn,j.style=e.attributes.style,j.priority=e.attributes.priority,j.cost=e.attributes.cost,j.onsold=e.attributes.onsold,j.clearance=e.attributes.clearance,j.xmargin=e.attributes.xmargin,j.vertoffset=e.attributes.vertoffset,j.vertspacing=e.attributes.vertspacing,j.spotlength=e.attributes.spotlength,j.shared=e.attributes.shared,e.sections=[],i=E(h,"section"),h=i.rem,0!==i.tags.length)for(var k=0;k<i.tags.length;k++){var l={};u(k,i.tags[k].tagStr,i.tags[k].tagContent,l,j,g),e.sections.push(l)}}function u(a,b,c,e,f,g){var h,i;if(d(),e.launched=!1,e.name=D(b,"name"),null===e.name&&(e.name=$),g.sectionIdx=a,e.name=H(e.name,["sectionIdx"],g),g.sectionName=e.name,h=H(c,["sectionName","sectionIdx"],g),i=F(h,"publishing","<unit"),"ok"!==i.status)throw{code:211,
msg:"no valid publishing elements found",data:{tagStr:i.tagStr,tagContent:h}};if(h=i.rem,e.publishing=[],z(i.tagContent,e.publishing),i=F(h,"conditions","<unit"),"ok"!==i.status)throw{code:212,msg:"no valid conditions elements found",data:{tagStr:i.tagStr,tagContent:h}};h=i.rem,e.conditions=A(i.tagContent,_,{}),i=F(h,"params","<unit"),h=i.rem,e.attributes=A(i.tagContent,ea,f),i=F(h,"tracking","<unit"),h=i.rem,e.tracking=[],y(i.tagContent,e.tracking);var j=G(h,"<unit");if(null!==j)return e.adframe=j.adframe,void(e.units=[]);var k={};if(k.unitCodes=e.attributes.unitCodes,k.holdoff=e.attributes.holdoff,k.maxSeekTime=e.attributes.maxSeekTime,k.smart=e.attributes.smart,k.prime=e.attributes.prime,k.seektime=e.attributes.seektime,k.playtime=e.attributes.playtime,k.seekdelay=e.attributes.seekdelay,k.zindex=e.attributes.zindex,k.sourceset=e.attributes.sourceset,k.natformat=e.attributes.natformat,k.centscrn=e.attributes.centscrn,k.style=e.attributes.style,k.priority=e.attributes.priority,k.cost=e.attributes.cost,k.onsold=e.attributes.onsold,k.clearance=e.attributes.clearance,k.xmargin=e.attributes.xmargin,k.vertoffset=e.attributes.vertoffset,k.vertspacing=e.attributes.vertspacing,k.spotlength=e.attributes.spotlength,k.shared=e.attributes.shared,e.units=[],i=E(h,"unit"),h=i.rem,0===i.tags.length)throw{code:240,msg:"no valid unit elements found",data:{tagStr:b,tagContent:i.tagContent}};for(var l=0;l<i.tags.length;l++){var m={};v(l,i.tags[l].tagStr,i.tags[l].tagContent,m,k,g),e.units.push(m)}}function v(a,b,c,e,f,g){var h,i;if(d(),e.launched=!1,e.name=D(b,"name"),null===e.name&&(e.name=$),g.unitIdx=a,e.name=H(e.name,["unitIdx"],g),g.unitName=e.name,h=H(c,["unitName","unitIdx"],g),i=F(h,"publishing","<adpost"),"ok"!==i.status)throw{code:311,msg:"no valid publishing elements found",data:{tagStr:i.tagStr,tagContent:h}};if(h=i.rem,e.publishing=[],z(i.tagContent,e.publishing),i=F(h,"conditions","<adpost"),"ok"!==i.status)throw{code:312,msg:"no valid conditions elements found",data:{tagStr:i.tagStr,tagContent:h}};h=i.rem,e.conditions=A(i.tagContent,_,{}),i=F(h,"params","<adpost"),h=i.rem,e.attributes=A(i.tagContent,fa,f),i=F(h,"tracking","<adpost"),h=i.rem,e.tracking=[],y(i.tagContent,e.tracking);var j=G(h,"<adpost");if(null!==j)return e.adframe=j.adframe,void(e.adposts=[]);var k={};if(k.unitCodes=e.attributes.unitCodes,k.holdoff=e.attributes.holdoff,k.maxSeekTime=e.attributes.maxSeekTime,k.sourceset=e.attributes.sourceset,k.natformat=e.attributes.natformat,k.centscrn=e.attributes.centscrn,k.smart=e.attributes.smart,k.prime=e.attributes.prime,k.seektime=e.attributes.seektime,k.playtime=e.attributes.playtime,e.adposts=[],i=E(h,"adpost"),h=i.rem,"ok"!==i.status){if(i=F(h,"mediastream","/unit"),h=i.rem,"ok"===i.status){var l={};return w(e.adposts.length,i.tagStr,i.tagContent,l,k,g),l.name="mediastream",void e.adposts.push(l)}throw{code:240,msg:"no valid adpost elements found",data:{tagStr:b,tagContent:i.tagContent}}}for(var m=0;m<i.tags.length;m++){var l={};w(m,i.tags[m].tagStr,i.tags[m].tagContent,l,k,g),e.adposts.push(l)}}function w(a,b,c,e,f,g){var h,i;d(),e.name=D(b,"name"),null===e.name&&(e.name=$),g.adpostIdx=a,e.name=H(e.name,["adpostIdx"],g),g.adpostName=e.name,h=H(c,["adpostName","adpostIdx"],g),i=F(h,"conditions","<segment"),h=i.rem,e.conditions=A(i.tagContent,_,{}),i=F(h,"params","<segment"),h=i.rem,e.attributes=A(i.tagContent,ga,f),i=F(h,"tracking","<segment"),h=i.rem,e.tracking=[],y(i.tagContent,e.tracking);var j={};if(j.holdoff=e.attributes.holdoff,j.maxSeekTime=e.attributes.maxSeekTime,j.sourceset=e.attributes.sourceset,j.natformat=e.attributes.natformat,e.segments=[],i=E(h,"segment"),h=i.rem,0===i.tags.length)throw{code:400,msg:"no valid segment tags found",data:{tagStr:b,tagContent:i.tagContent}};for(var k=0;k<i.tags.length;k++){var l={};x(k,i.tags[k].tagStr,i.tags[k].tagContent,l,j,g),e.segments.push(l)}}function x(a,b,c,e,f,g){function h(a,b,c){for(var d in c)void 0!==b[d]&&b[d]!==$&&b[d]!==c[d].defvalue&&(a[d]=b[d])}var i,j;d(),e.name=D(b,"name"),null===e.name&&(e.name=$),g.segmentIdx=a,e.name=H(e.name,["segmentIdx"],g),g.segmentName=e.name,i=H(c,["segmentName","segmentIdx"],g),j=F(i,"conditions","<segment"),i=j.rem,e.conditions=A(j.tagContent,_,{}),j=F(i,"params","<segment"),i=j.rem,e.attributes=A(j.tagContent,ha,f),j=F(i,"tracking","<segment"),i=j.rem,e.tracking=[],y(j.tagContent,e.tracking);var k={};k.holdoff=e.attributes.holdoff,k.xoff=e.attributes.xoff,k.yoff=e.attributes.yoff,k.xoffad=e.attributes.xoffad,k.yoffad=e.attributes.yoffad,k.blackframe=e.attributes.blackframe,k.fxin=e.attributes.fxin,k.fxout=e.attributes.fxout;var l={holdoff:{type:"string",defvalue:$,useref:!0},width:{type:"number",defvalue:0,min:0,useref:!0},height:{type:"number",defvalue:0,min:0,useref:!0},xoff:{type:"number",defvalue:0,useref:!0},yoff:{type:"number",defvalue:0,useref:!0},xoffad:{type:"string",defvalue:$,useref:!0},yoffad:{type:"string",defvalue:$,useref:!0},blackframe:{type:"boolean",defvalue:!1,useref:!0},fxin:{type:"keyword",defvalue:"none",series:["none","size","fade"],useref:!0},fxout:{type:"keyword",defvalue:"none",series:["none","size","fade"],useref:!0},mintime:{type:"number",defvalue:0,min:0},maxtime:{type:"number",defvalue:0,min:0},quit:{type:"keyword",defvalue:"none",series:["close","skip","onnotactive","onnotvisible","never"]}};j=F(i,"source","/segment"),i=j.rem;var m=A(j.tagContent,l,k);h(e.attributes,m,l)}function y(a,b){auxObj=E(a,"beam");for(var c=0;c<auxObj.tags.length;c++){var d=auxObj.tags[c].tagContent;b.push(d)}}function z(a,b){auxObj=E(a,"code");for(var c=0;c<auxObj.tags.length;c++){var d=auxObj.tags[c].tagContent;b.push(d)}}function A(a,b,c,d){function e(a,b,d){for(var e in b)if("number"===b[e].type){var f=a[e],g=e+"_perc";if(!0===a[g]&&!0!==d){var h=c[e];if(void 0===h)throw{code:700,msg:"parsing error: key: "+e+" cannot by used with percentage values",data:{curValue:f,frameVal:h}};a[e]=Math.floor(h*f/100),a[g]=!1}}return a}function f(a,b,c,d){function e(a,b,c){for(var d in c)void 0===a[d]&&void 0!==b[d]&&(a[d]=b[d])}var f={};return e(f,b,a),-1!==d&&void 0!==d&&e(f,d,a),e(f,c,a),f}var g=!1;return-1===d&&(g=!0),e(f(b,C(a,b,c,g),B(b,c),d),b,g)}function B(a,b){var c={};for(var d in a){var e=a[d].defvalue;!0===a[d].useref&&void 0!==b[d]&&(e=b[d]),c[d]=e}return c}function C(a,b,c,d){function e(a,b,c,d,e){var f={status:"undef",code:"",msg:"",data:null},g=D(a,b);if(null===g)return f.status="not_found",f;if("keyword"===c[b].type)return g=g.toLowerCase(),c[b].series.indexOf(g)>=0?(f.status="ok",f.data=g,f):(f.status="error",f.msg="unknown value:'"+g+"'",f.data=g,f);if("string"===c[b].type)return f.status="ok",f.data=g,f;if("boolean"===c[b].type)return"true"!==(g=g.toLowerCase())&&"false"!==g?(f.status="error",f.msg="invalid value for '"+b+"': '"+g+"'",f.data=g,f):(f.status="ok",f.data="true"===g||"false"!==g&&null,f);if("number"===c[b].type){var h=g.indexOf("%");if(h<0){f.percent=!1;var i=parseInt(g),j=c[b].min,k=c[b].max;return f.status="ok",(void 0!==j&&i<j||void 0!==k&&i>k)&&(f.msg="out-of-range value for '"+b+"': "+g,f.status="error"),f.data=i,f}f.percent=!0;var i=parseInt(g.substring(0,h));if(f.status="ok",i<0||i>100)return f.msg="out-of-range value for '"+b+"': "+g,f.status="error",f.data=i,f;if(!0!==c[b].useref)return f.msg="percentage not allowed on: "+b+" - value: "+g,f.status="error",f.data=i,f;return void 0===d[b]?(f.msg="no reference magnitude for: "+b+" - value: "+g,f.status="error",f.data=i,f):(f.status="ok",f.data=i,f)}return f.status="error",f.msg="programming error: key:'"+b+"', type:'"+c[b].type+"'",f.data=g,f}var f={};for(var g in b){var h=e(a,g,b,c,d);if("ok"!==h.status){if("not_found"!==h.status)throw{code:710,msg:"parsing error: key:"+g+", msg: "+h.msg,data:a}}else if(f[g]=h.data,!0===h.percent){var i=g+"_perc";f[i]=!0}else{var i=g+"_perc";f[i]=!1}}return f}function D(a,b){function c(a,b){var c=","+b+":",d=a.indexOf(c);return d>=0?d+1:(c=b+":",d=a.indexOf(c),0===d?0:-1)}function d(a){var b=""+a;b=b.replace("(?![a-zA-Z0-9_.-])",",");var c=b.indexOf(",");return c>=0&&(b=b.substring(0,c)),b}var e=a.replace(/\s+/g,""),f=e.toLowerCase(),g=b.toLowerCase(),h=c(f,g);if(h<0)return null;var i=h+g.length+1;return f=f.substring(i),f=d(f),e.substring(i,i+f.length)}function E(a,b){for(var c={tags:[],rem:a,status:"ok"},d=""+a,e=null,f=100,g=0,h=0;;){if(++g>=f){c.status="error";break}if(e=F(d,b),d=e.rem,"ok"!==e.status){if("not_found"===e.status)break;c.status="error";break}c.tags.push(e),h++}return 0===h&&(c.status="not_found"),c.rem=d,c}function F(a,b,c){function d(a,b){var c={tagContent:"",rem:"",status:"ok"},d=""+a,e=d.indexOf(b);return e<0?(c.status="not_found",c):(c.rem=d.substring(e),c.tagContent=d.substring(0,e),c)}function e(a,b){var c,d,e,f,g,h,i,j,k={tagStr:"",tagContent:"",rem:"",status:"ok"},l="<"+b,m="</"+b+">",n="/>";k.rem=a;var o=""+a;if((h=o.indexOf(l))<0)return k.status="not_found",k;if(o=o.substring(h),(i=o.indexOf(m))<0){var p=o.indexOf(n);if(p>0)return p+=2,o=o.substring(0,p),k.rem=a.replace(o,""),k.tagContent="",k.status="empty_tag",k;throw{code:720,msg:"_getSubTag parse error",data:{elementName:b,base:a}}}if(i+=m.length,c=o.substring(0,i),k.rem=a.replace(c,""),d=""+c,(h=o.indexOf(l))<0)throw{code:730,msg:"_getSubTag parse error",data:{elementName:b,base:a}};return j=d.indexOf(">"),j+=1,d=d.substring(h,j),e=c.replace(d,""),i=e.indexOf(m),e=e.substring(i),g=c.replace(d,""),g=g.replace(e,""),k.tagContent=g,f=""+d,h=f.indexOf(l),h+=l.length,f=f.substring(h),j=f.indexOf(">"),f=f.substring(0,j),k.tagStr=f,k}if(void 0!==c){var f=d(a,c);if("ok"===f.status){var g=e(f.tagContent,b);return g.rem+=f.rem,g}}return e(a,b)}function G(a,b){function c(a){var b=a.replace(/\s+/g,""),c=b.split(","),d={};return c.forEach(function(a){var b=a.split(":");0!==b[0].length&&(d[b[0]]=b[1])}),d}var d=F(a,"adframe",b);if("ok"!==d.status||d.tagContent.length<=0)return null;var e=c(d.tagContent);if(void 0===e.classID)throw{code:316,msg:"adframe classID not found",data:{tagStr:"adframe",tagContent:a}};return e.adfIdx=Z++,{adframe:e,auxObj:d}}function H(a,b,c){var d=""+a;return b.forEach(function(a){var b=c[a];if("undefined"!==b){var e=new RegExp("\\${"+a+"}","g");d=d.replace(e,b)}}),d}var I=this,J=a.comps,K=a.cllBks,L=a.bootParams,M=Math.round(999*Math.random());d();var N=J.trackhub,O=a.addLogLine,P=a.stageFileName,Q=!1,R="INIT",S=null,T=null,U=null,V=0,W={},X={status:"undef",retrMode:null,retrDelay:null,code:"",msg:""},Y=["init"],Z=0,$="unspecified",_={delay:{type:"string",defvalue:$,multiple:!0},iftrue:{type:"string",defvalue:$,multiple:!0},ifnottrue:{type:"string",defvalue:$,multiple:!0},ifdeployed:{type:"string",defvalue:$,multiple:!0},ifnotdeployed:{type:"string",defvalue:$,multiple:!0},ifcontent:{type:"string",defvalue:$},ifnotcontent:{type:"string",defvalue:$},after:{type:"string",defvalue:$},ifwidthmore:{type:"string",defvalue:$},ifwidthless:{type:"string",defvalue:$},ifbrowser:{type:"string",defvalue:$},ifnotbrowser:{type:"string",defvalue:$},ifmxmore:{type:"string",defvalue:$},ifmxless:{type:"string",defvalue:$},ifcasea:{type:"boolean",defvalue:!1},ifcaseb:{type:"boolean",defvalue:!1},ifcase:{type:"string",defvalue:$},ifgroup:{type:"string",defvalue:$},vbar:{type:"number",defvalue:0,min:0},prob:{type:"number",defvalue:0,min:0,max:100},maxday:{type:"number",defvalue:0,min:0},maxhour:{type:"number",defvalue:0,min:0},max5min:{type:"number",defvalue:0,min:0},fromhour:{type:"string",defvalue:$},tohour:{type:"string",defvalue:$},fromday:{type:"string",defvalue:$},today:{type:"string",defvalue:$},pinned:{type:"boolean",defvalue:!1},zz_type:{type:"string",defvalue:"conditions"}},aa={enabled:{type:"boolean",defvalue:!0},filter:{type:"string",defvalue:$},multiple:{type:"number",defvalue:4,min:1},reduc:{type:"string",defvalue:$},account:{type:"string",defvalue:$}},ba={enabled:{type:"boolean",defvalue:!0},tag:{type:"string",defvalue:$},unitCodes:{type:"string",defvalue:$,useref:!0},enabmad:{type:"boolean",defvalue:!1},reqcmp:{type:"boolean",defvalue:!1},lw_enabled:{type:"boolean",defvalue:!1},lw_reducer:{type:"string",defvalue:$},lw_sort:{type:"string",defvalue:$},lw_maxitem:{type:"string",defvalue:$},lw_ogtype:{type:"string",defvalue:$},lw_chan_rx:{type:"string",defvalue:$},lw_chan_tx:{type:"string",defvalue:$},zindex:{type:"string",defvalue:$,useref:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},centscrn:{type:"boolean",defvalue:!1,useref:!0},style:{type:"string",defvalue:$,useref:!0},priority:{type:"string",defvalue:$,useref:!0},ondeploy:{type:"string",defvalue:$},cost:{type:"string",defvalue:$,useref:!0},onsold:{type:"boolean",defvalue:!1,useref:!0},costx:{type:"string",defvalue:$},onsoldx:{type:"boolean",defvalue:!1},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},smart:{type:"boolean",defvalue:!1,useref:!0},prime:{type:"boolean",defvalue:!1,useref:!0},seektime:{type:"string",defvalue:$,useref:!0},playtime:{type:"string",defvalue:$,useref:!0},seekdelay:{type:"string",defvalue:$,useref:!0},clearance:{type:"string",defvalue:$,useref:!0},xmargin:{type:"string",defvalue:$,useref:!0},vertoffset:{type:"string",defvalue:$,useref:!0},vertspacing:{type:"string",defvalue:$,useref:!0},spotlength:{type:"string",defvalue:$,useref:!0},shared:{type:"boolean",defvalue:!1,useref:!0},channel:{type:"string",defvalue:""},fixedch:{type:"boolean",defvalue:!1},promolinkuri:{type:"string",defvalue:""},logolinkuri:{type:"string",defvalue:""},zz_type:{type:"string",defvalue:"stage_attributes"}},ca={enabled:{type:"boolean",defvalue:!0},pubcode:{type:"string",defvalue:$},ifcasea:{type:"boolean",defvalue:!1},ifcaseb:{type:"boolean",defvalue:!1},ifcase:{type:"string",defvalue:$},ifwidthmore:{type:"string",defvalue:$},ifwidthless:{type:"string",defvalue:$},layout:{type:"string",defvalue:$},zz_type:{type:"string",defvalue:"config_attributes"}},da={enabled:{type:"boolean",defvalue:!0},unitCodes:{type:"string",defvalue:$,useref:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},centscrn:{type:"boolean",defvalue:!1,useref:!0},style:{type:"string",defvalue:$,useref:!0},priority:{type:"string",defvalue:$,useref:!0},cost:{type:"string",defvalue:$,useref:!0},onsold:{type:"boolean",defvalue:!1,useref:!0},clearance:{type:"string",defvalue:$,useref:!0},xmargin:{type:"string",defvalue:$,useref:!0},vertoffset:{type:"string",defvalue:$,useref:!0},vertspacing:{type:"string",defvalue:$,useref:!0},spotlength:{type:"string",defvalue:$,useref:!0},shared:{type:"boolean",defvalue:!1,useref:!0},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},smart:{type:"boolean",defvalue:!1,useref:!0},prime:{type:"boolean",defvalue:!1,useref:!0},seektime:{type:"string",defvalue:$,useref:!0},playtime:{type:"string",defvalue:$,useref:!0},seekdelay:{type:"string",defvalue:$,useref:!0},channel:{type:"string",defvalue:""},fixedch:{type:"boolean",defvalue:!1},promolinkuri:{type:"string",defvalue:""},logolinkuri:{type:"string",defvalue:""},zz_type:{type:"string",defvalue:"layout_attributes"}},ea={enabled:{type:"boolean",defvalue:!0},unitCodes:{type:"string",defvalue:$,useref:!0},zindex:{type:"string",defvalue:$,useref:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},centscrn:{type:"boolean",defvalue:!1,useref:!0},style:{type:"string",defvalue:$,useref:!0},priority:{type:"string",defvalue:$,useref:!0},partition:{type:"string",defvalue:$},ondeploy:{type:"string",defvalue:$},cost:{type:"string",defvalue:$,useref:!0},onsold:{type:"boolean",defvalue:!1,useref:!0},costx:{type:"string",defvalue:$},onsoldx:{type:"boolean",defvalue:!1},clearance:{type:"string",defvalue:$,useref:!0},xmargin:{type:"string",defvalue:$,useref:!0},vertoffset:{type:"string",defvalue:$,useref:!0},vertspacing:{type:"string",defvalue:$,useref:!0},spotlength:{type:"string",defvalue:$,useref:!0},shared:{type:"boolean",defvalue:!1,useref:!0},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},smart:{type:"boolean",defvalue:!1,useref:!0},prime:{type:"boolean",defvalue:!1,useref:!0},seektime:{type:"string",defvalue:$,useref:!0},playtime:{type:"string",defvalue:$,useref:!0},seekdelay:{type:"string",defvalue:$,useref:!0},physical:{type:"boolean",defvalue:!1},location:{type:"keyword",defvalue:"inpage",series:["inpage","left","center","right","bottom","topleft","topright","botleft","botright"]},position:{type:"keyword",defvalue:"default",series:["default","predef","fixed","ontop","before","after","inlist","first","afterfirst","last","beforelast"]},index:{type:"string",defvalue:$},rowidx:{type:"string",defvalue:$},refid:{type:"string",defvalue:$},refcls:{type:"string",defvalue:$},refidx:{type:"string",defvalue:$},width:{type:"string",defvalue:"auto"},maxwidth:{type:"string",defvalue:$},minwidth:{type:"string",defvalue:$},xfactor:{type:"string",defvalue:$},xalign:{type:"keyword",defvalue:"left",series:["left","center","right"]},xtrim:{type:"number",defvalue:0},xoff:{type:"number",defvalue:0},height:{type:"string",defvalue:"auto"},maxheight:{type:"string",defvalue:$},minheight:{type:"string",defvalue:$},yfactor:{type:"string",defvalue:$},yalign:{type:"keyword",defvalue:"top",series:["top","center","bottom"]},ytrim:{type:"number",defvalue:0},yoff:{type:"number",defvalue:0},formfactor:{type:"string",defvalue:$},floatpar:{type:"string",defvalue:"left"},marginleft:{type:"number",defvalue:0},marginright:{type:"number",defvalue:0},margintop:{type:"number",defvalue:0},marginbottom:{type:"number",defvalue:0},hideon:{type:"string",defvalue:$},zz_type:{type:"string",defvalue:"section"}},fa={enabled:{type:"boolean",defvalue:!0},unitCodes:{type:"string",defvalue:$,useref:!0},zindex:{type:"string",defvalue:$,useref:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},centscrn:{type:"boolean",defvalue:!1,useref:!0},style:{type:"string",defvalue:$,useref:!0},priority:{type:"string",defvalue:$,useref:!0},partition:{type:"string",defvalue:$},contshow:{type:"boolean",defvalue:!1},overlay:{type:"boolean",defvalue:!1},ondeploy:{type:"string",defvalue:$},cost:{type:"string",defvalue:$,useref:!0},onsold:{type:"boolean",defvalue:!1,useref:!0},costx:{type:"string",defvalue:$},onsoldx:{type:"boolean",defvalue:!1},afterads:{type:"boolean",defvalue:!1},roundseek:{type:"string",defvalue:$},roundplay:{type:"string",defvalue:$},clearance:{type:"string",defvalue:$,useref:!0},xmargin:{type:"string",defvalue:$,useref:!0},vertoffset:{type:"string",defvalue:$,useref:!0},vertspacing:{type:"string",defvalue:$,useref:!0},spotlength:{type:"string",defvalue:$,useref:!0},shared:{type:"boolean",defvalue:!1,useref:!0},location:{type:"keyword",defvalue:"inpage",series:["inpage","left","center","right","bottom","topleft","topright","botleft","botright"]},position:{type:"keyword",defvalue:"default",series:["default","predef","fixed","ontop","before","after","inlist","first","afterfirst","last","beforelast"]},row:{type:"number",defvalue:1,min:1,max:20},rowidx:{type:"string",defvalue:$},index:{type:"string",defvalue:$},reference:{type:"string",defvalue:$},refid:{type:"string",defvalue:$},refcls:{type:"string",defvalue:$},refidx:{type:"string",defvalue:$},width:{type:"string",defvalue:"auto"},maxwidth:{type:"string",defvalue:$},minwidth:{type:"string",defvalue:$},xfactor:{type:"string",defvalue:$},xalign:{type:"keyword",defvalue:"left",series:["left","center","right"]},xtrim:{type:"number",defvalue:0},xoff:{type:"number",defvalue:0},height:{type:"string",defvalue:"auto"},maxheight:{type:"string",defvalue:$},minheight:{type:"string",defvalue:$},yfactor:{type:"string",defvalue:$},yalign:{type:"keyword",defvalue:"top",series:["top","center","bottom"]},ytrim:{type:"number",defvalue:0},yoff:{type:"number",defvalue:0},formfactor:{type:"string",defvalue:$},expand:{type:"boolean",defvalue:!1},compress:{type:"boolean",defvalue:!1},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},smart:{type:"boolean",defvalue:!1,useref:!0},prime:{type:"boolean",defvalue:!1,useref:!0},seektime:{type:"string",defvalue:$,useref:!0},playtime:{type:"string",defvalue:$,useref:!0},seekdelay:{type:"string",defvalue:$,useref:!0},waitfill:{type:"boolean",defvalue:!1},waitcolor:{type:"string",defvalue:$},waiticon:{type:"boolean",defvalue:!0},waitlogo:{type:"boolean",defvalue:!0},voff:{type:"number",defvalue:0},visiboff:{type:"number",defvalue:0},floatpar:{type:"string",defvalue:"left"},marginleft:{type:"number",defvalue:0},marginright:{type:"number",defvalue:0},margintop:{type:"number",defvalue:0},marginbottom:{type:"number",defvalue:0},hideon:{type:"string",defvalue:$},zz_type:{type:"string",defvalue:"unit"}},ga={enabled:{type:"boolean",defvalue:!0},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},centscrn:{type:"boolean",defvalue:!1,useref:!0},premium:{type:"boolean",defvalue:!1},filler:{type:"boolean",defvalue:!1},contshow:{type:"boolean",defvalue:!1},maxpage:{type:"number",defvalue:1},seektime:{type:"string",defvalue:$,useref:!0},playtime:{type:"string",defvalue:$,useref:!0},zz_type:{type:"string",defvalue:"adpost"}},ha={enabled:{type:"boolean",defvalue:!0},backup:{type:"boolean",defvalue:!0},sourceset:{type:"string",defvalue:$,useref:!0},natformat:{type:"string",defvalue:$,useref:!0},autocontent:{type:"boolean",defvalue:!0},floor:{type:"string",defvalue:$,useref:!0},width:{type:"string",defvalue:"auto"},maxwidth:{type:"string",defvalue:$},minwidth:{type:"string",defvalue:$},xfactor:{type:"string",defvalue:$},xalign:{type:"keyword",defvalue:"center",series:["left","center","right"]},xtrim:{type:"number",defvalue:0},xoff:{type:"number",defvalue:0},height:{type:"string",defvalue:"auto"},maxheight:{type:"string",defvalue:$},minheight:{type:"string",defvalue:$},yfactor:{type:"string",defvalue:$},yalign:{type:"keyword",defvalue:"center",series:["top","center","bottom"]},ytrim:{type:"number",defvalue:0},yoff:{type:"number",defvalue:0},xoffad:{type:"string",defvalue:$},yoffad:{type:"string",defvalue:$},holdoff:{type:"string",defvalue:$,useref:!0},maxSeekTime:{type:"string",defvalue:$,useref:!0},maxcall:{type:"number",defvalue:0},callspan:{type:"number",defvalue:0},bidgoal:{type:"number",defvalue:0},frame:{type:"boolean",defvalue:!1},shade:{type:"boolean",defvalue:!1},blackframe:{type:"boolean",defvalue:!1},framecolor:{type:"string",defvalue:$},flexible:{type:"boolean",defvalue:!1},vastdevice:{type:"string",defvalue:$},initvol:{type:"string",defvalue:$},progress:{type:"boolean",defvalue:!0},promolink:{type:"boolean",defvalue:!0},fxin:{type:"keyword",defvalue:"none",series:["none","size","fade"]},fxout:{type:"keyword",defvalue:"none",series:["none","size","fade"]},mintime:{type:"number",defvalue:0,min:0},maxtime:{type:"number",defvalue:0,min:0},quit:{type:"keyword",defvalue:"none",series:["close","skip","onnotactive","onnotvisible","never"]},audio:{type:"keyword",defvalue:"onhover",series:["always","onvisible","onactive","onhover","onaction","never"]},seek:{type:"keyword",defvalue:"always",series:["always","onvisible","onactive","onhover","onaction"]},load:{type:"keyword",defvalue:"always",series:["always","onvisible","onactive","onhover","onaction"]},start:{type:"keyword",defvalue:"always",series:["onvisible","always","onactive","onhover","onaction"]},pause:{type:"keyword",defvalue:"never",series:["never","onnotvisible","onnotactive","onnothover","onnotaction"]},expand:{type:"keyword",defvalue:"onstart",series:["onvisible","onstart"]},restap:{type:"boolean",defvalue:!1},break:{type:"keyword",defvalue:"never",series:["never","onvisible","onnotvisible","onactive","onhover","onaction"]},zz_type:{type:"string",defvalue:"segment"}};I.isReady=function(){return!0!==Q},I.getResult=function(){return{retObj:X,stageCard:W}},I.tick=function(a){g(a)},a.heart.subscribe(I,100,"stageproc",9,0),I.tick(Date.now()),d();var ia=!1;!0!==a.useLocalCache&&(ia=!0),new c({comps:J,cllBks:K,bootParams:L,callback:f,timeout:1e4,shorten:!0,inclear:a.inClear,lifeTime:a.lifeTime,mhfolder:a.mhfolder,secProt:a.secProt,dataBaseUrl:b.resourceLocations.dataurl,folderPath:"stages",fileName:P,fileExt:"txt",synchro:a.ownSynchro,forcerefresh:ia,env:a.bootParams.env}),Q=!0}}(0,config,stm_cachedfile),stm_stgmgr=function(a,b,c,d,e,f,g){return function(b){function h(a){w.logger.writex({msg:a,prefix:"stm_stgmgr",inst:A})}function i(a){w.logger.writex({tgl:!0,msg:a,prefix:"stage:"+y.placementId+" (stg_mgr)"})}function j(a,b,c){w.trackhub.sendEvent("stage","${"+y.placementId+"|*AllStages*}$/_s10 stgmgr/_s10 stage"+a,b,c)}function k(a){var b={comps:w,cllBks:x,bootParams:y,testCase:y.testCase,startTime:y.startTime,secProt:y.secProt,ownSynchro:l(a),useLocalCache:F,inClear:v,lifeTime:t,mhfolder:u,stageFileName:B,placementId:y.placementId,heart:w.heart,logger:w.logger,addLogLine:z,dtomanager:w.dtomanager,trackhub:w.trackhub,mailmaster:w.mailmaster};return new c(b)}function l(a){function b(a,b){try{for(var c=0;c<a.length;c++){var d=a[c];if(d.name===b){if("ok"!==d.status)break;return d.synchro}}}catch(a){}return h(),""+Math.round(1e6*Math.random())}return b(a,B)}function m(b){switch(o(b),I){case"INIT":if(x.debugPing("/_s20 stgmgr","_10 inst"),j("","_s10 inst"),"sys"!==y.ctxId){I="ALLCLR";break}I="WFAB";case"WFAB":var c=w.blockdet.getStatus();if(null===c)break;if(!0===c){H="adblk",h(),z("ad block detected"),j("","_s11 ad_blk_found"),i("ad blocker detected!"),I="PARK";break}I="ALLCLR";case"ALLCLR":h(),z("ad blok NOT det"),x.debugPing("/_s20 stgmgr","_20 allclr"),J=b,I="WSDSI";case"WSDSI":if(b-J>a.stage.sdsTimeout){i("stage DSD timeout"),I="POST_DSD";break}if(!1===w.inLineData.getSDSStatus()){i("stage DSD error"),I="POST_DSD";break}if(!0!==w.inLineData.getSDSStatus())break;I="POST_DSD";case"POST_DSD":D=k(w.inLineData.getStgFileData()),h(),z("waiting stage info..."),j("","_s12 ad_blk_not_found"),J=b,I="WSI";case"WSI":if(b-J>a.stage.fileTimeout){H="stg_file_to",i("stage file timeout!"),I="STAGE_ERROR";break}if(!0!==D.isReady())break;var d=D.getResult();if("ok"!==d.retObj.status){var e="msg: "+d.retObj.msg+", code: "+d.retObj.code;z(e),i("<<<< stage error >>>>   "+e),j("","_s16 stage_error"),j("/_s90 stage_errors",e),H="stg_file_not_ok",I="STAGE_ERROR";break}G=d.stageCard,h(),z("stage file available"),j("","_s20 stage_info_avail"),j("/_s20 file_rtrv_tm_ms",b-J,{scl:"shorttimes"}),x.debugPing("/_s20 stgmgr","_30 sgtavl"),!0===G.attributes.enabmad&&(w.mad_bs.enable(),C=w.mad_bs.glbdb()),n(G),z("stage file TXd"),z("processing sourceset data...");var f=w.inLineData.getSSFileData();z("launching source servers..."),p(G.ssObjList,C,f),q(G.ssObjList,f),H="all_ok",w.heart.bootOff(),h(),j("","_s30 stage_proc_end"),I="PARK";break;case"STAGE_ERROR":I="PARK";break;case"PARK":w.heart.unsubscribe(s)}}function n(a){function b(a){w.snippetManager.setSnippets(a)}function c(a,b){function c(a){if(null!==a){for(var b="",c=0;c<a.length;c++){var d=a[c];b+="."+d.classID+" {"+d.string+"} \n"}return b}}if(null!==b){var d=new f({hostWnd:a});d.setWrapperElement("");for(var e=0;e<b.length;e++){var g=b[e],h=c(g.styleSnippets);d.deployStyle("_fb_dynstl_"+g.name,h,!1)}}}w.quickVars.addByPassFilters(a.bypassString),w.quickVars.addPatches(a.patchString),b(a.javacode.snippets),c(window,a.csscode.styles)}function o(a){!0===L?!1===K&&(L=!1):!0===K&&(M++,L=!0)}function p(a,b,c){function e(a,b,c,e){var f={master:s,comps:w,cllBks:x,bootParams:y,sourceSetName:a,useCount:b,testCase:y.testCase,vastDevice:y.vastDevice,startTime:y.startTime,secProt:y.secProt,ssFileData:e,useLocalCache:F,inClear:v,lifeTime:t,mhfolder:u,localBanDB:c,heart:w.heart,logger:w.logger,addLogLine:z,trackhub:w.trackhub,mailmaster:w.mailmaster,dtomanager:w.dtomanager,expregister:w.expregister,accbeam:w.accbeam,dummy:0};return new d(f)}a.forEach(function(a){var d=e(a.name,a.count,b,c);E.push(d)})}function q(a,b){function c(a,b){var c=!1;return b.forEach(function(b){!0!==c&&b.name===a&&(c=!0)}),c}function d(a,b){function c(a){}function d(){}function e(){}var f=new XMLHttpRequest;null!==f&&(f.open("POST",a),f.timeout=1e4,f.onload=c,f.onerror=d,f.ontimeout=e,f.send(b))}var e={dsdChannel:y.hostPlcmId,ssIds:[]};e.stgId=y.placementId;var f=!0;a.forEach(function(a){!0!==c(a.name,b)&&(f=!1),e.ssIds.push(a.name)});var h=1;(!0===f&&(h=.01),"dev"===y.env&&(h=100),!0===(new g).whirliGig(h))&&d("//bfs.aws.forebase.com/stg/rprt?json=true",encodeURIComponent(JSON.stringify(e)))}function r(){w.heart.stop(),window.removeEventListener("unload",r)}var s=this,t=604800,u="stage",v=!1,w=b.comps,x=b.cllBks,y=b.bootParams,z=x.addLogLine;x.debugPing("/_s20 stgmgr","_00 build");var A=Math.round(999*Math.random());h(),z("stage manager here");var B=y.placementId,C={},D=null,E=(new e,[]);s.getStgCard=function(){return G},s.getSrcSrvReport=function(){var a="Rot Idx: "+w.dtomanager.getRotIdx()+"\n\n";return E.forEach(function(b){a+=b.getLog()+"\n\n"}),a},s.fireEvent=function(a,b){switch(a){case"bannedTag":w.mad_bs.banNotif(b)}};var F=!0;!0===a.localcache.disable?(F=!1,h()):!0===y.debugVars.disableLocCache&&(F=!1,h());var G=null,H="...",I="INIT",J=0;window.addEventListener("unload",r);var K=!0,L=!0,M=0;s.getStatus=function(){return H},s.tick=function(a){m(a)},w.heart.subscribe(s,100,"stgmgr",0,0),s.tick(Date.now()),z("stagemanager initialized")}}(config,0,stm_stgproc,stm_srcsrvr,lscleanup,domtool,textools),valuemstr=function(a,b,c,d,e){return function(e){function f(a){F.logger.writex({msg:a,prefix:"valuemstr",inst:J})}function g(a,b){F.logger.debugAlert(a,b)}function h(a,b,c){m(Q,a,b,c)}function i(a,b,c){m(R,a,b,c)}function j(a,b,c){F.trackhub.sendEvent(S,"/"+G.locus+"/_s20 deferred"+a,b,c)}function k(a,b,c,d){function e(a,b,c,d){j("/"+a+"/_s10 eng"+b,c,d)}e("*AllParts*",b,c,d),e(a,b,c,d)}function l(a,b,c,d){function e(a,b,c,d){j("/"+a+"/_s00 pcm"+b,c,d)}e("*AllParts*",b,c,d),e(a,b,c,d)}function m(a,b,c,d){!0===L&&F.trackhub.sendEvent(a,"/"+G.locus+b,c,d)}function n(a,b,c){i("/**errors**"+a,b,c)}function o(a,b,c){h("/**"+a+"**",b,c)}function p(){function a(a,c){return a in b!=!0?c:b[a]}var b=F.quickVars.getAllParams();L=a("sendValuePings",L),!0!==L&&f(),P=a("targetLifeTime",P),N=a("valCalcCountSpan",N),f()}function q(a){aa.tgt.unshift(a),ba=!0,s(a,"tgt")}function r(a){aa.sls.unshift(a),ba=!0,s(a,"sls")}function s(a,b){function c(a){var b=null;return a.ids.forEach(function(a){if(null===b){var c=W[a];void 0!==c&&(b=c)}}),b}function d(a,b){function c(a){return Math.round(100*a)/100}if(!0!==a.act)return!1;if("hit"===a.mod||"win"===a.mod)b.cumRev+=a.prc,"vid"===a.typ&&(b.vidcnt+=1);else{if("cnc"!==a.mod)return!1;b.cumRev-=a.prc,b.cumRev<0&&(b.cumRev=0)}return b.cumRev=c(b.cumRev),!0}if("tgt"===b){if("part"!==a.type)return;if("intrinsic"===a.name)return;var e=B(a.exdata);if(null===e)return;var f={name:a.name,exdata:e,cumRev:0,vidcnt:0};W[a.id]=f,w(f),l(a.name,"","_s60 win"),l(a.name,"/_s20 win_prc",e.prc,{exp:-5,scl:I}),F.liveDboRoot.partDepl(a.id)}else if("sls"===b){var f=c(a);if(null===f)return;if(!0!==d(a,f))return;w(f),F.liveDboRoot.newSales({id:f.name,typ:a.typ,prc:a.prc})}}function t(a){var b=null;return V.ptgs.forEach(function(c){null===b&&c.id===a&&(b=c)}),b}function u(a,b){var c=null;return V.ptgs.forEach(function(d){null===c&&d.type===a&&d.nm===b&&(c=d)}),c}function v(){var a={};return a.ver=M,a.ptgs=[],a}function w(a){function b(a){var b=new d({plcmID:G.locus,partID:a.partID,opdomID:G.opdomId}),c={ver:a.ver,data:{ts:Date.now(),partNews:a.partNews}};f(),b.setRD(c)}function c(a){var b=Date.now(),c=Math.random().toString(16).substr(2),d=Math.round((b-G.startTime)/1e3),f={status:"error",msg:"",partNewsObj:{flwrdata:{tms:b,rtm:d,idx:ea,unid:c},exdata:a.exdata,group:G.testGroup,versionTag:e.bootParams.versionTag,filterTag:e.bootParams.filterTag}},g=f.partNewsObj;return g.rev=a.cumRev,g.vidcnt=a.vidcnt,f.status="ok",f}f();var g=c(a)
;if("ok"!==g.status)return void n("","_s90 proxy_command_not_written");var h=g.partNewsObj;f(),b({ver:K,partID:a.name,partNews:h}),ea++}function x(){function a(a){function b(a){function b(a){function b(a){return{ct:Date.now(),nm:a.name,id:a.id,type:a.type,ss:[],ndt:!1}}var c=u(a.type,a.name);if(null!==c)return n("","_s20 duplicate_target"),n("/_s20 duplicate_target",a.name,{ard:10,att:{auxValueTarget:c,opts:a}}),f(),null;var c=b(a);return V.ptgs.unshift(c),c}function c(a){return{ct:Date.now(),val:0,sls:[],exdata:a.exdata}}try{var d=b(a);if(null===d)return;var e=c(a);d.ss.unshift(e),d.ndt=!0}catch(a){C(a,"prevSessTrg")}}for(;a.tgt.length>0;){b(a.tgt.pop())}}function b(a){function b(a){function b(a,b){function c(a,b){function c(a){return"win"===a?"w":"bid"===a?"b":"hit"===a?"h":"cnc"===a?"c":(n("","_s20 unknown_mode (ej830JsW)"),f(),null)}var d=c(a.mod);return null===d?null:{rt:Math.round((Date.now()-b)/100)/10,tp:"vid"===a.typ?"v":"d",lg:"bd"===a.log?"b":"w",ac:!0===a.act?1:0,pr:Math.round(100*a.prc),md:d}}function d(a){var b=0;return a.sls.forEach(function(a){if(1===a.ac)if("h"===a.md||"w"===a.md)b+=a.pr;else{if("c"!==a.md)return;(b-=a.pr)<0&&(b=0)}}),b}var e=t(a);if(null===e){n("","_s10 unknown_target");var g={act:b.act,mod:b.mod,log:b.log,prc:b.prc,typ:b.typ};return n("/_s10 unknwn_target/"+b.typ+"/"+b.log+"/"+b.act,b.mod,{ard:10,att:g}),void f()}var h=e.ss[0],i=c(b,h.ct);null!==i&&(h.sls.unshift(i),h.val=d(h))}try{a.ids.forEach(function(c){b(c,a)})}catch(a){C(a,"prevSessSls")}}for(;a.sls.length>0;){b(a.sls.pop())}}f();var c=F.memhub.getItem(Z);if(null!==c)try{a(c),b(c),o("data_avx","yes")}catch(a){o("data_avx","excpt: "+a)}else f(),o("data_avx","no");ca=!0}function y(a){switch(Y){case"INIT":V=v(),X=a,Y="WVR";break;case"WVR":x(),Y="WFLSD";break;case"WFLSD":if(!0!==ca)break;A(V.ptgs),da=!0,f(),Y="PARK"}}function z(a){function b(){f(),F.memhub.removeItem(Z)}function c(){f(),F.memhub.setItem(Z,aa,{folder:"value"})}switch(_){case"INIT":if(!0!==da)break;b(),_="SVLP";break;case"SVLP":if(!0!==ba)break;ba=!1,c(),$=a,_="SVHLDFF";break;case"SVHLDFF":if(a-$<3e3)break;_="SVLP"}}function A(a){function b(a){if(0!==a.ss.length){var b=a.ss[0];h("/"+a.type+"/"+a.nm,b.val,{exp:-5,scl:I})}}function c(a){function b(a,b,c,d){function e(d,e){k(a,h+"/"+d+"/_s10 rev",b,g),k(a,h+"/"+d+"/_s20 cst",c,g),k(a,h+"/"+d+"/_s30 mrg",b-c,g),!0===e&&k(a,h,d,{})}var f,g={exp:-5,scl:I},h="/_s10 money";f=!1===d?"_s10 blind_n":!0===d?"_s20 blind_y":"_s30 blind_und",e(f,!0),e("_s40 total",!1)}function c(a){var b={totRev:0,totCnt:0,avgRev:0},c=0,d=0;return a.sls.forEach(function(a){1===a.ac&&("h"!==a.md&&"w"!==a.md||(c++,d+=a.pr))}),0===c?b:(b.totRev=d,b.totCnt=c,b.avgRev=Math.round(d/c*100)/100,b)}if(0!==a.ss.length){var d=a.ss[0],e=B(d.exdata);if(null!==e){b(a.nm,d.val,e.prc,e.blind);var f=c(d);k(a.nm,"/_s40 sls_cnt",f.totCnt,{scl:"tbrtimes"}),k(a.nm,"/_s42 sls_avg_rev",f.avgRev,{scl:"cycleCount"});var g=Math.round((Date.now()-e.tm)/6e4);k(a.nm,"/_s50 rep_dly",g,{scl:"cycleCount"})}}}a.forEach(function(a){"part"===a.type&&"intrinsic"===a.nm||!0===a.ndt&&(a.ndt=!1,b(a),"part"===a.type&&c(a))})}function B(a){try{return null===a||"NA"===a?null:"string"==typeof a?JSON.parse(a):a}catch(a){}return n("","_s30 exdata_conversion"),null}function C(a,b){var c="ERROR in VALUEMSTR ("+b+"): ";void 0!==a.message?c+=a.message:c+=a,f(),n("",c),void 0!==a.stack&&(c+="\n\n",c+="Exception --\x3e "+a+"\n\n",c+="Stack:\n",c+=a.stack.toString()+"\n\n"),D("exception",c),g("VALUEMSTR",c)}function D(a,b,c){var d=b;H.addStashObject("Specific Object",c),d+="\n\n============= STASHES =============\n\n",d+=H.printStashBuffer(),void 0!==F.mailmaster&&F.mailmaster.send("VALUEMSTR",a,d)}var E=this,F=e.comps,G=(e.cllBks,e.bootParams),H=new c,I="trgValue";b.addSeries(I,{start:0,maxval:2e3,inc:10,exp:!0,mirror:!0});var J=Math.round(999*Math.random());f();var K=200,L=!0,M=60,N=8,O=100;!0===a.dev&&(O=1),F.accbeam.register("valmstr",O);var P=10,Q="valmgr_h",R="valmgr_l";F.trackhub.addDomain(Q,"valmgr",20),F.trackhub.addDomain(R,"valmgr",100);var S="actBuy";F.trackhub.addDomain(S,"actbuy",20);var T="proxy_h",U="proxy_l";F.trackhub.addDomain(T,"proxy",10),F.trackhub.addDomain(U,"proxy",100);var V=null,W={},X=0,Y="INIT",Z=G.locus+"_val",$=0,_="INIT",aa={tgt:[],sls:[]},ba=!1,ca=!1,da=!1,ea=0;o("data_avx","inst"),F.parcels.subscribe("liveacc",function(a){switch(a.evt){case"regPrxTrg":q(a.data);break;case"regSale":r(a.data)}}),E.tick=function(a){try{y(a),z(a)}catch(a){C(a,"tick")}},p(),F.heart.subscribe(E,100,"valuemstr",!1)}}(config,antools,textools,pcm_client),xfrmint=function(){return function(a){function b(){window.removeEventListener("message",c),window.removeEventListener("unload",b),f()}function c(a){"adf"===p.ctxId?j(a):i(a)}function d(a,b,c){var d="/adfrmx/"+p.hostPlcmId+a;o.trackhub.sendEvent("performance",d,b,c)}function e(a){"sys"===p.ctxId&&r.forEach(function(b){!1===b.docked&&!1===b.timeout&&a-b.lnchtm>n&&(d("/_s10 dock_pf/"+b.origin+"/"+b.classID,"_s30 timeout"),d("/_s10 dock_pf","_s30 timeout"),b.timeout=!0)})}function f(){s=!1,r.forEach(function(a){a.contElem.removeChild(a.adFrameElm)})}function g(a){function b(a){var b=a;return b=b.replace(/\&/g,"%26"),b=b.replace(/\%/g,"%25"),b=b.replace(/\?/g,"%3F")}var c=a.hostWnd.document.createElement("iframe"),e=c.style;e.left="0px",e.top="0px",e.width=a.width+"px",e.minWidth=a.width+"px",e.maxWidth=a.width+"px",e.height=a.height+"px",e.minHeight=a.height+"px",e.maxHeight=a.height+"px",e.marginLeft="0px",e.marginRight="0px",e.marginTop="0px",e.marginBottom="0px",e.display="inline-block",e.overflow="hidden",e.border="0px",e.position="relative",e.float="left",a.domBoxElm.insertBefore(c,a.domBoxElm.firstChild);var f="",g=p.env,h=p.versionFolder;"dev"!==p.env?f+="https://mkt.forebase.ch/plugin/versions/"+p.versionFolder+"/adframe.htm":!0!==q?f+="http://localhost:3001/versions/versionfolder/adframe.htm":(g="prd",h=p.versionTag,f="https://mkt.forebase.com/plugin/versions",void 0!==m&&m.length>0?f+="/"+m:f+="/"+h,f+="/adframe.htm");var i=JSON.parse(JSON.stringify(a.adframeParams));i.origin=a.origin;var j=Math.round(999999*Math.random());r.push({height:a.height,adfMsgClbk:a.adfMsgClbk,lnchtm:Date.now(),origin:i.origin,classID:i.classID,docked:!1,timeout:!1,adFrameId:j,adFrameElm:c,contElem:a.domBoxElm});var k={adFrameId:j,adFrameTm:Date.now(),unitCodes:a.unitCodes,stageParams:i,ntvfrmts:a.ntvfrmts,lwparams:{lw_enabled:a.stageAttributes.lw_enabled,lw_reducer:a.stageAttributes.lw_reducer,lw_sort:a.stageAttributes.lw_sort,lw_maxitem:a.stageAttributes.lw_maxitem,lw_ogtype:a.stageAttributes.lw_ogtype,lw_chan_rx:a.stageAttributes.lw_chan_rx,lw_chan_tx:a.stageAttributes.lw_chan_tx},hostParams:{env:g,adfmidx:i.adfIdx,versionFolder:h,publisher:p.publisher,plcmId:p.placementId,clientID:p.clientID,testGroup:p.testGroup,isNewUser:p.isNewUser,testCase:p.testCase,bstfct:p.bstfct,opdomId:p.opdomId,ldmd:p.ldmd,spred:p.spred,imprID:p.imprID,screenWidth:p.screenWidth,screenHeight:p.screenHeight,hostPageUrl:p.hostPageUrl,hostDomain:p.hostDomain,hostPageTitle:p.hostPageTitle,versionTag:p.versionTag,filterTag:p.filterTag,startTime:p.startTime,debugVars:p.debugVars,qsParams:p.qsParams}};return f+="#afdata="+b(JSON.stringify(k)),c.src=f,d("/_s10 dock_pf/"+i.origin+"/"+i.classID,"_s10 launch"),d("/_s10 dock_pf","_s10 launch"),j}function h(a){var b=null;return r.forEach(function(c){null===b&&c.adFrameId===a&&(b=c)}),b}function i(a){function b(a,b,c){var d={type:"to_adfrm",pyld:{cmd:b,data:c}};a.postMessage(JSON.stringify(d),"*")}try{var c=JSON.parse(a.data);if("from_adfrm"!==c.type)return;var e=c.adfid,f=c.pyld.cmd,g=c.pyld.data;switch(f){case"dock":var i=h(e);if(null===i){d("/_s10 dock_pf/"+g.origin+"/"+g.classID,"_s40 dock error"),d("/_s10 dock_pf","_s40 dock error");break}i.docked=!0,d("/_s10 dock_pf/"+g.origin+"/"+g.classID,"_s20 docked"),d("/_s10 dock_pf","_s20 docked"),d("/_s20 dock_tm",Date.now()-g.adFrameTm,{scl:"shorttimes"}),b(a.source,"dock",{});break;case"getcns":var j=o.nodemanager.getCMPData();b(a.source,"cnsdata",{cnsdat:j});break;default:var i=h(e);if(null===i)break;void 0!==i.adfMsgClbk&&i.adfMsgClbk(f,g)}}catch(a){}}function j(a){try{var b=JSON.parse(a.data);if("to_adfrm"!==b.type)return;var c=b.pyld.cmd,d=b.pyld.data;switch(c){case"dock":break;case"cnsdata":o.nodemanager.hostCMPData(d.cnsdat)}}catch(a){}}function k(a,b){var c={type:"from_adfrm",adfid:p.adfrm_vars.adFrameId,pyld:{cmd:a,data:b}};window.top.postMessage(JSON.stringify(c),"*")}var l=this,m="",n=15e3,o=a.comps,p=(a.cllBks,a.bootParams),q="1"===a.bootParams.qsParams.ext,r=[],s=!0;window.addEventListener("message",c),window.addEventListener("unload",b),l.ladfm=function(a){if("sys"!==p.ctxId)throw{message:"adframe launched from inside frame"};return g(a)},l.smth=function(a,b){if("adf"!==p.ctxId)throw{message:"host sending msg to host"};k(a,b)},l.sdm=function(){"adf"===p.ctxId&&k("dock",{adFrameTm:p.adfrm_vars.adFrameTm,classID:p.adfrm_vars.stageParams.classID,origin:p.adfrm_vars.stageParams.origin})},l.tick=function(a){!0===s&&e(a)},o.heart.subscribe(l,100,"xfrmint",!0),l.tick(Date.now())}}(),ajx_caller=function(a){return function(a,b,c){function d(){if(!window.XMLHttpRequest)return null;var a=new window.XMLHttpRequest;return void 0===a.responseType?null:(a.onreadystatechange=function(){a.readyState===a.UNSENT||a.readyState===a.READYSTATE_UNINITIALIZED?n.initStatus=a.status:a.readyState===a.OPENED||a.readyState===a.READYSTATE_LOADING?n.openStatus=a.status:a.readyState===a.HEADERS_RECEIVED||a.readyState===a.READYSTATE_LOADED?(n.hdrRcvdStatus=a.status,void 0!==a.getAllResponseHeaders&&(n.respHdrs=a.getAllResponseHeaders()),n.respHdrs=n.respHdrs.replace(/\r\n/g," | ")):a.readyState!==a.DONE&&a.readyState!==a.READYSTATE_COMPLETE||(n.doneStatus=a.status,a.status>=200&&a.status<300||304===a.status?g(""):h("from_readyState: "+a.status))},a)}function e(){if(!window.XDomainRequest)return null;var a=new window.XDomainRequest;return a.onload=g,a.onerror=h,a.ontimeout=i,a.onprogress=j,a}function f(){if(!window.ActiveXObject)return null;var a=new ActiveXObject("Microsoft.XMLHTTP");return a.onload=g,a.onerror=h,a.ontimeout=i,a.onprogress=j,a}function g(b){void 0!==a.onSucc&&a.onSucc(p,b,n)}function h(b){void 0!==a.onFail&&a.onFail(p,b,n)}function i(b){void 0!==a.onFail&&a.onFail(p,b,n)}function j(b){void 0!==a.onProgress&&a.onProgress(p,b,n)}function k(a,b){return"string"==typeof b&&b.length>=0?a+"?"+b:a}var l=b,m=c,n={initStatus:"---",openStatus:"---",hdrRcvdStatus:"---",doneStatus:"---",respHdrs:"---"},o="XHR",p=d();if(null===p&&(o="XDR",p=e()),null===p&&(o="AXO",p=f()),null===p)throw o="NA","cannot_create_xhr_obj";this.getAjxObjType=function(){return o};var q={};void 0!==a.options&&(q=a.options);var r=a.url;if("GET"===a.method&&void 0!==a.data&&(r=k(a.url,a.data)),p.open(a.method,r),p.timeout=3e3,"AXO"!==o){var s=!0;void 0!==q.withCredentials&&!0!==q.withCredentials&&(s=!1),p.withCredentials=s,void 0!==q.customHeaders&&q.customHeaders.forEach(function(a,b){p.setRequestHeader(b,a)}),void 0!==q.preflight&&!0===q.preflight&&p.setRequestHeader("X-Requested-With","XMLHttpRequest");var t="text/plain";void 0!==q.contentType&&(t=q.contentType),p.setRequestHeader("Content-Type",t)}"POST"===a.method&&void 0!==a.data?p.send(a.data):p.send();var u={method:a.method,effUrl:r,data:a.data,options:q,effContentType:t};l("srvCall_Actual",u),m("srvCall_Actual: "+JSON.stringify(u))}}(),ajx_hub=function(a){return function(a,b,c){}}(),lw_artmgr=function(a,b,c){return function(a,b){function d(a){r.logger.writex({msg:a,prefix:"lw_artmgr",inst:B})}function e(a){switch(D){case"INIT":f(),i(t.hostPageUrl),j(t.hostPageUrl),G=!0,E=0,D="SLP";break;case"SLP":if(a-E<z)break;!1!==F&&(g(),F=!1),E=a}}function f(){var a=r.memhub.getItem(h());try{if(null===a)throw{msg:"no_exposure_data"};if(a.ver!==v)throw{msg:"incomp_exposure_file_version"};if(Date.now()-a.ts>y)throw{msg:"exposure_data_too_old"};if("object"!==_typeof2(a.expdata)||null===a.expdata)throw{msg:"invalid_exposure_data"};C=a.expdata}catch(a){}}function g(){C.sort(function(a,b){return!0===a.navg&&!0!==b.navg?-1:!0!==a.navg&&!0===b.navg?1:a.impt>b.impt?-1:a.impt<b.impt?1:0});var a=h(),b={ts:Date.now(),ver:v,expdata:C.slice(0,A)},c={folder:x,inclear:w,maxage:u};r.memhub.setItem(a,b,c),"sys"===t.ctxId&&r.baseBridge.setItem(a,b,c)}function h(){return b+"_lwc_expd"}function i(a){k(a).navg=!0,F=!0}function j(a){k(a).impt=Math.round(Date.now()/1e3),F=!0}function k(a){var b=n(a),c=l(b);return null!==c?c:m(b)}function l(a){var b=null;return C.forEach(function(c){null===b&&c.key===a&&(b=c)}),b}function m(a){var b={key:a,navg:!1,impt:0};return C.push(b),b}function n(a){var b=a.toLowerCase();return b=b.replace(/https:\/\//,""),b=b.replace(/http:\/\//,""),b=b.replace(/.*?\//,""),b=b.replace(/.html/,""),b=b.replace(/.htm/,""),b=b.replace(/[^0-9a-z]/g,"_"),b=b.replace(/\_+/g,"_"),b=b.substring(0,80)}function o(a,b,d){function e(a){return a.sort(function(a,b){return a.total>b.total?-1:a.total<b.total?1:0}),a.forEach(function(a,b){a.rankIdx=b+1}),a}function f(a,b,d){function e(a,b){a.sort(function(a,b){return!0!==a.intArtInfo.navg&&!0===b.intArtInfo.navg?-1:!0===a.intArtInfo.navg&&!0!==b.intArtInfo.navg?1:0});var c=[];return a.forEach(function(a,d){d>=b&&!1!==a.intArtInfo.navg||c.push(a)}),c}function f(a){var b=[];return a.forEach(function(a,c){0!==a.extArtInfo.corrIdx&&b.push(a)}),b}function g(a,b,c,d){function e(c){var d;return!0===c?void 0!==(d=a.shift())?d:(d=b.shift(),void 0!==d?d:null):void 0!==(d=b.shift())?d:(d=a.shift(),void 0!==d?d:null)}function f(a,b){var c=!1;return a.forEach(function(a){a.intArtInfo.key===b.intArtInfo.key&&(c=!0)}),!1===c&&(a.push(b),!0)}var g=40;void 0!==d&&(g=d);for(var h,i=[],j=0,k=!0,l=100;l>0&&(l--,!(i.length>=g))&&(h=e(k));)!0===f(i,h)&&++j>=c&&(j=0,k=!k);return i}var h=16,i=3,j=p(a),l=[];j.forEach(function(a){var b=k(a.linkUrl),c={extArtInfo:a,intArtInfo:b};l.push(c)});var m=e(l,h),n=m,o=JSON.parse(JSON.stringify(m));if(n.sort(function(a,b){return a.intArtInfo.impt<b.intArtInfo.impt?-1:a.intArtInfo.impt>b.intArtInfo.impt?1:a.extArtInfo.rankIdx<b.extArtInfo.rankIdx?-1:a.extArtInfo.rankIdx>b.extArtInfo.rankIdx?1:0}),o.sort(function(a,b){return a.extArtInfo.corrIdx>b.extArtInfo.corrIdx?-1:a.extArtInfo.corrIdx<b.extArtInfo.corrIdx?1:0}),o=f(o),"rank"===b)var q=g(n,o,6,d);else if("corr"===b)var q=g(o,n,6,d);else var q=g(n,o,1,d);if(0!==i){q=(new c).chunkShuffle(q,i)}var r=[];return q.forEach(function(a){r.push(a.extArtInfo)}),r}var g={status:"error",artArray:[],msg:""},h=JSON.parse(JSON.stringify(a)),i=e(h);try{return g.artArray=f(i,b,d),g.status="ok",g}catch(a){return g.artArray=i,g.status="error",g.msg="unable_to_sort_articles",g}}function p(a){function b(a){var b=[];return a.forEach(function(a,c){a.keywds=d(a.titleStr,a.linkUrl),b.push(a)}),b}function c(a,b){var c=1,d=5;if(0===a.length)return 0;if(0===b.length)return 0;var e=0;return a.forEach(function(d,f){b.indexOf(d)>=0&&(e+=Math.exp(-f/a.length*c))}),Math.round(e*d*10)/10}function d(a,b){function c(a,b){function c(a){return a===a.toUpperCase()}var d=["che","non","per","con","come","anche","perche","lei","lui","senza","bene","cui","chi","gia","dopo","uno","noi","dove","qui","allora","tra","ora","fra","prima","forse","sotto","voi","fino","oggi","quasi","pure","egli","mentre","contro","invece","esso","pero","subito","verso","cio","ecco","loro","essa","fuori","meno","adesso","niente","cioe","male","nulla","quindi","appena","insieme","dunque","dentro","durante","almeno","secondo","anzi","oramai","oltre","intorno","sopra","dietro","davanti","ieri","qua","soltanto","infatti","qualcosa","spesso","accordo","davvero","qualcuno","avanti","assai","presto","domani","circa","gi","soprattutto","nemmeno","grazie","tuttavia","appunto","neppure","veramente","tardi","insomma","presso","intanto","lungo","neanche","piuttosto","stasera","percio","naturalmente","accanto","eppure","eccetera","finalmente","infine","poiche","comunque","dinanzi","abbastanza","peccato","certamente","coloro","attorno","magari","oppure","inoltre","indietro","addosso","addirittura","finche","perfino","affatto","stamattina","chissa","sino","ognuno","entro","video","immagini","foto","ecco","cosa"],e=[];return a.forEach(function(a){if(!0!==b||!0===c(a.substring(0,1))){var f=a.toLowerCase();f=f.normalize("NFD").replace(/[\u0300-\u036f]/g,""),f=f.replace(/[^a-z0-9]/gi,""),f.length<3||d.indexOf(f)>=0||e.push(f)}}),e}function d(a){if("string"!=typeof a)return[];var b=a.split("/"),c=[];b.forEach(function(a){if("string"==typeof a){var b=a.split("-");c.push(b)}});var d=[];return c.forEach(function(a){void 0!==a.length&&(a.length<2||d.push(a))}),d.sort(function(a,b){return b.length-a.length}),d.length>0?d[0]:[]}function e(a,b){function c(a,b){var c=!1;return a.forEach(function(a){a===b&&(c=!0)}),!1===c&&(a.push(b),!0)}var d=JSON.parse(JSON.stringify(a));return b.forEach(function(a){c(d,a)}),d}var f=d(b);f=c(f,!1),f=f.slice(0,6);var g=decodeURIComponent(a).split(" ");return g=c(g,!0),e(f,g)}b(a);var e=d(t.hostPageTitle,t.hostPageUrl);if("dev"===t.env)var e=["elsa","fornero","dimartedi","quota100","errore","toglierla","matteo","salvini","matteo"];return a.forEach(function(a,b){a.corrIdx=c(e,a.keywds)}),a}var q=this,r=a.comps,s=a.cllBks,t=a.bootParams,u=(s.addLogLine,5184e3),v=110,w=!1,x="lweb",y=1296e6,z=5e3,A=30,B=Math.round(999*Math.random());d();var C=[],D="INIT",E=0,F=!1,G=!1;q.procData=function(a,b,c){return o(a,b,c)},q.isReady=function(){return G},q.tick=function(a){e(a)},q.notfImp=function(a){j(a)}}}(0,0,textools),lw_root=function(a,b,c,d,e){return function(f){function g(a){E.logger.writex({msg:a,prefix:"lw_root",inst:U})}function h(){B(),window.removeEventListener("unload",h)}function i(){if(!0!==oa)return null;var a=ha[ia];return ia++,ia>=ha.length&&(ia=0),a}function j(a){if(null===a)return null;var b=a.navdata;return void 0===b?null:!(Date.now()-b.ts>6e4)&&b.url===G.hostPageUrl}function k(a){function b(){var a=null;return qa.forEach(function(b){null===a&&!0!==b.dn&&(a=b)}),a}function c(a){return!0===a.attributes.lw_enabled}function d(a){if("dev"===G.env)return{effRate:100,reducer:1};if("unspecified"===a.attributes.lw_reducer)return{effRate:100,reducer:1};var b=parseInt(a.attributes.lw_reducer);return"number"!=typeof b?{effRate:0,reducer:0}:(b>1e4&&(b=1e4),b<1&&(b=1),{effRate:Math.round(100/b),reducer:b})}function e(a,b){return"string"==typeof b["og:title"]&&""!==b["og:title"]&&("string"==typeof b["og:url"]&&""!==b["og:url"]&&("string"==typeof b["og:image"]&&""!==b["og:image"]&&("*"===a.attributes.lw_ogtype||a.attributes.lw_ogtype.toLowerCase()===b["og:type"].toLowerCase())))}switch(da){case"INIT":if(null===(_=E.stageManager.getStgCard()))break;if(!0!==c(_)){da="PARK";break}if(x(),aa=_.attributes.lw_chan_rx,fa=!0,pa=d(_),!0!==Z.whirliGig(pa.effRate)){da="PARK";break}if(!0!==e(_,ba)){da="PARK";break}if(m("view",_,ba,pa.reducer),!0===G.visitData.autoRfsh){da="PARK";break}ea=a,da="TLP";break;case"TLP":if(a-ea<500)break;ea=a;var f=b();if(null===f){da="PARK";break}var g=Math.round((a-G.startTime)/1e3);if("number"!=typeof g||g>T){da="PARK";break}if(g<f.tm)break;f.dn=!0;var h=g-ra;if(ra=g,h<1)break;m("time",_,ba,pa.reducer,h)}}function l(){function a(a){return"string"==typeof a&&""!==a}for(var b,c,d=["og:type","og:title","og:image","og:url","og:image:width","og:image:height"],e=document.getElementsByTagName("meta"),f={},g=0;g<e.length;g++)b=e[g].getAttribute("property"),c=e[g].getAttribute("content"),!0===a(b)&&!0===a(c)&&(b=b.toLowerCase(),d.indexOf(b)<0||(f[b]=c));return f}function m(a,b,d,e,f){function h(a,b,c,d,e){if("view"===a)return g(),{ver:100,type:a,reduc:e,ch:b,refch:c,visit:G.visitData.newVisit,plcID:G.placementId,title:encodeURIComponent(d["og:title"]),url:d["og:url"],img:d["og:image"]};if("time"===a)return g(),{ver:100,type:a,reduc:e,time:f,ch:b,url:d["og:url"]};throw{message:"unkonw_ping_type"}}function i(a){function b(a,b){var d={method:"POST",data:b,url:a,onSucc:function(a){},onFail:function(){},options:{timeout:1e4,withCredentials:!1}};new c(d)}var d=encodeURIComponent(JSON.stringify(a));b(Y,d)}function j(a){var b=a.attributes.lw_chan_tx;return"unspecified"===b?b=aa:b.indexOf(aa)<0&&(b+="|"+aa),b.split("|")}function k(a){return!0!==va?"":aa}i(h(a,j(b),k(b),d,e))}function n(a){switch(ma){case"INIT":if(!0!==fa)break;if(ca=o(f,aa),!0===M){v("","_s12 forced"),ma="LAC";break}ja=null,r(q()),na=a,ma="WCS";case"WCS":if(null===ja)break;if(!0===ja){v("","_s20 from_cache"),u("ok",la,"from_cache"),ma="SAR";break}ma="LAC";break;case"LAC":ka=null,t(p()),na=a,ma="WFR";case"WFR":if(a-na>O){v("","_s34 from_file_to"),u("error",null,"timeout"),ma="PARK";break}if(null===ka)break;if(!0!==ka){v("","_s36 from_file_err"),u("error",null,"call_error"),ma="PARK";break}v("","_s30 from_file"),v("/_s10 sizeK",Math.round(la.length/100)/10,{scl:$}),u("ok",la,"from_file"),s(la,q()),ma="SAR";break;case"SAR":if(!0!==ca.isReady())break;var b="mixed";"unspecified"!==_.attributes.lw_sort&&(b=_.attributes.lw_sort);var c=30;"unspecified"!==_.attributes.lw_maxitem&&(c=parseInt(_.attributes.lw_maxitem));var d=ca.procData(ga,b,c);"ok"!==d.status&&v("","_s39 unable_to_sort_arts"),ha=d.artArray,oa=!0,ma="PARK"}}function o(a,b){return new e(a,b)}function p(){var a="http://";return!0===G.secProt&&(a="https://"),G.env,a+=K+"/liveweb/cont/"+aa+"."+L,!0===M&&(a+="?cb="+Math.round(999999*Math.random())),a}function q(){return aa+"_lwc_cont"}function r(a){var b=E.memhub.getItem(a);try{if(null===b)throw{msg:"no_data"};if(b.ver!==I)throw{msg:"incomp_cache_version"};if(Date.now()-b.ts>1e3*J)throw{msg:"cache_data_too_old"};if(null===(la=b.filedata))throw{msg:"invalid_data"};ja=!0}catch(a){ja=!1}}function s(a,b){if(null===a)return!1;var c={ts:Date.now(),ver:I,filedata:a},d={folder:Q,inclear:N,maxage:H};return E.memhub.setItem(b,c,d),"sys"===G.ctxId&&E.baseBridge.setItem(b,c,d),!0}function t(a){function b(a){null!==a&&"string"==typeof a&&""!==a&&(la=a,ka=!0)}function d(){ka=!1}function e(a,b,d){var e={method:"GET",url:a,onSucc:function(a){b(""+a.responseText)},onFail:function(){d("")},options:{timeout:1e4,withCredentials:!1}};new c(e)}e(a,b,d)}function u(a,b,c){if("ok"===a)try{var d=JSON.parse(b);ga=d.artArr}catch(a){}}function v(a,b,c){sa.push({domain:"lweb_low",path:"/_s05 mgr"+a,data:b,evOpts:c})}function w(a,b,c,d){sa.push({domain:a,path:b,data:c,evOpts:d})}function x(){null!==ua&&(ua.ecpings.forEach(function(a){y(G.placementId,a.domain,a.path,a.data,a.evOpts),y("*AllPlacements*",a.domain,a.path,a.data,a.evOpts)}),z())}function y(a,b,c,d,e){var f=aa+"/"+a+c;E.trackhub.sendEvent(b,f,d,e)}function z(){E.memhub.removeItem(C())}function A(){var a=E.memhub.getItem(C());try{if(null===a)throw{msg:"no_report_data"};if(a.ver!==R)throw{msg:"incomp_report_file_version"};if(Date.now()-a.ts>S)throw{msg:"report_data_too_old"};if("object"!==_typeof2(a.repdata)||null===a.repdata)throw{msg:"invalid_rep_data"};return a.repdata}catch(a){}return null}function B(){if(null!==aa){var a={ts:Date.now(),ver:R,repdata:{ecpings:sa,navdata:ta}},b={folder:P,inclear:N,maxage:H};E.memhub.setItem(C(),a,b)}}function C(){return aa+"_defrep_"}var D=this,E=f.comps,F=f.cllBks,G=f.bootParams,H=(F.addLogLine,5184e3),I=100,J=600,K=a.resourceLocations.dataurl,L="json",M=!1,N=!1,O=1e4,P="lweb",Q="lweb",R=100,S=864e5,T=180,U=Math.round(999*Math.random());g();var V="http://";!0===G.secProt&&(V="https://");var W="0";void 0!==G.serverID&&(W=G.serverID);var X=a.resourceLocations.lwServerBase,Y=V+X.replace("${number}",W)+"/rpt",Z=new d,$="trgFileSize";!0!==b.isSeries($)&&b.addSeries($,{start:0,maxval:100,inc:10,exp:!0});var _=null,aa=null,ba=l(),ca=null,da="INIT",ea=0,fa=null,ga=null,ha=null,ia=0,ja=null,ka=null,la=null,ma="INIT",na=0,oa=null,pa=null,qa=[{tm:5,dn:!1},{tm:10,dn:!1},{tm:15,dn:!1},{tm:23,dn:!1},{tm:34,dn:!1},{tm:52,dn:!1},{tm:77,dn:!1},{tm:116,dn:!1},{tm:142,dn:!1},{tm:180,dn:!1},{tm:240,dn:!1}],ra=0,sa=[],ta={ts:0,url:null},ua=A(),va=j(ua);D.isReady=function(){return oa},D.lwadev=function(a,b,c){switch(a){case"imp":w("lweb_low","/_s20 actn","_s10 view"),w("lweb_low","/_s30 view_shr",b),null!==ca&&ca.notfImp(c);break;case"click":w("lweb_hi","/_s20 actn","_s20 click"),w("lweb_hi","/_s40 click_shr",b),ta.ts=Date.now(),ta.url=c;break;case"error":w("lweb_hi","/_s20 actn","_s30 error"),w("lweb_hi","/_s50 error_shr",b)}},D.gac=function(){return i()},D.tick=function(a){k(a),n(a),null!==ca&&ca.tick(a)},E.heart.subscribe(D,100,"ag_lwebmgr",0,0),v("","_s10 inst"),w("lweb_low","/_s20 actn","_s00 inst"),null!==va&&(w("lweb_low","/_s22 int_nav","_s10 inst"),!0===va&&w("lweb_med","/_s22 int_nav","_s20 nav")),window.addEventListener("unload",h)}}(config,antools,ajaxcall,textools,lw_artmgr),ldbo_driver=function(){return function(a){function b(b){"dev"===a.env&&console.log(b)}function c(){var a={};return m.forEach(function(b,c){a[b]={idx:c,val:null,flg:!1}}),a}function d(a,b){var c="0";return void 0!==b&&(c=b),"//"+"ldbosrv.${number}.aws.forebase.com".replace("${number}",c)+"/rpt"}function e(){var a=f();b("apapa sending DBO instance ping for: "+o+" ("+JSON.stringify(a)+")"),g(a)}function f(){function a(){for(var a=[],b=0;b<l;b++)a.push(null);for(var c in t){var d=t[c];!0===d.flg&&(a[d.idx]=d.val,d.flg=!1)}return a}return{ver:k,type:"cmd_add",reduc:r,values:a(),plcID:n,tgtId:o}}function g(a){var b=encodeURIComponent(JSON.stringify(a));p(q,b,function(){},{withCredentials:!1,contentType:"text/plain"})}function h(a){return a}function i(a){var b=1e7;if(a>=100)return!0;if(a<=0)return!1;var c=Math.round(Math.random()*b),d=Math.round(b*a/100),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return!(f>=e)&&!(f<c)}var j=this,k=100,l=24,m=["reqs","bids","bidprc","load","rev","cst","cstslt","pmrg","tmcont","fstcnt","scncnt","tmvid","fstvid","scnvid","depl"],n=a.plcmId,o=a.tgtId,p=a.makeHttpCall,q=d(a.dbotgt,a.serverID),r=h(a.reducer);"dev"===a.env&&(r=1);var s=i(100/r),t=c(),u=!1;j.setval=function(a,c){if(void 0===t[a])throw{message:"unknown_key"};t[a].val=c,t[a].flg=!0,u=!0,b("apapa setting value for: "+o+" - key:"+a+" - val:"+c)},j.send=function(){!0===s&&!0===u&&(u=!1,e())},j.getValueOffset=function(a){return m.indexOf(a)}}}(),ldbo_root=function(a,b,c){return function(a){function b(a){i.logger.writex({msg:a,prefix:"ldbo_root",inst:l})}function d(a){function b(a,b,c,d){function e(a){void 0!==c&&c(a)}function f(){void 0!==c&&c(null)}function g(){void 0!==c&&c(null)}function h(a,b){return!0===b?"https:"+a:"http:"+a}var i=null;if(window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP")),null!==i){if(i.open("POST",h(a,!0)),i.timeout=1e4,i.onload=e,i.onerror=f,i.ontimeout=g,void 0!==d){var j=!0;void 0!==d.withCredentials&&!0!==d.withCredentials&&(j=!1),i.withCredentials=j,void 0!==d.customHeaders&&d.customHeaders.forEach(function(a,b){i.setRequestHeader(b,a)}),void 0!==d.preflight&&!0===d.preflight&&i.setRequestHeader("X-Requested-With","XMLHttpRequest");var k="text/plain";void 0!==d.contentType&&(k=d.contentType),i.setRequestHeader("Content-Type",k)}i.send(b)}}var d=g(a.exdata);if(null!==d){var e=d.dbod+"_"+d.algo+"_"+d.pslot,f=new c({env:k.env,plcmId:k.placementId,tgtId:e,reducer:1,serverID:0,makeHttpCall:b}),h={type:"part",name:a.partId,exdata:d,landrv:f,cumrev:0,pmrg:!1,fstcnt:!1,scncnt:!1,fstvid:!1,scnvid:!1};h.cst=null,"object"===_typeof2(d)&&null!==d&&(h.cst=d.prc),n[a.partId]=h,f.setval("load",1),f.setval("cst",h.cst),f.setval("rev",0),f.send()}}function e(a){var b=n[a];void 0!==b&&(b.landrv.setval("depl",1),b.landrv.send())}function f(a){function b(a){return Math.round(100*a)}var c=n[a.id];if(void 0!==c){if(!0!==c.fstcnt){c.fstcnt=!0,c.landrv.setval("fstcnt",1);var d=Math.round((Date.now()-k.startTime)/1e3);c.landrv.setval("tmcont",d)}else!0!==c.scncnt&&(c.scncnt=!0,c.landrv.setval("scncnt",1));if("vid"===a.typ)if(!0!==c.fstvid){c.fstvid=!0,c.landrv.setval("fstvid",1);var e=Math.round((Date.now()-k.startTime)/1e3);c.landrv.setval("tmvid",e)}else!0!==c.scnvid&&(c.scnvid=!0,c.landrv.setval("scnvid",1));var f=b(a.prc);c.landrv.setval("rev",f),c.cumrev+=f,!0!==c.pmrg&&"number"==typeof c.cst&&c.cumrev>=c.cst&&(c.landrv.setval("pmrg",1),c.pmrg=!0),c.landrv.send()}}function g(a){try{return null===a||"NA"===a?null:"string"==typeof a?JSON.parse(a):a}catch(a){}return null}var h=this,i=a.comps,j=a.cllBks,k=a.bootParams,l=(a.plcmParams,j.addLogLine,Math.round(999*Math.random()));b();var m=[],n={};h.updatePartitions=function(a){a.forEach(function(a,b){"intrinsic"!==a.partId&&d(a)}),m=a},h.partDepl=function(a){return e(a)},h.newSales=function(a){return f(a)}}}(0,0,ldbo_driver),lacc_driver=function(a){function b(a){j.logger.writex({msg:a,prefix:"lacc_driver",inst:s})}function c(){var a={};return q.forEach(function(b,c){a[b]={idx:c,val:null,flg:!1}}),a}function d(a,b){var c="0";return void 0!==b&&(c=b),"//"+"lanlsrv.${number}.aws.forebase.com".replace("${number}",c)+"/rpt"}function e(){var a=f();b(),g(a)}function f(){function a(){for(var a=[],b=0;b<l;b++)a.push(null);for(var c in t){var d=t[c];!0===d.flg&&(a[d.idx]=d.val,d.flg=!1)}return a}return{ver:k,type:"cmd_add",reduc:p,values:a(),plcID:n,tgtId:o}}function g(a){var b=encodeURIComponent(JSON.stringify(a));h(r,b,function(){},{withCredentials:!1,contentType:"text/plain"})}function h(a,b,c,d){function e(a){void 0!==c&&c(a)}function f(){void 0!==c&&c(null)}function g(){void 0!==c&&c(null)}function h(a,b){return!0===b?"https:"+a:"http:"+a}var i=null;if(window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP")),null!==i){if(i.open("POST",h(a,!0)),i.timeout=1e4,i.onload=e,i.onerror=f,i.ontimeout=g,void 0!==d){var j=!0;void 0!==d.withCredentials&&!0!==d.withCredentials&&(j=!1),i.withCredentials=j,void 0!==d.customHeaders&&d.customHeaders.forEach(function(a,b){i.setRequestHeader(b,a)}),void 0!==d.preflight&&!0===d.preflight&&i.setRequestHeader("X-Requested-With","XMLHttpRequest");var k="text/plain";void 0!==d.contentType&&(k=d.contentType),i.setRequestHeader("Content-Type",k)}i.send(b)}}var i=this,j=a.comps,k=100,l=24,m="inst-sale-rev-dsp-vid-cst-nat-bd-wf-act-psv-fstcnt-scncnt-fstvid-scnvid-xxx-xxx-xxx-xxx-xxx-xxx-xxx-xxx-xxx",n=a.plcmId,o=a.tgtId,p=a.reducer,q=m.split("-"),r=d(a.dbotgt,a.serverID),s=Math.round(999*Math.random());b();var t=c(),u=!1;i.setval=function(a,c){if(void 0===t[a])throw{message:"unknown_key"};t[a].val=c,t[a].flg=!0,u=!0,b()},i.send=function(){!0===u&&(u=!1,e())},i.getValueOffset=function(a){return q.indexOf(a)}},lacc_root=function(a,b){return function(a){function c(a){j.logger.writex({msg:a,prefix:"lacc_root",inst:m})}function d(a){function d(a){var c=new b({comps:j,reducer:p,serverID:l.opdomId,plcmId:l.placementId,tgtId:a}),d={type:"part",name:a,laccdrv:c,cumrev:0,pmrg:!1,fstcnt:!1,scncnt:!1,fstvid:!1,scnvid:!1};d.cst=null,o[a]=d,c.setval("inst",1),c.send()}if("unit"===a.type){if("dontuse"===a.aid)return void c();if("unspecified"===a.aid)return void c();n[a.aid]={},c(),d(a.aid)}}function e(a){function b(a){function b(a){return Math.round(100*a)}if(!(!0===i&&!0!==a.act||"bd"===a.log&&"bid"===a.mod)){var d=o[a.aid];if(void 0===d)return void c();var e=d.laccdrv,f=b(a.prc),g=!1,h=1;"wf"===a.log&&"cnc"===a.mod&&(f=-b(a.prc),g=!0,h=-1),!0===a.act&&e.setval("act",h),!1===a.act&&e.setval("psv",h),"wf"===a.log&&e.setval("wf",h),"bd"===a.log&&e.setval("bd",h),"dsp"===a.typ&&e.setval("dsp",h),"vid"===a.typ&&e.setval("vid",h),"nat"===a.typ&&e.setval("nat",h),"cst"===a.typ&&e.setval("cst",h),!1===g?(!0!==d.fstcnt?(d.fstcnt=!0,e.setval("fstcnt",h)):!0!==d.scncnt&&(d.scncnt=!0,e.setval("scncnt",h)),"vid"===a.typ&&(!0!==d.fstvid?(d.fstvid=!0,e.setval("fstvid",h)):!0!==d.scnvid&&(d.scnvid=!0,e.setval("scnvid",h)))):(!0===d.fstcnt?(d.fstcnt=!1,e.setval("fstcnt",h)):!0===d.scncnt&&(d.scncnt=!1,e.setval("scncnt",h)),"vid"===a.typ&&(!0===d.fstvid?(d.fstvid=!1,e.setval("fstvid",h)):!0===d.scnvid&&(d.scnvid=!1,e.setval("scnvid",h)))),e.setval("rev",f),e.setval("sale",h),d.cumrev+=f,e.send()}}
return"dontuse"===a.aid?void c():"unspecified"===a.aid?void c():(c(),void b(a))}function f(){if("dev"===l.env)return 1;var a=100*h/l.bstfct;return!0!==isNaN(a)?a:h}function g(a){var b=1e7;if(a>=100)return!0;if(a<=0)return!1;var c=Math.round(Math.random()*b),d=Math.round(b*a/100),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return!(f>=e)&&!(f<c)}var h=1e3,i=!0,j=a.comps,k=a.cllBks,l=a.bootParams,m=(a.plcmParams,k.addLogLine,Math.round(999*Math.random()));c();var n={},o={},p=f();!0===g(100/p)&&j.parcels.subscribe("liveacc",function(a){switch(a.evt){case"regPrxTrg":d(a.data);break;case"regSale":e(a.data)}})}}(0,lacc_driver),ildtransp=function(a,b,c){return function(d){function e(a){n.logger.writex({msg:a,prefix:"ildtransp",inst:w})}function f(a,b,c){var d="/dsdfile/"+o.hostPlcmId+a;n.trackhub.sendEvent("performance",d,b,c)}function g(a){switch(D){case"INIT":if(!1===F){f("","_s12 forced"),D="LAC";break}y=null,i(p),E=a,D="WCS";case"WCS":if(null===y)break;if(!0===y){f("","_s20 from_cache"),l("ok",z,"from_cache"),D="PARK";break}D="LAC";case"LAC":A=null,k(G),E=a,D="WFR";case"WFR":if(a-E>v){f("","_s34 from_file_to"),l("error",null,"timeout"),D="PARK";break}if(null===A)break;if(!0!==A){f("","_s36 from_file_err"),l("error",null,"call_error"),D="PARK";break}f("","_s30 from_file"),f("/_s10 sizeK",Math.round(C/100)/10,{scl:x}),l("ok",B,"from_file"),j(B,p),D="PARK";break;case"PARK":n.heart.unsubscribe(m)}}function h(a,b){var c="";return"dev"===o.env?c+="http://localhost:3001/data/placements/dsd/"+o.hostPlcmId+".json":c+="https://mkt.forebase.ch/tagx/data/placements/dsd/"+o.hostPlcmId+".json",!1===b&&(c+="?cb="+Math.round(999999*Math.random())),c}function i(a){var b=r;"dev"===o.env&&(b=1e4),y=!1;var c=n.memhub.getItem(a);try{if(null===c)throw{msg:"no_data"};if(c.ver!==q)throw{msg:"incomp_cache_version"};if(Date.now()-c.ts>b)throw{msg:"cache_data_too_old"};return z=c.data,void(y=!0)}catch(a){}}function j(a,b){if(null===a)return!1;var c={ts:Date.now(),ver:q,data:a},d={folder:t,inclear:u,maxage:s};return n.memhub.setItem(b,c,d),"sys"===o.ctxId&&n.baseBridge.setItem(b,c,d),!0}function k(a){function b(a){try{if(A=!1,null===a)return;if("string"!=typeof a)return;if(""===a)return;C=a.length,B=JSON.parse(a),A=!0}catch(a){A=!1}}function d(){A=!1}function e(a,b,d){var e={method:"GET",url:a,onSucc:function(a){b(""+a.responseText)},onFail:function(){d("")},options:{timeout:v,withCredentials:!1}};new c(e)}e(a,b,d)}function l(a,b,c){e(),"ok"===a?d.callback(a,b,c):d.callback("error",null,c)}var m=this,n=d.comps,o=d.bootParams,p=o.hostPlcmId+"_inlndat",q=100,r=18e5,s=604800,t="stgm",u="dev"===o,v=1e4,w=Math.round(999*Math.random());e();var x="trgFileSize";!0!==b.isSeries(x)&&b.addSeries(x,{start:0,maxval:100,inc:10,exp:!0});var y=null,z=null,A=null,B=null,C=0,D="INIT",E=0,F=!0;!0===a.localcache.disable?(F=!1,e()):!0===o.debugVars.disableLocCache&&(F=!1,e());var G=h(d,F);m.tick=function(a){g(a)},n.heart.subscribe(m,100,"ildtransp",!0),m.tick(Date.now()),f("","_s10 inst")}}(config,antools,ajaxcall),inlinedata=function(a){return function(b){function c(a,b,c){"ok"===a?(j=!0,h=b,i=c):j=!1}var d=this,e=b.comps,f=b.glbFBVar,g=b.bootParams,h=null,i=null,j=null;new a({comps:e,bootParams:g,callback:c}),d.getSDSStatus=function(){return j},d.getStgFileData=function(){try{return f.filedata.stages}catch(a){}return[]},d.getSSFileData=function(){try{if(!0===j)return h.filedata.sourcesets;throw{msg:"no_src_filedata"}}catch(a){}return[]},d.getBroadDataQV=function(){try{return f.broadcasts.quickvars.data}catch(a){}return""},d.getBroadDataCR=function(){try{return f.broadcasts.currencies}catch(a){}return{}},d.getBroadDataDTO=function(){try{if(!0===j)return h.broadcasts.dtoX}catch(a){}return{}}}}(ildtransp),clntdata=function(a){return function(b){function c(a){h.logger.writex({msg:a,prefix:"clntdata",inst:l})}function d(a){switch(n){case"INIT":o=a,n="WFID";case"WFID":if(null===(p=m.read(j)))break;e(p),n="WFVD";case"WFVD":if(null===(q=m.read(k)))break;f(q),h.heart.unsubscribe(g),n="PARK"}}function e(a){i.clientID=a.clientID,i.testGroup=a.groupID,i.isNewUser=a.newUser}function f(a){i.visitData=a}var g=this,h=b.comps,i=b.bootParams,j="device_idnt",k="device_visit",l=Math.round(999*Math.random());c();var m=new a({comps:h}),n="INIT",o=0,p=null,q=null;g.tick=function(a){d(a)},h.heart.subscribe(g,100,"clntdata",!0),g.tick(Date.now())}}(clntfile),mad=function(a,b,c){return function(b){function d(a){A.logger.writex({msg:a,prefix:"stm_mad",inst:F})}function e(){g(H,B.startTime),window.removeEventListener("unload",e)}function f(a,b){if(!0===J)switch(a){case"load":var c={fbxID:b.fbxID,ts:b.ts,ssName:b.ssName,shTagName:b.shTagName,lgTagName:b.ssName+"_"+b.shTagName,log:b.log,active:b.active,vast:b.vast,insbx:b.insbx,ownCode:b.ownCode,unloaded:!1,shots:[]};H[""+b.divID]=c;break;case"unload":var d=H[""+b.divID];if(void 0===d)break;d.unloaded=!0;break;case"shot":var d=H[""+b.divID];if(void 0===d)break;var e={};e.ts=b.ts,e.hook=b.hook,e.head=b.head.replace(d.ownCode,""),e.body=b.body.replace(d.ownCode,""),d.shots.unshift(e)}}function g(a,b){function c(a,b){var c=0,d={};for(var e in a){var f=a[e];b-f.ts>C||(d[e]=f,c++)}return{count:c,data:d}}if("sys"===B.ctxId){var d=Date.now(),e=c(a,d);if(!(e.count<1))try{var f={ver:I,rgNow:d,rdDly:d-b,tagLoadData:e.data};A.memhub.setItem(G,JSON.stringify(f),{folder:"mad"})}catch(a){}}}function h(){var a=Date.now();try{var b=A.memhub.getItem(G);if(null===b)throw"no_prev_data";A.memhub.removeItem(G);var c=JSON.parse(b);if(c.ver!==I)throw"wrong_version";if(a-c.rgNow>864e5)throw"data_is_too_old";return c}catch(a){return null}}function i(a){if("sys"===B.ctxId){var b=Date.now();try{var c={ver:L,rgNow:b,tagLoadDB:a};A.memhub.setItem(K,JSON.stringify(c),{folder:"mad"})}catch(a){}}}function j(){var a=Date.now();try{var b=A.memhub.getItem(K);if(null===b)throw"no_tagload_db";var c=JSON.parse(b);if(c.ver!==L)throw"wrong_version";if(a-c.rgNow>864e5)throw"data_is_too_old";return c.tagLoadDB}catch(a){return[]}}function k(){function a(){try{var a=A.memhub.getItem(N);if(null===a)throw"no_locban_data";var b=JSON.parse(a);if(b.ver!==O)throw"wrong_version";if(void 0===b.locBanDB)throw"wrong_format";return b.locBanDB}catch(a){return{}}}function b(a){var b=Date.now(),c={};for(var d in a){var e=a[d];b-e.ts>Q||(c[d]=e)}return c}return b(a())}function l(a,b){function e(a){function b(a,b,c){A.trackhub.sendEvent(a,b,c)}var d=c.getTimeSlotTen(),e="madevt_m";"bd"===a.log&&(e="madevt_h");var f="_s30 locBanEvent/"+a.ssName+"/${"+a.shTagName+"|*AllTags*}$";b(e,"_s30 locBanEvent/*AllSourceSets*",d),b(e,f,d)}var f=JSON.parse(JSON.stringify(a));for(var g in b){var h=b[g];if(!0!==h.insbx&&0!==h.hintLevel){if(void 0!==f[h.lgTagName]){var i=f[h.lgTagName];if(h.ts<i.ts)continue}f[h.lgTagName]={ts:h.ts},e(h),d()}}return f}function m(a){if("sys"===B.ctxId){Date.now();try{var b={ver:O,locBanDB:a};A.memhub.setItem(N,JSON.stringify(b),{folder:"mad"})}catch(a){}}}function n(a){var b=Date.now(),c="";for(var d in a){var e=a[d];c+="TagName: "+d+" - Time Left: "+Math.round((Q-(b-e.ts))/1e3/60)+" (mins)\n"}return c}function o(a){return void 0!==P[a]}function p(a,b){d();var c=Date.now(),e=0,f="";for(var g in b){var h=b[g];f+="tag: "+g+" - left: "+Math.round((Q-(c-h.ts))/1e3/60)+" (mins)\n",e++,d()}}function q(a,b){for(var c in a){var d=a[c];d.hintLevel<1||b.push(d)}}function r(a){var b=[],c=Date.now();return a.forEach(function(a){c-a.ts>6e5||b.push(a)}),b}function s(a,b){var c=[];return a.forEach(function(a){a.lgTagName!==b&&c.push(a)}),c}function t(a,b,c,d){function e(a,b){var c=[];return a.forEach(function(a){a.lgTagName===b&&c.push(a)}),c}function f(a,b,c,d){for(var e=0,f="\n\n",g="",h=0;h<100;h++)g+="=";for(var i="",h=0;h<100;h++)i+="-";return f+=g+"\n",f+="Suspect Tag:  "+a+"  (Hint-Val: "+c+" - Loads: "+d+")\n",f+=g+"\n\n\n",b.forEach(function(a,b){f+="Load #:"+b+" (in: "+a.fbxID+")\n",f+=i+"\n",f+="\n\n",f+="TBR: "+a.tbr+"\n",f+="HL: "+a.hintLevel,f+="\n";var c=a.shots;c.forEach(function(a,b){f+="\n\nShot #"+(c.length-b)+" - (@ "+y(a.ts)+")",!0===a.hook&&(f+=" - (hook)"),f+="\n\n",f+="\n\n<head>"+a.head+"</head>\n\n",f+="<body>"+a.body+"</body>\n\n"}),f+="\n\n\n",e++}),{count:e,text:f}}var g=e(a,b);if(0!==g.length){var h=f(b,g,c,d);if(0!==h.count){var i=h.text,j=b+" ("+h.count+")";A.mailmaster.send("MAD_SUSP_SOURCE",j,i,null)}}}function u(b,c){function d(b,c){var d=a.mad.wfHintCalcMinTm,e=a.mad.wfHintCalcHalfTm;if("bd"===c&&(d=a.mad.bdHintCalcMinTm,e=a.mad.bdHintCalcHalfTm),b<=d)return Math.round(E);var f=Math.exp(-(b-d)/e);return Math.round(E*f)}var e=JSON.parse(JSON.stringify(b));for(var f in e){var g=e[f];g.tbr=c-g.ts,g.susp=!1,!0!==g.unloaded&&g.tbr<D&&(g.susp=!0),g.hintLevel=0,!0!==g.unloaded&&(g.tbr>=D||(g.hintLevel=d(g.tbr,g.log)))}return x(e)}function v(a){function b(a){for(var b=0,c="",d=0;d<120;d++)c+="-";var e="\n\n";for(var f in a){var g=a[f];e+=c+"\n",e+="Suspect Tag Load:  "+g.lgTagName+" - (in: "+g.fbxID+")\n",e+=c+"\n",e+="\n";var h=g.shots;h.forEach(function(a,b){e+="\n\nShot #"+(h.length-b)+" - (@ "+y(a.ts)+")",!0===a.hook&&(e+=" - (hook)"),e+="\n\n",e+="\n\n<head>"+a.head+"</head>\n\n",e+="<body>"+a.body+"</body>\n\n"}),e+="\n\n\n",b++}return{count:b,text:e}}var c=x(a),d=b(c),e=d.text,f="All Tag Loads  ("+d.count+")";A.mailmaster.send("MAD_ALL_TAGS",f,e,null)}function w(a){function b(a){var b={group:"mad_tag",event:"hint",ver:100,data:{tagnam:a.lgTagName,level:a.hintLevel}};"bd"===a.log?A.accbeam.fire(S,b):A.accbeam.fire(R,b)}function c(a){function b(a,b,c,d){A.trackhub.sendEvent(a,b,c,d)}var c="madevt_m";"bd"===a.log&&(c="madevt_h");var d="_s20 tagHintLevels/",e="_s20 tagHintLevels/";!0===a.insbx?(d+="sandbox/",e+="sandbox/"):(d+="direct/",e+="direct/"),d+="*AllSourceSets*",e+=a.ssName+"/${"+a.shTagName+"|*AllTags*}$";var f="Level: "+a.hintLevel;b(c,d,f),b(c,e,f)}function d(a){function b(a,b,c){A.trackhub.sendEvent(a,b,c)}var c=o(a.lgTagName),d="madevt_m";"bd"===a.log&&(d="madevt_h");var e="_s40 locBanStatus/"+a.ssName+"/${"+a.shTagName+"|*AllTags*}$",f=!0===c?"YES":"NO";b(d,"_s40 locBanStatus/*AllSourceSets*",f),b(d,e,f)}for(var e in a){var f=a[e];c(f),d(f),!0!==f.insbx&&b(f)}}function x(a){var b=[];for(var c in a){var d=a[c],e={divID:c,data:d};b.push(e)}b.sort(function(a,b){return b.data.fbxID>a.data.fbxID?-1:b.data.fbxID<a.data.fbxID?1:0});var f={};return b.forEach(function(a){f[""+a.divID]=a.data}),f}function y(a){var b=a,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?"0"+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}var z=this,A=b.comps,B=(b.cllBks,b.bootParams),C=a.mad.basTestSetTime,D=a.mad.basSuspTBRTh,E=a.mad.hintValRange,F=Math.round(999*Math.random());d(),window.addEventListener("unload",e);var G=B.placementId+"_mad_unld",H={},I=100,J=!1,K=B.placementId+"_mad_tgdb",L=100,M=[],N=B.placementId+"_mad_lcbn",O=100,P={},Q=3600*a.mad.locBanPeriod*1e3,R="dto_mad_wf";A.accbeam.register(R,a.accbeam.channels[R].red);var S="dto_mad_bd";A.accbeam.register(S,a.accbeam.channels[S].red),z.stlr=function(a){v(H)},z.enable=function(){J=!0},z.load=function(a){var b=JSON.parse(JSON.stringify(a));b.ts=Date.now(),f("load",b)},z.unload=function(a){f("unload",{divID:a})},P=k(),m(P),p("loaded_from_file",P),M=j(),M=r(M);var T=h();if(null!==T){var U=u(T.tagLoadData,T.rgNow);P=l(P,U),m(P),p("updated",P),w(U),q(U,M)}i(M),z.banNotif=function(a){t(M,a.tagName,a.hintValue,a.loads),M=s(M,a.tagName),i(M)},z.glbdb=function(){return P},z.getLBRep=function(){return n(P)}}}(config,0,antools),tracker=function(a,b,c){return function(d){function e(a){n.logger.writex({msg:a,prefix:"ag_tracker",inst:p})}function f(){function a(){for(var a in F){var b=F[a],c="_s00 deployed";!0===b.running&&(c="_s01 running"),!0===b.mediaOn&&(c="_s02 media placed"),!0===b.mediaVld&&(c="_s03 media validated"),i("_s80 exit_unit_st/"+a,c),i("_s80 exit_unit_st/*AllUnits*",c)}}i("_s70 time_on_page",h(Math.round((Date.now()-o.startTime)/1e3),"longtimes")),a(),k(),window.removeEventListener("unload",f)}function g(a){if(1===a)return!1;if(a<1)return!0;var b=1e6,c=Math.round(Math.random()*b),d=Math.round(b/a),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return f>=e||f<c}function h(a,c){var d=b.getRangeData(a,c);return"_i"+d.index+" ["+d.rangeL+"-"+d.rangeH+"]"}function i(a,d,f){function g(a,d,e){function f(a){function b(a){try{var b=100/parseInt(a);if("number"!=typeof b)throw 1;return b<1&&(b=1),b>100&&(b=100),b}catch(a){}return 1}return(new c).whirliGig(b(a))}function g(a){return null!==a&&"object"===_typeof2(a)}function h(a){return(new c).printObj(0,a)}var i={},j=""+a;0!==j.indexOf("/")&&(j="/"+j);var k=""+d,l="",m=1,n="",o="";if(void 0!==e&&(void 0!==e.scl&&(l=e.scl),void 0!==e.exp&&(m=e.exp),void 0!==e.txt&&(n=e.txt),void 0!==e.att)){var p=!0;void 0!==e.ard&&(p=f(e.ard)),!0===p&&(o=!0===g(e.att)?h(e.att):e.att)}var q;if(""!==l){var r=b.getRangeData(k,l);q="_i"+r.index+" ["+r.rangeL+" , "+r.rangeH+"]",1!==m&&(q+=" _x["+m+"]"),n.length>0&&(q+=" "+n)}else q=k;return"/"!==j.charAt(0)&&(j="/"+j),i.path=j,i.caption=q,i.cnt=u,i.attch=o,i.effSkip=w,i}var h=g(a,d,f);if(!0!==h.effSkip){var i={group:"ev_cnt",event:"agent",ver:100,reduc:1,pidx:y,ts:Date.now()-o.startTime+y,data:{pat:h.path,cap:h.caption,cnt:h.cnt,attch:h.attch}};x.push(i),y++,e(),j()}}function j(){var a=!1;if(E>D&&(a=!0),x.length>=C?a=!0:Date.now()-z>B&&(a=!0),!0!==a)return setTimeout(k,A),E++,void e();k()}function k(){function a(a){var b={ver:o.versionTag,ldmd:o.ldmd,fltr:o.filterTag,tcase:o.testCase,plcmID:o.placementId,locus:o.locus,clntID:"NA",pageID:"NA",burst:x},c=JSON.stringify(b);return encodeURIComponent(c)}function b(a,b){function c(a){}function d(){}function e(){}var f=null;window.XMLHttpRequest?f=new XMLHttpRequest:window.ActiveXObject&&(f=new ActiveXObject("Microsoft.XMLHTTP")),null!==f&&(f.open("POST",a),f.timeout=6e3,f.onload=c,f.onerror=d,f.ontimeout=e,f.send(b))}if(0!==x.length){e();var c=a(x);b(t,c),x=[],E=0,z=Date.now()}}function l(){}var m=this,n=d.comps,o=(d.cllBks,d.bootParams),p=Math.round(999*Math.random());e();var q="http://";!0===o.secProt&&(q="https://");var r="0";void 0!==o.serverID&&(r=o.serverID);var s=a.resourceLocations.accServerBase,t=q+s.replace("${number}",r)+"/receiver/postreportstr",u=100;if(void 0!==o.spred&&"unspecified"!==o.spred){var v=parseInt(o.spred);!0!==isNaN(v)&&(u=v)}"dev"===o.env&&(u=1);var w=g(u);window.addEventListener("unload",f);var x=[],y=0,z=0,A=3e3,B=2e3,C=10,D=10,E=0,F={};m.fireEvent=function(a,b,c){e(),i(a,b,c)},m.getRangeString=function(a,b){return h(a,b)},m.sendSomeEvents=function(){j()},m.sendAllEvents=function(){k()},m.exNotif=function(a,b){switch(a){case"adblk":_abDetected=b.adb,i("_s70 ad_blocker",!0===b.adb?"YES":"NO");break;case"depl":if(void 0!==F[b.unitName])break;F[b.unitName]={running:!1,mediaOn:!1,mediaVld:!1};break;case"rung":if(void 0===F[b.unitName])break;F[b.unitName].running=!0;break;case"mediaon":if(void 0===F[b.unitName])break;F[b.unitName].mediaOn=!0;break;case"mediavld":if(void 0===F[b.unitName])break;F[b.unitName].mediaVld=!0}},i("_s00 host-plcm/"+o.hostDomain,o.placementId),i("_s05 host-locus/"+o.hostDomain,o.locus),i("_s12 publisher",o.publisher),i("_s14 context",o.ctxId),i("_s15 versionTag",o.versionTag),i("_s18 loadMode",o.ldmd),i("_s20 filterTag",o.filterTag),i("_s25 loaderTag",o.loaderTag),i("_s30 test_case",o.testCase),i("_s32 test_group",o.testGroup),i("_s40 confined",!0===o.confined?"YES":"NO"),i("_s42 sc_width",h(o.winInfo.physicalWidth,"screenDims")),i("_s45 secProt",o.secProt),i("_s55 has_flash",!0===o.hasFlash?"YES":"NO"),i("_s60 browser_name-version",o.envInfo.browserName),i("_s60 browser_name-version/"+o.envInfo.browserName,o.envInfo.majorVersion),i("_s65 os_name",o.envInfo.OSName),i("_s68 dev_string",o.envInfo.deviceStr);var G=n.quickVars.getMetha();i("_s80 qv_status","status: "+G.status+" | msg: "+G.msg+" | code: "+G.code),l(),j()}}(config,antools,textools),msghub=function(){return function(a){function b(){window.removeEventListener("message",c),window.removeEventListener("unload",b)}function c(a){try{var b=JSON.parse(a.data);switch(b.type){case"sandbox":f(a,b);break;case"flagtag":k(b.part);break;case"cstpb":g(b)}}catch(a){}}function d(a,b){void 0===m[a]&&(m[a]=[]),m[a].push(b)}function e(a){function b(a,b){var c=[];return a.forEach(function(a){a!==b&&c.push(a)}),c}for(var c in m)m[c]=b(m[c],a)}function f(a,b){if("psb"===b.mode){var c=b.divID;l[c](b,a.source);var d="NA";void 0!==b.sbVer&&(d=b.sbVer),h("_s41 sbx_psb","ver: "+d)}else if("cnf"===b.mode){var c=b.divID;l[c](b,a.source);var d="NA";void 0!==b.sbVer&&(d=b.sbVer),h("_s42 sbx_cnf","ver: "+d)}else if("sbv"===b.mode)h("_s43 sbx_run","ver: "+b.sbVer);else if("asn"===b.mode){var c=b.divID;l[c](b,a.source)}}function g(a){if(100===a.ver){var b=a.packid,c=a.id;void 0===n[c]&&(n[c]=!0,void 0!==m[b]&&m[b].forEach(function(a){a(b)}))}}function h(a,b){j.tracker.fireEvent(a,b)}var i=this,j=a.comps,k=(a.cllBks,a.bootParams,a.procFlagTag),l={},m={},n={};i.regSbx=function(a,b){l[""+a]=b},i.regCst=function(a,b){return d(a,b)},i.unRegCst=function(a){return e(a)},window.addEventListener("message",c),window.addEventListener("unload",b)}}(),nodemgr=function(a,b){return function(c){function d(a){c.comps.logger.writex({msg:a,prefix:"nodemgr",inst:N})}function e(a){P.push({ts:Date.now()-O,msg:a})}function f(a,b){Q.push({ts:Date.now()-O,name:a,data:b})}function g(a,b,c){I.trackhub.sendEvent("gdpr_l",a,b,c)}function h(a,b,c){g("/"+K.publisher+M+a,b,c),g("/*AllPubs*"+M+a,b,c)}function i(a){g("/*doms_by_status*"+a,K.publisher+M)}function j(a){I.logger.writex({tgl:!0,msg:a,prefix:"nodemgr"})}function k(a){try{var b={ts:Date.now(),ver:R,cmpDataStr:JSON.stringify(a)},c=JSON.stringify(b);return I.memhub.setItem(W,c),"sys"===K.ctxId&&I.baseBridge.setItem(W,c),!0}catch(a){return!1}}function l(){try{var a=I.memhub.getItem(W),b=JSON.parse(a);if(f("readCMPData",{cmpCacheDataObj:b}),b.ver!==R)throw{msg:"incomp_versions"};if(Date.now()-b.ts>S)throw{msg:"data_too_old"};return JSON.parse(b.cmpDataStr)}catch(a){return d(),null}}function m(){var a=l();return null===a?(d(),!1):(ha=a,oa=!0,ja="ok",ia=!1,p(),d(),f("tryGetStoredData",{_prbdConsentDataObj:ha}),!0)}function n(b){switch(ka){case"INIT":if(na=b,d(),"sys"===K.ctxId){ka="TRY_SYS_DOCK";break}h("","_s10 try_base_file"),la=b,ka="TBF";case"TBF":if(b-la>a.gdpr.hostCmpPingTO){if(h("","_s14 base_file_timeout"),d(),j("base_file timeout"),"adf"===K.ctxId){I.xFrameInt.smth("getcns"),h("","_s14 try_host_ping"),ma=b,ka="WFHR";break}ka="FAIL";break}if(!0!==m())break;h("","_s12 base_file_ok"),pa="base_file",ka="SUCCS";break;case"WFHR":if(b-ma>a.gdpr.hostCmpPingTO){e("host_ping_timeout"),h("","_s16 host_ping_timeout"),d(),j("host_ping timeout"),ka="FAIL";break}if(null===fa)break;if(!0!==o(fa)){e("host_ping_data_error"),h("","_s18 host_ping_data_error"),d(),j("host_ping data_error"),ka="FAIL";break}ha=fa,ja="ok",ia=!1,p(),e("host_dock_ok"),h("","_s19 host_dock_ok"),d(),j("host dock ok"),pa="host_ping",ka="SUCCS";break;case"TRY_SYS_DOCK":e("trying direct ping"),h("","_s20 try_direct_ping"),d(),j("trying direct ping"),la=0,ka="LOC_LOOP";break;case"LOC_LOOP":if(b-la<500)break;var c=y();if(null===c.cmpWnd){if(++_<a.gdpr.cmpLocateRetries){e("cmp_loc_not_yet - retries:"+_),h("/_s11 cmp_loc_retries",_,{scl:"mediumtimes"}),d(),la=b;break}e("cmp_not_found"),h("","_s22 cmp_not_found"),h("/_s10 cmp_loc_status","_s02 not_found"),i("/_s12 cmp_not_found"),d(),j("CMP could not be found"),ka="FAIL";break}X=c.inSpace,Y=c.cmpWnd,e("cmp_cmp_located"),h("","_s24 cmp_located"),i("/_s10 cmp_located"),!0===X?(e("cmp_located_inspace"),h("/_s10 cmp_loc_status","_s00 inspace"),d(),j("CMP located 'inspace'")):(e("cmp_located_inframe"),h("/_s10 cmp_loc_status","_s01 inframe"),d(),j("CMP located 'inframe'")),la=0,ka="DCKATM";case"DCKATM":if(b-la<500)break;d(),e("pinging_cmp"),A(),la=b,ka="WFPING";case"WFPING":if(b-la>a.gdpr.cmpPingTO){if(++aa<a.gdpr.cmpPingRetries){d(),e("cmp_dock_no_reply - retr: "+aa),h("","_s26 cmp_dock_retry"),h("/_s22 cmp_dock_retries",aa,{scl:"mediumtimes"}),ka="DCKATM",la=b;break}e("cmp_dock_no_reply"),h("","_s27 cmp_no_reply"),i("/_s22 cmp_no_reply"),d(),j("CMP did not reply"),ka="FAIL";break}if("..."===Z)break;if("ok"!==Z){e("cmp_dock_error"),h("","_s28 cmp_ping_error"),i("/_s24 cmp_ping_error"),h("/_s20 cmp_ping_status","_s33 cmp_ping_error"),h("/_s25 cmp_ping_err_msgs",$),d(),j("CMP replied to pings with an error"),ka="FAIL";break}e("cmp_docked"),h("","_s30 cmp_ping_ok"),h("/_s20 cmp_ping_status","_s20 cmp_ping_ok"),h("/_s21 cmp_ping_times",b-na,{scl:"shorttimes"}),i("/_s20 cmp_ping_ok"),e("cmp_data_request"),h("","_s40 cmp_data_request"),la=0,ka="ASKCMPDATA";case"ASKCMPDATA":if(b-la<500)break;e("cmp_requesting_data"),d(),C(),la=b,ka="WFCMPDATA";case"WFCMPDATA":if("ok"===da){ha=q(ca),ja="ok",ia=!0,p(),k(ha),e("cmp_data_ok"),h("","_s42 cmp_data_ok"),h("/_s30 cmp_data_status","_s10 ok"),h("/_s31 cmp_data_times",b-la,{scl:"shorttimes"}),i("/_s30 cmp_data_ok"),d(),j("CMP data received ok"),pa="sys",ka="SUCCS";break}if(b-la<a.gdpr.cmpRespTO)break;if(++ba<a.gdpr.cmpDataRetries){h("","_s41 cmp_data_request_retry"),h("/_s32 cmp_data_retries",ba,{scl:"mediumtimes"}),d(),e("cmp_data_no_reply - retrying: "+ba),ka="ASKCMPDATA";break}e("cmp_data_timeout"),h("","_s46 cmp_data_timeout"),h("/_s30 cmp_data_status","_s30 timeout"),i("/_s34 cmp_data_timeout"),d(),j("CMP data timeout"),ka="FAIL";break;case"SUCCS":d(),j("host_cmp all ok"),e("host_cmp_all_ok"),h("","_s50 all_ok"),h("/_s42 dock_type",pa),h("/_s44 dock_times",b-na,{scl:"shorttimes"}),r(ha.vendorData.vendorConsents),ga=ha,s(ha),f("success",{prbdConsentDataObj:ha}),ha.status="ok",G("cmp_int_succ",U,"Master Node Data"),ka="PARK";break;case"FAIL":ga={status:"failed"},f("failure",{}),p(),G("cmp_int_fail",U,"Master Node Data"),ka="PARK";break;case"PARK":I.heart.unsubscribe(H)}}function o(a){return null!==a&&("object"===_typeof2(a)&&(void 0!==a.status&&"ok"===a.status))}function p(){!0!==ea&&("ok"===ja?(e("cmp_summary_avail"),h("","_s60 cmp_summary_avail")):(e("cmp_summary_not_avail"),h("","_s61 cmp_summary_not_avail")),ea=!0)}function q(a){var b={consentString:void 0,vendorData:void 0,gdprApplies:void 0};return null===a?b:(b.consentString=a.getConsentData.consentData,b.vendorData=a.getVendorConsents,b.gdprApplies=a.getConsentData.gdprApplies,b)}function r(a){for(var b in a){var c=parseInt(b),d=a[c],e=x(c);null!==e&&(e.gdpr.valid=!0,e.gdpr.cnsnt=d)}}function s(a){function b(a){h("/_s70 general/_s10 gdpr_appl",!0===a.gdprApplies?"yes":"no"),h("/_s70 general/_s20 cons_strings",a.consentString,{ard:100,att:a.consentString})}function c(a){var b="/_s55 cons_levels_x",c=b+"/"+a.name,d=b+"/*AllNodes*",e="YES",f="NO",g="unknown";!0!==a.gdpr.valid?(h(c,g),h(d,g)):!0===a.gdpr.cnsnt?(h(c,e),h(d,e)):(h(c,f),h(d,f))}function d(a){var b="/_s55 gdpr_enfrc",c=b+"/"+a.name,d=b+"/*AllNodes*",e="YES",f="NO";!0===a.gdpr.enforce?(h(c,e),h(d,e)):(h(c,f),h(d,f))}b(a),V.forEach(function(a){c(a),d(a)})}function t(a){var b={};return b.name=a.name,b.idstrs=a.idstrs,b.gdpr={iabID:a.iabID,enforce:a.gdprenf?a.gdprenf:T,valid:!1,cnsnt:!1},b}function u(){function a(a,b,c,d){var e=String.fromCharCode(d+c),f={name:""+a+e,idstrs:[""+b+e],iabID:0,gdprenf:!0},g=t(f);g.gdpr.valid=!0,g.gdpr.cnsnt=!0,V.push(g)}if("dev"===K.env){for(var b=0;b<10;b++)a("WF_NODE_","TION_",b,48);for(var b=0;b<10;b++)a("BD_NODE_","NODE_",b,65)}}function v(){U.forEach(function(a){0===a.iabID&&h("/_s90 errors/_s10 missing ID",a.name);var b=t(a);V.push(b)})}function w(a){var b=null;return V.forEach(function(c){null===b&&c.idstrs.forEach(function(d){null===b&&a.indexOf(d)>=0&&(b=c)})}),b}function x(a){var b=null;return V.forEach(function(c){null===b&&0!==c.gdpr.iabID&&a===c.gdpr.iabID&&(b=c)}),b}function y(){var a=window,b=null,c=30;try{for(;c>0;){if(c--,void 0!==a.__cmp){b=!0;break}if(void 0!==a.frames.__cmpLocator){b=!1;break}if(a===window.top)break;a=a.parent}}catch(a){}return null===b?{cmpWnd:null}:(!0===b?d():(d(),z()),{cmpWnd:a,inSpace:b})}function z(){function a(){window.removeEventListener("message",b),window.removeEventListener("unload",a)}function b(a){try{var b=a.data,c=b.__cmpReturn;if(void 0===c)return;var d=c.callId;if(void 0===d)return;d.indexOf("fb_ping")>=0?B(c.returnValue):d.indexOf("fb_getVendor")>=0?D(c.returnValue):d.indexOf("fb_getConsent")>=0&&E(c.returnValue)}catch(a){}}try{window.addEventListener("message",b,!1),window.addEventListener("unload",a)}catch(a){}}function A(){try{if(!0===X)Y.__cmp("ping",null,B);else{var a="_fb_ping_"+Math.random().toString(36).substring(2,10),b={__cmpCall:{command:"ping",callId:a}};Y.postMessage(b,"*")}}catch(a){B()}}function B(a){function b(a){return void 0!==a&&null!==a}if("..."===Z){d();JSON.stringify(a);if(!0!==b(a))return Z="error",void($="ping reply rejected: "+JSON.stringify(a));!0===a.cmpLoaded&&(!0===a.gdprAppliesGlobally||"true"===a.gdprAppliesGlobally?h("/_s60 cmp_ping_params/_s00 appGlob","YES"):h("/_s60 cmp_ping_params/_s00 appGlob","NO"),Z="ok")}}function C(){function a(a){var b=[];return V.forEach(function(a){var c=a.gdpr.iabID;0!==c&&b.indexOf(c)<0&&b.push(c)}),void 0!==a&&!0===a?b:new Uint16Array(b)}try{if(!0===X)Y.__cmp("getVendorConsents",a(),D),Y.__cmp("getConsentData",null,E);else{var b={__cmpCall:{callId:"_fb_getVendorConsents_"+Math.random().toString(36).substring(2,10),command:"getVendorConsents",parameter:{vendorIds:a(!0)}}};Y.postMessage(b,"*");var c={__cmpCall:{callId:"_fb_getConsentData_"+Math.random().toString(36).substring(2,10),command:"getConsentData"}};Y.postMessage(c,"*")}}catch(a){D()}}function D(a){function b(a){function b(a){return null!==a&&"object"===_typeof2(a)}function c(a){e("vcsResp_not_good - code: "+a),h("","_s38 vcsResp_not_good"),h("/_s90 errors/_s20 vendor_cons_clbk","code : WWypHs7tEX_"+a)}return!0!==b(a)?(c(1),!1):"boolean"!=typeof a.gdprApplies?(c(2),!1):!0!==a.gdprApplies||(!0!==b(a.purposeConsents)?(c(3),!1):!0===b(a.vendorConsents)||(c(4),!1))}if(f("vendorConsentsCallback",{vcsResp:a}),"..."!==da)return void h("","_s38 cmp late resp");!0===b(a)&&(d(),e("cmp_vcs_replied"),ca.getVendorConsents=a,F("ok"))}function E(a){function b(a){function b(a){return null!==a&&"object"===_typeof2(a)}function c(a){e("gcdResp_not_good - code: "+a),h("","_s39 gcdResp_not_good"),h("/_s90 errors/_s20 vendor_cons_clbk","code : ejK23Yts_"+a)}return!0!==b(a)?(c(1),!1):"boolean"!=typeof a.gdprApplies?(c(2),!1):!0!==a.gdprApplies||("string"==typeof a.consentData||(c(3),!1))}if(f("generalConsentDataCallback",{gcdResp:a}),"..."!==da)return void h("","_s38 cmp late resp");!0===b(a)&&(d(),e("cmp_gdc_replied"),ca.getConsentData=a,F("ok"))}function F(a){"error"!==da&&null!==ca.getVendorConsents&&null!==ca.getConsentData&&(da="ok")}function G(a,b,c){function d(){var a="";return P.forEach(function(b){a+=g(b.ts)+" : "+b.msg+"\n"}),a}function f(){var a=0,b="";return Q.forEach(function(c){a=0,b+=g(c.ts)+' : "'+c.name+'" : \n',b+=L.printObj(a,c.data)+"\n\n\n"}),b}function g(a){var b=Math.floor(a/1e3),c=a-1e3*b;return b=b<10?" "+b:""+b,c=0===c?"000":c<10?"00"+c:c<100?"0"+c:""+c,b+"."+c}var h;e("_sendDebugMail");var i="CMP_REPORT - ("+a+")\n\n";if(i+="CMP Log:\n\n"+d()+"\n\n",i+="Stash Buffer:\n\n"+f()+"\n\n",void 0!==b){var j="dataObj";void 0!==c&&(j=c),h=0,i+=j+":\n",i+=L.printObj(h,b)+"\n\n\n"}var k=a.replace(/\s+/g,"_"),l="  ("+k+")",m={debugStrings:null,from:"CMP_INT",subject:l,text:i};H.fireEvent("sendDebMail",m)}var H=this,I=c.comps,J=c.master,K=c.bootParams,L=new b,M="/_s10 sys";"adf"===K.ctxId?M="/_s20 adf":"brk"===K.ctxId&&(M="/_s30 brk");var N=Math.round(999*Math.random());d();var O=Date.now(),P=[];e("inst");var Q=[];H.fireEvent=function(a,b){J.fireEvent(a,b)};var R=110,S=6048e5,T=!1,U=[{name:"Google",idstrs:["GOOGLE"],iabID:0},{name:"OZ Digital",idstrs:["ZODIAK"],iabID:0},{name:"WebAds",idstrs:["WEBADS"],iabID:0},{name:"4StrokeMedia",idstrs:["4STROKE"],iabID:0},{name:"Fidelity Media",idstrs:["FDLT"],iabID:0},{name:"Vertoz",idstrs:["VERTOZ"],iabID:0},{name:"SmartyAds",idstrs:["SMARTYADS"],iabID:0},{name:"SpringServe",idstrs:["SPRSRV"],iabID:0},{name:"Adform",idstrs:["TIME_adf","ADFORM"],iabID:50},{name:"AppNexus",idstrs:["APNX"],iabID:32},{name:"PubMatic",idstrs:["TIME_pub","PUBM"],iabID:76},{name:"OpenX",idstrs:["OPENX","OPX"],iabID:69},{name:"FreeWheel",idstrs:["STICKY","TIME_VP","TIME_H5"],iabID:285},{name:"Spotx",idstrs:["SPOTX"],iabID:165},{name:"Improve Digital",idstrs:["IMPROVE"],iabID:253},{name:"Criteo",idstrs:["CRITEO"],iabID:91},{name:"Oath",idstrs:["ADTECH","ADAPTV","AOL"],iabID:25},{name:"SmartAdServer",idstrs:["SMART"],iabID:45},{name:"PulsePoint",idstrs:["PPOINT"],iabID:81},{name:"EMXdigital",idstrs:["BRT"],iabID:183},{name:"Sovrn",idstrs:["SOVRN"],iabID:13},{name:"Rubicon Project",idstrs:["TIME_rub","RUBICON"],iabID:52},{name:"Telaria",idstrs:["TREMOR"],iabID:202},{name:"XXXXX",idstrs:["YYYYY"],iabID:0,gdprenf:!0}];f("inst",{storedCMPVersion:R,storageTimeTolerance:S,enforceAtNodeLevel:T});var V=[],W=K.publisher+"_cmpx",X=!1,Y=null,Z="...",$="",_=0,aa=0,ba=0,ca={getConsentData:null,getVendorConsents:null},da="...",ea=!1,fa=null,ga=null,ha=q(null),ia=void 0,ja="...";g("/**debug**/_s10 cmp_stg_name"+M,W),g("/**debug**/_s20 act_domain"+M,""+window.location.origin);var ka="INIT",la=0,ma=0,na=0,oa=!1,pa=null;H.getCMPData=function(){return ga},H.hostCMPData=function(a){fa=a},H.getNodeData=function(a){return w(a)},H.isReady=function(){return"..."!==ja},H.getStatus=function(){return ja},H.getGdprData=function(){return ha},H.tick=function(a){n(a)},"brk"===K.ctxId&&(g("/**debug**/_s30 brk_base","_s10 inst"),I.baseBridge.subscribe("brk_base_debug",function(a){var b="/**debug**/_s30 brk_base";!0===a.found?g(b,"_s20 found"):!1===a.found?g(b,"_s30 not_found"):g(b,"_s40 unknown")})),u(),v(),h("","_s00 inst"),!0===m()?h("","_s02 prelm_data_ok"):(h("","_s03 prelm_data_notav"),I.baseBridge.copyItem(W)),I.heart.subscribe(H,200,"nodemgr",9,0),H.tick(Date.now())}}(config,textools),curmgr=function(){return function(a){function b(a){i.logger.writex({msg:a,prefix:"curmgr",inst:j})}function c(){var a=null;return!0===d(m)?(a=g(m),b(),f(a,k,l),a):(b(),void 0!==(a=e(k,l))&&null!==a?a:(b(),{CHF:"1.000",USD:"0.960",EUR:"1.130"}))}function d(a){return void 0!==a&&(void 0!==a.CHF&&(void 0!==a.USD&&void 0!==a.EUR))}function e(a,b){try{var c=i.hubmem.getItem(a);if(null===c)throw"currency_repo_record_not_found";var d=JSON.parse(c);if(Date.now()-d.date>864e5)throw"currency_repo_record_too_old";return d.curlist}catch(a){return null}}function f(a,b,c){try{var d={curlist:a,date:Date.now()};i.hubmem.setItem(b,JSON.stringify(d))}catch(a){}}function g(a){var b={};for(var c in a)b[c]=parseFloat(a[c]);return b}var h=this,i=a.comps,j=(a.cllBks,a.bootParams,Math.round(999*Math.random()));b();var k="fb_currency",l=100,m=a.curData,n=c();h.getCurRates=function(){return n}}}(),execontrol=function(a){return function(a){function b(a){l.logger.writex({msg:a,prefix:"execontrol",inst:o})}function c(a,b){var c=this;c.unitfbxID=a,c.unitName=b,c.shutdown=!1;var e=[],f=[];c.addLogItem=function(a){var b=JSON.parse(JSON.stringify(a));b.ts=Date.now(),e.push(b)},c.getLog=function(a){return e},c.addAdPost=function(a,b){var c=new d(a,b);f.push(c)},c.getAdPostObj=function(a){var b=null;return f.forEach(function(c){null===b&&c.adpID===a&&(b=c)}),b},c.getAdPosts=function(){return f}}function d(a,b){var c=this;c.adpID=a,c.adpName=b,c.shutdown=!1;var d=[],e=null;c.addLogItem=function(a){var b=JSON.parse(JSON.stringify(a));b.ts=Date.now(),d.push(b)},c.getLog=function(a){return d},c.setLastMedia=function(a){var b=JSON.parse(JSON.stringify(a));b.ts=Date.now(),e=b},c.getLastMedia=function(){return e}}function e(a){var b=this;b.type="truck",b.truckIdx=a.truckIdx,b.truckID=a.truckID,b.bdChnID=a.bdChnID,b.ts=Date.now();var c=[];b.addLogItem=function(a){var b=JSON.parse(JSON.stringify(a));b.ts=Date.now(),c.push(b)},b.getLog=function(a){return c}}function f(a){!0===a?p.boostOn():p.boostOff()}function g(a){var b=null;return C.forEach(function(c){
null===b&&c.unitfbxID===a&&(b=c)}),b}function h(a){var b=null;return L.forEach(function(c){"truck"===c.type&&null===b&&c.truckID===a&&(b=c)}),b}function i(a){switch(M){case"INIT":if(0===v)break;A=0,z=a,M="READY";break;case"READY":if(A>=u){M="PARK";break}if(a-z<1e3*t)break;j(a,A),z=a,A++,M="READY"}}function j(a,b){q.closeRep(x);var c={ts:Date.now(),cmd:"repclosed",data:{}};B.push(c);var d="Report #: "+b+" - Time: "+Math.round((a-n.startTime)/1e3)+" seconds (snapshot)";r("sending perf report #"+b),k(d,b)}function k(a,b){function c(a,b){function c(c,d){function e(c,d){function e(c,d,e){function f(a){return a<10?"0"+a:a}var g="\t"+f(e+1)+")  ",i="",j=c.ts,k=c.data,l=b,m=h(j-k.cntValTm-a),n=k.adpName.replace(l,""),o=k.segmName.replace(l,"");i+=f(k.segmIdx)+":"+f(k.sourceIdx)+"  |  ",i+=k.logic+"  |  ",i+=(k.vast?"vast":"disp")+"  |  ",i+=(k.active?"act":"psv")+"  |  ",i+="adp: "+n+"  |  ",i+="sgm: "+o+"  |  ",i+="tag: "+k.tagName+"  |  ",i+="prc:"+k.clPrc,d.retStr+=g+m+"  |  "+i+"\n",d.accValue+=k.clPrc}var f={retStr:"",accValue:0},g=c.getLastMedia();null!==g&&(e(g,f,d.plmIdx),d.plmIdx+=1),d.retStr+=f.retStr,d.accValue+=f.accValue}var f={retStr:"",accValue:0,plmIdx:0};f.retStr+="Unit:  "+c.unitName+"  ("+c.unitfbxID+")\n\n";var g=c.getAdPosts();g.forEach(function(a){e(a,f)}),f.retStr+="\n\tUnit Value: "+f.accValue,f.retStr+="\n\n\n",d.retStr+=f.retStr,d.accValue+=f.accValue,d.plmIdx+=f.plmIdx}var d={retStr:"",accValue:0,plmIdx:0};C.sort(function(a,b){return a.unitfbxID<b.unitfbxID?-1:a.unitfbxID>b.unitfbxID?1:0}),C.forEach(function(a){c(a,d)});var e=Math.round(100*d.accValue)/100,f=d.plmIdx,g=0;C.length>0&&(g=Math.round(d.plmIdx/C.length*100)/100);var i=0;C.length>0&&(i=Math.round(d.accValue/C.length*100)/100);var j=h(Date.now()-a),k=d.retStr;return k+="Total Page Value: "+e+"\n",k+="Total Units: "+C.length+"\n",k+="Total Placements: "+f+"\n\n",k+="Avg Plcm/Unit: "+g+"\n",k+="Avg Value/Unit: "+i+"\n\n",k+="Report Time: "+j+"\n\n"}function d(a,b){var c=l.parcels.getPerfData(),d="";return d+="parcels - total packs: "+c.totalPacks+"\n",d+="parcels - pack rate: "+c.packRate+"\n",d+="parcels - fail rate: "+c.failRate+"\n",d+="parcels - avg transit time: "+c.avgTransTime+"\n\n"}function e(a){function b(a,b){return a.length<b?a:a.substring(0,b)+" ... "}function c(c,e){var f="\n",i="\t\t\t\t",j="\t\t\t\t\t\t",k="\t\t\t\t\t\t\t\t",l=g(c.unitfbxID);if(null===l)return"$$$$ unknown_unit $$$$";var m=l.getAdPostObj(c.adpID);return null===m?"$$$$ unknown_adpost $$$$":(f+="\n"+i+h(e-a)+" : ",f+="Adpost ["+c.adpIdx+"]: "+c.adpName+"\n\n",m.getLog().forEach(function(c,d){var e=c.ts,g=c.event,l=c.data,m=""+d;d<10&&(m=" "+m);var n="";switch(g){case"adp_gofw":n+="\n"+i+h(e-a)+" : ",n+="Adpost activated\n\n";break;case"new_segm":n+=j+h(e-a)+" : ",n+="Segm Lchd: "+l.segmName,n+="  |  "+l.logic,n+="  |  "+(l.vast?"vast":"disp"),n+="  |  "+l.ssName+"\n\n";break;case"segm_skipped":n+=j+h(e-a)+" : ",n+="Segm Skpd: "+l.segmName,n+="  |  "+l.logic,n+="  |  "+(l.vast?"vast":"disp"),n+="  |  "+l.ssName,n+="  |  ( "+l.reason+" )\n\n";break;case"segm_to":n+=j+h(e-a)+" : ",n+="Segm TO: "+l.segmName,n+="  |  "+l.logic,n+="  |  "+(l.vast?"vast":"disp"),n+="  |  "+l.ssName,n+="  |  ( "+l.reason+" )\n\n";break;case"segm_clsd":n+="\n"+j+h(e-a)+" : ",n+="Seg Clsd - Cnt: "+(l.segmComp?"Y":"N")+"\n";break;case"src_load":n+=k+h(e-a)+" : ",n+="Load: "+l.tagName,n+="  |  "+l.sourceIdx+"\n";break;case"src_abort":n+=k+h(e-a)+" : ",n+="Abrt: "+l.tagName,n+="  |  "+l.event,n+="  |  "+l.delay+"\n";break;case"src_imp":n+=k+h(e-a)+" : ",n+="Impr: "+l.tagName,n+="  |  "+l.impdata.impDelay,n+="  |  "+l.impdata.adsystem,n+="  |  "+l.impdata.adtitle,n+="  |  "+l.impdata.id,n+="  |  "+l.impdata.creativetype,n+="  |  "+l.impdata.client,n+="  |  "+l.impdata.vastversion+"\n";break;case"src_ply":n+=k+h(e-a)+" : ",n+="Plyn: "+b(l.plydata.tag,150)+"\n";break;case"src_bid":n+=k+h(e-a)+" : ",n+="Bids: "+l.tagName,n+="  |  "+l.delay,n+="  |  prc: "+l.prc+"\n";break;case"src_xseg":n+=k+h(e-a)+" : ",n+="> XSeg: "+l.tagName,n+="  |  prc: "+l.prc,n+="  |  (from: "+l.fromSeg+")\n";break;case"src_pass":n+=k+h(e-a)+" : ",n+="Pass: "+l.tagName,n+="  |  "+l.delay+"\n";break;case"src_missing":n+=k+h(e-a)+" : ",n+="Missing resp: "+l.tagName,n+="  |  "+l.delay+"\n";break;case"src_timo":n+=k+h(e-a)+" : ",n+="Timo: "+l.tagName,n+="  |  "+l.delay+"\n";break;case"src_drverr":n+=k+h(e-a)+" : ",n+="Driver Error: "+l.tagName,n+="  |  "+l.msg+"\n";break;case"src_vast_ev":n+=k+h(e-a)+" : ",n+="Vast: "+l.tagName,n+="  |  "+l.event+"\n";break;case"adison":n+=k+h(e-a)+" : ",n+="# Plc: "+l.tagName,n+="  |  prc: "+l.clPrc+"\n";break;case"adisoff":n+=k+h(e-a)+" : ",n+="Unplc: "+l.tagName+"\n"}f+=n}),f+="\n"+i+h(d)+": Adpost log closed",f+="\n\n")}var d=Date.now()-a,e="\n\n",f="\t";return C.sort(function(a,b){return a.unitfbxID<b.unitfbxID?-1:a.unitfbxID>b.unitfbxID?1:0}),C.forEach(function(b,g){e+="Unit ["+g+"]: "+b.unitName+"\n",b.getLog().forEach(function(b,d){var g=b.ts,i=b.event,j=b.data,k=""+d;d<10&&(k=" "+k);var l="";switch(i){case"unit_start":l+="\n"+f+h(g-a)+" : ",l+="Start: "+j.unitName+" - ",l+="smart: "+(!0===j.smart?"YES":"NO");break;case"unit_aborted":l+="\n"+f+h(g-a)+" : ",l+="Aborted: "+j.unitName+"\n";break;case"unitError_Exec":l+="\n"+f+h(g-a)+" : ",l+="**** Unit Error: Exec ****",l+="\n"+f+j.msg+"\n";break;case"unitError_Create":l+="\n"+f+h(g-a)+" : ",l+="**** Unit Error: Create ****",l+="\n"+f+j.msg+"\n";break;case"unitError_Oversized":l+="\n"+f+h(g-a)+" : ",l+="**** Unit Error: Oversized ****",l+="\n"+f+j.msg+"\n";break;case"adp_start":l+=c(j,g)}e+=l}),e+="\n"+h(d)+": Unit log closed",e+="\n\n\n\n"}),e}function f(a){var b="";L.forEach(function(c){if("burst"===c.type){var d=c.burstIdx+1;c.burstIdx<9&&(d="0"+(c.burstIdx+1));var e="Burst: ["+d+"] : "+h(c.ts-a)+"  |  ss: "+c.ssName+"  |  un: "+c.unitFbxID+"  -  sg: "+c.segmName+"  -  w: "+c.callSpan+"\n";return void(b+=e)}var f=""+(c.truckIdx+1);c.truckIdx<9&&(f="0"+(c.truckIdx+1)),b+="Truck ["+f+"] : "+h(c.ts-a)+"  |  "+c.bdChnID+"  :  |  ",c.getLog().forEach(function(a,c){var d=(a.ts,a.event),e=(a.data,""+c);c<10&&(e=" "+e);var f="";switch(d){case"node_call":f+=a.data.unitList.join("  +  ")+"  |  "}b+=f}),b+="\n"});var c=0;return D>0&&(c=Math.round(10*E/D)/10),b+="\n",b+="Trucks Sent: "+D+"\n",b+="Node Calls: "+E+"\n",b+="Calls/Truck: "+c+"\n",b+="\n",b+="Drv Requests: "+F+"\n",b+="Drv Bids: "+G+"\n",b+="Drv Pass: "+H+"\n",b+="Drv Wins: "+I+"\n",b+="Drv Timeouts: "+J+"\n",b+="Drv Errors: "+K+"\n",b+="\n"}function h(a){var b=a,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?"0"+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}var i={bootRep:s.getLogPrint(),bdDrvsRep:l.bdcnxhub.getDrvPrint(),heartRep:p.getPerfReport(),filesysRep:l.memhub.getDir("*","*"),pmRep:c(n.startTime,n.locus),ulRep:e(n.startTime),ncnxRep:f(n.startTime),parcelsRep:d(),sourceRep:q.getSrcReport(),snapShRep:a,adsServed:y,maxAdCounter:x,reportIdx:b};l.perfcheck.execCmd(i)}var l=a.comps,m=a.cllBks,n=a.bootParams,o=Math.round(999*Math.random());b();var p=l.heart,q=l.sourceadmin,r=m.addLogLine,s=m.bootLogger;l.quickVars.refreshParams();var t=l.quickVars.getParam("perfRepPeriod",20),u=l.quickVars.getParam("perfRepMax",2),v=0,w=0,x=0,y=0,z=0,A=0,B=[],C=[],D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=[],M="INIT";this.hcComm=function(a){function b(a,b,c){var d=g(b.unitfbxID);if(null===d)throw"unknown_unit";if(!0!==d.shutdown){var e={event:a,data:b};return d.addLogItem(e),void 0!==c&&!0===c&&(d.shutdown=!0),d}}function d(a,b,c){var d=g(b.unitfbxID);if(null===d)throw"unknown_unit";var e=d.getAdPostObj(b.adpID);if(null===e)throw"unknown_adpost";if(!0!==e.shutdown){var f={event:a,data:b};return e.addLogItem(f),void 0!==c&&!0===c&&(e.shutdown=!0),e}}var i=a.event,j=a.data;switch(i){case"unit_start":var k=g(j.unitfbxID);if(null!==k)throw"inc_flow";var l=new c(j.unitfbxID,j.unitName);C.push(l);var m={event:"unit_start",data:j};l.addLogItem(m),f(!0);break;case"adp_start":var k=g(j.unitfbxID);if(null===k)throw"unknown_unit";k.addAdPost(j.adpID,j.adpName);var n=k.getAdPostObj(j.adpID);if(null===n)throw"unknown_adpost";var m={event:"adp_start",data:j};n.addLogItem(m),k.addLogItem(m),v++,p.setAdLevel(v),v>x&&(x=v),f(!0),w++;break;case"adp_gofw":var k=g(j.unitfbxID);if(null===k)throw"unknown_unit";var n=k.getAdPostObj(j.adpID);if(null===n)throw"unknown_adpost";var m={event:"adp_gofw",data:j};n.addLogItem(m);break;case"adp_end":var k=g(j.unitfbxID);if(null===k)throw"unknown_unit";var n=k.getAdPostObj(j.adpID);if(null===n)throw"unknown_adpost";var m={event:"adp_end",data:j};n.addLogItem(m);break;case"mediaready":v--,v<0&&(v=0),p.setAdLevel(v);break;case"adison":var k=g(j.unitfbxID);if(null===k)throw"unknown_unit";var n=k.getAdPostObj(j.adpID);if(null===n)throw"unknown_adpost";d(i,j);var m={event:"adison",data:j};n.setLastMedia(m),w--,v<0&&(w=0),y++;break;case"new_segm":case"src_load":d(i,j),f(!0);break;case"segm_skipped":case"segm_to":case"src_abort":case"src_imp":case"src_ply":case"src_xseg":case"src_missing":case"src_vast_ev":case"adisoff":case"segm_clsd":d(i,j);break;case"src_drvreq":F++,f(!0);break;case"src_bid":G++,d(i,j);break;case"src_pass":H++,d(i,j);break;case"src_win":I++;break;case"src_timo":J++,d(i,j);break;case"src_drverr":K++,d(i,j);break;case"unit_aborted":case"unitError_Exec":case"unitError_Create":case"unitError_Oversized":b(i,j,!0);break;case"bd_new_burst":var o={type:"burst",ts:Date.now(),ssName:j.ssName,segmName:j.segmName,unitFbxID:j.unitFbxID,burstIdx:j.burstIdx,callSpan:j.callSpan};L.push(o),f(!0);break;case"bd_new_truck_sent":var q=h(j.truckID);if(null!==q)throw"inc_flow - code: Rx6Kyz8P";var r=new e({truckIdx:D,truckID:j.truckID,bdChnID:j.bdChnID});L.push(r);var m={event:"truck_sent",data:j};r.addLogItem(m),D++,f(!0);break;case"bd_new_node_call":var q=h(j.truckID);if(null===q)throw"unknown_truck - code: tEv3uNzd";var m={event:"node_call",data:j};q.addLogItem(m),E++,f(!0)}},this.tick=function(a){i(a)},p.subscribe(this,100,"execontrol",!0)}}(),macroproc=function(){return function(a){var b=this,c=a.comps,d=(a.cllBks,a.bootParams),e=null,f={};f.random=Math.round(1e6*Math.random()),f.imprID=d.imprID,f.fbplcid=d.placementId,f.timestamp=Date.now(),f.sysurl=d.baseUrl,f.sysurlENC=encodeURIComponent(d.baseUrl),f.refurl=d.hostPageUrl,f.refurlENC=encodeURIComponent(d.hostPageUrl),f.refdomain=d.hostDomain,f.refdomainENC=encodeURIComponent(d.hostDomain),f.title=d.hostPageTitle,f.titleENC=encodeURIComponent(d.hostPageTitle),f.mediaTitle=encodeURIComponent("Forebase indexes - Italy"),f.mediaDesc=encodeURIComponent("Latest Forebase public opinion indexes - Italy"),f.mediaURL=encodeURIComponent("http://forebase.com"),f.mediaID="unspecified",f.gdprOn=0,f.gdprConStr="",f.playerPosition="2",f.context="5",f.videoQuality="1",f.livestream="0",f.srcRelationship="1",f.contentLength="60",b.gucmpd=function(){if("ok"!==e&&"ok"===(e=c.nodemanager.getStatus())){var a=c.nodemanager.getGdprData();f.gdprOn=!0===a.gdprApplies?"1":"0",f.gdprConStr=a.consentString}},b.expand=function(a,c){function d(a,b){var c,d=""+a;for(c in b)if(void 0!==b[c]){var e=new RegExp("\\${"+c+"}","g");d=d.replace(e,b[c])}return d}b.gucmpd();var e=d(a,f);return void 0!==c&&(e=d(e,c)),e},b.contentReady=function(a){if(void 0!==a.talkstations){var b=a.talkstations[0],c='Forebase Poll Italy: "'+b.Title+'"';f.mediaTitle=encodeURIComponent(c),f.mediaID="Forebase_Poll__"+b.TargetId}}}}(),sourceadm=function(a){return function(b){function c(a){q.logger.writex({msg:a,prefix:"sourceadm",inst:y})}function d(a,b,c){q.trackhub.sendEvent("srcadmin","/admin"+a+"/"+r.placementId,b,c)}function e(a,b,c,d,e,f){var h={status:"...",msg:null,data:null},j=k(a);if(null===j)return h.status="...",h.msg="sourceset_not_found_in_list",h;var l=i(c),j=l.gocsso(a,d);Date.now();if(!0!==b){var m=l.gnas(a);if("ok"===m.status)return l.lt(m.src.tagname,j.segmType,e,f,m.src.dtovalue,m.src.idtov,m.src.xdtov,m.src.origIdx),g(m.src.tagname),j.timeAllBusy=null,h.data=m.src,h.data.width=j.sourceWidth,h.data.height=j.sourceHeight,h.status="ok",h}var n=l.chps(a);return null!==n?(l.lt(n.tagname,j.segmType,e,f,n.dtovalue,n.idtov,n.xdtov,n.origIdx),g(n.tagname),h.data=n,h.data.width=j.sourceWidth,h.data.height=j.sourceHeight,h.status="ok",h):(h.status="end_of_list",h.msg="no_more_sources_available",h)}function f(a){try{return a.varSetData.tagFilter.split("+")}catch(a){return[]}}function g(a){x.push(a)}function h(a){var b=0;return x.forEach(function(c){c===a&&b++}),b}function i(a){function b(a){function b(a){return void 0===e[a]?null:e[a]}var d=this;d.uniqueUnitName=a;var e={},f=[];d.getTagLog=function(){return f},d.gocsso=function(a,c){var d=b(a);if(null!==d)return d;if(!0!==c)var f=l(a),g=JSON.parse(JSON.stringify(f));else{var f=k(a),g=JSON.parse(JSON.stringify(f)),h=f.rotIdx+f.cloneCount;f.cloneCount++;var i=o(g.activeList,g.sampSize,h);g.activeList=i}return g.curSrcIdx=0,e[a]=g,g},d.gnas=function(a){for(var d={status:"---",msg:null,src:null},e=b(a),f=0;e.curSrcIdx<e.activeList.length&&!(++f>1e3);){var g=e.activeList[e.curSrcIdx];if(e.curSrcIdx++,!(g.maxpage>0&&h(g.tagname)>=g.maxpage))return c(),d.status="ok",d.src=g,d;c()}return d.status="no_source_avail",d},d.chps=function(a){function d(a){function b(a){function b(a){return 0===a.maxpage||h(a.tagname)<a.maxpage}var d=[];return a.forEach(function(a){if(!0!==b(a))return void c();c(),d.push(a)}),d}function d(a){function b(a){var b=0;return a.forEach(function(a){b+=a.share}),b}if(0===a.length)return 0;var c=b(a);return a.forEach(function(a){0===a.share?(a.relShare=10,c+=10):a.relShare=Math.round(100*a.share/c)}),c}function e(a){function b(a){var b=0;return a.forEach(function(a){b+=a.relShare}),b}var c=null;if(0===a.length)return c;var d=b(a),e=Math.round(Math.random()*d),f=0;return a.forEach(function(a){null===c&&(f+=a.relShare)>=e&&(c=a)}),c}var f=JSON.parse(JSON.stringify(a)),g=b(f);d(g);var i=e(g);return null!==i&&c(),i}return d(b(a).passiveList)},d.lt=function(a,b,c,d,e,g,h,i){var j=Date.now()-r.startTime,k={ts:j,tn:a,lg:b,segidx:c,srcidx:d,cdtov:e,idtov:g,xdtov:h,origIdx:i};f.push(k)}}function d(a){var b=null;return w.forEach(function(c){c.uniqueUnitName===a&&(b=c)}),b}var e=d(a);if(null!==e)return e;var f=new b(a);return w.push(f),f}function j(b){function e(a){var b={};return b.name=""+a.sourcesetName,b.useCount=a.useCount,b.mdType=a.mdType,b.packid=a.packid,b.segmType=a.segmType,b.floor=a.floor,b.sourceWidth=a.sourceWidth,b.sourceHeight=a.sourceHeight,b.rotIdx=a.rotIdx,b.activeList=[],b.passiveList=[],b.time1req=null,b.timeAllBusy=null,b.complete=!1,b.curSrcIdx=0,u.push(b),b}function f(a,b){function c(a){return!0!==z||(!0!==a.valid||(!0!==a.gdpr.enforce||(!0!==a.gdpr.valid||!0===a.gdpr.cnsnt)))}if(!0===i(b.sourceName,A))return void d("/filter",b.sourceName);if(!0===h(b,a.segmType,a.mdType))return void d("/bypass",b.sourceName);var e=b.active,f=a.passiveList;!0===e&&(f=a.activeList);var g={};g.tagname=b.sourceName,g.shrtname=b.sourceName.replace(a.name+"_",""),g.active=e,g.hires=b.hires,g.snippet=b.snippet,g.insbx=b.insbx,g.insmod=b.insmod,g.dtovalue=b.compvalue,g.idtov=b.intDTOVars.combValue,g.xdtov=b.extDTOVars.combValue,g.category=b.category,g.overuse=b.overuse,g.curbIdx_Hr=b.curbIdx_Hr,g.curbIdx_Er=b.curbIdx_Er,g.curbIdx_Dl=b.curbIdx_Dl,g.origIdx=a.curSrcIdx++,g.refprc=b.refprice,"unspecified"!==b.maxpage?g.maxpage=parseInt(b.maxpage):g.maxpage=!0===e?1:100,"unspecified"!==b.share?g.share=parseInt(b.share):g.share=100,g.nodeData=j(g.shrtname),!0===c(g.nodeData)&&f.push(g)}function g(b){var c=b.activeList;c=c.sort(function(a,b){return a.category!==b.category?a.category-b.category:b.dtovalue-a.dtovalue}),b.cloneCount=0,b.sampSize=a.media.ssSmpSzMin+Math.ceil((a.media.ssSmpSzMax-a.media.ssSmpSzMin)/b.useCount),b.complete=!0}function h(a,b,c){var d="";return!0===a.active?d+="_active":d+="_passive",c.indexOf("dsp")>=0&&(d+="_video"),c.indexOf("vid")>=0&&(d+="_display"),c.indexOf("nat")>=0&&(d+="_native"),c.indexOf("cst")>=0&&(d+="_custom"),d+="bd"===b?"_bidding":"_waterfall",q.quickVars.shouldByPass("tags",a.sourceName,d,a.snippet)}function i(a,b){if(0===b.length)return!1;var d=!1,e=a.toLowerCase();return b.forEach(function(a){var b=a.toLowerCase();e.indexOf(b)>=0&&(d=!0,c())}),!d}function j(a){var b={valid:!1,msg:"no_node_info",nodename:"NA",gdpr:{iabID:0,valid:!1,cnsnt:!1}},c=q.nodemanager.getNodeData(a);return null!==c?(b.valid=!0,b.msg="",b.nodename=c.name,b.gdpr=c.gdpr):b.nodename="["+a+"]",b}for(var k=e(b),l=b.tags,m=0;m<l.length;m++){f(k,l[m])}g(k);var o=n(k,k.sampSize,k.rotIdx);v.push(o)}function k(a){for(var b=0;b<u.length;b++){var c=u[b];if(c.name===a)return c}return null}function l(a){for(var b=0;b<v.length;b++){var c=v[b];if(c.name===a)return c}return null}function m(){function a(a){var b=a,c=Math.floor(b/1e3),d=b-1e3*c;return c=c<10?" "+c:""+c,d=0===d?"000":d<10?"00"+d:d<100?"0"+d:""+d,c+"."+d}function b(a){return 0===a?"000":a<10?"00"+a:a<100?"0"+a:""+a}var c=Date.now()-r.startTime,d="Source Adm 'B' operating\n\n";return w.forEach(function(e,f){d+="Unit ["+f+"]: "+e.uniqueUnitName+"\n\n",e.getTagLog().forEach(function(c,e){var f=""+e;e<10&&(f=" "+f);var g=""+c.srcidx;c.srcidx<10&&(g="0"+g),d+="  "+f+")  "+a(c.ts),d+="  |  "+c.segidx+":"+g,d+="  |  "+c.lg,d+="  |  cv:"+b(c.cdtov),d+="  |  iv:"+b(c.idtov),d+="  |  xv:"+b(c.xdtov),d+="  |  ox:"+b(c.origIdx),d+="  |  "+c.tn+"\n"}),d+="  ---  "+a(c)+"  |  report closed  ---  \n",d+="\n\n"}),d}function n(a,b,c){var d=JSON.parse(JSON.stringify(a));return d.activeList=o(d.activeList,b,c),d}function o(a,b,c){function d(a){function b(a,b){var c=[];return a.forEach(function(a){a.category===b&&c.push(a)}),c}var c=[];return c.push(b(a,0)),c.push(b(a,1)),c.push(b(a,2)),c.push(b(a,3)),c.push(b(a,4)),c}function e(a){for(var b=[],d=a.sort(function(a,b){return b.dtovalue-a.dtovalue}),e=Math.ceil(d.length/4),f=[],g=[],h=[],i=[],j=0;j<d.length;j++){var k=d[j];j<e?f.push(k):j<2*e?g.push(k):j<3*e?h.push(k):i.push(k)}return c%3==0?(b.push(f),b.push(g),b.push(h),b.push(i)):c%3==1?(b.push(f),b.push(h),b.push(g),b.push(i)):(b.push(g),b.push(f),b.push(h),b.push(i)),b}function f(a,b){function c(a){var b=Math.floor(Math.random()*a.length);return b>a.length-1&&(b=a.length-1),b}function d(a,b){var c=[];return a.forEach(function(a,d){d!==b&&c.push(a)}),c}for(var e=JSON.parse(JSON.stringify(a)),f=[];f.length<b&&!(e.length<1);){var g=c(e);f.push(e[g]),e=d(e,g)}return f}var g=[],h=[];if(a.length<1)return g;var i=a.length;b<i&&(i=b);var j=Math.ceil(i/4);return d(a).forEach(function(a){e(a).forEach(function(a){var b=f(a,j);h.push(b)})}),h.forEach(function(a){a.forEach(function(a){g.push(a)})}),g}var p=this,q=b.comps,r=(b.cllBks,b.bootParams),s=[],t=null,u=[],v=[],w=[],x=[],y=Math.round(999*Math.random());c();var z="enf"===r.cmpcode,A=f(r.debugVars);A.length>0&&c(),p.getSSInfo=function(a){return k(a)},p.getMdType=function(a){var b=k(a);return null===b?null:b.mdType},p.getPackId=function(a){var b=k(a);return null===b?null:b.packid},p.getSegmType=function(a){var b=k(a);return null===b?null:b.segmType},p.closeRep=function(a){},p.getSrcReport=function(){return m()},p.addFullSrcSet=function(a){s.unshift(a)},p.gbns=function(a,b,c,d,f,g){return e(a,b,c,d,f,g)},p.releaseSource=function(a,b){},p.tick=function(a){if("ok"!==t&&(t=q.nodemanager.getStatus()),!0!==z||"ok"===t)for(;s.length>0;){var b=s.pop();j(b)}},q.heart.subscribe(p,100,"sourceadmin",0,9)}}(config),activitydet=function(){return function(a){function b(a){i.logger.writex({msg:a,prefix:"activitydet",inst:k})}function c(){t=!0}function d(){s=!0}function e(){window.removeEventListener("mousemove",c),window.removeEventListener("resize",d),window.removeEventListener("unload",e)}function f(a){if(!(a-p<100)){p=a;var b=!1,c=j.genWinInfo(),d=JSON.stringify(c);if(null===r&&(b=!0),d!==r&&(b=!0),r=d,!0===s&&(s=!1,b=!0),a-q>300&&(q=a,b=!0),!0===b){var e={cmd:"wininfo",params:c};j.stageExMsg(e),q=a}}}function g(a){function c(a){return null===o||a!==o}function d(a){var b=a.getBoundingClientRect(),c=!1;return null!==m&&(m.top!==b.top&&(c=!0),m.bottom!==b.bottom&&(c=!0),m.left!==b.left&&(c=!0),m.right!==b.right&&(c=!0)),m=b,!0===c||!0===t&&(t=!1,!0)}if(null===l&&(l=window.document.body),null!==l&&!(a-n<300)){n=a;var e=d(l),f=!0!==window.document.hidden,g={cmd:"docstatus",isDocActive:e,isDocVisible:f},h=JSON.stringify(g);!0===c(h)&&(j.stageExMsg(g),b()),o=h}}var h=this,i=a.comps,j=a.cllBks,k=(a.bootParams,Math.round(999*Math.random()));b();var l=null,m=null,n=0,o=null,p=0,q=0,r=null,s=!1,t=!1;window.addEventListener("mousemove",c),window.addEventListener("resize",d),window.addEventListener("unload",e),h.tick=function(a){f(a),g(a)},i.heart.subscribe(h,100,"activitydet",!0)}}(),snippetmgr=function(){return function(a){function b(a){i.logger.writex({msg:a,prefix:"snippetmgr",inst:j})}function c(b){var c={cmd:"snippetupdate",snippetCount:b.snipCount,snippetValues:b.snipValues};a.stageExMsg(c)}function d(a){function c(a){try{var c=""+a.content,d=c.replace(/\/\/(.*)/g,""),e=d.replace(/\n/g,""),e=e.replace(/\r/g,""),f='document._forebase_data_.snippets["'+a.name+'"] = { code : function () { ';f+=e,f+="}, value : null, oncall : "+a.oncall+" } ";var g=";(function() {";g+=f,g+="})();";var h=document.createElement("script");h.setAttribute("type","text/javascript"),h.innerHTML=g,document.head.appendChild(h)}catch(a){var j="exception while installing snippet:"+name;if(o.push(j),b(),!0!==k){k=!0;var l="";l+="Error while installing snippet:"+name+"\n",l+="Err msg:"+a+"\n";var m={origin:"agent",debugStrings:o,from:"SNIPPET_MGR",subject:"install",text:l};i.mailmaster&&i.mailmaster.sendObj(m)}}}for(var d=0;d<a.length;d++){c(a[d])}}function e(){function a(){var a=0;for(var b in n){!0===f(b,!1).changed&&a++}return a}var b=a(),c={},d=0;for(var e in n)c[e]=n[e].value,d++;return{snipCount:d,changeCount:b,snipValues:c}}function f(a,c){var d={newvalue:null,changed:!1,status:"error",msg:""};if(void 0===n[a])return d.msg="unknown_snippet_called",d;var e=n[a];if(!0===e.oncall&&!0!==c)return d.msg="snippet_not_cyclic",d;try{var f=e.code();return null===e.value?d.changed=!0:f!==e.value&&(d.changed=!0),e.value=f,d.newvalue=f,d}catch(a){var g="exception while executing snippet:"+snp;o.push(g),b();var h="";h+="Error while executing snippet:"+snp+"\n",h+="Err msg:"+a+"\n";var j={origin:"agent",debugStrings:o,from:"SNIPPET_MGR",subject:"execute",text:h};i.mailmaster&&i.mailmaster.sendObj(j)}}function g(){function a(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(null!=d.classList&&(void 0!==d.classList&&void 0!==d.classList.contains&&!0===d.classList.contains(b)))return d}return null}var e=document;try{!0===c&&parent.document!==document&&(e=parent.document)}catch(a){}var f=e.getElementById(a);if(null!==f)return f;var g=e.getElementsByClassName(a);return null==g?null:(f=d(g,b),null!==f?f:null)}o.push("installing javacode library"),b(),m.getElementEx=function(b,c){return a(b,c,!0)},m.getElement=function(b,c){return a(b,c,!1)},m.stringMatch=function(a,b,c,d){function e(a){return void 0===a||f.indexOf(a)>=0}if(null===a)return!1;var f=""+a.innerHTML;return!0===e(b)&&!0===e(c)&&!0===e(d)},m.isBackAvail=function(a){var b=window.getComputedStyle(document.body)["background-image"];return null!==typeof b&&void 0!==b&&"string"==typeof b&&(b=b.toLowerCase(),"string"==typeof a&&b.indexOf(a.toLowerCase())>=0||!(b.indexOf("url")>=0)&&(b.indexOf("none")>=0||null))},m.isElementWider=function(a,b){return!(!a||parseInt(a.clientWidth)<b)},m.isElementTaller=function(a,b){return!(!a||parseInt(a.clientHeight)<b)},m.outerDistance=function(a,b){if(!a)return null;if(!b)return null;var c=a.getBoundingClientRect();return b.getBoundingClientRect().top-c.bottom},m.innerDistance=function(a,b){if(!a)return null;if(!b)return null;var c=a.getBoundingClientRect();return b.getBoundingClientRect().bottom-c.bottom},m.randomNumber=Math.random(),m.hasClass=function(a,b){return(""+a.className).indexOf(b)>=0},m.addClass=function(a,b){var c=""+a.className;c.indexOf(b)>=0||(c+=" "+b,c=c.replace(/\s{2}/gm," "),a.className=c)},m.removeClass=function(a,b){var c=""+a.className;c.indexOf(b)<0||(c=c.replace(b,""),c=c.replace(/\s{2}/gm," "),c.length>0&&" "==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),a.className=""+c)},m.removeAllClasses=function(a){a.className=""},m.testClass=function(a){function c(a){function b(a,b){function c(a,b){var c=!1;return a.forEach(function(a){a.indexOf(b)>=0&&(c=!0)}),c}var d=""+a.className;if(0===d.length)return!1;var e=d.split(" "),f=!0;return b.forEach(function(a){!0!==c(e,a)&&(f=!1)}),f}for(var c=[],d=window.document.getElementsByTagName("*"),e=(""+a).replace(/\./g," "),f=e.split(" "),g=0;g<d.length;g++){var h=d[g];"div"===h.tagName.toLowerCase()&&!0===b(h,f)&&c.push(h)}return c}var d=Date.now(),e=c(a),f=Date.now();return console.log("test element search time (ms): "+(f-d)),e.length>0?(b(),!0):(b(),!1)}}var h=this,i=a.comps,j=(a.cllBks,a.bootParams,Math.round(999*Math.random()));b();var k=!1,l=document._forebase_data_;l.javacodeLib={};var m=l.javacodeLib;l.snippets={};var n=l.snippets,o=[];g();var p=null,q=0,r=0,s=0,t="WAIT_FOR_SNIPPETS";h.setSnippets=function(a){p=a,d(a),c(e())},h.execSnippet=function(a){return f(a,!0).newvalue},h.tick=function(a){switch(t){case"WAIT_FOR_SNIPPETS":if(null===p)break;q=0,t="SNIPPET_EXEC_LOOP";case"SNIPPET_EXEC_LOOP":if(a-q<500)break;q=a;var d=e(),f=!1;if(d.changeCount>0&&(f=!0),s<10&&(f=!0),a-r>3e3&&(f=!0),!0!==f)return;r=a,s++,c(d),b()}},i.heart.subscribe(h,100,"snippetmgr",!0)}}(),quickvars=function(a){return function(a){function b(a){H.logger.writex({msg:a,prefix:"quickvars",inst:R})}function c(a,b,c){H.trackhub.sendEvent("performance","/quickvars/"+I.locus+a,b,c)}function d(){aa=j(),H.parcels.sendp("qvdata",{debmail:_.debmail,qvParams:aa}),X=!0}function e(a){switch(V){case"INIT":W=a,V="WFHF";break;case"WFHF":if(a-W>Q){V="IMPRT";break}var b=f();if(null===b)break;V="IMPRT";case"IMPRT":h(b),d(),V="PARK";break;case"PARK":H.heart.unsubscribe(G)}}function f(){var a=M;"dev"===I.env&&(a=1e5);var b=H.memhub.getItem(K);try{if(null===b)throw{msg:"no_data"};if(b.ver!==L)throw{msg:"incomp_cache_version"};if(Date.now()-b.ts>a)throw{msg:"cache_data_too_old"};return b.data}catch(a){}return null}function g(a){if(null===a)return!1;var b={ts:Date.now(),ver:L,data:a},c={folder:N,inclear:O,maxage:P};return H.baseBridge.setItem(K,b,c),!0}function h(a){if(""!==a){var b=s(a,_);if("ok"===b.status)return _.metha.status="ok",_.metha.msg=b.msg,_.metha.code=b.code,void c("/_s10 parse_ok",b.msg,{att:a});J("quickvars_error"),r(b),c("/_s20 parse_err",b.msg+" - ["+b.code+"]",{att:a}),_.metha.status="error",_.metha.msg=b.msg,_.metha.code=b.code}}function i(){return{metha:{status:"---",msg:"parsing...",code:null},debmail:[],patch:[],bypass:{}}}function j(){function a(a){var b=!1,c=null;try{c=parseInt(a)}catch(a){b=!0}return!0!==b&&!0!==isNaN(c)?c:"true"===a||"false"!==a&&""+a}if("ok"!==_.metha.status)return{};var b={},c=_.patch,d=null,e="";return c.forEach(function(c){if(!0===c.enabled){var f=!0;d=m(c.ifurl),null!==d&&(!0===d?e+="_url":f=!1),d=n(c.ifwidthmore),null!==d&&(!0===d?e+="_maxwidth":f=!1),d=o(c.ifwidthless),null!==d&&(!0===d?e+="_minwidth":f=!1),d=k(c.ifcase),null!==d&&(!0===d?e+="_testcase":f=!1),d=l(c.ifgroup,c.ifnotgroup),null!==d&&(!0===d?e+="_group":f=!1),d=p(c.ifbrowser),null!==d&&(!0===d?e+="_browser":f=!1),"undefined"!=typeof nameStr&&null!==(d=q(c.name,nameStr))&&(!0===d?e+="_name":f=!1),"undefined"!=typeof typeStr&&null!==(d=q(c.type,typeStr))&&(!0===d?e+="_type":f=!1),!0===f&&(b[c.key]=a(c.value))}}),b}function k(a){if(void 0===a)return null;if("unspecified"===a)return null;var b=a.toUpperCase();return I.testCase===b}function l(a,b){function c(a){return void 0===a?null:"unspecified"===a?null:""===a?null:a.indexOf(I.testGroup)>=0}function d(a){return void 0===a?null:"unspecified"===a?null:""===a?null:a.indexOf(I.testGroup)<0}var e=null;return e=c(a),null!==e?e:d(b)}function m(a){if(void 0===a)return null;if("unspecified"===a)return null;var b=a.toLowerCase();return I.hostPageUrl.indexOf(b)>=0}function n(a){if(void 0===a)return null;if("unspecified"===a)return null;var b=parseInt(a);return!0===isNaN(b)?null:I.screenWidth>b}function o(a){if(void 0===a)return null;if("unspecified"===a)return null;var b=parseInt(a);return!0===isNaN(b)?null:I.screenWidth<b}function p(a){function b(a){var b=I.envInfo.browserName.toLowerCase();if(!0===I.IE){if(a.indexOf("ie")>=0||a.indexOf("edge")>=0)return!0}else if(b.indexOf(a)>=0)return!0;return!1}return void 0===a?null:"unspecified"===a?null:!0===b(a.toLowerCase())}function q(a,b){function c(a,b){var c=b.replace(/\s+/g,"");if("*"===c)return!0;if(""===c)return!0;var d=c.toLowerCase().split("&"),e=a.toLowerCase().replace(/\s/g,""),f=!0;return d.forEach(function(a){!0===f&&e.indexOf(a)<0&&(f=!1)}),f}return void 0===a?null:"unspecified"===a?null:!0===c(b,a)}function r(b){var c=b.err,d="";try{d=void 0!==c.data?JSON.stringify(c.data).replace(/\s+/g," ").replace(/\\t|\\r|\\n/g,""):JSON.stringify(c)}catch(c){d="(unable to extract error data)"}var e="";e+="Placement: "+I.placementId+"\n\n",e+="Code: "+c.code+"\n",e+="Context: "+d+"\n",e+="Message: "+c.msg+"\n",e+="============ LOC RAW STR ============\n\n",e+=ba+"\n\n",null!==_hostQvRawStr&&(e+="============ HOST RAW STR ============\n\n",e+=_hostQvRawStr+"\n\n"),a.comps.mailmaster.send("QUICKVARS","quickvars_error",e,[])}function s(a,b){var c={status:"---"};try{var d=t(a),e=u(d,b),f=v(e,b);f=f.replace(/\s+/g," "),w(f,b),c.status="ok",c.code="---",c.msg="no_errors_found",c.data=null,c.err=null}catch(a){c.status="error",c.code=a.code,c.msg=a.msg,c.data=a.data,c.err=a}return c}function t(a){function b(a){var b,c,d,e={status:"not_found",rem:""},f="\x3c!--",g="--\x3e";return(b=a.indexOf(f))<0?(e.rem=a,e):(d=a.substring(0,b),(c=a.indexOf(g))<0?(e.rem=a,e):(c+=g.length,d+=a.substring(c),e.status="found",e.rem=d,e))}for(var c,d=a,e=1e3;e>0&&(e--,c=b(d),"not_found"!==c.status);)d=c.rem;return d}function u(a,b){return a}function v(a,b){return a}function w(a,b){function c(a,b){a.forEach(function(a){b.push(a)})}function d(a,b){for(var c in a)b[c]=a[c]}var e=null,f=""+a;void 0===b.debmail&&(b.debmail=[]),e=x(f),c(e.data,b.debmail),f=e.rem,void 0===b.patch&&(b.patch=[]),e=y(f),c(e.data,b.patch),f=e.rem,void 0===b.bypass&&(b.bypass={}),e=z(f),d(e.data,b.bypass),f=e.rem}function x(a){function b(a,b){function c(a,b,c,d){var e=E(b,a);if(0!==e.tags.length)for(var f=0;f<e.tags.length;f++){var g=A(e.tags[f].tagContent,d);"unspecified"!==g.filter&&c.push(g)}return e.rem}var d;return d=a,d=c("channel",d,b,Y)}var c=F(a,"debmail"),d=c.rem,e=[];return b(c.tagContent,e),{data:e,rem:d}}function y(a){function b(a,b){function c(a,b,c,d){var e=E(b,a);if(0!==e.tags.length)for(var f=0;f<e.tags.length;f++){var g=A(e.tags[f].tagContent,d);"unspecified"!==g.key&&c.push(g)}return e.rem}var d;return d=a,d=c("set",d,b,Z)}var c=F(a,"patch"),d=c.rem,e=[];return b(c.tagContent,e),{data:e,rem:d}}function z(a){function b(a,b){function c(a,b,c,d){var e=E(b,a);if(0!==e.tags.length)for(var f=0;f<e.tags.length;f++){var g=A(e.tags[f].tagContent,d);c.push(g)}return e.rem}var d;return d=a,void 0===b.tags&&(b.tags=[]),d=c("tag",d,b.tags,$),void 0===b.segments&&(b.segments=[]),d=c("segment",d,b.segments,$),void 0===b.adposts&&(b.adposts=[]),d=c("adpost",d,b.adposts,$),void 0===b.units&&(b.units=[]),d=c("unit",d,b.units,$),void 0===b.sections&&(b.sections=[]),d=c("section",d,b.sections,$),void 0===b.stages&&(b.stages=[]),d=c("stage",d,b.stages,$)}var c=F(a,"bypass"),d=c.rem,e={};return b(c.tagContent,e),{data:e,rem:d}}function A(a,b){function c(a,b,c){function d(a,b,c){for(var d in c)void 0===a[d]&&void 0!==b[d]&&(a[d]=b[d])}var e={};return d(e,b,a),d(e,c,a),e}return c(b,C(a,b),B(b))}function B(a){var b={};for(var c in a){var d=a[c].defvalue;b[c]=d}return b}function C(a,b){function c(a,b,c){var d={status:"undef",code:"",msg:"",data:null},e=D(a,b);if(null===e)return d.status="not_found",d;if("keyword"===c[b].type)return e=e.toLowerCase(),c[b].series.indexOf(e)>=0?(d.status="ok",d.data=e,d):(d.status="error",
d.msg="unknown value:'"+e+"'",d.data=e,d);if("string"===c[b].type)return d.status="ok",d.data=e,d;if("boolean"===c[b].type)return"true"!==(e=e.toLowerCase())&&"false"!==e?(d.status="error",d.msg="invalid value for '"+b+"': '"+e+"'",d.data=e,d):(d.status="ok",d.data="true"===e||"false"!==e&&null,d);if("number"===c[b].type){var f=e.indexOf("%");if(f<0){d.percent=!1;var g=parseInt(e),h=c[b].min,i=c[b].max;return d.status="ok",(void 0!==h&&g<h||void 0!==i&&g>i)&&(d.msg="out-of-range value for '"+b+"': "+e,d.status="error"),d.data=g,d}d.percent=!0;var g=parseInt(e.substring(0,f));return d.status="ok",g<0||g>100?(d.msg="out-of-range value for '"+b+"': "+e,d.status="error",d.data=g,d):(d.status="ok",d.data=g,d)}return d.status="error",d.msg="programming error: key:'"+b+"', type:'"+c[b].type+"'",d.data=e,d}var d={};for(var e in b){var f=c(a,e,b);if("ok"!==f.status){if("not_found"!==f.status)throw{code:710,msg:"parsing error: key:"+e+", msg: "+f.msg,data:a}}else if(d[e]=f.data,!0===f.percent){var g=e+"_perc";d[g]=!0}else{var g=e+"_perc";d[g]=!1}}return d}function D(a,b){function c(a,b){var c=","+b+":",d=a.indexOf(c);return d>=0?d+1:(c=b+":",d=a.indexOf(c),0===d?0:-1)}function d(a){var b=""+a;b=b.replace("(?![a-zA-Z0-9_.-])",",");var c=b.indexOf(",");return c>=0&&(b=b.substring(0,c)),b}var e=a.replace(/\s+/g,""),f=e.toLowerCase(),g=b.toLowerCase(),h=c(f,g);if(h<0)return null;var i=h+g.length+1;return f=f.substring(i),f=d(f),e.substring(i,i+f.length)}function E(a,b){for(var c={tags:[],rem:a,status:"ok"},d=""+a,e=null,f=100,g=0,h=0;;){if(++g>=f){c.status="error";break}if(e=F(d,b),d=e.rem,"ok"!==e.status){if("not_found"===e.status)break;c.status="error";break}c.tags.push(e),h++}return 0===h&&(c.status="not_found"),c.rem=d,c}function F(a,b){var c,d,e,f,g,h,i,j={tagStr:"",tagContent:"",rem:"",status:"ok"},k="<"+b+">",l="</"+b+">",m="/>";j.rem=a;var n=""+a;if((g=n.indexOf(k))<0)return j.status="not_found",j;if(n=n.substring(g),(h=n.indexOf(l))<0){var o=n.indexOf(m);if(o>0)return o+=2,n=n.substring(0,o),j.rem=a.replace(n,""),j.tagContent="",j.status="empty_tag",j;throw{code:720,msg:"_getSubTag parse error",data:{elementName:b,base:a}}}if(h+=l.length,c=n.substring(0,h),j.rem=a.replace(c,""),d=""+c,(g=n.indexOf(k))<0)throw{code:730,msg:"_getSubTag parse error",data:{elementName:b,base:a}};return i=d.indexOf(">"),i+=1,d=d.substring(g,i),e=c.replace(d,""),h=e.indexOf(l),e=e.substring(h),f=c.replace(d,""),f=f.replace(e,""),j.tagContent=f,j.tagStr="",j}var G=this,H=a.comps,I=(a.cllBks,a.bootParams),J=H.addLogLine,K=I.hostPlcmId+"_quickv",L=100,M=18e5,N="quickv",O=!1,P=604800,Q=1e4,R=Math.round(999*Math.random());b();var S="unspecified",T="boolean",U="string",V="INIT",W=0,X=!1,Y={enabled:{type:"boolean",defvalue:!0},filter:{type:"string",defvalue:"unspecified"},multiple:{type:"number",defvalue:4,min:1},reduc:{type:"string",defvalue:"unspecified"},account:{type:"string",defvalue:"unspecified"}},Z={enabled:{type:T,defvalue:!0},key:{type:U,defvalue:S},value:{type:U,defvalue:S},ifcase:{type:U,defvalue:S},ifgroup:{type:U,defvalue:S},ifnotgroup:{type:U,defvalue:S},ifbrowser:{type:U,defvalue:S},ifurl:{type:U,defvalue:S},ifwidthmore:{type:U,defvalue:S},ifwidthless:{type:U,defvalue:S}},$={enabled:{type:T,defvalue:!0},name:{type:U,defvalue:S},type:{type:U,defvalue:S},ifcase:{type:U,defvalue:S},ifgroup:{type:U,defvalue:S},ifnotgroup:{type:U,defvalue:S},ifbrowser:{type:U,defvalue:S},ifurl:{type:U,defvalue:S},ifwidthmore:{type:U,defvalue:S},ifwidthless:{type:U,defvalue:S}},_=i(),aa=null;G.isReady=function(){return X},G.getMetha=function(){return _.metha},G.getDebMailData=function(){return"ok"!==_.metha.status?[]:_.debmail},G.getParam=function(a,b){if(null===aa)return b;var c=aa[a];return void 0!==c&&"unspecified"!==c?c:b},G.getAllParams=function(){return null===aa?{}:aa},G.refreshParams=function(){return aa=j()},G.addPatches=function(a){function b(a,b){a.forEach(function(a){b.push(a)})}b(y(a).data,_.patch),aa=j()},G.getByPassFilters=function(){return _.bypass},G.addByPassFilters=function(a){function b(a,b){for(var c in a){var d=a[c];void 0===b[c]&&(b[c]=[]);for(var e=b[c],f=0;f<d.length;f++)e.push(d[f])}}b(z(a).data,_.bypass)},G.shouldByPass=function(a,b,c){if("ok"!==_.metha.status)return!1;var d=_.bypass[a];if(void 0===d)throw{msg:"unknown_bypass_list"};var e=null,f=!1,g="";return d.forEach(function(a){if(!0===a.enabled){var d=!0;e=m(a.ifurl),null!==e&&(!0===e?g+="_url":d=!1),e=n(a.ifwidthmore),null!==e&&(!0===e?g+="_maxwidth":d=!1),e=o(a.ifwidthless),null!==e&&(!0===e?g+="_minwidth":d=!1),e=k(a.ifcase),null!==e&&(!0===e?g+="_testcase":d=!1),e=l(a.ifgroup,a.ifnotgroup),null!==e&&(!0===e?g+="_group":d=!1),e=p(a.ifbrowser),null!==e&&(!0===e?g+="_browser":d=!1),void 0!==b&&null!==(e=q(a.name,b))&&(!0===e?g+="_name":d=!1),void 0!==c&&null!==(e=q(a.type,c))&&(!0===e?g+="_type":d=!1),!0===d&&(f=!0)}}),f},G.tick=function(a){e(a)};var ba=H.inLineData.getBroadDataQV();switch(h(ba),I.ctxId){case"sys":d(),g(ba);break;case"brk":d();break;case"adf":H.heart.subscribe(G,200,"quickvars",!0)}}}(),shims=function(){return function(a){var b=a.comps;a.cllBks,a.bootParams;b.trackhub={},b.trackhub.addDomain=function(a,c,d){b.parcels.sendp("trackhub",{cmd:"addDomain",args:{domainID:a,siteID:c,reduc:d}})},b.trackhub.sendEvent=function(a,c,d,e){b.parcels.sendp("trackhub",{cmd:"sendEvent",args:{domain:a,event:c,data:d,evOpts:e}})},b.trackhub.sendEventList=function(a){b.parcels.sendp("trackhub",{cmd:"sendEventList",args:{eventList:a}})},b.heart.setTracker(b.trackhub),b.mailmaster={},b.mailmaster.sendObj=function(a){b.parcels.sendp("sendmail",a)},b.mailmaster.send=function(a,c,d,e){b.parcels.sendp("sendmail",{from:a,subject:c,text:d,debugStrings:e})},b.accbeam={},b.accbeam.register=function(a,c){b.parcels.sendp("accbeam",{cmd:"register",args:{chanID:a,reduc:c}})},b.accbeam.fireList=function(a){b.parcels.sendp("accbeam",{cmd:"fireList",args:{pingList:a}})},b.accbeam.fire=function(a,c){b.parcels.sendp("accbeam",{cmd:"fire",args:{chanID:a,dataObj:c}})},b.beamCannon={},b.beamCannon.fire=function(a){b.parcels.sendp("beamCannon",{cmd:"fire",args:{data:a}})}}}(),ag_root=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){return function(j){function C(a,b){void 0!==oa.genCbk&&oa.genCbk(a,b)}function O(a,b){C("/_s20 agent"+a,b)}function P(a){var b={type:"dyninf",data:a};Ja.push(b)}function Q(){return 0===Ja.length?null:Ja.shift()}function R(){function j(a){try{return Ba=a.name,Aa[a.name]=new a.cstrfunc(a.args),ua(a.name+" created ok"),!0}catch(a){var b={};b.errmsg=a,b.module=Ba,b.origin="loadComponent",O("","_s90 excep [dockclbk] - "+JSON.stringify(b)),ha(b)}return!1}function C(a,b,c){function d(){var a="enf",b="use",c="ign",d=Aa.quickVars.getParam("cmpcode","");return""!==d?"use"===d?b:"enf"===d?a:c:1===xa.cmp?b:2===xa.cmp?a:c}Aa.logger.setDebugVars(a),Aa.quickVars.refreshParams(),wa.filterTag=Aa.quickVars.getParam("filterTag",la),wa.cmpcode=d()}try{if(null===(xa=S()))throw"bad plcm params";if(W(),ta=new v(qa,300),Ia.bootLogger=ta,Ia.addLogLine=ta.addLogLine,ua=Ia.addLogLine,void 0!==xa.ldrLog)for(var M=0;M<xa.ldrLog.length;M++){var Q=xa.ldrLog[M];ua(Q.text,Q.ts)}ua("------------------"),ua("agent booting... fbTagId:"+xa.fbTagId+", ldrTg:"+xa.loaderTag),wa=Y(),ua("bootParams completed"),oa.bdm_data=Z(wa),ya=T(),Aa.logger=new c({startTime:qa,openC:!0,env:xa.env});var R=Math.round(999*Math.random());va=function(a){Aa.logger.writex({msg:a,prefix:"agent",inst:R})},ua("local logger created"),Aa.logger.setEnv(wa.env),Aa.debugAlert=function(a,b){Aa.logger.debugAlert(a,b)},ua("debugAlert created");var U={addLogLine:ua,envcode:"agnt",raf:!1};"sys"===wa.ctxId&&(U.wrkr=!0),Aa.heart=new a(U),Aa.heart.setExcepCallback(ha,null);var X=Aa.heart.start(qa);return ua("local heart created (mode: "+X.mode+")"),pa=j({name:"parcels",cstrfunc:F,args:{comps:Aa,cllBks:Ia,bootParams:wa,excepHandler:ha}}),pa=j({name:"shims",cstrfunc:G,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"memhub",cstrfunc:H,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),"adf"!==wa.ctxId&&(Aa.baseBridge=ca()),pa=j({name:"clntData",cstrfunc:N,args:{comps:Aa,bootParams:wa}}),pa=j({name:"inLineData",cstrfunc:f,args:{comps:Aa,glbFBVar:oa,bootParams:wa}}),pa=j({name:"quickVars",cstrfunc:g,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),!0===pa&&C(wa.debugVars,wa.clientID,wa.testGroup),pa=j({name:"tracker",cstrfunc:d,args:{comps:Aa,cllBks:Ia,bootParams:wa,anSiteID_main:b.agent.anSiteID_main,anSiteID_vast:b.agent.anSiteID_vast}}),!0===pa&&Aa.tracker.fireEvent("_s33 cmp_code",wa.cmpcode),ga("/_s10 agnt","_00 trk_lnch"),pa=j({name:"liveAccRoot",cstrfunc:J,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"liveDboRoot",cstrfunc:K,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"accbeam_x",cstrfunc:o,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"trackhub_x",cstrfunc:p,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"mailmaster_x",cstrfunc:r,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"beamCannon_x",cstrfunc:q,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"valuemstr_x",cstrfunc:t,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"xFrameInt",cstrfunc:L,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"nodemanager",cstrfunc:z,args:{comps:Aa,cllBks:Ia,master:ia,bootParams:wa}}),pa=j({name:"msghub",cstrfunc:A,args:{comps:Aa,cllBks:Ia,bootParams:wa,procFlagTag:V}}),pa=j({name:"macroproc",cstrfunc:n,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"mad_bs",cstrfunc:B,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"curMgr",cstrfunc:y,args:{comps:Aa,cllBks:Ia,bootParams:wa,curData:Aa.inLineData.getBroadDataCR()}}),pa=j({name:"sourceadmin",cstrfunc:m,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"snippetManager",cstrfunc:h,args:{comps:Aa,cllBks:Ia,bootParams:wa,stageExMsg:P}}),pa=j({name:"activityDet",cstrfunc:i,args:{comps:Aa,cllBks:Ia,bootParams:wa,partData:ya}}),pa=j({name:"perfcheck",cstrfunc:s,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"exeControl",cstrfunc:u,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"bdcnxhub",cstrfunc:e,args:{comps:Aa,cllBks:Ia,bootParams:wa,bdmVer:ka,glbVar:oa}}),pa=j({name:"bdadmin",cstrfunc:l,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"expregister",cstrfunc:E,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),Aa.expregister.initialize(),pa=j({name:"dtomanager",cstrfunc:k,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"blockdet",cstrfunc:D,args:{comps:Aa,cllBks:Ia,bootParams:wa,envcode:"agnt"}}),pa=j({name:"stageManager",cstrfunc:w,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"liveWebRoot",cstrfunc:I,args:{comps:Aa,cllBks:Ia,bootParams:wa}}),pa=j({name:"stageExec",cstrfunc:x,args:{startTime:qa,comps:Aa,cllBks:Ia,plcmParams:xa,bootParams:wa,curData:Aa.curMgr.getCurRates()}}),window.addEventListener("scroll",_),window.addEventListener("unload",$),Aa.heart.setTracker(Aa.trackhub),ba(),da(Aa),ua("booting complete"),"adf"===wa.ctxId&&Aa.xFrameInt.sdm(),ga("/_s10 agnt","_10 btsr_end"),!0}catch(a){var aa={};aa.errmsg=a,aa.module=Ba,aa.origin="bootstrap",O("","_s90 excep [dockclbk] - "+JSON.stringify(aa)),ha(aa)}return!1}function S(){function a(a){if(void 0===a)return a;var b;return"true"===a&&(b=!0),"false"===a&&(b=!1),!1===isNaN(parseInt(a))&&(b=parseInt(a)),void 0!==b?b:a}function b(a){return"A"===a||"B"===a?a:"A"}function c(a){var b=100;return!1===isNaN(parseInt(a))&&(b=a),b<1&&(b=1),b>1e4&&(b=1e4),b}function d(a){function b(){try{var a={testCase:""},b=window.localStorage.getItem("fb_forced_vars");if(null===b)return null;var c=JSON.parse(b);for(var d in c)a[d]=c[d];return a}catch(a){return null}}var c=b();null!==c&&void 0!==c.testCase&&(a.testCase=c.testCase)}var e={};if(void 0===oa.basic_settings)return null;var f=oa.basic_settings;if(void 0!==f)for(var g in f)e[g]=a(f[g]);e.defCount=0,"synchro"in e!=!0&&(e.synchro=Date.now(),e.defCount++),"unspecified"===e.opdomId&&(e.opdomId="0",e.defCount++),"secProt"in e!=!0&&(e.secProt=!1,e.defCount++),"fbTagId"in e!=!0&&(e.fbTagId="NA",e.defCount++),e.testCase=b(e.testCase),e.bstfct=c(e.bstfct),e.localCache=!0,d(e),f.versionTag=ja;var h=window.location.origin;return void 0!==h&&null!==h||(h=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),f.hostOrigin=h,e}function T(){function a(a,b){var c=null;return a.forEach(function(a){null===c&&a.partId===b&&(c=a)}),c}var b=oa.partitions;if(null!==a(b,"intrinsic"))return b;var c={partId:"intrinsic",cntElmID:"NA",trgElmID:"_forebaseplugin",trgElmType:"plgn",idx:0,ts:Date.now(),exdata:"NA"};return b.push(c),b}function U(){return ya}function V(a){function b(a){var b=null;return c.forEach(function(c){null===b&&c.partId===a&&(b=c)}),b}var c=oa.partitions;if(void 0===c)return!1;if(null!==b(a))return!1;var d={partId:a,cntElmID:"-----",trgElmID:"-----",trgElmType:"----",idx:c.length,ts:Date.now()};return c.push(d),!0}function W(){function a(a){var b=!0;return void 0===a&&(b=!1),!0===isNaN(a)&&(b=!1),!0===b?a:Date.now()}function b(){var a=new RegExp("\\.","g");return(c()+c()+c()+c()).replace(a,"")}function c(){return(65536*(1+Math.random())||0).toString(16).substring(1)}void 0===xa.loaderTag&&(xa.loaderTag="NA"),sa=xa.loaderTag,xa.startTime=a(xa.startTime),qa=xa.startTime,ra=b().substring(0,12)}function X(){return{physicalWidth:window.screen.width,physicalHeight:window.screen.height,screenWidth:window.screen.availWidth,screenHeight:window.screen.availHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight,bodyHeight:document.body.clientHeight}}function Y(){function a(a){function b(){var a="_fbcntxvars_";return void 0===window[a]?{ctxId:"sys"}:window[a]}a.ctxId="sys",a.adfrm_vars={},a.hostPlcmId=a.placementId,a.locus=a.placementId+"::sys";var c=b();if("sys"!==c.ctxId)if("adf"===c.ctxId){a.ctxId="adf",a.adfrm_vars=c.vars;var d=c.vars.hostParams;a.publisher=d.publisher,a.testCase=d.testCase,a.bstfct=d.bstfct,a.opdomId=d.opdomId,a.ldmd=d.ldmd,a.spred=d.spred,a.imprID=d.imprID,a.screenWidth=d.screenWidth,a.screenHeight=d.screenHeight,a.filterTag=d.filterTag,a.startTime=d.startTime,a.debugVars=d.debugVars,a.qsParams=d.qsParams,a.versionTag=d.versionTag,a.hostPageUrl=d.hostPageUrl,a.hostDomain=d.hostDomain,a.hostPageTitle=d.hostPageTitle,a.hostPlcmId=d.plcmId,a.locus=d.plcmId+"::"+a.placementId}else"brk"===c.ctxId&&(a.ctxId="brk",a.adfrm_vars=c.vars,a.hostPlcmId=a.placementId,a.locus=a.placementId+"::brk")}function b(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function c(){var a=window.navigator.userAgent,b=-1,c=a.indexOf("MSIE "),d=a.indexOf("Trident/"),e=a.indexOf("Edge/");if(c>0)b=parseInt(a.substring(c+5,a.indexOf(".",c)),10);else if(d>0){var f=a.indexOf("rv:");b=parseInt(a.substring(f+3,a.indexOf(".",f)),10)}else e>0&&(b=parseInt(a.substring(e+5,a.indexOf(".",e)),10));return b>-1}function d(){var a=!0;try{window.top===window.self&&(a=!1)}catch(a){}return a}function e(a){return!0===a?decodeURIComponent(document.referrer):decodeURIComponent(window.location.href)}function f(a){var b;return b=a.indexOf("//")>-1?a.split("/")[2]:a.split("/")[0],b=b.split(":")[0],b=b.split("?")[0]}function g(a,b){return"string"==typeof a&&""!==a?a:b}function h(){var a,b,c,d=(navigator.appVersion,navigator.userAgent),e=navigator.appName,f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10);-1!=(b=d.indexOf("Opera"))?(e="Opera",f=d.substring(b+6),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("MSIE"))?(e="Microsoft Internet Explorer",f=d.substring(b+5)):-1!=(b=d.indexOf("Chrome"))?(e="Chrome",f=d.substring(b+7)):-1!=(b=d.indexOf("Safari"))?(e="Safari",f=d.substring(b+7),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("Firefox"))?(e="Firefox",f=d.substring(b+8)):(a=d.lastIndexOf(" ")+1)<(b=d.lastIndexOf("/"))&&(e=d.substring(a,b),f=d.substring(b+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),-1!=(c=f.indexOf(";"))&&(f=f.substring(0,c)),-1!=(c=f.indexOf(" "))&&(f=f.substring(0,c)),g=parseInt(""+f,10),isNaN(g)&&(f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10));var h="Unknown OS";-1!=navigator.appVersion.indexOf("Win")&&(h="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(h="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(h="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(h="Linux");var i=d.indexOf("(");null===i&&(i=0);var j=d.indexOf(")");null===j?j=-1:j++;var k=d.substring(i,j);return k.length>30&&(k=k.substring(0,30)+"..."),{browserName:e,fullVersion:f,majorVersion:g,OSName:h,deviceStr:k,userAgent:navigator.userAgent}}function i(){function a(){var a={disableLocCache:!1,disableBarLogic:!1,logFilter:"",enDevACC:!0,showTags:!1,shoeLx:!1,dpx:!1,pCode:null,nts:!1,init:!0};try{var b=window.localStorage.getItem("fb_debug_vars");if(null===b)return a;var c=JSON.parse(b);for(var d in c)a[d]=c[d];a.init=!1}catch(b){a.init=!0}return a}var b=a();return"dev"===xa.env&&(b.showTags=!0,b.bidsim=!0,b.logFilter.length>0?b.logFilter+="|"+ma:b.logFilter=ma),b}var j=b(),k=c(),l=d(),m=e(l),n=f(m),o=g(xa.publisher,n),p=X(),q=h(),r=i(),s={env:xa.env,clientID:"NA",testGroup:0,visitData:{},isNewUser:null,fbTagId:xa.fbTagId,baseUrl:xa.baseUrl,versionFolder:xa.versionFolder,versionBDM:xa.versionBDM,versionVPM:xa.versionVPM,synchro:xa.synchro,localCache:xa.localCache,testCase:xa.testCase,bstfct:xa.bstfct,secProt:xa.secProt,opdomId:xa.opdomId,defCount:xa.defCount,placementId:xa.placementId,bsFrmID:xa.bsFrmID,ldmd:xa.ldmd,spred:xa.spred,imprID:ra,language:"it",screenWidth:window.screen.width,screenHeight:window.screen.height,hostPageUrl:m,hostDomain:n,hostPageTitle:document.title,publisher:o,qsParams:aa(),versionTag:ja,filterTag:la,loaderTag:sa,startTime:qa,agentBootTime:Da,vastDevice:na,winInfo:p,envInfo:q,debugVars:r,hasFlash:j,IE:k,confined:l};return a(s),s}function Z(a){return{debugVars:a.debugVars,qsParams:a.qsParams}}function $(){if(fa(),null!==za){document.body.removeChild(za),window.removeEventListener("scroll",_),window.removeEventListener("unload",$);try{Aa.heart.stop()}catch(a){}}}function _(){function a(){return void 0!==window.scrollY?window.scrollY:Math.round(-document.body.getBoundingClientRect().top)}function b(a){try{Aa.stageExec.scrollEvent(a)}catch(a){var b=Date.now();if(b-Ha<1e4)return;Ha=b;var c={};c.errmsg=a,c.module="scr_loop",c.origin="scr_loop",ha(c)}}var c=Date.now();c-Ga<25||(Ga=c,Fa=a(),Math.abs(Fa-Ea)<10||(Ea=Fa,"undefined"==typeof requestAnimationFrame?b(Fa):window.requestAnimationFrame(function(){Aa.stageExec&&b(Fa)})))}function aa(){function a(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);return b?b[1]||null:null}var a=a("fbparams");if(null===a)return{};var b=a.split("+"),c={};return b.forEach(function(a){var b=a.split(":");c[b[0]]=b[1]}),c}function ba(a){function b(a){var b="";for(var c in a)b+=c+": "+a[c]+"\n";return b}function c(a){Aa.parcels.sendp("commontxt",a)}if(!1===Ca&&(Ca=!0,void 0!==Aa.mailmaster)){var d="",e=new Date;e.setTime(xa.synchro),d+="Synchro:   "+xa.synchro+" - ("+e+")\n";var f=new Date;f.setTime(xa.startTime),d+="Start Time:   "+xa.startTime+" - ("+f+")\n\n",d+="\n\n-------- Placement Params --------\n\n",d+=b(xa)+"\n\n",d+="-------- Boot Params --------\n\n",d+=b(wa)+"\n\n",d+="-------- Debug Vars --------\n\n",d+=b(wa.debugVars)+"\n\n";c({name:"AGENT_BOOT",text:d})}}function ca(){function a(a){var b=a;return b=b.replace(/\&/g,"%26"),b=b.replace(/\%/g,"%25"),b=b.replace(/\?/g,"%3F")}var b=document.createElement("iframe"),c=b.style;c.left="0px",c.top="0px",c.width="0px",c.minWidth="0px",c.maxWidth="0px",c.height="0px",c.minHeight="0px",c.maxHeight="0px",c.marginLeft="0px",c.marginRight="0px",c.marginTop="0px",c.marginBottom="0px",c.display="inline-block",c.overflow="hidden",c.border="0px",c.position="relative",c.float="left",document.body.appendChild(b);var d="",e=wa.env,f=wa.versionFolder;if("dev"!==wa.env)d+="https://mkt.forebase.ch/plugin/versions/"+wa.versionFolder+"/base.htm";else{!0!==("1"===wa.qsParams.ext)?d+="http://localhost:3001/versions/versionfolder/base.htm":(e="prd",f=wa.versionTag,d="https://mkt.forebase.com/plugin/versions","undefined"!=typeof _debugVersion&&_debugVersion.length>0?d+="/"+_debugVersion:d+="/"+f,d+="/base.htm")}var g={hostParams:{env:e,versionFolder:f,hostCtxId:wa.ctxId,plcmId:wa.placementId,testCase:wa.testCase,bstfct:wa.bstfct,opdomId:wa.opdomId,ldmd:wa.ldmd,spred:wa.spred,imprID:wa.imprID,screenWidth:wa.screenWidth,screenHeight:wa.screenHeight,hostPageUrl:wa.hostPageUrl,hostDomain:wa.hostDomain,hostPageTitle:wa.hostPageTitle,publisher:wa.publisher,versionTag:wa.versionTag,filterTag:wa.filterTag,startTime:wa.startTime,debugVars:wa.debugVars,qsParams:wa.qsParams}};d+="#bsdata="+a(JSON.stringify(g)),b.src=d,za=b;var h=new M({comps:Aa,bootParams:wa});return h.setPierWnd(za.contentWindow),h.setLocalName("host"),h}function da(a){function b(b,c,d){void 0!==a.trackhub&&a.trackhub.sendEvent("performance","/users"+b,c,d)}var c=wa.isNewUser,d=wa.visitData;b("","_s00 inst (ref)"),!0===d.autoRfsh&&b("","_s05 auto_rfsh"),!0===c?b("","_s10 new_user"):b("","_s12 retr_user"),!0===d.newVisit?b("","_s20 new_visit"):b("","_s22 same_visit"),b("/_s00 freq_5min",d.sessCount5Min,{scl:"dtoRange"}),b("/_s10 freq_hour",d.sessCountHour,{scl:"dtoRange"}),b("/_s20 freq_day",d.sessCountDay,{scl:"dtoRange"}),b("/_s30 freq_week",d.sessCountWeek,{scl:"dtoRange"}),b("/_s40 freq_month",d.sessCountMonth,{scl:"dtoRange"})}function ea(){void 0!==Aa.tracker&&Aa.tracker.sendSomeEvents()}function fa(){void 0!==Aa.tracker&&Aa.tracker.sendAllEvents()}function ga(a,b){Aa.tracker.fireEvent("_s12 debug_points"+a,b)}function ha(a){function b(a,b,c,d){var e="**errors**/excps/msgs",f=wa.envInfo.browserName+"/"+wa.envInfo.majorVersion;Aa.tracker.fireEvent(e+"/"+f+"/"+a,"("+b+")  "+c,{att:d}),Aa.tracker.fireEvent(e+"/*AllBrowsers*/"+a,"("+b+") "+c,{att:d})}function c(a,b,c){var d="**errors**/excps/logs",e=wa.envInfo.browserName+"/"+wa.envInfo.majorVersion;Aa.tracker.fireEvent(d+"/"+e+"/"+a,"("+b+")",{att:c}),Aa.tracker.fireEvent(d+"/*AllBrowsers*","("+b+")",{att:c})}O("","_s50 excpt @ "+JSON.stringify(a));var d=a.errmsg,e="exception at agent subscriber: "+JSON.stringify(d);va(),ua(e);var f="Sub:  "+a.module+"\n\n";f+="Message--\x3e  "+JSON.stringify(d).substring(0,64)+"\n\n",void 0!==d.stack&&(f+="Stack:\n",f+=d.stack.toString()+"\n\n");var g="AGENT_EXCPTN";"loop"===a.origin?g="AGENT_EXCP_LOOP":"build"===a.origin?g="AGENT_EXCP_BUILD":"fbxhw"===a.origin&&(g="AGENT_EXCP_FBXHW");var h={origin:"agent",debugStrings:null,from:g,subject:a.module,text:f};if(Aa.mailmaster&&Aa.mailmaster.sendObj(h),Aa.debugAlert&&Aa.debugAlert("Agent 'excepHandler'",h),Aa.tracker&&(b(a.module,a.origin,""+d,f),void 0!==Ia.bootLogger)){var i=Ia.bootLogger.getLogPrint();c(a.module,a.origin,i)}}var ia=this,ja="v4.43c",ka="v1.49",la="_h100",ma="stm_srcsrvr",na="fb";if(void 0!==document._forebase_data_){var oa=document._forebase_data_;C("dock_s",ja);var pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za=null,Aa={},Ba="NA",Ca=!1,Da=Date.now(),Ea=-1,Fa=0,Ga=0,Ha=0,Ia={stageExMsg:P,genWinInfo:X,getStageMsg:Q,getPartData:U,fireLdrEvt:C,debugPing:ga};ia.fireEvent=function(a,b){switch(a){case"sendDebMail":return void Aa.mailmaster.sendObj(b)}};var Ja=[];if(O("","_s10 boot_in"),!0!==R())return O("","_s12 boot failed!"),void ea();O("","_s14 boot_out"),ea()}}}(heart,config,deltalog,tracker,bd_cnxhub,inlinedata,quickvars,snippetmgr,activitydet,0,stm_dtomgr,bd_admin,sourceadm,macroproc,an_accbeam,an_trackhub,an_beamcannon,an_mailmstr,an_perfchck,valuemstr,execontrol,bootlog,stm_stgmgr,stage_exec,curmgr,nodemgr,msghub,mad,0,stm_blockdet,stm_expreg,parcels,shims,memhub,lw_root,lacc_root,ldbo_root,xfrmint,basebrdg,clntdata),ag_lnch=function(a){new a({mode:"js"})}(ag_root)}();